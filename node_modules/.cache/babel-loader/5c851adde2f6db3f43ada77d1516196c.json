{"ast":null,"code":"var _jsxFileName = \"/Users/sunnygill/Dropbox/My Mac (Surinders-MacBook-Pro.local)/Desktop/freightdok/client/src/components/invoices/InvoicesWizard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef } from 'react';\nimport { Modal, Step } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport { Button } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { useDispatch } from 'react-redux';\nimport { deleteLoadDocument, uploadLoadDocument, generateInvoice } from '../../actions/load';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  },\n  root: {\n    flexGrow: 1,\n    flexDirection: \"row\",\n    textAlign: \"center\"\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120\n  },\n  resizeDialog: {\n    fontSize: 14\n  },\n  modalBody: {\n    width: '100%',\n    minHeight: '324px'\n  },\n  modalFooter: {\n    width: '100%'\n  },\n  btn_container: {\n    textAlign: 'end'\n  }\n}));\n\nconst getModalStyle = () => {\n  return {\n    top: '50%',\n    left: '50%',\n    width: '400px',\n    transform: 'translate(-50%, -50%)',\n    overflowY: 'auto',\n    height: '400px'\n  };\n};\n\nconst formInitialState = {\n  from: {\n    name: '',\n    company_name: '',\n    email: ''\n  },\n  to: {\n    company_name: '',\n    email: ''\n  }\n};\nexport default function InvoiceWizard({\n  load_selected,\n  handleOnClose,\n  deleteDoc,\n  updateDoc\n}) {\n  _s();\n\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [modalStyle] = useState(getModalStyle);\n  const [form, setForm] = useState(formInitialState);\n  const [step, setStep] = useState(1);\n  const rcfr = useRef();\n  const pdfr = useRef();\n\n  const handleSubmit = (event = null) => {\n    // generate pdf in this function and download when invoice saved on server side\n    if (event) event.preventDefault();\n    dispatch(generateInvoice(load_selected._id, form));\n    setTimeout(() => {\n      handleOnClose();\n    }, 2000);\n  };\n\n  const handleOnChange = (event, key) => {\n    const {\n      name,\n      value\n    } = event.target;\n    setForm(form => ({ ...form,\n      [key]: { ...form[key],\n        [name]: value\n      }\n    }));\n  };\n\n  const changeStep = move => {\n    const new_step = move === 'next' ? step + 1 : step - 1;\n    let error = false;\n    let errorMsg = '';\n\n    if ((step === 1 || step === 2) && (form.from.email && !validateEmail(form.from.email) || form.to.email && !validateEmail(form.to.email))) {\n      error = true;\n      errorMsg = 'Invalid Email';\n    }\n\n    if (step === 1 && (!form.from.name || !form.from.company_name || !form.from.email)) {\n      error = true;\n      errorMsg = 'Please fill the form to continue.';\n    }\n\n    if (step === 2 && (!form.to.company_name || !form.to.email)) {\n      error = true;\n      errorMsg = 'Please fill the form to continue.';\n    }\n\n    if (move === 'next' && error) alert(errorMsg);else setStep(new_step);\n  };\n\n  const validateEmail = email => {\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n  };\n\n  const deleteDocument = doc_type => {\n    dispatch(deleteLoadDocument(load_selected._id, doc_type, '')); // remove timer and get actual state of invoice to show the upload button instead of delete button on delete success\n\n    setTimeout(() => {\n      deleteDoc(doc_type);\n    }, 2000);\n  };\n\n  const uploadDocument = (doc_type, documents) => {\n    const file_data = [];\n\n    for (let file of documents) {\n      const {\n        filename\n      } = file;\n      file_data.push({\n        name: filename,\n        date: Date.now()\n      });\n    }\n\n    dispatch(uploadLoadDocument(load_selected._id, doc_type, documents));\n    setTimeout(() => {\n      updateDoc(doc_type, file_data);\n    }, 2000);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    open: load_selected ? true : false,\n    onClose: () => {\n      handleOnClose();\n      setForm(formInitialState);\n      setStep(1);\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: modalStyle,\n      className: classes.paper,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 2,\n          className: classes.root,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.modalBody,\n            children: [step !== 3 ? /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: step === 1 ? 'From' : 'To'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 40\n            }, this) : '', step === 1 ? /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 2,\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 3\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 6,\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    id: \"outlined-basic\",\n                    variant: \"outlined\",\n                    label: \"Name\",\n                    name: \"name\",\n                    value: form[step === 1 ? 'from' : 'to'].name,\n                    onChange: event => handleOnChange(event, step === 1 ? 'from' : 'to')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 3\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 40\n            }, this) : '', step < 3 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  spacing: 2,\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 3\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      id: \"outlined-basic\",\n                      variant: \"outlined\",\n                      label: \"Company Name\",\n                      name: \"company_name\",\n                      value: form[step === 1 ? 'from' : 'to'].company_name,\n                      onChange: event => handleOnChange(event, step === 1 ? 'from' : 'to')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 163,\n                      columnNumber: 37\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 3\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 40\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  spacing: 2,\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 3\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 176,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      id: \"outlined-basic\",\n                      variant: \"outlined\",\n                      label: \"Email\",\n                      name: \"email\",\n                      value: form[step === 1 ? 'from' : 'to'].email,\n                      onChange: event => handleOnChange(event, step === 1 ? 'from' : 'to')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 178,\n                      columnNumber: 37\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 3\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true) : '', step === 3 && load_selected ? /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 2,\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 4\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 4\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 4\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 2,\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 3\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 6,\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\"Load: \", load_selected.loadNumber || '--']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 3\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 2,\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 3\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 6,\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\"Broker: \", load_selected.brokerage || '--']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 205,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 3\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 2,\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 3\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 6,\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\"Rate: \", load_selected.rate || '--']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 3\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 2,\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 3\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 6,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    ref: rcfr,\n                    onChange: event => uploadDocument('rateConfirmation', event.target.files),\n                    type: \"file\",\n                    name: \"rateConfirmation\",\n                    multiple: true,\n                    style: {\n                      opacity: 0\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: 0\n                    },\n                    children: [\"Rate Confirmation:\", Array.isArray(load_selected.rateConfirmation) && load_selected.rateConfirmation.length > 0 && typeof load_selected.rateConfirmation[0] !== 'string' ? /*#__PURE__*/_jsxDEV(Button, {\n                      onClick: () => deleteDocument('rateConfirmation'),\n                      variant: \"contained\",\n                      style: {\n                        backgroundColor: 'red',\n                        color: '#ffffff'\n                      },\n                      children: \"Delete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 232,\n                      columnNumber: 45\n                    }, this) : /*#__PURE__*/_jsxDEV(Button, {\n                      onClick: () => rcfr.current.click(),\n                      variant: \"contained\",\n                      color: \"primary\",\n                      children: \"Upload\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 238,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 3\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 2,\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 3\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 6,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    ref: pdfr,\n                    onChange: event => uploadDocument('proofDelivery', event.target.files),\n                    type: \"file\",\n                    name: \"proofDelivery\",\n                    multiple: true,\n                    style: {\n                      opacity: 0\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: 0\n                    },\n                    children: [\"Proof of Delivery:\", Array.isArray(load_selected.proofDelivery) && load_selected.proofDelivery.length > 0 && typeof load_selected.proofDelivery[0] !== 'string' ? /*#__PURE__*/_jsxDEV(Button, {\n                      onClick: () => deleteDocument('proofDelivery'),\n                      variant: \"contained\",\n                      style: {\n                        backgroundColor: 'red',\n                        color: '#ffffff'\n                      },\n                      children: \"Delete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 264,\n                      columnNumber: 45\n                    }, this) : /*#__PURE__*/_jsxDEV(Button, {\n                      onClick: () => pdfr.current.click(),\n                      variant: \"contained\",\n                      color: \"primary\",\n                      children: \"Upload\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 270,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 3\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 57\n            }, this) : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.modalFooter,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 2,\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 2\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 2\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 8,\n                  className: classes.btn_container,\n                  children: [step !== 3 ? /*#__PURE__*/_jsxDEV(IconButton, {\n                    children: [step > 1 ? /*#__PURE__*/_jsxDEV(ArrowBackIcon, {\n                      onClick: () => changeStep('back')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 293,\n                      columnNumber: 62\n                    }, this) : '', /*#__PURE__*/_jsxDEV(ArrowForwardIcon, {\n                      onClick: () => changeStep('next')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 294,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 292,\n                    columnNumber: 45\n                  }, this) : '', step === 3 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(Button, {\n                      variant: \"contained\",\n                      color: \"primary\",\n                      onClick: () => changeStep('back'),\n                      style: {\n                        marginRight: '5px'\n                      },\n                      children: \"Back\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 299,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(Button, {\n                      variant: \"contained\",\n                      color: \"primary\",\n                      onClick: () => handleSubmit(),\n                      children: \"Create\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 304,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 298,\n                    columnNumber: 52\n                  }, this) : '']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 13\n  }, this);\n}\n\n_s(InvoiceWizard, \"klr20djz2t/vdU/9ukwcAU+xbPw=\", false, function () {\n  return [useStyles, useDispatch];\n});\n\n_c = InvoiceWizard;\n\nvar _c;\n\n$RefreshReg$(_c, \"InvoiceWizard\");","map":{"version":3,"sources":["/Users/sunnygill/Dropbox/My Mac (Surinders-MacBook-Pro.local)/Desktop/freightdok/client/src/components/invoices/InvoicesWizard.js"],"names":["React","useState","useRef","Modal","Step","makeStyles","Grid","TextField","Button","IconButton","ArrowForwardIcon","ArrowBackIcon","useDispatch","deleteLoadDocument","uploadLoadDocument","generateInvoice","useStyles","theme","paper","position","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","root","flexGrow","flexDirection","textAlign","formControl","margin","minWidth","resizeDialog","fontSize","modalBody","width","minHeight","modalFooter","btn_container","getModalStyle","top","left","transform","overflowY","height","formInitialState","from","name","company_name","email","to","InvoiceWizard","load_selected","handleOnClose","deleteDoc","updateDoc","classes","dispatch","modalStyle","form","setForm","step","setStep","rcfr","pdfr","handleSubmit","event","preventDefault","_id","setTimeout","handleOnChange","key","value","target","changeStep","move","new_step","error","errorMsg","validateEmail","alert","re","test","String","toLowerCase","deleteDocument","doc_type","uploadDocument","documents","file_data","file","filename","push","date","Date","now","loadNumber","brokerage","rate","files","opacity","Array","isArray","rateConfirmation","length","color","current","click","proofDelivery","marginRight"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Modal, Step } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport { Button } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { useDispatch } from 'react-redux';\nimport { deleteLoadDocument, uploadLoadDocument, generateInvoice } from '../../actions/load';\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        position: 'absolute',\n        backgroundColor: theme.palette.background.paper,\n        border: '2px solid #000',\n        boxShadow: theme.shadows[5],\n        padding: theme.spacing(2, 4, 3),\n    },\n    root: {\n        flexGrow: 1,\n        flexDirection: \"row\",\n        textAlign: \"center\"\n    },\n    formControl: {\n        margin: theme.spacing(1),\n        minWidth: 120,\n    },\n    resizeDialog: {\n        fontSize: 14,\n    },\n    modalBody: {\n        width: '100%',\n        minHeight: '324px'\n    },\n    modalFooter: {\n        width: '100%',\n    },\n    btn_container: {\n        textAlign: 'end'\n    }\n}));\nconst getModalStyle = () => {\n    return {\n        top: '50%',\n        left: '50%',\n        width: '400px',\n        transform: 'translate(-50%, -50%)',\n        overflowY: 'auto',\n        height: '400px',\n    };\n};\nconst formInitialState = {\n    from: {\n        name: '',\n        company_name: '',\n        email: ''\n    },\n    to: {\n        company_name: '',\n        email: ''\n    }\n};\n\nexport default function InvoiceWizard({ load_selected, handleOnClose, deleteDoc, updateDoc }) {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const [modalStyle] = useState(getModalStyle);\n    const [form, setForm] = useState(formInitialState);\n    const [step, setStep] = useState(1);\n    const rcfr = useRef();\n    const pdfr = useRef();\n    const handleSubmit = (event = null) => {\n        // generate pdf in this function and download when invoice saved on server side\n        if (event)\n            event.preventDefault();\n        dispatch(generateInvoice(load_selected._id, form));\n        setTimeout(() => {\n            handleOnClose();\n        }, 2000);\n    };\n    const handleOnChange = (event, key) => {\n        const { name, value } = event.target;\n        setForm(form => ({ ...form, [key]: { ...form[key], [name]: value } }));\n    };\n    const changeStep = (move) => {\n        const new_step = move === 'next' ? step+1 : step-1;\n        let error = false;\n        let errorMsg = '';\n        if ((step === 1 || step === 2) && \n        ((form.from.email && !validateEmail(form.from.email)) || (form.to.email && !validateEmail(form.to.email)))) {\n            error = true;\n            errorMsg = 'Invalid Email';\n        }\n        if (step === 1 && (!form.from.name || !form.from.company_name || !form.from.email)) {\n            error = true;\n            errorMsg = 'Please fill the form to continue.';\n        }\n        if (step === 2 && (!form.to.company_name || !form.to.email)) {\n            error = true;\n            errorMsg = 'Please fill the form to continue.';\n        }\n        if (move === 'next' && error)\n            alert(errorMsg);\n        else\n            setStep(new_step);\n    };\n    const validateEmail = email => {\n        const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(String(email).toLowerCase());\n    }\n    const deleteDocument = doc_type => {\n        dispatch(deleteLoadDocument(load_selected._id, doc_type, ''));\n        // remove timer and get actual state of invoice to show the upload button instead of delete button on delete success\n        setTimeout(() => {deleteDoc(doc_type)}, 2000);\n    };\n    const uploadDocument = (doc_type, documents) => {\n        const file_data = [];\n        for (let file of documents) {\n            const { filename } = file;\n            file_data.push({\n                name: filename,\n                date: Date.now()\n            });\n        }\n        dispatch(uploadLoadDocument(load_selected._id, doc_type, documents));\n        setTimeout(() => {updateDoc(doc_type, file_data)}, 2000);\n    }\n    return (<Modal\n    open={load_selected ? true : false}\n    onClose={()=>{\n        handleOnClose();\n        setForm(formInitialState);\n        setStep(1);\n    }}>\n        <div style={modalStyle} className={classes.paper}>\n            <form onSubmit={handleSubmit}>\n                <Grid container spacing={2} className={classes.root}>\n                    <div className={classes.modalBody}>\n                        { step !== 3 ? <Grid item xs={12}>\n                            <h3>{ step === 1 ? 'From' : 'To' }</h3>\n                        </Grid> : '' }\n                        { step === 1 ? <Grid item xs={12}>\n                            <Grid container spacing={2}>\n                                <Grid item xs={3}></Grid>\n                                <Grid item xs={6}>\n                                    <TextField \n                                    id=\"outlined-basic\" \n                                    variant=\"outlined\" \n                                    label=\"Name\"\n                                    name=\"name\"\n                                    value={form[step === 1 ? 'from' : 'to'].name}\n                                    onChange={(event) => handleOnChange(event, step === 1 ? 'from' : 'to')} />\n                                </Grid>\n                                <Grid item xs={3}></Grid>\n                            </Grid>\n                        </Grid> : '' }\n                        { step < 3 ? <><Grid item xs={12}>\n                            <Grid container spacing={2}>\n                                <Grid item xs={3}></Grid>\n                                <Grid item xs={6}>\n                                    <TextField \n                                    id=\"outlined-basic\" \n                                    variant=\"outlined\" \n                                    label=\"Company Name\"\n                                    name=\"company_name\"\n                                    value={form[step === 1 ? 'from' : 'to'].company_name}\n                                    onChange={(event) => handleOnChange(event, step === 1 ? 'from' : 'to')} />\n                                </Grid>\n                                <Grid item xs={3}></Grid>\n                            </Grid>\n                        </Grid>\n                        <Grid item xs={12}>\n                            <Grid container spacing={2}>\n                                <Grid item xs={3}></Grid>\n                                <Grid item xs={6}>\n                                    <TextField \n                                    id=\"outlined-basic\" \n                                    variant=\"outlined\" \n                                    label=\"Email\"\n                                    name=\"email\"\n                                    value={form[step === 1 ? 'from' : 'to'].email}\n                                    onChange={(event) => handleOnChange(event, step === 1 ? 'from' : 'to')} />\n                                </Grid>\n                                <Grid item xs={3}></Grid>\n                            </Grid>\n                        </Grid></> : '' }\n                        { step === 3 && load_selected ? <Grid item xs={12}>\n                            <Grid container spacing={2}>\n                                <Grid item xs={4}></Grid>\n                                <Grid item xs={4}></Grid>\n                                <Grid item xs={4}></Grid>\n                            </Grid>\n                            <Grid container spacing={2}>\n                                <Grid item xs={3}></Grid>\n                                <Grid item xs={6}>\n                                    <p>Load: { load_selected.loadNumber || '--' }</p>\n                                </Grid>\n                                <Grid item xs={3}></Grid>\n                            </Grid>\n                            <Grid container spacing={2}>\n                                <Grid item xs={3}></Grid>\n                                <Grid item xs={6}>\n                                    <p>Broker: { load_selected.brokerage || '--' }</p>\n                                </Grid>\n                                <Grid item xs={3}></Grid>\n                            </Grid>\n                            <Grid container spacing={2}>\n                                <Grid item xs={3}></Grid>\n                                <Grid item xs={6}>\n                                    <p>Rate: { load_selected.rate || '--' }</p>\n                                </Grid>\n                                <Grid item xs={3}></Grid>\n                            </Grid>\n                            <Grid container spacing={2}>\n                                <Grid item xs={3}></Grid>\n                                <Grid item xs={6}>\n                                    <input\n                                    ref={rcfr} \n                                    onChange={event=> uploadDocument('rateConfirmation', event.target.files)}\n                                    type=\"file\" \n                                    name=\"rateConfirmation\" \n                                    multiple \n                                    style={{opacity: 0}}/>\n                                    <p style={{margin:0}}>\n                                        Rate Confirmation: \n                                        { \n                                            Array.isArray(load_selected.rateConfirmation) &&\n                                            load_selected.rateConfirmation.length > 0 && \n                                            typeof load_selected.rateConfirmation[0] !== 'string' ? \n                                            <Button \n                                            onClick={()=>deleteDocument('rateConfirmation')} \n                                            variant=\"contained\" \n                                            style={{backgroundColor:'red',color:'#ffffff'}}>\n                                            Delete\n                                            </Button> : \n                                            <Button \n                                            onClick={()=>rcfr.current.click()} \n                                            variant=\"contained\" color=\"primary\">\n                                            Upload\n                                            </Button>\n                                        }\n                                    </p>\n                                </Grid>\n                                <Grid item xs={3}></Grid>\n                            </Grid>\n                            <Grid container spacing={2}>\n                                <Grid item xs={3}></Grid>\n                                <Grid item xs={6}>\n                                    <input\n                                    ref={pdfr} \n                                    onChange={event=> uploadDocument('proofDelivery', event.target.files)}\n                                    type=\"file\" \n                                    name=\"proofDelivery\" \n                                    multiple \n                                    style={{opacity: 0}}/>\n                                    <p style={{margin:0}}>\n                                        Proof of Delivery: \n                                        { \n                                            Array.isArray(load_selected.proofDelivery) && \n                                            load_selected.proofDelivery.length > 0 && \n                                            typeof load_selected.proofDelivery[0] !== 'string' ? \n                                            <Button \n                                            onClick={()=>deleteDocument('proofDelivery')} \n                                            variant=\"contained\" \n                                            style={{backgroundColor:'red',color:'#ffffff'}}>\n                                            Delete\n                                            </Button> : \n                                            <Button \n                                            onClick={()=>pdfr.current.click()} \n                                            variant=\"contained\" \n                                            color=\"primary\">\n                                            Upload\n                                            </Button>\n                                        }\n                                    </p>\n                                </Grid>\n                                <Grid item xs={3}></Grid>\n                            </Grid>\n                        </Grid> : '' }\n                    </div>\n                    <div className={classes.modalFooter}>\n                        <Grid item xs={12}>\n                            <Grid container spacing={2}>\n                                <Grid item xs={2}></Grid>\n                                <Grid item xs={2}></Grid>\n                                <Grid item xs={8} className={classes.btn_container}>\n                                    {\n                                        step !== 3 ?\n                                        (\n                                            <IconButton>\n                                                { step > 1 ? <ArrowBackIcon onClick={()=>changeStep('back')}/> : '' }\n                                                <ArrowForwardIcon onClick={()=>changeStep('next')}/>\n                                            </IconButton>\n                                        ) : ''\n                                    }\n                                    { step === 3 ? <div>\n                                        <Button \n                                        variant=\"contained\" \n                                        color=\"primary\" \n                                        onClick={()=>changeStep('back')}\n                                        style={{marginRight:'5px'}}>Back</Button>\n                                        <Button variant=\"contained\" color=\"primary\" onClick={()=>handleSubmit()}>Create</Button>\n                                    </div> : '' }\n                                </Grid>\n                            </Grid>\n                        </Grid>\n                    </div>\n                </Grid>\n            </form>\n        </div>\n    </Modal>);\n}"]},"metadata":{},"sourceType":"module"}