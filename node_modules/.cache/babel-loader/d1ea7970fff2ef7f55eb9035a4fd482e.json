{"ast":null,"code":"var _jsxFileName = \"/Users/sunnygill/Dropbox/My Mac (Surinders-MacBook-Pro.local)/Desktop/freightdok/client/src/components/loads/Loaditem.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Moment from 'react-moment';\nimport { connect, useSelector } from 'react-redux';\nimport { deleteLoad, getLoads, selectLoad, searchLoads } from \"../../actions/load\"; // import LoadPickup from './LoadPickup';\n// import LoadDrop from './LoadDrop';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell'; // import TableContainer from '@material-ui/core/TableContainer';\n\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow'; // import Paper from '@material-ui/core/Paper';\n\nimport Badge from '@material-ui/core/Badge';\nimport IconButton from '@material-ui/core/IconButton';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport Collapse from '@material-ui/core/Collapse';\nimport Box from '@material-ui/core/Box';\nimport { Typography } from '@material-ui/core';\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport LoadDetailModal from './LoadDetailModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StyledBadge = withStyles(theme => ({\n  badge: {\n    right: -7,\n    top: 0,\n    border: `2px solid ${theme.palette.background.paper}`,\n    padding: \"0 4px\"\n  }\n}))(Badge);\n\nconst LoadItem = ({\n  load,\n  search,\n  selectLoad,\n  deleteLoad,\n  getLoads,\n  searchLoads,\n  loads,\n  page,\n  rowsPerPage,\n  user\n}) => {\n  _s();\n\n  const {\n    _id,\n    brokerage,\n    loadNumber,\n    pickup,\n    drop,\n    status,\n    proofDelivery,\n    rateConfirmation,\n    accessorials\n  } = load;\n  const [modalEdit, enableEdit] = useState(false);\n  const pickupState = pickup.map(pickup => pickup.pickupState);\n  const pickupCity = pickup.map(pickup => pickup.pickupCity);\n  const pickupDate = pickup.map(pickup => pickup.pickupDate);\n  const dropState = drop.map(drop => drop.dropState);\n  const dropCity = drop.map(drop => drop.dropCity);\n  const dropDate = drop.map(drop => drop.dropDate);\n  const pickupStateFirst = pickupState[0];\n  const pickupCityFirst = pickupCity[0];\n  const pickDateFirst = pickupDate[0];\n  const dropStateFirst = dropState[0];\n  const dropCityFirst = dropCity[0];\n  const dropDateFirst = dropDate[0];\n  const [open, setOpen] = useState(false);\n  const [assignedToLocal, setAssignedTo] = useState(null);\n  const state = useSelector(state => state);\n  useEffect(() => {\n    if (state.driver && state.driver.drivers && state.driver.drivers.length) {\n      state.driver.drivers.forEach(item => {\n        if (item.user && item.user._id === load.user) {\n          setAssignedTo(item.user.name);\n        }\n      });\n    }\n  }, [state.driver.drivers]);\n\n  const formatDate = date => {\n    const d = new Date(date);\n    const hours = d.getHours();\n    const minutes = d.getMinutes();\n    let time = '';\n\n    if (hours > 0 && hours <= 12) {\n      time = \"\" + hours;\n    } else if (hours > 12) {\n      time = \"\" + (hours - 12);\n    } else if (hours === 0) {\n      time = \"12\";\n    }\n\n    time += minutes < 10 ? \":0\" + minutes : \":\" + minutes;\n    time += hours >= 12 ? \" P.M.\" : \" A.M.\";\n    return [d.getMonth() + 1, d.getDate(), d.getFullYear()].join('/') + ' ' + time;\n  };\n\n  const handleDeleteLoad = async (load_id, e) => {\n    e.stopPropagation();\n    console.log(\"LOAD IS:         \", load_id);\n    await deleteLoad(load_id);\n    const {\n      query,\n      page: sPage,\n      limit\n    } = search;\n    if (!query) getLoads(page, rowsPerPage);else searchLoads(sPage, limit, query);\n  };\n\n  const handleEditLoad = () => {\n    setOpen(true);\n    enableEdit(true);\n    selectLoad({});\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(TableBody, {\n      children: /*#__PURE__*/_jsxDEV(TableRow, {\n        hover: true,\n        onClick: () => {\n          setOpen(true);\n          selectLoad({});\n        },\n        children: [/*#__PURE__*/_jsxDEV(TableCell, {\n          align: \"center\",\n          children: loadNumber\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), pickup.length <= 0 ? /*#__PURE__*/_jsxDEV(Fragment, {\n          children: /*#__PURE__*/_jsxDEV(TableCell, {\n            align: \"center\",\n            children: [pickupCityFirst, \", \", pickupStateFirst]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(TableCell, {\n          align: \"center\",\n          children: [pickupCityFirst, \", \", pickupStateFirst]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n          align: \"center\",\n          children: /*#__PURE__*/_jsxDEV(Moment, {\n            format: \"MM/DD\",\n            children: pickDateFirst\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n          children: [dropCityFirst, \", \", dropStateFirst]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n          align: \"center\",\n          children: /*#__PURE__*/_jsxDEV(Moment, {\n            format: \"MM/DD\",\n            children: dropDateFirst\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n          align: \"center\",\n          children: assignedToLocal ? assignedToLocal : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n          align: \"center\",\n          children: status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n            children: /*#__PURE__*/_jsxDEV(EditIcon, {\n              color: \"primary\",\n              onClick: () => handleEditLoad()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), user && (user.role === 'afterhours' || user.role === 'driver') || /*#__PURE__*/_jsxDEV(IconButton, {\n            children: /*#__PURE__*/_jsxDEV(DeleteIcon, {\n              onClick: e => {\n                handleDeleteLoad(_id, e);\n              },\n              style: {\n                color: \"rgb(220, 0, 78)\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 81\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LoadDetailModal, {\n      modalEdit: modalEdit,\n      open: open,\n      load: load,\n      handleClose: () => {\n        setOpen(false);\n        enableEdit(false);\n        selectLoad();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(LoadItem, \"ixRaZa15zNW8uEd1RUTbVIuzPio=\", false, function () {\n  return [useSelector];\n});\n\n_c = LoadItem;\nLoadItem.propTypes = {\n  load: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = ({\n  auth: {\n    user\n  },\n  load: {\n    search\n  }\n}) => ({\n  user,\n  search\n});\n\nexport default connect(mapStateToProps, {\n  deleteLoad,\n  getLoads,\n  selectLoad,\n  searchLoads\n})(LoadItem);\n\nvar _c;\n\n$RefreshReg$(_c, \"LoadItem\");","map":{"version":3,"sources":["/Users/sunnygill/Dropbox/My Mac (Surinders-MacBook-Pro.local)/Desktop/freightdok/client/src/components/loads/Loaditem.js"],"names":["React","Fragment","useEffect","useState","PropTypes","Moment","connect","useSelector","deleteLoad","getLoads","selectLoad","searchLoads","withStyles","Table","TableBody","TableCell","TableHead","TableRow","Badge","IconButton","KeyboardArrowDownIcon","KeyboardArrowUpIcon","Collapse","Box","Typography","DeleteIcon","EditIcon","CheckCircleIcon","CancelIcon","LoadDetailModal","StyledBadge","theme","badge","right","top","border","palette","background","paper","padding","LoadItem","load","search","loads","page","rowsPerPage","user","_id","brokerage","loadNumber","pickup","drop","status","proofDelivery","rateConfirmation","accessorials","modalEdit","enableEdit","pickupState","map","pickupCity","pickupDate","dropState","dropCity","dropDate","pickupStateFirst","pickupCityFirst","pickDateFirst","dropStateFirst","dropCityFirst","dropDateFirst","open","setOpen","assignedToLocal","setAssignedTo","state","driver","drivers","length","forEach","item","name","formatDate","date","d","Date","hours","getHours","minutes","getMinutes","time","getMonth","getDate","getFullYear","join","handleDeleteLoad","load_id","e","stopPropagation","console","log","query","sPage","limit","handleEditLoad","role","color","propTypes","object","isRequired","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Moment from 'react-moment';\nimport { connect, useSelector } from 'react-redux';\nimport { deleteLoad, getLoads, selectLoad, searchLoads } from \"../../actions/load\";\n// import LoadPickup from './LoadPickup';\n// import LoadDrop from './LoadDrop';\nimport { withStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\n// import TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n// import Paper from '@material-ui/core/Paper';\nimport Badge from '@material-ui/core/Badge';\nimport IconButton from '@material-ui/core/IconButton';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport Collapse from '@material-ui/core/Collapse';\nimport Box from '@material-ui/core/Box';\nimport { Typography } from '@material-ui/core';\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\nimport LoadDetailModal from './LoadDetailModal';\n\nconst StyledBadge = withStyles((theme) => ({\n  badge: {\n    right: -7,\n    top: 0,\n    border: `2px solid ${theme.palette.background.paper}`,\n    padding: \"0 4px\",\n  },\n}))(Badge);\n\nconst LoadItem = ({ load, search, selectLoad, deleteLoad, getLoads, searchLoads, loads, page, rowsPerPage, user }) => {\n  const {_id, brokerage, loadNumber, pickup, drop, status, proofDelivery, rateConfirmation, accessorials } = load;\n  const [modalEdit, enableEdit] = useState(false);\n  const pickupState = pickup.map((pickup) => pickup.pickupState);\n  const pickupCity = pickup.map((pickup) => pickup.pickupCity);\n  const pickupDate = pickup.map((pickup) => pickup.pickupDate);\n\n  const dropState = drop.map((drop) => drop.dropState);\n  const dropCity = drop.map((drop) => drop.dropCity);\n  const dropDate = drop.map((drop) => drop.dropDate);\n\n  const pickupStateFirst = pickupState[0];\n  const pickupCityFirst = pickupCity[0];\n  const pickDateFirst = pickupDate[0];\n\n  const dropStateFirst = dropState[0];\n  const dropCityFirst = dropCity[0];\n  const dropDateFirst = dropDate[0];\n\n  const [open,setOpen] = useState(false);\n  const [assignedToLocal, setAssignedTo] = useState(null);\n\n  const state = useSelector(state => state);\n\n  useEffect(() => {\n    if (state.driver && state.driver.drivers && state.driver.drivers.length) {\n      state.driver.drivers.forEach((item) => {\n        if (item.user && item.user._id === load.user) {\n          setAssignedTo(item.user.name)\n        }\n      });\n    }\n  }, [state.driver.drivers])\n\n  const formatDate = (date) => {\n    const d = new Date(date);\n    const hours = d.getHours();\n    const minutes = d.getMinutes();\n    let time = '';\n\n    if(hours > 0 && hours <= 12){\n      time = \"\" + hours;\n    }else if (hours > 12){\n      time = \"\" + (hours - 12);\n    }else if (hours === 0){\n      time = \"12\";\n    }\n\n    time += (minutes < 10 ) ? \":0\" + minutes : \":\" + minutes;\n    time += (hours >= 12) ? \" P.M.\" : \" A.M.\";\n\n    return [d.getMonth()+1,d.getDate(),d.getFullYear()].join('/')+ ' ' + time;\n  }\n\n  const handleDeleteLoad = async (load_id, e) => {\n    e.stopPropagation();\n    console.log(\"LOAD IS:         \", load_id)\n    await deleteLoad(load_id);\n    const { query, page: sPage, limit } = search;\n    if (!query)\n      getLoads(page, rowsPerPage);\n    else\n      searchLoads(sPage, limit, query);\n  };\n\n  const handleEditLoad = () => {\n    setOpen(true);\n    enableEdit(true);\n    selectLoad({});\n  };\n\n  return (\n    <>\n      <TableBody>\n        <TableRow \n        hover={true} \n        onClick={()=>{\n          setOpen(true);\n          selectLoad({});\n        }}>\n          \n          <TableCell align=\"center\">{loadNumber}</TableCell>\n\n          {pickup.length <= 0 ? (\n            <Fragment>\n              <TableCell align=\"center\">{pickupCityFirst}, {pickupStateFirst}</TableCell>\n            </Fragment>\n          ) : (\n            <TableCell align=\"center\">\n              {pickupCityFirst}, {pickupStateFirst}\n              {/* <StyledBadge color=\"primary\" max={10} badgeContent={pickup.length}>\n                {pickupCityFirst}, {pickupStateFirst}\n              </StyledBadge> */}\n            </TableCell>\n          )}\n          \n          <TableCell align=\"center\">\n            <Moment format='MM/DD'>{pickDateFirst}</Moment>\n          </TableCell>\n          \n          <TableCell>\n            {dropCityFirst}, {dropStateFirst}\n          </TableCell>\n          \n          <TableCell align=\"center\">\n            <Moment format='MM/DD'>{dropDateFirst}</Moment>\n          </TableCell>\n\n          <TableCell align=\"center\">{assignedToLocal ? assignedToLocal : ''}</TableCell>\n\n          <TableCell align=\"center\">{status}</TableCell>\n\n          <TableCell>\n            <IconButton>\n              <EditIcon color=\"primary\" onClick={() => handleEditLoad()}/>\n            </IconButton>\n            { user && (user.role === 'afterhours' || user.role === 'driver') || <IconButton >\n              <DeleteIcon  onClick={(e) => { handleDeleteLoad(_id, e);}} style={{ color: \"rgb(220, 0, 78)\" }} />\n            </IconButton> }\n          </TableCell>\n\n          {/* <TableCell></TableCell> */}\n        </TableRow>        \n      </TableBody>\n      <LoadDetailModal \n        modalEdit={modalEdit}\n        open={open}\n        load={load} \n        handleClose={()=>{\n          setOpen(false);\n          enableEdit(false);\n          selectLoad();\n        }}\n      />\n    </>\n  );\n};\n\nLoadItem.propTypes = {\n  load: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = ({ auth: { user }, load: { search } }) => ({ user, search });\n\nexport default connect(\n  mapStateToProps,\n  { deleteLoad, getLoads, selectLoad, searchLoads }\n)(LoadItem)"]},"metadata":{},"sourceType":"module"}