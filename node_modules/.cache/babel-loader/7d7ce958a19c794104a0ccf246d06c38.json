{"ast":null,"code":"import { GET_LOADS, GET_LOAD, LOAD_ERROR, ADD_LOAD, DELETE_LOAD, PATCH_PICKUP, PICKUP_ERROR, PATCH_DROP, DROP_ERROR, UPDATE_LOAD, UPDATE_LOAD_ERROR, RETURNED_SEARCHED_LOADS, RESET_SEARCHED_LOADS, SELECT_LOAD } from '../actions/types';\nconst initialState = {\n  loads: [],\n  load: null,\n  loading: true,\n  loads_pagination: {},\n  page: 0,\n  rowsPerPage: 5,\n  error: {},\n  search: {\n    query: '',\n    loads: [],\n    page: 0,\n    limit: 5,\n    total: 0,\n    totalPages: 0\n  }\n};\nexport default function (state = initialState, action) {\n  const {\n    type,\n    payload\n  } = action;\n\n  switch (type) {\n    case GET_LOADS:\n      return { ...state,\n        allLoads: payload.loads.allLoads,\n        loads: payload.loads.load,\n        loads_pagination: {\n          limit: payload.loads.limit,\n          total: payload.loads.total,\n          totalPages: payload.loads.totalPages,\n          currPage: payload.loads.currentPage\n        },\n        page: payload.page,\n        rowsPerPage: payload.limit,\n        loading: false,\n        load: null\n      };\n\n    case SELECT_LOAD:\n      return { ...state,\n        load: payload\n      };\n\n    case RETURNED_SEARCHED_LOADS:\n      return { ...state,\n        search: {\n          query: payload.search,\n          loads: payload.data.load,\n          page: +payload.page,\n          limit: +payload.data.limit,\n          total: payload.data.total,\n          totalPages: payload.data.totalPages\n        },\n        load: null\n      };\n\n    case RESET_SEARCHED_LOADS:\n      return { ...state,\n        search: {\n          query: '',\n          loads: [],\n          page: 0,\n          limit: 5,\n          total: 0,\n          totalPages: 0\n        }\n      };\n\n    case GET_LOAD:\n      return { ...state,\n        load: payload,\n        loading: false\n      };\n\n    case ADD_LOAD:\n      let newLoads = state.loads;\n      if (newLoads.length === 5) newLoads.splice(-1, 1);\n      newLoads = [payload, ...newLoads];\n      return { ...state,\n        loads: newLoads,\n        loads_pagination: { ...state.loads_pagination,\n          total: state.loads_pagination.total + 1\n        },\n        loading: false\n      };\n\n    case UPDATE_LOAD:\n      // don't remove if update event triggered from load status view\n      return { ...state,\n        error: {},\n        loads: payload.status !== 'Delivered' ? state.loads.map(l => {\n          if (l._id === payload._id) {\n            return payload;\n          }\n\n          return l;\n        }) : state.loads.filter(l => l._id !== payload._id),\n        loads_pagination: { ...state.loads_pagination,\n          total: payload.status === 'Delivered' ? --state.loads_pagination.total : state.loads_pagination.total\n        },\n        loading: false\n      };\n\n    case DELETE_LOAD:\n      return { ...state,\n        loads: state.loads.filter(load => load._id !== payload),\n        loading: false\n      };\n\n    case LOAD_ERROR:\n      return { ...state,\n        error: payload,\n        loading: false\n      };\n\n    case UPDATE_LOAD_ERROR:\n      return { ...state,\n        error: payload,\n        loading: false\n      };\n\n    case PATCH_PICKUP:\n      return { ...state,\n        load: payload,\n        loading: false\n      };\n\n    case PICKUP_ERROR:\n      return { ...state,\n        error: payload,\n        loading: false\n      };\n\n    case PATCH_DROP:\n      return { ...state,\n        load: payload,\n        loading: false\n      };\n\n    case DROP_ERROR:\n      return { ...state,\n        load: payload,\n        loading: false\n      };\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/sunnygill/Dropbox/My Mac (Surinders-MacBook-Pro.local)/Desktop/freightdok/client/src/reducers/load.js"],"names":["GET_LOADS","GET_LOAD","LOAD_ERROR","ADD_LOAD","DELETE_LOAD","PATCH_PICKUP","PICKUP_ERROR","PATCH_DROP","DROP_ERROR","UPDATE_LOAD","UPDATE_LOAD_ERROR","RETURNED_SEARCHED_LOADS","RESET_SEARCHED_LOADS","SELECT_LOAD","initialState","loads","load","loading","loads_pagination","page","rowsPerPage","error","search","query","limit","total","totalPages","state","action","type","payload","allLoads","currPage","currentPage","data","newLoads","length","splice","status","map","l","_id","filter"],"mappings":"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","sourcesContent":["import {\n  GET_LOADS,\n  GET_LOAD,\n  LOAD_ERROR,\n  ADD_LOAD,\n  DELETE_LOAD,\n  PATCH_PICKUP,\n  PICKUP_ERROR,\n  PATCH_DROP,\n  DROP_ERROR,\n  UPDATE_LOAD,\n  UPDATE_LOAD_ERROR,\n  RETURNED_SEARCHED_LOADS,\n  RESET_SEARCHED_LOADS,\n  SELECT_LOAD\n} from '../actions/types';\n\nconst initialState = {\n  loads: [],\n  load: null,\n  loading: true,\n  loads_pagination: {},\n  page: 0,\n  rowsPerPage: 5,\n  error: {},\n  search: {\n    query: '',\n    loads: [],\n    page: 0,\n    limit: 5,\n    total:0,\n    totalPages: 0,\n  }\n};\n\nexport default function(state = initialState, action) {\n  const { type, payload } = action;\n\n  switch(type) {\n    case GET_LOADS:\n      return {\n        ...state,\n        allLoads: payload.loads.allLoads,\n        loads: payload.loads.load,\n        loads_pagination: {\n          limit: payload.loads.limit,\n          total: payload.loads.total,\n          totalPages: payload.loads.totalPages,\n          currPage: payload.loads.currentPage\n        },\n        page: payload.page,\n        rowsPerPage: payload.limit,\n        loading: false,\n        load: null\n      };\n    case SELECT_LOAD:\n      return {\n        ...state,\n        load: payload\n      };\n    case RETURNED_SEARCHED_LOADS:\n      return {\n        ...state,\n        search: {\n          query: payload.search,\n          loads: payload.data.load,\n          page: +payload.page,\n          limit: +payload.data.limit,\n          total: payload.data.total,\n          totalPages: payload.data.totalPages\n        },\n        load: null\n      };\n    case RESET_SEARCHED_LOADS:\n      return {\n        ...state,\n        search: {\n          query: '',\n          loads: [],\n          page: 0,\n          limit: 5,\n          total:0,\n          totalPages: 0,\n        }\n      }\n      case GET_LOAD:\n        return {\n          ...state,\n          load: payload,\n          loading: false\n        };\n      case ADD_LOAD:\n        let newLoads = state.loads;\n        if (newLoads.length === 5)\n          newLoads.splice(-1, 1);\n        newLoads = [payload, ...newLoads];\n        return {\n          ...state,\n          loads: newLoads,\n          loads_pagination: { ...state.loads_pagination, total: state.loads_pagination.total+1 },\n          loading: false\n        };\n      case UPDATE_LOAD:\n        // don't remove if update event triggered from load status view\n        return {\n          ...state,\n          error: {},\n          loads: payload.status !== 'Delivered' ? state.loads.map(l => {\n            if (l._id === payload._id) {\n              return payload;\n            }\n            return l;\n          }) : state.loads.filter(l => l._id !== payload._id),\n          loads_pagination: {\n            ...state.loads_pagination,\n            total: payload.status === 'Delivered' ? --state.loads_pagination.total : state.loads_pagination.total \n          },\n          loading: false\n        };\n      case DELETE_LOAD:\n        return {\n          ...state,\n          loads: state.loads.filter(load => load._id !== payload),\n          loading: false\n        }\n      case LOAD_ERROR:\n        return {\n          ...state,\n          error: payload,\n          loading: false\n      };\n      case UPDATE_LOAD_ERROR:\n        return {\n          ...state,\n          error: payload,\n          loading: false\n      };\n      case PATCH_PICKUP:\n        return{\n          ...state,\n          load: payload,\n          loading: false,\n        }\n      case PICKUP_ERROR:\n        return{\n          ...state,\n          error:payload,\n          loading: false,\n        };\n      case PATCH_DROP:\n        return{\n          ...state,\n          load: payload,\n          loading:false,\n        };\n      case DROP_ERROR:\n        return{\n          ...state,\n          load: payload,\n          loading:false,\n        };\n      default:\n        return state;\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}