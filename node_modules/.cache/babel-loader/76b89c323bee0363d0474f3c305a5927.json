{"ast":null,"code":"var _jsxFileName = \"/Users/sunnygill/Dropbox/My Mac (Surinders-MacBook-Pro.local)/Desktop/freightdok/client/src/components/loads/Loaditem.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Moment from 'react-moment';\nimport { connect } from 'react-redux';\nimport { deleteLoad, getLoads, selectLoad, searchLoads } from \"../../actions/load\"; // import LoadPickup from './LoadPickup';\n// import LoadDrop from './LoadDrop';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell'; // import TableContainer from '@material-ui/core/TableContainer';\n\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow'; // import Paper from '@material-ui/core/Paper';\n\nimport Badge from '@material-ui/core/Badge';\nimport IconButton from '@material-ui/core/IconButton';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport Collapse from '@material-ui/core/Collapse';\nimport Box from '@material-ui/core/Box';\nimport { Typography } from '@material-ui/core';\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport LoadDetailModal from './LoadDetailModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StyledBadge = withStyles(theme => ({\n  badge: {\n    right: -7,\n    top: 0,\n    border: `2px solid ${theme.palette.background.paper}`,\n    padding: \"0 4px\"\n  }\n}))(Badge);\n\nconst LoadItem = ({\n  load,\n  search,\n  selectLoad,\n  deleteLoad,\n  getLoads,\n  searchLoads,\n  loads,\n  page,\n  rowsPerPage,\n  user\n}) => {\n  _s();\n\n  const {\n    _id,\n    brokerage,\n    loadNumber,\n    pickup,\n    drop,\n    status,\n    proofDelivery,\n    rateConfirmation,\n    accessorials\n  } = load;\n  const [modalEdit, enableEdit] = useState(false);\n  const pickupState = pickup.map(pickup => pickup.pickupState);\n  const pickupCity = pickup.map(pickup => pickup.pickupCity);\n  const pickupDate = pickup.map(pickup => pickup.pickupDate);\n  const dropState = drop.map(drop => drop.dropState);\n  const dropCity = drop.map(drop => drop.dropCity);\n  const dropDate = drop.map(drop => drop.dropDate);\n  const pickupStateFirst = pickupState[0];\n  const pickupCityFirst = pickupCity[0];\n  const pickDateFirst = pickupDate[0];\n  const dropStateFirst = dropState[0];\n  const dropCityFirst = dropCity[0];\n  const dropDateFirst = dropDate[0];\n  const [open, setOpen] = useState(false);\n\n  const formatDate = date => {\n    const d = new Date(date);\n    const hours = d.getHours();\n    const minutes = d.getMinutes();\n    let time = '';\n\n    if (hours > 0 && hours <= 12) {\n      time = \"\" + hours;\n    } else if (hours > 12) {\n      time = \"\" + (hours - 12);\n    } else if (hours === 0) {\n      time = \"12\";\n    }\n\n    time += minutes < 10 ? \":0\" + minutes : \":\" + minutes;\n    time += hours >= 12 ? \" P.M.\" : \" A.M.\";\n    return [d.getMonth() + 1, d.getDate(), d.getFullYear()].join('/') + ' ' + time;\n  };\n\n  const handleDeleteLoad = async (load_id, e) => {\n    e.stopPropagation();\n    console.log(\"LOAD IS:         \", load_id);\n    await deleteLoad(load_id);\n    const {\n      query,\n      page: sPage,\n      limit\n    } = search;\n    if (!query) getLoads(page, rowsPerPage);else searchLoads(sPage, limit, query);\n  };\n\n  const handleEditLoad = () => {\n    setOpen(true);\n    enableEdit(true);\n    selectLoad({});\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(TableBody, {\n      children: /*#__PURE__*/_jsxDEV(TableRow, {\n        hover: true,\n        onClick: () => {\n          setOpen(true);\n          selectLoad({});\n        },\n        children: [/*#__PURE__*/_jsxDEV(TableCell, {\n          align: \"center\",\n          children: loadNumber\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), pickup.length <= 0 ? /*#__PURE__*/_jsxDEV(Fragment, {\n          children: /*#__PURE__*/_jsxDEV(TableCell, {\n            align: \"center\",\n            children: [pickupCityFirst, \", \", pickupStateFirst]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(TableCell, {\n          align: \"center\",\n          children: /*#__PURE__*/_jsxDEV(StyledBadge, {\n            color: \"primary\",\n            max: 10,\n            badgeContent: pickup.length,\n            children: [pickupCityFirst, \", \", pickupStateFirst]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n          align: \"center\",\n          children: /*#__PURE__*/_jsxDEV(Moment, {\n            format: \"MM/DD\",\n            children: pickDateFirst\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n          children: [dropCityFirst, \", \", dropStateFirst]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n          align: \"center\",\n          children: /*#__PURE__*/_jsxDEV(Moment, {\n            format: \"MM/DD\",\n            children: dropDateFirst\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n            children: /*#__PURE__*/_jsxDEV(EditIcon, {\n              color: \"primary\",\n              onClick: () => handleEditLoad()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), user && (user.role === 'afterhours' || user.role === 'driver') || /*#__PURE__*/_jsxDEV(IconButton, {\n            children: /*#__PURE__*/_jsxDEV(DeleteIcon, {\n              onClick: e => {\n                handleDeleteLoad(_id, e);\n              },\n              style: {\n                color: \"rgb(220, 0, 78)\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 81\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LoadDetailModal, {\n      modalEdit: modalEdit,\n      open: open,\n      load: load,\n      handleClose: () => {\n        setOpen(false);\n        enableEdit(false);\n        selectLoad();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(LoadItem, \"f6VlVbO/5isrIOik0DUX+TOsTMg=\");\n\n_c = LoadItem;\nLoadItem.propTypes = {\n  load: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = ({\n  auth: {\n    user\n  },\n  load: {\n    search\n  }\n}) => ({\n  user,\n  search\n});\n\nexport default connect(mapStateToProps, {\n  deleteLoad,\n  getLoads,\n  selectLoad,\n  searchLoads\n})(LoadItem);\n\nvar _c;\n\n$RefreshReg$(_c, \"LoadItem\");","map":{"version":3,"sources":["/Users/sunnygill/Dropbox/My Mac (Surinders-MacBook-Pro.local)/Desktop/freightdok/client/src/components/loads/Loaditem.js"],"names":["React","Fragment","useState","PropTypes","Moment","connect","deleteLoad","getLoads","selectLoad","searchLoads","withStyles","Table","TableBody","TableCell","TableHead","TableRow","Badge","IconButton","KeyboardArrowDownIcon","KeyboardArrowUpIcon","Collapse","Box","Typography","DeleteIcon","EditIcon","CheckCircleIcon","CancelIcon","LoadDetailModal","StyledBadge","theme","badge","right","top","border","palette","background","paper","padding","LoadItem","load","search","loads","page","rowsPerPage","user","_id","brokerage","loadNumber","pickup","drop","status","proofDelivery","rateConfirmation","accessorials","modalEdit","enableEdit","pickupState","map","pickupCity","pickupDate","dropState","dropCity","dropDate","pickupStateFirst","pickupCityFirst","pickDateFirst","dropStateFirst","dropCityFirst","dropDateFirst","open","setOpen","formatDate","date","d","Date","hours","getHours","minutes","getMinutes","time","getMonth","getDate","getFullYear","join","handleDeleteLoad","load_id","e","stopPropagation","console","log","query","sPage","limit","handleEditLoad","length","role","color","propTypes","object","isRequired","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Fragment, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Moment from 'react-moment';\nimport { connect } from 'react-redux';\nimport { deleteLoad, getLoads, selectLoad, searchLoads } from \"../../actions/load\";\n// import LoadPickup from './LoadPickup';\n// import LoadDrop from './LoadDrop';\nimport { withStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\n// import TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n// import Paper from '@material-ui/core/Paper';\nimport Badge from '@material-ui/core/Badge';\nimport IconButton from '@material-ui/core/IconButton';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport Collapse from '@material-ui/core/Collapse';\nimport Box from '@material-ui/core/Box';\nimport { Typography } from '@material-ui/core';\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\nimport LoadDetailModal from './LoadDetailModal';\n\nconst StyledBadge = withStyles((theme) => ({\n  badge: {\n    right: -7,\n    top: 0,\n    border: `2px solid ${theme.palette.background.paper}`,\n    padding: \"0 4px\",\n  },\n}))(Badge);\nconst LoadItem = ({ load, search, selectLoad, deleteLoad, getLoads, searchLoads, loads, page, rowsPerPage, user }) => {\n  const {_id, brokerage, loadNumber, pickup, drop, status, proofDelivery, rateConfirmation, accessorials } = load;\n  const [modalEdit, enableEdit] = useState(false);\n  const pickupState = pickup.map((pickup) => pickup.pickupState);\n  const pickupCity = pickup.map((pickup) => pickup.pickupCity);\n  const pickupDate = pickup.map((pickup) => pickup.pickupDate);\n\n  const dropState = drop.map((drop) => drop.dropState);\n  const dropCity = drop.map((drop) => drop.dropCity);\n  const dropDate = drop.map((drop) => drop.dropDate);\n\n  const pickupStateFirst = pickupState[0];\n  const pickupCityFirst = pickupCity[0];\n  const pickDateFirst = pickupDate[0];\n\n  const dropStateFirst = dropState[0];\n  const dropCityFirst = dropCity[0];\n  const dropDateFirst = dropDate[0];\n\n  const [open,setOpen] = useState(false);\n\n  const formatDate = (date) => {\n    const d = new Date(date);\n    const hours = d.getHours();\n    const minutes = d.getMinutes();\n    let time = '';\n\n    if(hours > 0 && hours <= 12){\n      time = \"\" + hours;\n    }else if (hours > 12){\n      time = \"\" + (hours - 12);\n    }else if (hours === 0){\n      time = \"12\";\n    }\n\n    time += (minutes < 10 ) ? \":0\" + minutes : \":\" + minutes;\n    time += (hours >= 12) ? \" P.M.\" : \" A.M.\";\n\n    return [d.getMonth()+1,d.getDate(),d.getFullYear()].join('/')+ ' ' + time;\n  }\n\n  const handleDeleteLoad = async (load_id, e) => {\n    e.stopPropagation();\n    console.log(\"LOAD IS:         \", load_id)\n    await deleteLoad(load_id);\n    const { query, page: sPage, limit } = search;\n    if (!query)\n      getLoads(page, rowsPerPage);\n    else\n      searchLoads(sPage, limit, query);\n  };\n\n  const handleEditLoad = () => {\n    setOpen(true);\n    enableEdit(true);\n    selectLoad({});\n  };\n\n  return (\n    <>\n      <TableBody>\n        <TableRow \n        hover={true} \n        onClick={()=>{\n          setOpen(true);\n          selectLoad({});\n        }}>\n          \n          <TableCell align=\"center\">{loadNumber}</TableCell>\n          \n          {pickup.length <= 0 ? (\n            <Fragment>\n              <TableCell align=\"center\">{pickupCityFirst}, {pickupStateFirst}</TableCell>\n            </Fragment>\n          ) : (\n            <TableCell align=\"center\">\n              <StyledBadge color=\"primary\" max={10} badgeContent={pickup.length}>\n                {pickupCityFirst}, {pickupStateFirst}\n              </StyledBadge>\n            </TableCell>\n          )}\n          \n          <TableCell align=\"center\">\n            <Moment format='MM/DD'>{pickDateFirst}</Moment>\n          </TableCell>\n          \n          <TableCell>\n            {dropCityFirst}, {dropStateFirst}\n          </TableCell>\n          \n          <TableCell align=\"center\">\n            <Moment format='MM/DD'>{dropDateFirst}</Moment>\n          </TableCell>\n\n          <TableCell>\n            <IconButton>\n              <EditIcon color=\"primary\" onClick={() => handleEditLoad()}/>\n            </IconButton>\n            { user && (user.role === 'afterhours' || user.role === 'driver') || <IconButton >\n              <DeleteIcon  onClick={(e) => { handleDeleteLoad(_id, e);}} style={{ color: \"rgb(220, 0, 78)\" }} />\n            </IconButton> }\n          </TableCell>\n\n          {/* <TableCell></TableCell> */}\n        </TableRow>        \n      </TableBody>\n      <LoadDetailModal \n      modalEdit={modalEdit}\n      open={open}\n      load={load} \n      handleClose={()=>{\n        setOpen(false);\n        enableEdit(false);\n        selectLoad();\n      }}/>\n    </>\n  );\n};\n\nLoadItem.propTypes = {\n  load: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = ({ auth: { user }, load: { search } }) => ({ user, search });\n\nexport default connect(\n  mapStateToProps,\n  { deleteLoad, getLoads, selectLoad, searchLoads }\n)(LoadItem)"]},"metadata":{},"sourceType":"module"}