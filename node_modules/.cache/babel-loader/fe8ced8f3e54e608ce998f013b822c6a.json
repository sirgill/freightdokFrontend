{"ast":null,"code":"var _jsxFileName = \"/Users/sunnygill/Dropbox/My Mac (Surinders-MacBook-Pro.local)/Desktop/freightdokFrontend/client/src/components/loads/Loads.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect, useSelector } from \"react-redux\";\nimport { getLoads, searchLoads } from \"../../actions/load\";\nimport LoadItem from \"./Loaditem\";\nimport Spinner from \"../layout/Spinner\";\nimport TableRow from '@material-ui/core/TableRow';\nimport TableFooter from '@material-ui/core/TableFooter';\nimport TablePagination from '@material-ui/core/TablePagination';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Loads = ({\n  getLoads,\n  searchLoads,\n  load: {\n    loads,\n    loading,\n    loads_pagination,\n    page,\n    rowsPerPage,\n    search\n  }\n}) => {\n  _s();\n\n  const {\n    total\n  } = loads_pagination;\n  const {\n    query,\n    loads: sLoads,\n    page: sPage,\n    limit,\n    total: sTotal\n  } = search;\n  const {\n    user\n  } = useSelector(state => state.auth);\n  const [rawLoades, setRawLoads] = useState([]);\n  useEffect(() => {\n    if (query) searchLoads(sPage, limit, query);else getLoads(page, rowsPerPage);\n  }, []);\n  useEffect(() => {\n    if (user && user.role === 'load planner') {\n      const filterredLoads = loads.filter(item => {\n        if (!item.assignedTo) {\n          return item;\n        }\n      });\n      setRawLoads(filterredLoads);\n    } else {\n      setRawLoads(loads);\n    }\n  }, [loads]);\n\n  const handleChangePage = (event, newPage) => {\n    console.log(newPage, query);\n    if (query) searchLoads(newPage, limit, query);else getLoads(newPage, rowsPerPage);\n  };\n\n  const handleChangeRowsPerPage = event => {\n    const limit = event.target.value;\n    if (query) searchLoads(0, limit, query);else getLoads(0, limit);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [\" \", loading ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Fragment, {\n      children: [!query && rawLoades.length ? rawLoades.map(l => /*#__PURE__*/_jsxDEV(LoadItem, {\n        load: l,\n        loads: rawLoades,\n        page: page,\n        rowsPerPage: rowsPerPage\n      }, l._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 36\n      }, this)) : query && sLoads.length ? sLoads.map(l => /*#__PURE__*/_jsxDEV(LoadItem, {\n        load: l,\n        loads: rawLoades,\n        page: sPage,\n        rowsPerPage: limit\n      }, l._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 33\n      }, this)) : '', !query && !rawLoades.length || query && !sLoads.length ? /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"No loads\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 76\n      }, this) : '', /*#__PURE__*/_jsxDEV(TableFooter, {\n        children: /*#__PURE__*/_jsxDEV(TableRow, {\n          children: !query && rawLoades.length ? /*#__PURE__*/_jsxDEV(TablePagination, {\n            rowsPerPageOptions: [],\n            colSpan: 3,\n            count: total,\n            rowsPerPage: +rowsPerPage,\n            page: page,\n            SelectProps: {\n              inputProps: {\n                'aria-label': 'rows per page'\n              },\n              native: true\n            },\n            onChangePage: handleChangePage,\n            onChangeRowsPerPage: handleChangeRowsPerPage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 50\n          }, this) : query && sLoads.length ? /*#__PURE__*/_jsxDEV(TablePagination, {\n            rowsPerPageOptions: [],\n            colSpan: 3,\n            count: sTotal,\n            rowsPerPage: +limit,\n            page: sPage,\n            SelectProps: {\n              inputProps: {\n                'aria-label': 'rows per page'\n              },\n              native: true\n            },\n            onChangePage: handleChangePage,\n            onChangeRowsPerPage: handleChangeRowsPerPage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 49\n          }, this) : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Loads, \"yZ5agnNLwlztwQ+VuN6fwnDtxNc=\", false, function () {\n  return [useSelector];\n});\n\n_c = Loads;\nLoads.propTypes = {\n  getLoads: PropTypes.func.isRequired,\n  load: PropTypes.object.isRequired,\n  searchLoads: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  load: state.load,\n  driver: state.driver\n});\n\nexport default connect(mapStateToProps, {\n  getLoads,\n  searchLoads\n})(Loads);\n\nvar _c;\n\n$RefreshReg$(_c, \"Loads\");","map":{"version":3,"sources":["/Users/sunnygill/Dropbox/My Mac (Surinders-MacBook-Pro.local)/Desktop/freightdokFrontend/client/src/components/loads/Loads.js"],"names":["React","Fragment","useEffect","useState","PropTypes","connect","useSelector","getLoads","searchLoads","LoadItem","Spinner","TableRow","TableFooter","TablePagination","Loads","load","loads","loading","loads_pagination","page","rowsPerPage","search","total","query","sLoads","sPage","limit","sTotal","user","state","auth","rawLoades","setRawLoads","role","filterredLoads","filter","item","assignedTo","handleChangePage","event","newPage","console","log","handleChangeRowsPerPage","target","value","length","map","l","_id","inputProps","native","propTypes","func","isRequired","object","mapStateToProps","driver"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect, useSelector } from \"react-redux\";\nimport { getLoads, searchLoads } from \"../../actions/load\";\nimport LoadItem from \"./Loaditem\";\nimport Spinner from \"../layout/Spinner\";\nimport TableRow from '@material-ui/core/TableRow';\nimport TableFooter from '@material-ui/core/TableFooter';\nimport TablePagination from '@material-ui/core/TablePagination';\n\nconst Loads = ({ getLoads, searchLoads, load: { loads, loading, loads_pagination, page, rowsPerPage, search } }) => {\n  const { total } = loads_pagination;\n  const { query, loads: sLoads, page: sPage, limit, total: sTotal } = search;\n  const { user } = useSelector(state => state.auth);\n  const [rawLoades, setRawLoads] = useState([]);\n  \n  useEffect(() => {\n    if (query)\n      searchLoads(sPage, limit, query);\n    else \n      getLoads(page, rowsPerPage);\n  }, []);\n\n  useEffect(() => {\n    if (user && user.role === 'load planner') {\n      const filterredLoads = loads.filter(item => {\n        if (!item.assignedTo) {\n          return item;\n        }\n      });\n      setRawLoads(filterredLoads);\n    } else {\n      setRawLoads(loads)\n    }\n  }, [loads])\n\n  const handleChangePage = (event, newPage) => {\n    console.log(newPage, query)\n    if (query)\n      searchLoads(newPage, limit, query);\n    else\n      getLoads(newPage, rowsPerPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    const limit = event.target.value;\n    if (query)\n      searchLoads(0, limit, query);\n    else\n      getLoads(0, limit);\n  };\n\n  return (\n    <Fragment>\n      {\" \"}\n      {loading ? (\n        <Spinner />\n      ) : (\n        <Fragment>\n\n            { !query && rawLoades.length ? (\n              rawLoades.map((l) => <LoadItem key={l._id} load={l} loads={rawLoades} page={page} rowsPerPage={rowsPerPage} />)\n            ) : query && sLoads.length ? (\n              sLoads.map((l) => <LoadItem key={l._id} load={l} loads={rawLoades} page={sPage} rowsPerPage={limit} />)\n            ) : ''}\n\n            { (!query && !rawLoades.length) || (query && !sLoads.length) ? <h4>No loads</h4> : '' }\n\n            <TableFooter>\n              <TableRow>\n                { (!query && rawLoades.length) ? <TablePagination\n                  rowsPerPageOptions={[]}\n                  colSpan={3}\n                  count={total}\n                  rowsPerPage={+rowsPerPage}\n                  page={page}\n                  SelectProps={{\n                    inputProps: { 'aria-label': 'rows per page' },\n                    native: true,\n                  }}\n                  onChangePage={handleChangePage}\n                  onChangeRowsPerPage={handleChangeRowsPerPage}\n                /> : (query && sLoads.length) ? <TablePagination\n                  rowsPerPageOptions={[]}\n                  colSpan={3}\n                  count={sTotal}\n                  rowsPerPage={+limit}\n                  page={sPage}\n                  SelectProps={{\n                    inputProps: { 'aria-label': 'rows per page' },\n                    native: true,\n                  }}\n                  onChangePage={handleChangePage}\n                  onChangeRowsPerPage={handleChangeRowsPerPage}\n                />: '' }\n              </TableRow>\n            </TableFooter>\n        </Fragment>\n      )}\n    </Fragment>\n  );\n};\n\nLoads.propTypes = {\n  getLoads: PropTypes.func.isRequired,\n  load: PropTypes.object.isRequired,\n  searchLoads: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  load: state.load,\n  driver: state.driver\n});\n\nexport default connect(mapStateToProps, { getLoads, searchLoads })(Loads);\n"]},"metadata":{},"sourceType":"module"}