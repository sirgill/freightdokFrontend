(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[19],{1046:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(15),o=n(0),i=n(271),c=n(17),s=n(207),d=n(467),l=n(969),u=n(95),f=n(254),b=n(286),v=n(148),j=n(279),p=n(421),m=n.n(p),O=n(420),h=n.n(O),g=function(e){var t=e||{},n=t.bidAmount,a=void 0===n?"":n,r=t.offerStatus,o=t.vendorName,i=t.event_data,c=void 0===i?{}:i,s=t.loadDetail,d=(void 0===s?{}:s).client,l=(void 0===d?{}:d).client_name,u=void 0===l?"":l,f=c.counter_offer,b=void 0===f?{}:f,v=b.expired_at,j=void 0===v?"":v,p=b.id,m=c.offer,O=(void 0===m?{}:m).external_id,h=a.includes(",")?a.split(","):a;return{amount:Array.isArray(h)?h[h.length-1]:h,offerStatus:r,vendorName:o,external_id:O,expired_at:j,counterOfferId:p,client_name:u}},x=n(20),y=n(37),w=n(61),C=n(34),D=n(100),N=Object(D.d)().user,S=(void 0===N?{}:N).orgId,_=function(){var e=Object(y.a)(Object(x.a)().mark((function e(t,n){var a,r;return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(w.d)({uri:Object(C.c)()+"/newTrulCounterOffer?orgId="+S,body:t});case 3:a=e.sent,r=a.data,n&&n(r),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(y.a)(Object(x.a)().mark((function e(t){return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(w.c)({uri:Object(C.c)()+"/newtrulUpdateOfferStatus?orgId="+S,body:t});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(y.a)(Object(x.a)().mark((function e(t){return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(w.d)({uri:Object(C.c)()+"/newTrulFinalOffer?orgId="+S,body:t});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),k=n(105),E=n(32),F=n(376),z=n(276),L=n(291),M=n(3),Y=void 0,T=function(e){var t=e.value,n=e.name,a=e.handleChange,i=Object(o.useState)(t),c=Object(r.a)(i,2),s=c[0],d=c[1];return Object(o.useEffect)((function(){a&&a({name:n,value:s})}),[s,n,a]),Object(M.jsxs)(o.Fragment,{children:[Object(M.jsx)(f.a,{onClick:function(){s>0&&d(s-1)},disabled:s<=0,children:Object(M.jsx)(h.a,{})}),Object(M.jsx)("div",{className:"dollarInput",children:Object(M.jsx)(j.a,{name:"bidAmount",label:"Amount ($)",onChange:function(e){var t=e.target.value;d(t)},type:"number",value:s,className:""})}),Object(M.jsx)(f.a,{onClick:function(){d(parseInt(s)+1)},children:Object(M.jsx)(m.a,{})})]})},P=["final_offer_created","accepted"],A=function(e){var t=e.location,n=(void 0===t?{}:t).state,a=void 0===n?{}:n,i=e.history,c=e.onCloseUrl,f=e.onRefresh,j=a.loadNumber,p=void 0===j?"":j,m=a.vendorName,O=void 0===m?"":m,h=Object(o.useState)("0.00"),x=Object(r.a)(h,2),y=x[0],w=x[1],C=Object(z.a)("/api/bid/deleteBidByLoadNumber/"+p,K).mutation,N=Object(o.useState)({amount:0}),S=Object(r.a)(N,2),A=S[0],q=S[1],B=(null===a||void 0===a?void 0:a.offerStatus)||"",U=P.some((function(e){return e.equalsIgnoreCase(B)}))||!1,$=B.equalsIgnoreCase("COUNTER_OFFER_CREATED"),H=O.equalsIgnoreCase("c.h. robinson"),V=!!A.offerStatus,J=A.client_name,W=H&&B.equalsIgnoreCase("notconsidered");Object(o.useEffect)((function(){if(O.equalsIgnoreCase("new trul")){var e=g(a);w(e.amount),q(e)}else if(H){var t=function(e){var t=e||{},n=t.bidAmount,a=void 0===n?"":n,r=t.offerStatus,o=t.vendorName,i=t.event_data;return{amount:a,offerStatus:r,vendorName:o,event_data:void 0===i?{}:i}}(a);q(t),w(t.amount)}}),[a,O]);var G=function(e){e.error?Object(E.a)(e.message,"error"):i.goBack()};function K(e,t){e?(G({}),Object(E.a)("Bid success for Load number",p)):Object(E.a)(t.message,"error")}var Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={offerId:A.counterOfferId,mcNumber:k.c,carrierMail:k.a,status:e};if(U){if(O.equalsIgnoreCase("c.h. robinson")){if("reject"===e)return C({},"delete");var n=(new Date).toDateString(),r=(new Date).toTimeString(),o=a.loadDetail.availableLoadCosts[0]||{},s=o.type,d=o.code,l=o.description,u=o.units,b=o.currencyCode,v={carrierCode:k.h.carrierCode,loadNumber:Number(p),emptyDateTime:new Date(n+" "+r).toISOString(),availableLoadCosts:[{type:s,code:d,description:l,units:u,currencyCode:b,sourceCostPerUnit:Number(y)}],emptyLocation:{city:"Greenwood",state:"IN",country:"NA",zip:"46143"},rateConfirmation:{email:Object(D.d)().user.email,name:Object(D.d)().user.name}};return Object(F.b)(p,v,K)}I(t).then((function(e){"error"===e.data.status&&Object(E.a)(e.data.message,"error")})).catch((function(e){return console.log(e)}))}else R(t).then((function(e){"error"===e.data.status?Object(E.a)(e.data.message,"error"):e.data.status.equalsIgnoreCase("success")&&(f&&f(),i.push(c))})).catch((function(e){return console.log(e)}))};return Object(M.jsx)(b.a,{children:Object(M.jsx)(s.a,{sx:{px:3},justifyContent:"center",display:"flex",children:Object(M.jsxs)("form",{onSubmit:function(){},style:{textAlign:"center"},className:"form_bidding",children:[Object(M.jsx)(u.a,{sx:{fontSize:32},children:J||O||"--"}),Object(M.jsxs)(u.a,{sx:{fontSize:32},children:["Load Number: ",p]}),U&&Object(M.jsx)(u.a,{fontSize:18,sx:{my:3},children:"Final Offer: $".concat(A.amount)}),$&&Object(M.jsx)(u.a,{fontSize:18,children:"Offer: $".concat(A.amount)}),Object(M.jsxs)(d.a,{gap:2,direction:"row",justifyContent:"center",my:2,children:[Object(M.jsx)(l.a,{variant:"contained",color:"success",sx:{px:5},onClick:Q.bind(Y,"accept"),disabled:!V,children:"Accept"}),Object(M.jsx)(l.a,{variant:"contained",color:"error",sx:{px:5},onClick:Q.bind(Y,"reject"),disabled:!V,children:W?"Delete":"Reject"})]}),H&&!V?Object(M.jsx)(L.a,{config:{open:!0,message:"We are waiting for the response on this bid.",severity:"info"}}):null,!U&&!H&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(u.a,{children:"OR"}),Object(M.jsx)(d.a,{direction:"row",sx:{py:2},alignItems:"end",gap:"10px",justifyContent:"center",children:Object(M.jsx)(T,{value:y,handleChange:function(e){var t=e.value;w(t)}})}),Object(M.jsx)(l.a,{variant:"contained",color:"primary",sx:{px:2,py:.5,fontSize:14},onClick:function(){if(O.equalsIgnoreCase("new trul")){var e={offerId:A.counterOfferId,external_id:Object(v.a)(),offer_amount:y,expired_at:A.expired_at,mcNumber:k.c,carrierMail:k.a};A.offerStatus.equalsIgnoreCase("COUNTER_OFFER_CREATED")&&_(e,G)}},children:$?"Submit Counter":"Submit Bid"})]})]})})})},q=Object(o.memo)(A,(function(){return!0})),B=n(520),U=n(344),$=n(82),H=n.n($),V=function(e){var t=e.history,n=e.path,i=e.totalCount;return{rowCellPadding:"normal",size:"small",emptyMessage:"No Bids Found",showRefresh:!0,onPageChange:e.onPageChange,page:e.page-1,limit:e.limit,onRowClick:function(e){var t=e.loadNumber,a=e.vendorName;return"new trul"===(void 0===a?"":a).toLowerCase()?"".concat(n,"/newtrul/").concat(t):"".concat(n,"/").concat(t)},onRowClickDataCallback:function(e){return e.loadDetail||{}},count:i,rowStyleCb:function(e){var t=e.row,n=t.bidLevel,a=t.status;return 2===n?{borderLeft:"5px solid #ffeaa7"}:1===n?{borderLeft:a?"5px solid #00b894":"5px solid #e74c3c"}:void 0},columns:[{id:"loadNumber",label:"Load Number"},{id:"pickup",label:"Pickup City/State",renderer:function(e){var t,n,a,i,c=e.row,s=c.loadDetail,d=void 0===s?{}:s;if("c.h. robinson"===(null===(t=c.vendorName)||void 0===t?void 0:t.toLowerCase()))return"".concat(null===d||void 0===d||null===(a=d.origin)||void 0===a?void 0:a.city,", ").concat(null===d||void 0===d||null===(i=d.origin)||void 0===i?void 0:i.stateCode);var l=(null===c||void 0===c||null===(n=c.loadDetail)||void 0===n?void 0:n.stops)||[],u=Object(r.a)(l,2),f=(u[0],(u[1]||{}).geo||{}),b=f.city,v=void 0===b?"":b,j=f.state,p=void 0===j?"":j;return v||p?Object(M.jsxs)(o.Fragment,{children:[v,", ",p]}):"--"}},{id:"",label:"PickUp Date",renderer:function(e){var t,n,a=e.row,i=(null===a||void 0===a||null===(t=a.loadDetail)||void 0===t?void 0:t.stops)||[{}],c=Object(r.a)(i,2),s=(c[0],c[1]);if("C.H. Robinson"===a.vendorName)return H()(a.loadDetail.pickUpByDate).format("M/DD/YYYY");if(s){var d=(s||{}).early_datetime,l=void 0===d?"":d;return l?H()(l).format("M/DD/YYYY"):"--"}var u=(s||{}).early_datetime,f=void 0===u?"":u;return n=f?H()(f).format("M/DD/YYYY"):"--",Object(M.jsx)(o.Fragment,{children:n})}},{id:"",label:"Delivery City / State",renderer:function(e){var t,n,a,i=e.row,c=void 0===i?{}:i,s=c.loadDetail,d=void 0===s?{}:s;if("c.h. robinson"===(null===(t=c.vendorName)||void 0===t?void 0:t.toLowerCase()))return"".concat(null===d||void 0===d||null===(n=d.destination)||void 0===n?void 0:n.city,", ").concat(null===d||void 0===d||null===(a=d.destination)||void 0===a?void 0:a.stateCode);var l=d.stops||[],u=(Object(r.a)(l,1)[0]||{}).geo||{},f=u.city,b=void 0===f?"":f,v=u.state,j=void 0===v?"":v;return b||j?Object(M.jsxs)(o.Fragment,{children:[b,", ",j]}):"--"}},{id:"deliveryDate",label:"Delivery Date",renderer:function(e){var t,n,a,o=e.row;if(null!==(t=o.loadDetail)&&void 0!==t&&t.deliverBy)return H()(null===(a=o.loadDetail)||void 0===a?void 0:a.deliverBy).format("M/DD/YYYY");var i=(null===o||void 0===o||null===(n=o.loadDetail)||void 0===n?void 0:n.stops)||[],c=Object(r.a)(i,2),s=c[0],d=(c[1],(s||{}).early_datetime);return d?H()(d).format("M/DD/YYYY"):"--"}},{id:"equipment",label:"Equipment",renderer:function(e){var t=e.row,n=t.loadDetail||{},a=n.equipment,r=n.vendorName;if("chrobinson"===(void 0===r?"":r).toLowerCase()){var i=Object(k.g)(t.loadDetail||{}),c=i.modesString,s=void 0===c?"":c,d=i.standard,l=void 0===d?"":d;return Object(M.jsxs)(o.Fragment,{children:[s," ",l]})}return"string"===typeof a?Object(M.jsx)(o.Fragment,{children:a}):"--"}},{id:"",label:"Weight",renderer:function(e){var t=e.row,n=(t.loadDetail||{}).weight;if("number"===typeof n)return Object(M.jsxs)(o.Fragment,{children:[n," lbs"]});if(null!==n&&void 0!==n&&n.pounds){var a=(t.loadDetail||{}).weight,r=(void 0===a?{}:a).pounds,i=void 0===r?"":r;return i&&(i+=" lbs"),i}return"--"}},{id:"vendorName",label:"Company",renderer:function(e){var t=e.row,n=t.loadDetail,a=(void 0===n?{}:n).client,r=void 0===a?{}:a;return r.client_name?r.client_name:t.vendorName||""}},{id:"status",label:"Bid Status",renderer:function(e){var t,n=e.row,a=(g(n)||{}).offerStatus,r=(void 0===a?"":a).toLowerCase().includes("rejected");return"C.H. Robinson"===n.vendorName&&n.offerStatus?n.offerStatus:Object(M.jsx)(o.Fragment,{children:n.status?"Accepted":r?"Rejected":(t=n.bidLevel,2===t?"Counter":1===t?"Pending":"Final Offer")})}},{id:"Bidding",label:"Bid",renderer:function(e){var r=e.row,i=(r||{}).vendorName,c=void 0===i?"":i,s=n+"/bid/".concat(r.loadNumber),d=(g(r)||{}).offerStatus,u=void 0===d?"":d,f=(u.equalsIgnoreCase("COUNTER_OFFER_CREATED"),u.equalsIgnoreCase("final_offer_created"),u.toLowerCase().includes("rejected"));return c.toLowerCase(),Object(M.jsx)(o.Fragment,{children:!f&&Object(M.jsx)(l.a,{variant:"contained",color:"primary",onClick:function(e){e.stopPropagation(),t.push(s,Object(a.a)({},r))},children:"View"})})}}]}},J=n(521);t.default=function(){var e=Object(c.useRouteMatch)().path,t=Object(c.useHistory)(),n=Object(o.useState)({page:1,limit:10}),s=Object(r.a)(n,2),d=s[0],l=s[1],u=d.page,f=d.limit,b=Object(U.a)("/api/bid/biddings?page=".concat(u,"&limit=").concat(f)),v=b.data,j=void 0===v?{}:v,p=b.loading,m=void 0===p||p,O=b.refetch,h=b.isRefetching,g=j||{},x=g.data,y=void 0===x?[]:x,w=g.totalCount,C=void 0===w?0:w,D=g.message;Object(o.useEffect)((function(){var e=setInterval((function(){O()}),5e3);return function(){return clearInterval(e)}}),[u,f,O]);return D?Object(M.jsx)(J.a,{message:D}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(i.a,{config:V({history:t,path:e,totalCount:C,onPageChange:function(e,t){l((function(e){return Object(a.a)(Object(a.a)({},e),{},{page:t})}))},page:u,limit:f}),data:y,loading:m,onRefetch:O,isRefetching:h}),Object(M.jsxs)(c.Switch,{children:[Object(M.jsx)(c.Route,{path:e+"/bid/:loadNumber",render:function(t){return Object(M.jsx)(q,Object(a.a)(Object(a.a)({},t),{},{onCloseUrl:e,onRefresh:O}))}}),Object(M.jsx)(c.Route,{path:e+"/newtrul/:loadId",render:function(e){return Object(M.jsx)(B.a,Object(a.a)(Object(a.a)({},e),{},{callDetail:!1}))}})]})]})}},280:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l}));var a,r=n(14),o=n.n(r);function i(e,t){return void 0===e&&(e=""),void 0===t&&(t=a),t?e.split(" ").map((function(e){return t[e]||e})).join(" "):e}var c={};function s(e){c[e]||("undefined"!==typeof console&&console.error(e),c[e]=!0)}var d="object"===typeof window&&window.Element||function(){};o.a.oneOfType([o.a.string,o.a.func,function(e,t,n){if(!(e[t]instanceof d))return new Error("Invalid prop `"+t+"` supplied to `"+n+"`. Expected prop to be an instance of Element. Validation failed.")},o.a.shape({current:o.a.any})]);var l=o.a.oneOfType([o.a.func,o.a.string,o.a.shape({$$typeof:o.a.symbol,render:o.a.func}),o.a.arrayOf(o.a.oneOfType([o.a.func,o.a.string,o.a.shape({$$typeof:o.a.symbol,render:o.a.func})]))]);"undefined"===typeof window||!window.document||window.document.createElement},292:function(e,t,n){"use strict";var a=n(96);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(99)),o=n(3),i=(0,r.default)((0,o.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");t.default=i},344:function(e,t,n){"use strict";var a=n(15),r=n(0),o=n(61);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(r.useState)(null),i=Object(a.a)(n,2),c=i[0],s=i[1],d=Object(r.useState)(!1),l=Object(a.a)(d,2),u=l[0],f=l[1],b=Object(r.useState)(null),v=Object(a.a)(b,2),j=v[0],p=v[1],m=Object(r.useState)(!1),O=Object(a.a)(m,2),h=O[0],g=O[1];function x(){Object(o.b)({uri:e,callback:t,showTriggers:!1}).then((function(e){e.data&&s(e.data)})).finally((function(){f(!1),g(!1)}))}return Object(r.useEffect)((function(){f(!0),s(null),p(null),x()}),[e]),{data:c,loading:u,error:j,refetch:function(){g(!0),x()},isRefetching:h}}},418:function(e,t,n){"use strict";var a=n(1),r=n(5),o=n(69),i=n(21),c=n(0),s=n.n(c),d=n(14),l=n.n(d),u=n(272),f=n.n(u),b=n(280),v=["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"],j={children:l.a.node,type:l.a.string,size:l.a.oneOfType([l.a.number,l.a.string]),bsSize:l.a.string,valid:l.a.bool,invalid:l.a.bool,tag:b.b,innerRef:l.a.oneOfType([l.a.object,l.a.func,l.a.string]),plaintext:l.a.bool,addon:l.a.bool,className:l.a.string,cssModule:l.a.object},p=function(e){function t(t){var n;return(n=e.call(this,t)||this).getRef=n.getRef.bind(Object(o.a)(n)),n.focus=n.focus.bind(Object(o.a)(n)),n}Object(i.a)(t,e);var n=t.prototype;return n.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},n.focus=function(){this.ref&&this.ref.focus()},n.render=function(){var e=this.props,t=e.className,n=e.cssModule,o=e.type,i=e.bsSize,c=e.valid,d=e.invalid,l=e.tag,u=e.addon,j=e.plaintext,p=e.innerRef,m=Object(r.a)(e,v),O=["radio","checkbox"].indexOf(o)>-1,h=new RegExp("\\D","g"),g=l||("select"===o||"textarea"===o?o:"input"),x="form-control";j?(x+="-plaintext",g=l||"input"):"file"===o?x+="-file":"range"===o?x+="-range":O&&(x=u?null:"form-check-input"),m.size&&h.test(m.size)&&(Object(b.c)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),i=m.size,delete m.size);var y=Object(b.a)(f()(t,d&&"is-invalid",c&&"is-valid",!!i&&"form-control-"+i,x),n);return("input"===g||l&&"function"===typeof l)&&(m.type=o),m.children&&!j&&"select"!==o&&"string"===typeof g&&"select"!==g&&(Object(b.c)('Input with a type of "'+o+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete m.children),s.a.createElement(g,Object(a.a)({},m,{ref:p,className:y,"aria-invalid":d}))},t}(s.a.Component);p.propTypes=j,p.defaultProps={type:"text"},t.a=p},419:function(e,t,n){"use strict";var a=n(1),r=n(5),o=n(0),i=n.n(o),c=n(14),s=n.n(c),d=n(272),l=n.n(d),u=n(280),f=["className","cssModule","row","disabled","check","inline","tag"],b={children:s.a.node,row:s.a.bool,check:s.a.bool,inline:s.a.bool,disabled:s.a.bool,tag:u.b,className:s.a.string,cssModule:s.a.object},v=function(e){var t=e.className,n=e.cssModule,o=e.row,c=e.disabled,s=e.check,d=e.inline,b=e.tag,v=Object(r.a)(e,f),j=Object(u.a)(l()(t,!!o&&"row",s?"form-check":"form-group",!(!s||!d)&&"form-check-inline",!(!s||!c)&&"disabled"),n);return"fieldset"===b&&(v.disabled=c),i.a.createElement(b,Object(a.a)({},v,{className:j}))};v.propTypes=b,v.defaultProps={tag:"div"},t.a=v},420:function(e,t,n){"use strict";var a=n(96);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(99)),o=n(3),i=(0,r.default)((0,o.jsx)("path",{d:"M19 13H5v-2h14v2z"}),"Remove");t.default=i},421:function(e,t,n){"use strict";var a=n(96);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(99)),o=n(3),i=(0,r.default)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.default=i}}]);
//# sourceMappingURL=19.113001bc.chunk.js.map