(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[11],{1100:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(233),c=a(11),o=a(1),i=a.n(o),s=a(57),l=a(45),u=a(357),d=a(36),b=a.n(d),j=a(78),O=a(19),m=a(30),p=a(4),h=a(348),f=a(59),x=a.n(f),v=a(63),g=a(355),N=a(37),w=a(103),C=a(354),y=a(26),P=a(42),k=a(162),S=a(2),F=function(e){var t=e.firstName,a=e.lastName,n=e.phoneNumber,r={};return t||(r.firstName="Please provide the First Name"),a||(r.lastName="Please provide the Last Name"),n||(r.phoneNumber="Please provide the Phone Number"),r},E={firstName:"",lastName:"",phoneNumber:""},T=function(e){var t=e.history,a=e.match,s=(void 0===a?{}:a).params,l=(void 0===s?{}:s).id,u=void 0===l?"":l,d=e.onCloseUrl,f=Object(o.useState)([]),T=Object(c.a)(f,2),B=T[0],L=T[1],R=i.a.useState(E),U=Object(c.a)(R,2),A=U[0],M=U[1],W=Object(o.useState)(E),_=Object(c.a)(W,2),D=_[0],J=_[1],H=Object(k.a)("/api/ownerOperator"),q=H.mutation,z=H.loading,G=function(e){var t=e.target,a=void 0===t?{}:t,r=a.name,c=a.value;M(Object(n.a)(Object(n.a)({},A),{},Object(p.a)({},r,c)))},I=Object(o.useMemo)((function(){return(B||[]).filter((function(e){return"owneroperator"===e.role.toLowerCase()}))}),[B]);Object(o.useEffect)((function(){u&&b.a.get(Object(j.c)()+"/api/ownerOperator/"+u).then((function(e){var t=e.data,a=(void 0===t?{}:t).data,n=void 0===a?{}:a;n&&M(n)})).catch((function(e){Object(y.a)(e.message)})),x.a.isEmpty(I)&&b.a.get("/api/users?page=".concat(0,"&limit=",0)).then((function(e){L(e.data.users)})).catch((function(e){console.log(e.message),Object(y.a)(e.message,"error")}))}),[u,I]);var K=function(e,t){t&&J(Object(n.a)(Object(n.a)({},D),{},Object(p.a)({},e,"")))},Q=function(){var e=Object(m.a)(Object(O.a)().mark((function e(t){var a,r,c,o,i,s;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=Object(n.a)({},A),r=F(a),!x.a.isEmpty(r)){e.next=13;break}return e.next=6,q(a);case 6:c=e.sent,o=c.success,i=c.data,s=(i||{}).message,o?(Object(y.a)(s||"Owner operator created"),V(),setTimeout((function(){Object(P.j)("refreshOwnerOp")}),500)):Object(y.a)(s,"error"),e.next=14;break;case 13:J(Object(n.a)({},r));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){t.push(d)};return Object(S.jsxs)(C.a,{fullWidth:!1,maxWidth:"md",open:!0,onClose:V,"aria-labelledby":"form-dialog-title",PaperProps:{sx:{width:400}},children:[Object(S.jsxs)(h.a,{id:"form-dialog-title",sx:{color:v.b,textAlign:"center",fontWeight:400,letterSpacing:1},children:[u?"Edit":"Add"," Owner Operator"]}),Object(S.jsx)(g.a,{children:Object(S.jsx)("div",{className:"",children:Object(S.jsxs)("form",{className:"",children:[Object(S.jsxs)("div",{children:[Object(S.jsx)(N.a,{name:"firstName",label:"First Name",onChange:G,value:A.firstName||"",errorText:D.firstName,onBlur:K}),Object(S.jsx)(N.a,{name:"lastName",label:"Last Name",onChange:G,value:A.lastName||"",errorText:D.lastName,onBlur:K}),Object(S.jsx)(N.a,{name:"phoneNumber",label:"Phone Number",onChange:G,value:A.phoneNumber||"",onBlur:K,errorText:D.phoneNumber}),!u&&Object(S.jsx)(N.a,{value:A.user,name:"user",onChange:G,label:"Select Owner Operator",type:"select",showFirstBlank:!0,options:I.map((function(e){return{id:e._id,label:e.email}}))})]}),Object(S.jsxs)(w.a,{container:!0,spacing:1,style:{marginTop:"20px"},children:[Object(S.jsx)(w.a,{item:!0,xs:3}),Object(S.jsx)(w.a,{item:!0,xs:6,children:Object(S.jsx)(r.a,{className:"",type:"submit",variant:"contained",onClick:Q,style:{width:"100%"},disabled:!Object(P.b)(A)||z,children:"Save"})}),Object(S.jsx)(w.a,{item:!0,xs:3})]})]})})})]})};t.default=function(){var e=Object(s.useRouteMatch)().path,t=Object(o.useState)([]),a=Object(c.a)(t,2),i=a[0],d=a[1],O=Object(o.useState)(!1),m=Object(c.a)(O,2),p=m[0],h=m[1],f=Object(s.useHistory)();function x(){h(!0),b.a.get(Object(j.c)()+"/api/ownerOperator").then((function(e){var t=e.data,a=(void 0===t?{}:t).data;d(void 0===a?[]:a),h(!1)})).catch((function(e){console.log(e.message),h(!1)}))}Object(o.useEffect)((function(){return x(),Object(P.a)(window,"refreshOwnerOp",x),function(){return Object(P.h)(window,"refreshOwnerOp",x)}}),[]);var v=function(e,t){t.stopPropagation(),b.a.delete(Object(j.c)()+"/api/ownerOperator/"+e).then((function(e){var t=e.data,a=void 0===t?{}:t;Object(y.a)(a.message),x()})).catch((function(e){return console.log(e.message)}))},g={rowCellPadding:"inherit",emptyMessage:"No Owner Operator Found",columns:[{id:"firstName",label:"First Name"},{id:"lastName",label:"Last Name"},{id:"role",label:"Role",renderer:function(){return Object(S.jsx)(o.Fragment,{children:"Owner Operator"})}},{id:"update",renderer:function(t){var a=t.row,n=t.role;return Object(S.jsxs)(o.Fragment,{children:[Object(S.jsx)(r.a,{variant:"contained",onClick:function(t){t.stopPropagation(),f.push(e+"/edit/".concat(a._id))},sx:{mr:1},children:"Update"}),Object(S.jsx)(r.a,{variant:"contained",color:"error",onClick:v.bind(undefined,a._id),disabled:["ownerOperator","dispatch"].includes(n),children:"Delete"})]})}}]};return Object(S.jsxs)("div",{children:[Object(S.jsx)(u.a,{config:g,data:i,loading:p}),Object(S.jsx)(r.a,{variant:"contained",component:l.b,to:e+"/add",className:"addNewOwnerOp",sx:{position:"absolute",right:10},children:"Add Owner Operator"}),Object(S.jsx)(s.Route,{path:e+"/add",render:function(t){return Object(S.jsx)(T,Object(n.a)(Object(n.a)({},t),{},{onCloseUrl:e}))}}),Object(S.jsx)(s.Route,{path:e+"/edit/:id",render:function(t){return Object(S.jsx)(T,Object(n.a)(Object(n.a)({},t),{},{onCloseUrl:e}))}})]})}}}]);
//# sourceMappingURL=11.96da8bad.chunk.js.map