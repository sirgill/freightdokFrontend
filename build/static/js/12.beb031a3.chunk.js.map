{"version":3,"sources":["components/driverbar/Driverlistbar.js"],"names":["connect","state","driver","getDrivers","patchDriverLoads","deleteDriverLoads","deleteDriver","arguments","length","undefined","_useSelector","useSelector","shallowEqual","_useSelector$drivers","drivers","_useSelector$loading","loading","timestamp","_useState","useState","open","data","_useState2","_slicedToArray","edit","setEdit","classes","useStyles","dispatch","useDispatch","handleDeleteDriver","stopPropagation","_id","user","handleUpdate","row","useEffect","now","moment","Date","end","duration","diff","asMinutes","tableConfig","rowCellPadding","emptyMessage","columns","id","label","renderer","_ref","_jsxs","Fragment","children","_jsx","_Button","variant","sx","mr","onClick","bind","_this","color","className","table","EnhancedTable","config","EditDriver","closeEditForm","isEdit"],"mappings":"oNA8FeA,uBAJS,SAACC,GAAK,MAAM,CAChCC,OAAQD,EAAMC,OACjB,GAEuC,CACpCC,eACAC,qBACAC,sBACAC,kBAJWN,EA/EO,WAAiB,IAC5BM,GADiBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,GACrBD,aACPI,EAAmDC,aAAY,SAACV,GAAK,OAAKA,EAAMC,MAAM,GAAEU,KAAaC,EAAAH,EAA9FI,eAAO,IAAAD,EAAG,GAAEA,EAAAE,EAAAL,EAAEM,eAAO,IAAAD,GAAQA,EAAEE,EAASP,EAATO,UACtCC,EAAwBC,mBAAS,CAACC,MAAM,EAAOC,KAAM,CAAC,IAAGC,EAAAC,YAAAL,EAAA,GAAlDM,EAAIF,EAAA,GAAEG,EAAOH,EAAA,GACdI,EAAUC,cACZC,EAAWC,cAETC,EAAqB,WAAqB,IAApB5B,EAAMK,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAIA,UAAAC,OAAA,EAAAD,UAAA,QAAAE,GACpCsB,kBACF,IAAMC,EAA6B,kBAAhB9B,EAAO+B,KAAoB/B,EAAO+B,KAAKD,IAAM9B,EAAO+B,KACvE3B,EAAa0B,EACjB,EAEME,EAAe,WAAkB,IAAjBC,EAAG5B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAIA,UAAAC,OAAA,EAAAD,UAAA,QAAAE,GAC3BsB,kBACFN,EAAQ,CAACL,MAAM,EAAMC,KAAMc,GAC/B,EAEAC,qBAAU,WACN,IAAMC,EAAMC,IAAO,IAAIC,MACjBC,EAAMF,IAAOrB,IACFqB,IAAOG,SAASJ,EAAIK,KAAKF,IAC9BG,YAAc,GAA0B,qBAAd1B,IAClCW,EAASzB,cAGjB,GAAG,IAGH,IAAMyC,EAAc,CAChBC,eAAgB,UAChBC,aAAc,mBAEdC,QAAS,CACL,CACIC,GAAI,YACJC,MAAO,cAEX,CACID,GAAI,WACJC,MAAO,aAEX,CACID,GAAI,cACJC,MAAO,gBAEX,CACID,GAAI,SACJE,SAAU,SAAAC,GAAY,IAAVhB,EAAGgB,EAAHhB,IACR,OAAOiB,eAACC,WAAQ,CAAAC,SAAA,CACZC,cAAAC,IAAA,CAAQC,QAAS,YAAaC,GAAI,CAACC,GAAI,GAAIC,QAAS1B,EAAa2B,KAAKC,EAAM3B,GACpE4B,MAAM,UAAST,SAAC,WAGxBC,cAAAC,IAAA,CAAQC,QAAS,YAAaG,QAAS9B,EAAmB+B,KAAKC,EAAM3B,GAAM4B,MAAM,QAAOT,SAAC,aAIjG,KASZ,OACIF,eAAA,OAAKY,UAAWtC,EAAQuC,MAAMX,SAAA,CAC1BC,cAACW,IAAa,CAACC,OAAQvB,EAAavB,KAAMP,EAASE,QAASA,IAC3DQ,EAAKJ,MAAQmC,cAACa,IAAU,CAACC,cAPZ,WAClB5C,EAAQ,CAACL,MAAM,EAAOC,KAAM,CAAC,GACjC,EAKgEA,KAAMG,EAAKH,KAAMiD,QAAQ,MAG7F,G","file":"static/js/12.beb031a3.chunk.js","sourcesContent":["import React, {Fragment, useEffect, useState} from \"react\";\r\nimport {connect, shallowEqual, useDispatch, useSelector} from \"react-redux\";\r\nimport {Button} from \"@mui/material\";\r\nimport moment from \"moment\";\r\n\r\nimport {useStyles} from \"../HelperCells.js\";\r\nimport EnhancedTable from \"../Atoms/table/Table\";\r\nimport {getDrivers} from \"../../actions/driver\";\r\nimport {\r\n    patchDriverLoads,\r\n    deleteDriverLoads,\r\n    deleteDriver,\r\n} from \"../../actions/driver\";\r\nimport EditDriver from \"../driver-forms/AddDriver\";\r\n\r\nconst Driverlistbar = (props = {}) => {\r\n    const {deleteDriver} = props;\r\n    const {drivers = [], loading = false, timestamp} = useSelector((state) => state.driver, shallowEqual);\r\n    const [edit, setEdit] = useState({open: false, data: {}});\r\n    const classes = useStyles(),\r\n        dispatch = useDispatch();\r\n\r\n    const handleDeleteDriver = (driver = {}, e) => {\r\n        e.stopPropagation();\r\n        const _id = typeof driver.user !== \"string\" ? driver.user._id : driver.user;\r\n        deleteDriver(_id);\r\n    };\r\n\r\n    const handleUpdate = (row = {}, e) => {\r\n        e.stopPropagation();\r\n        setEdit({open: true, data: row})\r\n    };\r\n\r\n    useEffect(() => {\r\n        const now = moment(new Date());\r\n        const end = moment(timestamp);\r\n        const duration = moment.duration(now.diff(end));\r\n        if(duration.asMinutes() > 5 || typeof timestamp === 'undefined'){\r\n            dispatch(getDrivers());\r\n        }\r\n\r\n    }, [])\r\n\r\n\r\n    const tableConfig = {\r\n        rowCellPadding: 'inherit',\r\n        emptyMessage: 'No drivers found',\r\n        // onRowClick: (row) => setEdit({open: true, data: row}),\r\n        columns: [\r\n            {\r\n                id: 'firstName',\r\n                label: 'First Name'\r\n            },\r\n            {\r\n                id: 'lastName',\r\n                label: 'Last Name'\r\n            },\r\n            {\r\n                id: 'phoneNumber',\r\n                label: 'Phone Number'\r\n            },\r\n            {\r\n                id: 'delete',\r\n                renderer: ({row}) => {\r\n                    return <Fragment>\r\n                        <Button variant={'contained'} sx={{mr: 2}} onClick={handleUpdate.bind(this, row)}\r\n                                color='primary'>\r\n                            Update\r\n                        </Button>\r\n                        <Button variant={'contained'} onClick={handleDeleteDriver.bind(this, row)} color='error'>\r\n                            Delete\r\n                        </Button>\r\n                    </Fragment>\r\n                }\r\n            }\r\n        ]\r\n    }\r\n\r\n    const closeEditForm = () => {\r\n        setEdit({open: false, data: {}});\r\n    }\r\n\r\n    return (\r\n        <div className={classes.table}>\r\n            <EnhancedTable config={tableConfig} data={drivers} loading={loading}/>\r\n            {edit.open && <EditDriver closeEditForm={closeEditForm} data={edit.data} isEdit={true}/>}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    driver: state.driver\r\n})\r\n\r\nexport default connect(mapStateToProps, {\r\n    getDrivers,\r\n    patchDriverLoads,\r\n    deleteDriverLoads,\r\n    deleteDriver,\r\n})(Driverlistbar)\r\n"],"sourceRoot":""}