(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[21],{1108:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return re}));var a=n(198),c=n(994),o=n(0),r=n.n(o),i=n(294),s=n(43),l=n(13),d=n(72),j=n(406),b=n.n(j),u=n(363),h=n(534),p=n(641),x=n(1070),g=n(197),m=n(491),O=n(87),f=n(44),v=n(300),y=n(709),C=n.n(y),w=(n(145),n(541),n(1132)),S=n(1133),k=n(1074),F=n(1111),N=n(1076),I=n(245),P=n(711),D=n.n(P),T=n(710),R=n.n(T),A=n(2);const M=[{label:"Detention",cost:"67"},{label:"Loads",cost:"1000"},{label:"Lumper",cost:"786"}],B=e=>{let{serviceName:t,amount:n,price:a,quantity:c,description:r,index:i,deleteService:s,onChangeService:l}=e;const d=e=>{const t=e.target.name,n=e.target.value;l&&l(i,{name:t,value:n})};return Object(A.jsx)(o.Fragment,{children:Object(A.jsxs)("tr",{className:"invoiceServiceRow",children:[Object(A.jsx)("td",{children:t}),Object(A.jsx)("td",{children:Object(A.jsx)(v.a,{name:"description",value:r,onChange:d,className:"serviceInputField",placeholder:"Enter item description"})}),Object(A.jsx)("td",{children:Object(A.jsx)(v.a,{name:"quantity",onChange:e=>{const t=e.target.name,n=parseInt(e.target.value);l(i,{name:t,value:n})},onBlur:e=>{var t,a;const c=parseInt((null===(t=e.target)||void 0===t?void 0:t.value)||0),o=null===(a=e.target)||void 0===a?void 0:a.name;c<1?l&&(l(i,{name:o,value:1}),l(i,{name:"price",value:parseInt(n)})):l&&(l(i,{name:o,value:c}),l(i,{name:"price",value:parseInt(n)*c}))},className:"serviceInputField",type:"number",value:c})}),Object(A.jsx)("td",{children:Object(A.jsx)(v.a,{name:"price",onChange:d,value:a,className:"serviceInputField"})}),Object(A.jsx)("td",{children:a?"$".concat(parseFloat(a).toFixed(2)):"$0.00"}),Object(A.jsx)("td",{children:Object(A.jsx)(I.a,{onClick:s.bind(null,i),className:"deleteService",children:Object(A.jsx)(R.a,{color:"error"})})})]})})},L=e=>{let{handleClose:t,anchorEl:n,onAddNewService:a}=e;const[r,i]=Object(o.useState)(M),s=e=>{a&&a(e),t()};return Object(A.jsx)(w.b,{id:"jugal",anchorEl:n,open:Boolean(n),onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"left"},children:Object(A.jsxs)(m.a,{sx:{p:2,width:500},children:[Object(A.jsx)(m.a,{children:Object(A.jsx)(v.a,{name:"search",autoFocus:!0,placeholder:"Type on item name",onChange:e=>{const t=e.target.value.toLowerCase();if(t){const e=r.filter((e=>e.label.toLowerCase().includes(t)));i(e)}else i(M)}})}),Object(A.jsx)(m.a,{children:Object(A.jsx)(S.a,{children:r.map((e=>Object(A.jsx)(k.a,{onClick:s.bind(null,e),children:Object(A.jsx)(F.a,{disablePadding:!0,secondaryAction:Object(A.jsx)("span",{className:"listButtonPickerCost",children:"$"+e.cost}),children:Object(A.jsx)(N.a,{primary:e.label})})},e.label)))})}),Object(A.jsx)(m.a,{children:Object(A.jsx)(c.a,{startIcon:Object(A.jsx)(D.a,{}),children:"Create a new Item"})})]})})};var z=e=>{let{services:t,onAddNewService:n,onChangeService:a,deleteService:i}=e;const[s,l]=r.a.useState(null),d=Object(o.useMemo)((()=>t.map(((e,t)=>Object(A.jsx)(B,{...e,index:t,onChangeService:a,deleteService:i},t)))),[t]);return Object(A.jsxs)(r.a.Fragment,{children:[Object(A.jsxs)("table",{className:"invoiceServiceTable",children:[Object(A.jsxs)("tr",{className:"tableHeader",children:[Object(A.jsx)("th",{children:"Services"}),Object(A.jsx)("th",{}),Object(A.jsx)("th",{children:"Quantity"}),Object(A.jsx)("th",{children:"Price"}),Object(A.jsx)("th",{children:"Amount"}),Object(A.jsx)("th",{})]}),d,Object(A.jsx)("tr",{className:"addNewItemRow",children:Object(A.jsx)("td",{className:"addNewItem",onClick:e=>{l(e.currentTarget)},children:Object(A.jsx)(c.a,{sx:{width:135},startIcon:Object(A.jsx)(D.a,{}),"aria-describedby":"jugal",children:"Add new item"})})})]}),Object(A.jsx)(L,{handleClose:()=>{l(null)},anchorEl:s,onAddNewService:n})]})},E=n(89);const W=e=>{let{name:t,sx:n={},variant:a="body1",children:c}=e;return Object(A.jsx)(O.a,{sx:{fontWeight:700,...n},variant:a,children:c||t})},q=r.a.forwardRef(((e,t)=>{const{pdf:n,setNotes:a,brokerage:c,loadNumber:o,getTotal:r,onChangeService:i,services:s,addService:l,deleteService:d,notes:j,rateConfirmation:b,proofDelivery:u,accessorials:h,reactToPrintContent:p,reactToPrintTrigger:y,docFileViewer:w}=e;return Object(A.jsxs)("div",{ref:t,className:"printArea",children:[Object(A.jsxs)(g.a,{container:!0,direction:"column",sx:{display:"inline-flex"},children:[Object(A.jsx)("style",{type:"text/css",media:"print",children:"               @page { size: portrait; }          "}),Object(A.jsx)(g.a,{item:!0,xs:12,sx:{p:3},children:Object(A.jsxs)(g.a,{container:!0,justifyContent:"space-between",children:[Object(A.jsx)(g.a,{item:!0,sx:{flexGrow:1},children:Object(A.jsx)(m.a,{spacing:1,children:Object(A.jsx)(m.a,{children:Object(A.jsx)(O.a,{sx:{textAlign:"left"},variant:"h5",children:"Sunny Freight"})})})}),Object(A.jsx)(g.a,{item:!0,children:Object(A.jsxs)(m.a,{children:[Object(A.jsx)(m.a,{children:Object(A.jsx)(O.a,{variant:"h5",sx:{textAlign:"right"},children:"Invoice"})}),Object(A.jsx)(m.a,{className:"notesStack",children:Object(A.jsx)(v.a,{label:"Notes",type:"textarea",onChange:e=>a(e.target.value)})})]})})]})}),Object(A.jsx)(x.a,{sx:{borderBottomWidth:"thin",borderColor:f.b}}),Object(A.jsx)(g.a,{xs:12,item:!0,children:Object(A.jsxs)(g.a,{container:!0,justifyContent:"space-between",children:[Object(A.jsx)(g.a,{item:!0,children:Object(A.jsxs)(m.a,{spacing:1,sx:{p:3},children:[Object(A.jsx)(m.a,{children:Object(A.jsx)(O.a,{children:"Bill To:"})}),Object(A.jsx)(m.a,{children:Object(A.jsx)(W,{sx:{fontWeight:700},children:c})})]})}),Object(A.jsx)(g.a,{item:!0,children:Object(A.jsx)(m.a,{justifyContent:"space-between",sx:{height:"100%"},children:Object(A.jsxs)(m.a,{direction:"row",alignItems:"center",spacing:2,p:3,children:[Object(A.jsx)(W,{children:"Load Number: "}),Object(A.jsx)(W,{children:o})]})})})]})}),Object(A.jsx)(x.a,{sx:{borderBottomWidth:"thin",borderColor:f.b}}),Object(A.jsxs)(g.a,{item:!0,sx:{p:2},display:"inherit",direction:"column",children:[Object(A.jsx)(m.a,{sx:{textAlign:"right"},children:Object(A.jsxs)(W,{children:["Total: ",r()||"- -"]})}),Object(A.jsxs)(g.a,{container:!0,alignItems:"end",justifyContent:"space-between",children:[Object(A.jsx)(g.a,{item:!0,xs:12,className:"invoiceServiceWrapperGrid",children:Object(A.jsx)(z,{onChangeService:i,services:s,onAddNewService:l,deleteService:d})}),Object(A.jsx)(g.a,{xs:3,item:!0,children:Object(A.jsxs)(O.a,{className:"notesPrintBlock",children:["Notes: ",j||"N.A"]})}),Object(A.jsx)(g.a,{xs:6,item:!0,children:Object(A.jsxs)(m.a,{justifyContent:"center",gap:"10px",className:"stack_Uploaders",children:[Object(A.jsxs)(m.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(A.jsxs)("label",{htmlFor:"rateCon",children:[Object(A.jsx)(O.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Rate Con"}),Object(A.jsx)("input",{type:"file",accept:"pdf",id:"rateCon",style:{display:"none"}})]}),Object(A.jsx)("div",{children:Object(E.b)(!!b.length)})]}),Object(A.jsxs)(m.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(A.jsxs)("label",{htmlFor:"pod",children:[Object(A.jsx)(O.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Proof Of Delivery"}),Object(A.jsx)("input",{type:"file",accept:"pdf",id:"pod",style:{display:"none"}})]}),Object(A.jsx)("div",{children:Object(E.b)(!!u.length)})]}),Object(A.jsxs)(m.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(A.jsxs)("label",{htmlFor:"accessorials",children:[Object(A.jsx)(O.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Accessorials"}),Object(A.jsx)("input",{type:"file",accept:"pdf",id:"accessorials",style:{display:"none"}})]}),Object(A.jsx)("div",{children:Object(E.b)(!!h.length)})]})]})}),Object(A.jsx)(g.a,{xs:3,item:!0,display:"flex",justifyContent:"end",children:t.current&&Object(A.jsx)(C.a,{content:p,documentTitle:"Invoice",removeAfterPrint:!0,trigger:y,pageStyle:"portrait",onPrintError:e=>console.log("React to print error",e),onBeforePrint:()=>new Promise((e=>{setTimeout((()=>{console.log("set timeout"),e("testtest")}),2e3)})),fonts:[{family:"Open Sans",source:""}],onBeforeGetContent:e=>console.log("on Before get content",e)})})]})]})]}),w]})})),U=e=>{let{transition:t,handleClose:n,open:a,data:i,pdf:s,getTotal:l,services:d,addService:j,onChangeService:b,deleteService:u,notes:x,setNotes:g}=e;const m=r.a.useRef(null),{brokerage:O="",loadNumber:f="",pickup:v=[],drop:y=[],rate:C="",accessorials:w=[],proofDelivery:S=[],rateConfirmation:k=[],bucketFiles:F}=i||{},N=e=>{let{pdfUrl:t,pdfFileName:n}=e;const[a,c]=Object(o.useState)([]);return Object(o.useEffect)((()=>{const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js",e.async=!0,e.onload=async()=>{const e=await fetch("https://cors.freightdok.io/".concat(t)).then((e=>e.headers.get("content-type").equalsIgnoreCase("application/pdf")?e.blob():null));if(e){const t=new FileReader;t.onload=()=>{const e=t.result,n=window["pdfjs-dist/build/pdf"];n.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(n.version,"/pdf.worker.js"),n.getDocument({data:e}).promise.then((e=>{const t=e.numPages,n=[];for(let a=1;a<=t;a++)n.push(e.getPage(a));Promise.all(n).then((e=>{const t=e.map((e=>{const t=e.getViewport({scale:2}),n=document.createElement("canvas"),a=n.getContext("2d");n.height=t.height,n.width=t.width;const c={canvasContext:a,viewport:t};return e.render(c).promise.then((()=>n.toDataURL()))}));Promise.all(t).then((e=>{c(e)}))}))}))},t.readAsArrayBuffer(e)}else c(!1)},document.body.appendChild(e)}),[t]),a?Object(A.jsx)("div",{style:{position:"relative",minHeight:"100vh"},children:a.map(((e,t)=>Object(A.jsx)("img",{src:e,alt:"Page ".concat(t+1),style:{position:"absolute",top:"".concat(100*t,"%"),left:0,width:"100%"}},t)))}):Object(A.jsx)("img",{className:"printThisFull",src:t,alt:n,style:{width:"100%"}})},I=r.a.useMemo((()=>F&&F.map((e=>Object(A.jsx)("div",{className:"bucketImageContainer",children:Object(A.jsx)("div",{children:Object(A.jsx)(N,{pdfUrl:e.fileLocation,pdfFileName:e.fileName})})})))),[F]),P=r.a.useCallback((()=>m.current),[m.current]),D=r.a.useCallback((()=>Object(A.jsx)(c.a,{className:"printInvoice",variant:"contained",children:"Create Invoice"})),[]);return Object(A.jsx)(h.a,{className:"printThisFull",PaperProps:{sx:{width:"70%"}},open:a,onClose:n,TransitionComponent:t,maxWidth:"lg",children:Object(A.jsx)(p.a,{sx:{p:0},children:Object(A.jsx)(q,{ref:m,pdf:s,setNotes:g,brokerage:O,loadNumber:f,getTotal:l,onChangeService:b,services:d,addService:j,deleteService:u,notes:x,rateConfirmation:k,proofDelivery:S,accessorials:w,reactToPrintContent:P,docFileViewer:I,reactToPrintTrigger:D})})})};var H=e=>{let{match:{params:{id:t=""}={}}={},history:n}=e;const[a,c]=Object(o.useState)(!1),[i,d]=Object(o.useState)(!1),j=Object(s.e)((e=>e.load.invoices.data))||[],[b,h]=Object(o.useState)([]),[p,x]=Object(o.useState)(""),g=j.find((e=>e._id===t));Object(o.useEffect)((()=>{c(!0)}),[]);const m=Object(o.useMemo)((()=>r.a.forwardRef((function(e,t){const n=Object(l.useHistory)();return Object(A.jsx)(u.a,{ref:t,...e,onExited:()=>n.goBack()})}))),[]),O=Object(o.useCallback)((()=>{const e=b.reduce(((e,t)=>parseFloat(t.price)+e),0);return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.toFixed(2))}),[b]);return Object(A.jsx)("div",{children:Object(A.jsx)(U,{open:a,handleClose:function(e){c(!1)},transition:m,data:g,pdf:i,services:b,addService:e=>{const{label:t,cost:n}=e;let a={serviceName:t,description:"",quantity:1,price:n,amount:n};h([...b,a])},onChangeService:(e,t)=>{let{name:n,value:a}=t;const c=b[e];c[n]=a;const o=[...b];o[e]=c,h(o)},getTotal:O,deleteService:e=>{const t=b;t.splice(e,1),h([...t])},notes:p,setNotes:x})})},Y=n(73),_=n.n(Y),G=n(278),J=n(712),V=n.n(J),K=n(95),$=n(269),Q=n(286),X=n(33),Z=n(268),ee=n(260),te=n(9);const ne={title:"Move Invoice to My Loads",preventBackdropClick:!0},ae=Object(te.a)(g.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{width:"auto"},[t.breakpoints.up("sm")]:{width:300}}}));var ce=e=>{const{onCloseUrl:t,getInvoices:n,match:{params:{id:a}={}}={},history:c}=e,[r,i]=Object(o.useState)(),{mutation:s,loading:l}=Object(Z.a)("/api/invoice/moveToMyLoads"),d=X.d.map((e=>e.id.equalsIgnoreCase("delivered")?{...e,disabled:!0}:e));return Object(A.jsx)($.a,{config:ne,children:Object(A.jsxs)(ae,{container:!0,component:"form",spacing:2,onSubmit:e=>{e.preventDefault(),s({id:a,status:r},null,(()=>{n(),c.replace(t)}))},children:[Object(A.jsx)(g.a,{item:!0,children:Object(A.jsx)(O.a,{children:"Select a load status"})}),Object(A.jsx)(g.a,{item:!0,xs:12,children:Object(A.jsx)(Q.a,{label:"Status",name:"status",options:d,onChange:e=>{let{value:t}=e;i(t)},value:r,showNone:!0})}),Object(A.jsx)(g.a,{item:!0,xs:12,children:Object(A.jsx)(ee.c,{type:"submit",fullWidth:!0,disabled:!r,isLoading:l,loadingText:"Moving...",children:"Move"})})]})})},oe=n(65);function re(e){let{listBarType:t}=e;const{edit:n=!1}=oe.a.getUserPermissionsByDashboardId("invoices")||{},r=Object(s.d)(),{path:j}=Object(l.useRouteMatch)(),{data:u=[],page:h,limit:p,loading:x}=Object(s.e)((e=>e.load.invoices)),g=Object(s.e)((e=>e.load.loads));Object(o.useEffect)((()=>(r(Object(i.e)(t)),m(),()=>{r(Object(i.e)(t))})),[]);const m=()=>{r(Object(i.c)())};Object(o.useEffect)((()=>{m()}),[g]);const O={rowCellPadding:"normal",headerCellSx:{pt:1,pb:1},emptyMessage:"No Invoices found",showRefresh:!0,page:h,limit:p,columns:[{id:"loadNumber",label:"Load Number"},{id:"country",label:"Pickup City/State",renderer:e=>{let{row:t}=e;return Object(A.jsxs)(o.Fragment,{children:[t.pickup[0].pickupCity,", ",t.pickup[0].pickupState]})}},{id:"pickupDate",label:"Pickup Date",renderer:e=>{let{row:{pickup:t=[]}={}}=e;const[{pickupDate:n=""}]=t;return _()(n).format("MM/DD/YYYY")}},{id:"deliveryCountry",label:"Delivery City/State",renderer:e=>{let{row:t}=e;return Object(A.jsxs)(o.Fragment,{children:[t.drop[0].dropCity,", ",t.drop[0].dropState]})}},{id:"deliveryDate",label:"Delivery Date",renderer:e=>{let{row:{drop:t=[]}={}}=e;const[{dropDate:n=""}]=t;return _()(n).format("MM/DD/YYYY")}},{id:"equipment",label:"Equipment",renderer:e=>{let{row:t}=e;const{modesString:n="",standard:a=""}=Object(K.g)(t)||{};return Object(A.jsxs)(o.Fragment,{children:[n," ",a]})}},{id:"weight",label:"Weight",renderer:e=>{let{row:t}=e,{weight:{pounds:n=""}={}}=t||{};return n&&(n+=" lbs"),Object(A.jsx)(o.Fragment,{children:n})}},{id:"company",label:"Company",renderer:e=>{let{row:t}=e;return null===t||void 0===t?void 0:t.brokerage},emptyState:"--"},{id:"rate",label:"Rate",emptyState:"--",valueFormatter:e=>e?Object(E.d)(e):""},{id:"",label:"Invoice",visible:!!n,renderer:e=>{let{row:t}=e;return Object(A.jsx)(c.a,{component:d.b,to:j+"/"+t._id,variant:"outlined",color:"primary",startIcon:Object(A.jsx)(b.a,{}),children:"Create Invoice"})}},{id:"",label:"Move",visible:!!n,renderer:e=>{let{row:t}=e;return Object(A.jsx)(c.a,{component:d.b,to:j+"/moveToMyLoads/"+t._id,variant:"outlined",color:"primary",startIcon:Object(A.jsx)(V.a,{}),children:"My loads"})}}]};return Object(A.jsx)(a.a,{sx:{mt:3},children:Object(A.jsxs)(o.Fragment,{children:[Object(A.jsx)(G.a,{config:O,data:u,loading:x,onRefetch:m}),n&&Object(A.jsx)(l.Route,{path:j+"/moveToMyLoads/:id",render:e=>Object(A.jsx)(ce,{onCloseUrl:j,getInvoices:m,...e})}),n&&Object(A.jsx)(l.Route,{path:j+"/:id",exact:!0,component:H,onCloseUrl:j})]})})}},268:function(e,t,n){"use strict";var a=n(0),c=n(48),o=n(89);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const[i,s]=Object(a.useState)(!1);return{mutation:async function(a){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post",l=arguments.length>2?arguments[2]:void 0,d=e;r.queryParams&&(d=d+"?"+Object(o.j)(r.queryParams)),s(!0),i||(i="post");const j=(e=>{let t;switch(e){case"put":t=c.e;break;case"delete":t=c.a;break;case"patch":t=c.c;break;default:t=c.d}return t})(i.toLowerCase());if(j)return j({uri:d,callback:t,body:a,showTriggers:n}).then((e=>(l&&l({...e}),e))).catch((e=>e)).finally((()=>{s(!1)}))},loading:i}}},269:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(363),c=n(233),o=n(0),r=n.n(o),i=n(9),s=n(32),l=n(534),d=n(535),j=n(641),b=n(245),u=n(279),h=n.n(u),p=n(13),x=n(89),g=n(75),m=n(2);const O=Object(i.a)(l.a)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),f=e=>{const{children:t,onClose:n,showClose:a,titleStyles:c,...o}=e;return Object(m.jsxs)(d.a,{sx:{m:0,p:2,textAlign:"center",...c},...o,children:[a?Object(m.jsx)(b.a,{"aria-label":"close",onClick:n,sx:{position:"absolute",left:8,top:12,color:e=>e.palette.grey[500]},children:Object(m.jsx)(h.a,{})}):null,t]})};function v(e){const{config:t={},children:n,closeCallback:i}=e,{title:l="",closeUrl:d="",showClose:b=!0,paperProps:u={},preventBackdropClick:h=!1,titleStyles:v={}}=t,[y,C]=r.a.useState(!1),w=Object(s.a)(),S=Object(c.a)(w.breakpoints.down("sm")),k=function(e){h&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropClick")||C(!1)};r.a.useEffect((()=>(C(!0),Object(x.a)(window,"closeModal",k),()=>Object(x.i)(window,"closeModal",k))),[]);const F=Object(o.useMemo)((()=>r.a.forwardRef((function(e,t){const n=Object(p.useHistory)();return Object(m.jsx)(a.a,{ref:t,...e,onExited:()=>i?i():d?n.push(d||g.a):n.goBack()})}))),[]);return Object(m.jsxs)(O,{onClose:k,"aria-labelledby":l||"customized-dialog-title",open:y,maxWidth:"lg",TransitionComponent:F,PaperProps:u,fullScreen:S,children:[l&&Object(m.jsx)(f,{id:l||"customized-dialog-title",onClose:k,showClose:b,titleStyles:v,children:l}),Object(m.jsx)(j.a,{dividers:!0,sx:{borderTop:"none"},children:n})]})}},271:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(0),c=n(994),o=n(534),r=n(998),i=n(641),s=n(535),l=n(234),d=n(2);const j=a.forwardRef((function(e,t){return Object(d.jsx)(l.a,{direction:"up",ref:t,...e})}));function b(e){const{open:t=!1,config:n,onClose:a,preventBackdropClose:l=!1,className:b}=e,{title:u,onOk:h,okText:p="Save",content:x,onCancel:g}=n,m=function(e){l&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropclick")||a()};return Object(d.jsx)("div",{children:Object(d.jsxs)(o.a,{className:b,open:t,TransitionComponent:j,onClose:m,"aria-describedby":"alert-dialog-slide-description",children:["function"===typeof u?u({...n}):Object(d.jsx)(s.a,{sx:{fontWeight:550},children:u}),Object(d.jsx)(i.a,{children:"function"===typeof x?x({config:n}):x}),Object(d.jsxs)(r.a,{children:["function"===typeof g?g({config:n,onClose:a}):Object(d.jsx)(c.a,{variant:"outlined",onClick:m,children:"Cancel"}),"function"===typeof p?p({config:n,onOk:h}):Object(d.jsx)(c.a,{variant:"contained",color:p.equalsIgnoreCase("delete")?"error":"primary",onClick:h,children:p})]})]})})}},274:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(198),c=(n(0),n(199)),o=n(2);function r(e){return Object(o.jsx)(a.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center","& > * + *":{marginLeft:2}},children:Object(o.jsx)(c.a,{...e})})}},278:function(e,t,n){"use strict";var a=n(198),c=n(244),o=n(1144),r=n(1139),i=n(1145),s=n(491),l=n(299),d=n.n(l),j=n(1143),b=n(1142),u=n(995),h=n(197),p=n(87),x=n(245),g=n(1141),m=n(303),O=n.n(m),f=n(1140),v=n(259),y=n.n(v),C=n(285),w=n.n(C),S=n(0),k=n.n(S),F=n(13),N=n(1097),I=n(9),P=n(260),D=n(2);const T=Object(I.a)(N.a)((e=>{let{theme:t}=e;return{"& .MuiPaginationItem-root":{[t.breakpoints.down("md")]:{height:"1.8rem",width:"1rem"}}}})),R=Object(I.a)(s.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{justifyContent:"center"},display:"flex",justifyContent:"space-between",flexWrap:"wrap","& .pageSizeSelect":{width:80}}}));var A=e=>{let{data:t=[],onPageChange:n,page:a=1,count:c=0,limit:o=1,onPageSizeChange:r,isLoading:i}=e;const[l,d]=Object(S.useState)(0);Object(S.useEffect)((()=>{Array.isArray(t)&&d(t.length)}),[t]);return c<=5?null:Object(D.jsxs)(R,{direction:"row",alignItems:"center",children:[Object(D.jsxs)(p.a,{sx:{color:"#525F7F"},fontSize:12,children:["Showing ",l," of ",c," entries"]}),Object(D.jsxs)(s.a,{direction:"row",alignItems:"center",children:[Object(D.jsx)(P.e,{disabled:i,name:"pageSize",label:"",value:o,options:[{id:5,label:5},{id:10,label:10},{id:20,label:20},{id:50,label:50},{id:100,label:100}],className:"pageSizeSelect",onChange:e=>{let{value:t}=e;"function"===typeof r&&r({value:t})}}),Object(D.jsx)(T,{disabled:i,count:Math.ceil(c/o),color:"primary",variant:"contained",page:a,size:"medium",onChange:(e,t)=>{+a!==+t&&"function"===typeof n&&n(e,+t)}})]})]})},M=n(274),B=n(271),L=n(89),z=n(273);const E=Object(I.a)(f.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:12,padding:"0 8px"}}})),W=Object(I.a)(O.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:14}}}));function q(e){let{columns:t=[],config:n={},role:a}=e;const{headerCellSx:c={},hasDelete:o}=n,r=Object(S.useMemo)((()=>t.map(((e,t)=>{const{label:n="",id:o="",visible:r=!0}=e||{};return(y.a.isFunction(r)?r({column:e,role:a}):r)?Object(D.jsx)(E,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...c},children:n},o||t):null}))),[t,c]);return Object(D.jsxs)(g.a,{children:[r,o&&Object(D.jsx)(E,{padding:"none",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...c}})]})}const U=e=>{let{columns:t,data:n=[],config:a={},handleRowClick:c,handleDelete:o,...r}=e;return(n||[]).map(((e,n)=>{const{dataKey:i=""}=a;return i&&(e=e[i]),(e=>{let{row:t=[],columns:n={},config:a={},handleRowClick:c,rowIndex:o,handleDelete:r,hasDeletePermission:i,...s}=e;const{hasDelete:l=!1,rowCellPadding:d="none",onRowClick:j,rowStyleCb:b}=a,{role:u}=s;let h={};b&&(h=b({row:t})||{});const p=Object(D.jsx)(E,{sx:{},padding:"none",component:"th",scope:"row",children:Object(D.jsx)(z.a,{title:"Delete",placement:"top",children:Object(D.jsx)(x.a,{onClick:r.bind(void 0,t._id,t),disabled:!i,children:Object(D.jsx)(W,{color:"error"})})})}),m=n.map(((e,n)=>{const{id:a="",renderer:c,emptyState:r="--",valueFormatter:i,visible:s=!0}=e||{};if(!(y.a.isFunction(s)?s({column:e,role:u}):s))return null;let l;return l=i&&y.a.isFunction(i)?i(t[a]):y.a.isFunction(c)?c({row:t,role:u},o)||r:y.a.get(t,a,r)||r,Object(D.jsx)(E,{padding:d||"normal",component:"th",scope:"row",children:l},a+n)}));return Object(D.jsxs)(g.a,{hover:!!j,onClick:e=>{e.preventDefault(),y.a.isFunction(c)&&c(t)},sx:j?{cursor:"pointer",...h}:{...h},children:[m,l&&p]},o)})({row:e,columns:t,config:a,handleRowClick:c,rowIndex:n,handleDelete:o,...r})}))},H=e=>{let{config:t={},data:n=[],history:l,loading:g=!1,onRefetch:m,isRefetching:O,actions:f,isPaginationLoading:v=!1}=e;n=n||[];const[C,F]=Object(S.useState)({}),[N,I]=Object(S.useState)({open:!1,config:{}}),{columns:P=[],onRowClick:T,hasOnClickUrl:R=!0,onPageChange:z,page:E,count:W,limit:H,onPageSizeChange:Y,size:_="medium",emptyMessage:G="",onRowClickDataCallback:J,showRefresh:V=!1,onDelete:K,deleteMessage:$,deletePermissions:Q=[],containerHeight:X=""}=t,{role:Z=""}=Object(L.f)().user,ee="boolean"===typeof Q?Q:Q.indexOf(Z)>-1||!1,te=k.a.useRef([]),ne=Array.isArray(n)&&n.length,ae=Object(S.useMemo)((()=>f&&k.a.isValidElement(f)?f:Object(D.jsx)(D.Fragment,{})),[f]),ce=e=>{if(R&&T){const t=T(e);J&&(e=J(e)),l.push(t,e)}else T&&T(e)},oe=(e,t,n)=>{n.stopPropagation();const a={title:()=>Object(D.jsxs)(h.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(D.jsx)(w.a,{color:"error"}),Object(D.jsx)(p.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]}),okText:"Delete",onOk:()=>K(e,re,{row:t}),content:()=>Object(D.jsx)(u.a,{sx:{color:"#000"},children:y.a.isFunction($)?$({row:t}):$||"Are you sure you want to delete the record?"})};I({...N,open:!0,config:a})};function re(){I({...N,open:!1})}const ie=Object(S.useMemo)((()=>ne?Object(D.jsxs)(S.Fragment,{children:[Object(D.jsx)(b.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(D.jsx)(q,{columns:P,config:t,role:Z})}),Object(D.jsx)(j.a,{children:Object(D.jsx)(U,{role:Z,columns:P,data:n,config:t,handleRowClick:ce,handleDelete:oe,hasDeletePermission:ee})})]}):Object(D.jsx)("tbody",{style:{height:300},children:Object(D.jsx)("tr",{children:Object(D.jsx)("td",{style:{textAlign:"center"},children:Object(D.jsx)("h4",{children:G||"No records found"})})})})),[n,t]);return Object(S.useEffect)((()=>{var e;if(null!==te&&void 0!==te&&null!==(e=te.current)&&void 0!==e&&e.table){const e=te.current.table.offsetHeight;F({...C,height:e>200?e:void 0})}}),[]),Object(D.jsxs)(a.a,{className:"enhanced-table",sx:{height:ne&&!g?X||"95%":"auto"},children:[Object(D.jsxs)(s.a,{alignItems:"flex-end",justifyContent:"flex-end",direction:"row",py:1,gap:.5,children:[ae,V&&Object(D.jsx)(x.a,{title:"Refresh",onClick:m,children:Object(D.jsx)(d.a,{className:O?"rotateIcon":void 0})})]}),Object(D.jsxs)(o.a,{component:c.a,className:"",sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2,height:ne&&!g?"calc(100% - 80px)":"auto",position:"relative"},children:[g?(()=>{const e=window.innerHeight-180,t=(C.height?C.height>e?e:C.height:e)||e;return Object(D.jsx)(h.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(D.jsx)(h.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(D.jsx)(M.a,{})})})})():Object(D.jsx)(i.a,{ref:e=>te.current.table=e,"aria-label":"caption table",size:_,stickyHeader:!0,children:ie}),Object(D.jsx)(r.a,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,position:"absolute"},open:v||O||!1,children:Object(D.jsx)(M.a,{sx:{color:"inherit"}})})]}),!g&&n.length>0&&Object(D.jsx)(A,{data:n,onPageChange:z,page:E,count:W,limit:H,onPageSizeChange:Y,isLoading:O||v}),Object(D.jsx)(B.a,{className:"enhancedTable_dialog",open:N.open,config:N.config,onClose:re})]})};t.a=Object(F.withRouter)(Object(S.memo)(H))},294:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return j})),n.d(t,"g",(function(){return b})),n.d(t,"a",(function(){return u})),n.d(t,"h",(function(){return h})),n.d(t,"b",(function(){return p}));var a=n(24),c=n.n(a),o=n(27),r=n(3),i=n(48);const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return async a=>{try{const{success:c,data:s}=await Object(i.b)({uri:"/api/load/me?page=".concat(e+1,"&limit=").concat(t,"&module=").concat(n)});c?a({type:r.F,payload:{loads:s,page:e,limit:t}}):Object(o.a)(s.message,"error")}catch(c){a(Object(o.b)(c.message,"error"))}}},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return async a=>{a({type:r.L,payload:{data:[],loading:!0}});try{const o="/api/load/invoice_loads?page=".concat(e+1,"&limit=").concat(t,"&search=").concat(n),i=await c.a.get(o),{loads:s,total:l,totalPages:d}=i.data;a({type:r.L,payload:{data:s,page:e,limit:t,search:n,total:l,totalPages:d,loading:!1}})}catch(i){a(Object(o.b)(i.message,"error"))}}},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return async i=>{try{const o="/api/load/me?page=".concat(e+1,"&limit=15&search=").concat(n,"&module=").concat(a),s=await c.a.get(o);i({type:r.gb,payload:{data:s.data,page:e,limit:t,search:n}})}catch(s){i(Object(o.b)(s.message,"error"))}}},j=function(){return async(e,t)=>{e({type:r.eb});const{load:{page:n,rowsPerPage:a}}=t()}},b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:r.hb,payload:e}},u=(e,t)=>async n=>{try{const a={headers:{"Content-Type":"application/json"}},i=await c.a.post("/api/load",e,a);n({type:r.b,payload:i.data}),Object(o.a)("Load Created"),t&&t(200===i.status,i.data)}catch(a){n(Object(o.b)(a.message,"error"))}},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;return async(c,r)=>{try{const l=new FormData;for(let t of Object.keys(e))if(["rateConfirmation","proofDelivery"].indexOf(t)<0){const n=e[t],a=Array.isArray(n);let c=a&&!(null===n)?JSON.stringify(n):n;l.append(t,c)}l.append("bucketFiles",JSON.stringify(n));for(let t of["rateConfirmation","proofDelivery","accessorialsFiles"]){const n=e[t];if(n)for(let e of n)l.append(t,e)}const{success:j,data:b}=await Object(i.c)({uri:"/api/load/modify",body:l});j&&Object(o.a)("Load Updated");const{load:{search:{page:u,limit:h,query:p}}}=r();c(p?d(u,h,p):s(0,5,t)),a(j,b)}catch(l){Object(o.a)(l.message,"error")}}},p=(e,t)=>async n=>{try{const{success:a,data:c}=await Object(i.a)({uri:"/api/load",body:{data:{load_id:e}}});Object(o.a)(c.message,a?"success":"error"),a&&n({type:r.t,payload:e}),t&&t(a,c)}catch(a){Object(o.a)(a.message,"error")}}},300:function(e,t,n){"use strict";var a=n(87),c=(n(0),n(259)),o=n.n(c),r=n(699),i=n(700),s=n(2);const l=e=>{const{label:t="",type:n="text",options:a=[],labelKey:c="label",valueKey:i="id",onChangeSelect:l,showFirstBlank:d=!1,onBlur:j}=e;if(delete(e=o.a.cloneDeep(e)).showFirstBlank,"select"===n.toLowerCase()){Array.isArray(a)&&a.length||console.error("Options are mandatory in array format");const o=(a||[]).map((e=>Object(s.jsx)("option",{value:e[i],children:e[c]},e[i])));return d&&o.unshift(Object(s.jsx)("option",{value:"",children:"Select an option"})),Object(s.jsx)(r.a,{...e,onChange:l,id:t,type:n,children:o})}return Object(s.jsx)(r.a,{id:t,type:n,...e,onBlur:j})};t.a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{label:t="",type:n="text",multiple:c=!1,onChange:o,labelStyle:r={},direction:d="column",formGrpStyle:j={},errorText:b="",onBlur:u}=e;return Object(s.jsxs)(i.a,{style:"row"===d?{display:"flex",alignItems:"center",...j}:{...j},children:[t&&Object(s.jsx)("label",{className:"form-control-label",htmlFor:t,style:{color:"#525F7F",marginRight:8,...r},children:t}),Object(s.jsx)(l,{...e,onChangeSelect:e=>{if("select"===n.toLowerCase()&&c){const{options:t,name:n}=e.target,a=[];for(let e=0,c=t.length;e<c;e++)t[e].selected&&a.push(t[e].value);o&&o(e,a,n)}else o&&o(e)},onBlur:e=>{u&&u(e.target.name,e.target.value)}}),b&&Object(s.jsx)(a.a,{variant:"subtitle2",sx:{color:"red",fontSize:"0.75em"},children:b})]})}},541:function(e,t,n){}}]);
//# sourceMappingURL=21.452bab90.chunk.js.map