(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[23],{1106:function(e,t,a){"use strict";a.r(t);var n=a(989),i=a(0),o=a.n(i),l=a(358),c=a.n(l),r=a(13),s=a(72),d=a(272),u=a(1068),h=a(259),j=a.n(h),b=a(44),g=a(197),m=a(1132),p=a(1067),O=a(27),f=a(89),x=a(276),w=(a(324),a(260)),v=a(48);var C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{showPagination:n=!0,page:o,limit:l,lazyFetchCondition:c}=t,[r,s]=Object(i.useState)(void 0),[d,u]=Object(i.useState)({page:o||1,limit:l||10}),[h,j]=Object(i.useState)(!1),[b,g]=Object(i.useState)(null),[m,p]=Object(i.useState)(!1),[O,x]=Object(i.useState)(!1);function w(i){const{page:o,limit:l}=i||{};let c=e;n&&(o&&l&&u({page:o,limit:l}),c="".concat(c,"?page=").concat(o||d.page,"&limit=").concat(l||d.limit)),t.queryParams&&(c="".concat(c,"&").concat(Object(f.h)(t.queryParams))),Object(v.b)({uri:c,callback:a,showTriggers:!1}).then((e=>{e.data&&s(e.data)})).finally((()=>{j(!1),p(!1),x(!1)}))}const C=()=>{j(!0),w()};return Object(i.useEffect)((()=>{("function"===typeof c?c():c)&&C()}),[]),{lazyFetch:C,data:r,loading:h,error:b,refetch:function(){p(!0),w({page:o,limit:d.limit})},isRefetching:m,onLimitChange:e=>{let{value:t}=e;x(!0),w({limit:t,page:d.page})},onPageChange:(e,t)=>{x(!0),w({page:t,limit:d.limit})},isPaginationLoading:O,...d}},y=a(2);const S={firstName:"",lastName:"",phone:""};var P=e=>{const{history:t,match:{params:{id:a=""}={}}={},onCloseUrl:n}=e,[l,c]=o.a.useState(S),[r,s]=Object(i.useState)(S),{mutation:d,loading:h}=Object(x.a)("/api/ownerOperator"),{loading:v,data:P}=C("/api/ownerOperator/"+a,{lazyFetchCondition:!!a}),{data:k}=P||{},N=e=>{let{name:t,value:a}=e;c({...l,[t]:a})};Object(i.useEffect)((()=>{k&&c(k)}),[k]);const R=e=>{let{name:t,value:a}=e;a&&s({...r,[t]:""})},z=e=>{let{success:t,data:a}=e;const{message:n}=a||{};t?(Object(f.j)("refreshOwnerOp"),Object(O.a)(n||"Owner operator created"),F()):Object(O.a)(n,"error")},F=()=>{t.push(n)};return Object(y.jsxs)(p.a,{fullWidth:!1,maxWidth:"md",open:!0,onClose:F,"aria-labelledby":"form-dialog-title",PaperProps:{sx:{width:400}},children:[Object(y.jsxs)(u.a,{id:"form-dialog-title",sx:{color:b.b,textAlign:"center",fontWeight:400,letterSpacing:1},children:[a?"Edit":"Add"," Owner Operator"]}),Object(y.jsx)(m.a,{children:Object(y.jsxs)(g.a,{container:!0,component:"form",noValidate:!0,direction:"column",rowSpacing:3,p:1,children:[Object(y.jsx)(g.a,{item:!0,xs:12,children:Object(y.jsx)("div",{children:Object(y.jsx)(w.b,{name:"firstName",label:"First Name",onChange:N,value:l.firstName||"",errors:r,onBlur:R,fullWidth:!0,disabled:v||h,required:!0})})}),Object(y.jsx)(g.a,{item:!0,xs:12,children:Object(y.jsx)(w.b,{name:"lastName",label:"Last Name",onChange:N,value:l.lastName||"",errors:r,onBlur:R,fullWidth:!0,disabled:v||h,required:!0})}),Object(y.jsx)(g.a,{item:!0,xs:12,children:Object(y.jsx)(w.b,{name:"email",label:"Email",onChange:N,value:l.email||"",errors:r,onBlur:R,fullWidth:!0,disabled:v||h,required:!0})}),Object(y.jsx)(g.a,{item:!0,xs:12,children:Object(y.jsx)(w.b,{name:"phone",label:"Phone Number",onChange:N,value:l.phone||"",onBlur:R,errors:r,fullWidth:!0,disabled:v||h,required:!0})}),Object(y.jsx)(g.a,{item:!0,xs:12,children:Object(y.jsx)(w.c,{fullWidth:!0,type:"submit",onClick:e=>{e.preventDefault();const t={...l},a=(e=>{let{firstName:t,lastName:a,phone:n,email:i}=e,o={};return t||(o.firstName="Please provide the First Name"),a||(o.lastName="Please provide the Last Name"),n||(o.phone="Please provide the Phone Number"),i||(o.email="Please provide the Email"),Object(f.e)(i)||(o.email="Invalid Email"),o})(t);j.a.isEmpty(a)?d(t,null,z):s({...a})},isLoading:h||v,loadingText:h?"Updating...":v?"Please wait...":null,children:a?"Update":"Add"})})]})})]})},k=a(286),N=a(65),R=a(399);t.default=()=>{const{path:e}=Object(r.useRouteMatch)(),{edit:t,delete:a,add:o}=N.a.getUserPermissionsByDashboardId("ownerOperator"),{data:l={},isRefetching:u,loading:h,refetch:j,page:b,limit:g,onLimitChange:m,onPageChange:p,isPaginationLoading:O}=Object(R.a)("/api/ownerOperator",{page:1,limit:10}),{data:x,totalCount:w}=l||{},v=Object(r.useHistory)(),C=Object(i.useCallback)((()=>{j()}),[j]);Object(i.useEffect)((()=>(Object(f.a)(window,"refreshOwnerOp",C),()=>Object(f.g)(window,"refreshOwnerOp",C))),[C]);const S=e=>{let{success:t}=e;t&&C()},z={rowCellPadding:"normal",showRefresh:!0,emptyMessage:"No Owner Operator Found",count:w,page:b,limit:g,onPageSizeChange:m,onPageChange:p,columns:[{id:"firstName",label:"First Name",emptyState:"--"},{id:"lastName",label:"Last Name",emptyState:"--"},{id:"role",label:"Role",renderer:()=>Object(y.jsx)(i.Fragment,{children:"Owner Operator"})},{id:"email",label:"Email"},{id:"update",renderer:o=>{let{row:l}=o;return Object(y.jsxs)(i.Fragment,{children:[Object(y.jsx)(n.a,{variant:"contained",onClick:t=>{t.stopPropagation(),v.push(e+"/edit/".concat(l._id))},sx:{mr:1},disabled:!t,children:"Update"}),Object(y.jsx)(n.a,{variant:"contained",color:"error",onClick:Object(k.c)({uri:"/api/ownerOperator/"+l._id,message:"Are you sure you want to delete this Owner Operator?",afterSuccessCb:S}),disabled:!a,children:"Delete"})]})}}]},F=Object(y.jsx)(n.a,{variant:"contained",component:s.b,to:e+"/add",disabled:!o,startIcon:Object(y.jsx)(c.a,{}),children:"Add"});return Object(y.jsxs)("div",{children:[Object(y.jsx)(d.a,{config:z,data:x,loading:h,isRefetching:u,onRefetch:j,isPaginationLoading:O,actions:F}),Object(y.jsx)(r.Route,{path:e+"/add",render:t=>Object(y.jsx)(P,{...t,onCloseUrl:e})}),Object(y.jsx)(r.Route,{path:e+"/edit/:id",render:t=>Object(y.jsx)(P,{...t,onCloseUrl:e})})]})}},268:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(198),i=(a(0),a(199)),o=a(2);function l(e){return Object(o.jsx)(n.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center","& > * + *":{marginLeft:2}},children:Object(o.jsx)(i.a,{...e})})}},272:function(e,t,a){"use strict";var n=a(198),i=a(244),o=a(1140),l=a(1135),c=a(1141),r=a(484),s=a(294),d=a.n(s),u=a(1139),h=a(1138),j=a(1119),b=a(197),g=a(87),m=a(245),p=a(1137),O=a(298),f=a.n(O),x=a(1136),w=a(259),v=a.n(w),C=a(280),y=a.n(C),S=a(0),P=a.n(S),k=a(13),N=a(1090),R=a(9),z=a(260),F=a(2);const D=Object(R.a)(N.a)((e=>{let{theme:t}=e;return{"& .MuiPaginationItem-root":{[t.breakpoints.down("md")]:{height:"1.8rem",width:"1rem"}}}})),I=Object(R.a)(r.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{justifyContent:"center"},display:"flex",justifyContent:"space-between",flexWrap:"wrap","& .pageSizeSelect":{width:80}}}));var A=e=>{let{data:t=[],onPageChange:a,page:n=1,count:i=0,limit:o=1,onPageSizeChange:l}=e;const[c,s]=Object(S.useState)(0);Object(S.useEffect)((()=>{Array.isArray(t)&&s(t.length)}),[t]);return i<=5?null:Object(F.jsxs)(I,{direction:"row",alignItems:"center",children:[Object(F.jsxs)(g.a,{sx:{color:"#525F7F"},fontSize:12,children:["Showing ",c," of ",i," entries"]}),Object(F.jsxs)(r.a,{direction:"row",alignItems:"center",children:[Object(F.jsx)(z.e,{name:"pageSize",label:"",value:o,options:[{id:5,label:5},{id:10,label:10},{id:20,label:20},{id:50,label:50},{id:100,label:100}],className:"pageSizeSelect",onChange:e=>{let{value:t}=e;"function"===typeof l&&l({value:t})}}),Object(F.jsx)(D,{count:Math.ceil(i/o),color:"primary",variant:"contained",page:n,size:"medium",onChange:(e,t)=>{+n!==+t&&"function"===typeof a&&a(e,+t)}})]})]})},E=a(268),L=a(287),W=a(89),M=a(267);const q=Object(R.a)(x.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:12,padding:"0 8px"}}})),U=Object(R.a)(f.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:14}}}));function T(e){let{columns:t=[],config:a={},role:n}=e;const{headerCellSx:i={},hasDelete:o}=a,l=Object(S.useMemo)((()=>t.map(((e,t)=>{const{label:a="",id:o="",visible:l=!0}=e||{};return(v.a.isFunction(l)?l({column:e,role:n}):l)?Object(F.jsx)(q,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...i},children:a},o||t):null}))),[t,i]);return Object(F.jsxs)(p.a,{children:[l,o&&Object(F.jsx)(q,{padding:"none",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...i}})]})}const H=e=>{let{columns:t,data:a=[],config:n={},handleRowClick:i,handleDelete:o,...l}=e;return(a||[]).map(((e,a)=>{const{dataKey:c=""}=n;return c&&(e=e[c]),(e=>{let{row:t=[],columns:a={},config:n={},handleRowClick:i,rowIndex:o,handleDelete:l,hasDeletePermission:c,...r}=e;const{hasDelete:s=!1,rowCellPadding:d="none",onRowClick:u,rowStyleCb:h}=n,{role:j}=r;let b={};h&&(b=h({row:t})||{});const g=Object(F.jsx)(q,{sx:{},padding:"none",component:"th",scope:"row",children:Object(F.jsx)(M.a,{title:"Delete",placement:"top",children:Object(F.jsx)(m.a,{onClick:l.bind(void 0,t._id,t),disabled:!c,children:Object(F.jsx)(U,{color:"error"})})})}),O=a.map(((e,a)=>{const{id:n="",renderer:i,emptyState:l="--",valueFormatter:c,visible:r=!0}=e||{};if(!(v.a.isFunction(r)?r({column:e,role:j}):r))return null;let s;return s=c&&v.a.isFunction(c)?c(t[n]):v.a.isFunction(i)?i({row:t,role:j},o)||l:v.a.get(t,n,l)||l,Object(F.jsx)(q,{padding:d||"normal",component:"th",scope:"row",children:s},n+a)}));return Object(F.jsxs)(p.a,{hover:!!u,onClick:e=>{e.preventDefault(),v.a.isFunction(i)&&i(t)},sx:u?{cursor:"pointer",...b}:{...b},children:[O,s&&g]},o)})({row:e,columns:t,config:n,handleRowClick:i,rowIndex:a,handleDelete:o,...l})}))},_=e=>{let{config:t={},data:a=[],history:s,loading:p=!1,onRefetch:O,isRefetching:f,actions:x,isPaginationLoading:w=!1}=e;a=a||[];const[C,k]=Object(S.useState)({}),[N,R]=Object(S.useState)({open:!1,config:{}}),{columns:z=[],onRowClick:D,hasOnClickUrl:I=!0,onPageChange:M,page:q,count:U,limit:_,onPageSizeChange:B,size:V="medium",emptyMessage:J="",onRowClickDataCallback:K,showRefresh:G=!1,onDelete:Q,deleteMessage:X,deletePermissions:Y=[],containerHeight:Z=""}=t,{role:$=""}=Object(W.d)().user,ee="boolean"===typeof Y?Y:Y.indexOf($)>-1||!1,te=P.a.useRef([]),ae=Array.isArray(a)&&a.length,ne=Object(S.useMemo)((()=>x&&P.a.isValidElement(x)?x:Object(F.jsx)(F.Fragment,{})),[x]),ie=e=>{if(I&&D){const t=D(e);K&&(e=K(e)),s.push(t,e)}else D&&D(e)},oe=(e,t,a)=>{a.stopPropagation();const n={title:()=>Object(F.jsxs)(b.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(F.jsx)(y.a,{color:"error"}),Object(F.jsx)(g.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]}),okText:"Delete",onOk:()=>Q(e,le,{row:t}),content:()=>Object(F.jsx)(j.a,{sx:{color:"#000"},children:v.a.isFunction(X)?X({row:t}):X||"Are you sure you want to delete the record?"})};R({...N,open:!0,config:n})};function le(){R({...N,open:!1})}const ce=Object(S.useMemo)((()=>ae?Object(F.jsxs)(S.Fragment,{children:[Object(F.jsx)(h.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(F.jsx)(T,{columns:z,config:t,role:$})}),Object(F.jsx)(u.a,{children:Object(F.jsx)(H,{role:$,columns:z,data:a,config:t,handleRowClick:ie,handleDelete:oe,hasDeletePermission:ee})})]}):Object(F.jsx)("tbody",{style:{height:300},children:Object(F.jsx)("tr",{children:Object(F.jsx)("td",{style:{textAlign:"center"},children:Object(F.jsx)("h4",{children:J||"No records found"})})})})),[a,t]);return Object(S.useEffect)((()=>{var e;if(null!==te&&void 0!==te&&null!==(e=te.current)&&void 0!==e&&e.table){const e=te.current.table.offsetHeight;k({...C,height:e>200?e:void 0})}}),[]),Object(F.jsxs)(n.a,{className:"enhanced-table",sx:{height:ae&&!p?Z||"95%":"auto"},children:[Object(F.jsxs)(r.a,{alignItems:"flex-end",justifyContent:"flex-end",direction:"row",py:1,gap:.5,children:[ne,G&&Object(F.jsx)(m.a,{title:"Refresh",onClick:O,children:Object(F.jsx)(d.a,{className:f?"rotateIcon":void 0})})]}),Object(F.jsxs)(o.a,{component:i.a,className:"",sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2,height:ae&&!p?"calc(100% - 80px)":"auto",position:"relative"},children:[p?(()=>{const e=window.innerHeight-180,t=(C.height?C.height>e?e:C.height:e)||e;return Object(F.jsx)(b.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(F.jsx)(b.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(F.jsx)(E.a,{})})})})():Object(F.jsx)(c.a,{ref:e=>te.current.table=e,"aria-label":"caption table",size:V,stickyHeader:!0,children:ce}),Object(F.jsx)(l.a,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,position:"absolute"},open:w||f||!1,children:Object(F.jsx)(E.a,{sx:{color:"inherit"}})})]}),!p&&a.length>0&&Object(F.jsx)(A,{data:a,onPageChange:M,page:q,count:U,limit:_,onPageSizeChange:B}),Object(F.jsx)(L.a,{className:"enhancedTable_dialog",open:N.open,config:N.config,onClose:le})]})};t.a=Object(k.withRouter)(Object(S.memo)(_))},324:function(e,t,a){"use strict";var n=a(0),i=a(48),o=a(89);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[l,c]=Object(n.useState)(void 0),[r,s]=Object(n.useState)(!1),[d,u]=Object(n.useState)(null),[h,j]=Object(n.useState)(!1);function b(){let n=e;a.queryParams&&(n="".concat(n,"?").concat(Object(o.h)(a.queryParams))),Object(i.b)({uri:n,callback:t,showTriggers:!1}).then((e=>{e.data&&c(e.data)})).finally((()=>{s(!1),j(!1)}))}return Object(n.useEffect)((()=>{s(!0),c(null),u(null),b()}),[e]),{data:l,loading:r,error:d,refetch:function(){j(!0),b()},isRefetching:h}}},358:function(e,t,a){"use strict";var n=a(88);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(90)),o=a(2),l=(0,i.default)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.default=l},399:function(e,t,a){"use strict";var n=a(0),i=a(48),o=a(89);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{showPagination:l=!0,page:c,limit:r}=t,[s,d]=Object(n.useState)(void 0),[u,h]=Object(n.useState)({page:c||1,limit:r||10}),[j,b]=Object(n.useState)(!1),[g,m]=Object(n.useState)(null),[p,O]=Object(n.useState)(!1),[f,x]=Object(n.useState)(!1);function w(n){const{page:c,limit:r}=n||{};let s=e;l&&(c&&r&&h({page:c,limit:r}),s="".concat(s,"?page=").concat(c||u.page,"&limit=").concat(r||u.limit)),t.queryParams&&(s="".concat(s,"&").concat(Object(o.h)(t.queryParams))),Object(i.b)({uri:s,callback:a,showTriggers:!1}).then((e=>{e.data&&d(e.data)})).finally((()=>{b(!1),O(!1),x(!1)}))}return Object(n.useEffect)((()=>{b(!0),d(null),m(null),w()}),[e]),{data:s,loading:j,error:g,refetch:function(){O(!0),w({page:c,limit:u.limit})},isRefetching:p,onLimitChange:e=>{let{value:t}=e;x(!0),w({limit:t,page:u.page})},onPageChange:(e,t)=>{x(!0),w({page:t,limit:u.limit})},isPaginationLoading:f,...u}}}}]);
//# sourceMappingURL=23.95ec242b.chunk.js.map