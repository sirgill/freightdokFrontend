(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[20],{1109:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(271),o=a(13),i=a(199),c=a(490),s=a(1007),l=a(86),d=a(247),u=a(285),f=a(140),b=a(286),m=a(447),p=a.n(m),j=a(446),v=a.n(j);var h=e=>{const{bidAmount:t="",offerStatus:a,vendorName:n,event_data:r={},loadDetail:{client:{client_name:o=""}={}}={}}=e||{},{counter_offer:{expired_at:i="",id:c}={},offer:{external_id:s}={}}=r,l=t.includes(",")?t.split(","):t;return{amount:Array.isArray(l)?l[l.length-1]:l,offerStatus:a,vendorName:n,external_id:s,expired_at:i,counterOfferId:c,client_name:o}},g=a(56),O=a(28),y=a(88);const{user:{orgId:x}={}}=Object(y.d)();var C=a(94),w=a(25),D=a(399),N=a(277),S=a(283),_=a(2);const R=e=>{let{value:t,name:a,handleChange:r}=e;const[o,i]=Object(n.useState)(t);return Object(n.useEffect)((()=>{r&&r({name:a,value:o})}),[o,a,r]),Object(_.jsxs)(n.Fragment,{children:[Object(_.jsx)(d.a,{onClick:()=>{o>0&&i(o-1)},disabled:o<=0,children:Object(_.jsx)(v.a,{})}),Object(_.jsx)("div",{className:"dollarInput",children:Object(_.jsx)(b.a,{name:"bidAmount",label:"Amount ($)",onChange:e=>{const t=e.target.value;i(t)},type:"number",value:o,className:""})}),Object(_.jsx)(d.a,{onClick:()=>{i(parseInt(o)+1)},children:Object(_.jsx)(p.a,{})})]})},I=["final_offer_created","accepted"],E=e=>{const{location:{state:t={}}={},history:a,onCloseUrl:r,onRefresh:o}=e,{loadNumber:d="",vendorName:b=""}=t,[m,p]=Object(n.useState)("0.00"),{mutation:j}=Object(N.a)("/api/bid/deleteBidByLoadNumber/"+d,A),[v,E]=Object(n.useState)({amount:0}),k=(null===t||void 0===t?void 0:t.offerStatus)||"",F=I.some((e=>e.equalsIgnoreCase(k)))||!1,z=k.equalsIgnoreCase("COUNTER_OFFER_CREATED"),L=b.equalsIgnoreCase("c.h. robinson"),M=!!v.offerStatus,Y=v.client_name,T=L&&k.equalsIgnoreCase("notconsidered");Object(n.useEffect)((()=>{if(b.equalsIgnoreCase("new trul")){const e=h(t);p(e.amount),E(e)}else if(L){const e=(e=>{const{bidAmount:t="",offerStatus:a,vendorName:n,event_data:r={}}=e||{};return{amount:t,offerStatus:a,vendorName:n,event_data:r}})(t);E(e),p(e.amount)}}),[t,b]);const P=e=>{e.error?Object(w.a)(e.message,"error"):a.goBack()};function A(e,t){e?(P({}),Object(w.a)("Bid success for Load number",d)):Object(w.a)(t.message,"error")}const q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{counterOfferId:n}=v,i={offerId:n,mcNumber:C.c,carrierMail:C.a,status:e};if(F){if(b.equalsIgnoreCase("c.h. robinson")){if("reject"===e)return j({},"delete");const a=(new Date).toDateString(),n=(new Date).toTimeString(),{type:r,code:o,description:i,units:c,currencyCode:s}=t.loadDetail.availableLoadCosts[0]||{},l={carrierCode:C.h.carrierCode,loadNumber:Number(d),emptyDateTime:new Date(a+" "+n).toISOString(),availableLoadCosts:[{type:r,code:o,description:i,units:c,currencyCode:s,sourceCostPerUnit:Number(m)}],emptyLocation:{city:"Greenwood",state:"IN",country:"NA",zip:"46143"},rateConfirmation:{email:Object(y.d)().user.email,name:Object(y.d)().user.name}};return Object(D.b)(d,l,A)}(async e=>{try{return await Object(g.d)({uri:Object(O.c)()+"/newTrulFinalOffer?orgId="+x,body:e})}catch(t){}})(i).then((e=>{"error"===e.data.status&&Object(w.a)(e.data.message,"error")})).catch((e=>console.log(e)))}else(async e=>{try{return await Object(g.c)({uri:Object(O.c)()+"/newtrulUpdateOfferStatus?orgId="+x,body:e})}catch(t){}})(i).then((e=>{"error"===e.data.status?Object(w.a)(e.data.message,"error"):e.data.status.equalsIgnoreCase("success")&&(o&&o(),a.push(r))})).catch((e=>console.log(e)))};return Object(_.jsx)(u.a,{children:Object(_.jsx)(i.a,{sx:{px:3},justifyContent:"center",display:"flex",children:Object(_.jsxs)("form",{onSubmit:()=>{},style:{textAlign:"center"},className:"form_bidding",children:[Object(_.jsx)(l.a,{sx:{fontSize:32},children:Y||b||"--"}),Object(_.jsxs)(l.a,{sx:{fontSize:32},children:["Load Number: ",d]}),F&&Object(_.jsx)(l.a,{fontSize:18,sx:{my:3},children:"Final Offer: $".concat(v.amount)}),z&&Object(_.jsx)(l.a,{fontSize:18,children:"Offer: $".concat(v.amount)}),Object(_.jsxs)(c.a,{gap:2,direction:"row",justifyContent:"center",my:2,children:[Object(_.jsx)(s.a,{variant:"contained",color:"success",sx:{px:5},onClick:q.bind(void 0,"accept"),disabled:!M,children:"Accept"}),Object(_.jsx)(s.a,{variant:"contained",color:"error",sx:{px:5},onClick:q.bind(void 0,"reject"),disabled:!M,children:T?"Delete":"Reject"})]}),L&&!M?Object(_.jsx)(S.a,{config:{open:!0,message:"We are waiting for the response on this bid.",severity:"info"}}):null,!F&&!L&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(l.a,{children:"OR"}),Object(_.jsx)(c.a,{direction:"row",sx:{py:2},alignItems:"end",gap:"10px",justifyContent:"center",children:Object(_.jsx)(R,{value:m,handleChange:e=>{let{value:t}=e;p(t)}})}),Object(_.jsx)(s.a,{variant:"contained",color:"primary",sx:{px:2,py:.5,fontSize:14},onClick:()=>{if(b.equalsIgnoreCase("new trul")){const{counterOfferId:e}=v,t={offerId:e,external_id:Object(f.a)(),offer_amount:m,expired_at:v.expired_at,mcNumber:C.c,carrierMail:C.a};v.offerStatus.equalsIgnoreCase("COUNTER_OFFER_CREATED")&&(async(e,t)=>{try{const{data:a}=await Object(g.d)({uri:Object(O.c)()+"/newTrulCounterOffer?orgId="+x,body:e});t&&t(a)}catch(a){}})(t,P)}},children:z?"Submit Counter":"Submit Bid"})]})]})})})};var k=Object(n.memo)(E,(()=>!0)),F=a(545),z=a(340),L=a(73),M=a.n(L);const Y=e=>{let{history:t,path:a,totalCount:r,onPageChange:o,page:i,limit:c}=e;return{rowCellPadding:"normal",size:"small",emptyMessage:"No Bids Found",showRefresh:!0,onPageChange:o,page:i-1,limit:c,onRowClick:e=>{let{loadNumber:t,vendorName:n=""}=e;return"new trul"===n.toLowerCase()?"".concat(a,"/newtrul/").concat(t):"".concat(a,"/").concat(t)},onRowClickDataCallback:e=>e.loadDetail||{},count:r,rowStyleCb:e=>{let{row:t}=e;const{bidLevel:a,status:n}=t;return 2===a?{borderLeft:"5px solid #ffeaa7"}:1===a?{borderLeft:n?"5px solid #00b894":"5px solid #e74c3c"}:void 0},columns:[{id:"loadNumber",label:"Load Number"},{id:"pickup",label:"Pickup City/State",renderer:e=>{var t,a;let{row:r}=e;const{loadDetail:o={}}=r;var i,c;if("c.h. robinson"===(null===(t=r.vendorName)||void 0===t?void 0:t.toLowerCase()))return"".concat(null===o||void 0===o||null===(i=o.origin)||void 0===i?void 0:i.city,", ").concat(null===o||void 0===o||null===(c=o.origin)||void 0===c?void 0:c.stateCode);const[s,l]=(null===r||void 0===r||null===(a=r.loadDetail)||void 0===a?void 0:a.stops)||[],{geo:d}=l||{},{city:u="",state:f=""}=d||{};return u||f?Object(_.jsxs)(n.Fragment,{children:[u,", ",f]}):"--"}},{id:"",label:"PickUp Date",renderer:e=>{var t;let a,{row:r}=e;const[o,i]=(null===r||void 0===r||null===(t=r.loadDetail)||void 0===t?void 0:t.stops)||[{}];if("C.H. Robinson"===r.vendorName)return M()(r.loadDetail.pickUpByDate).format("M/DD/YYYY");if(i){const{early_datetime:e=""}=i||{};return e?M()(e).format("M/DD/YYYY"):"--"}const{early_datetime:c=""}=i||{};return a=c?M()(c).format("M/DD/YYYY"):"--",Object(_.jsx)(n.Fragment,{children:a})}},{id:"",label:"Delivery City / State",renderer:e=>{var t;let{row:a={}}=e;const{loadDetail:r={}}=a;var o,i;if("c.h. robinson"===(null===(t=a.vendorName)||void 0===t?void 0:t.toLowerCase()))return"".concat(null===r||void 0===r||null===(o=r.destination)||void 0===o?void 0:o.city,", ").concat(null===r||void 0===r||null===(i=r.destination)||void 0===i?void 0:i.stateCode);const[c]=r.stops||[],{geo:s}=c||{},{city:l="",state:d=""}=s||{};return l||d?Object(_.jsxs)(n.Fragment,{children:[l,", ",d]}):"--"}},{id:"deliveryDate",label:"Delivery Date",renderer:e=>{var t,a;let{row:n}=e;var r;if(null!==(t=n.loadDetail)&&void 0!==t&&t.deliverBy)return M()(null===(r=n.loadDetail)||void 0===r?void 0:r.deliverBy).format("M/DD/YYYY");const[o,i]=(null===n||void 0===n||null===(a=n.loadDetail)||void 0===a?void 0:a.stops)||[],{early_datetime:c}=o||{};return c?M()(c).format("M/DD/YYYY"):"--"}},{id:"equipment",label:"Equipment",renderer:e=>{let{row:t}=e;const{equipment:a,vendorName:r=""}=t.loadDetail||{};if("chrobinson"===r.toLowerCase()){const{modesString:e="",standard:a=""}=Object(C.g)(t.loadDetail||{});return Object(_.jsxs)(n.Fragment,{children:[e," ",a]})}return"string"===typeof a?Object(_.jsx)(n.Fragment,{children:a}):"--"}},{id:"",label:"Weight",renderer:e=>{let{row:t}=e;const{weight:a}=t.loadDetail||{};if("number"===typeof a)return Object(_.jsxs)(n.Fragment,{children:[a," lbs"]});if(null!==a&&void 0!==a&&a.pounds){let{weight:{pounds:e=""}={}}=t.loadDetail||{};return e&&(e+=" lbs"),e}return"--"}},{id:"vendorName",label:"Company",renderer:e=>{let{row:t}=e;const{loadDetail:{client:a={}}={}}=t;return a.client_name?a.client_name:t.vendorName||""}},{id:"status",label:"Bid Status",renderer:e=>{let{row:t}=e;const{offerStatus:a=""}=h(t)||{},r=a.toLowerCase().includes("rejected");return"C.H. Robinson"===t.vendorName&&t.offerStatus?t.offerStatus:Object(_.jsx)(n.Fragment,{children:t.status?"Accepted":r?"Rejected":(o=t.bidLevel,2===o?"Counter":1===o?"Pending":"Final Offer")});var o}},{id:"Bidding",label:"Bid",renderer:e=>{let{row:r}=e;const{vendorName:o=""}=r||{};let i=a+"/bid/".concat(r.loadNumber);const{offerStatus:c=""}=h(r)||{},l=(c.equalsIgnoreCase("COUNTER_OFFER_CREATED"),c.equalsIgnoreCase("final_offer_created"),c.toLowerCase().includes("rejected"));return o.toLowerCase(),Object(_.jsx)(n.Fragment,{children:!l&&Object(_.jsx)(s.a,{variant:"contained",color:"primary",onClick:e=>{e.stopPropagation(),t.push(i,{...r})},children:"View"})})}}]}};var T=a(546);t.default=()=>{const{path:e}=Object(o.useRouteMatch)(),t=Object(o.useHistory)(),[a,i]=Object(n.useState)({page:1,limit:10}),{page:c,limit:s}=a,{data:l={},loading:d=!0,refetch:u,isRefetching:f}=Object(z.a)("/api/bid/biddings?page=".concat(c,"&limit=").concat(s)),{data:b=[],totalCount:m=0,message:p}=l||{};Object(n.useEffect)((()=>{const e=setInterval((()=>{u()}),5e3);return()=>clearInterval(e)}),[c,s,u]);return p?Object(_.jsx)(T.a,{message:p}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(r.a,{config:Y({history:t,path:e,totalCount:m,onPageChange:(e,t)=>{i((e=>({...e,page:t})))},page:c,limit:s}),data:b,loading:d,onRefetch:u,isRefetching:f}),Object(_.jsxs)(o.Switch,{children:[Object(_.jsx)(o.Route,{path:e+"/bid/:loadNumber",render:t=>Object(_.jsx)(k,{...t,onCloseUrl:e,onRefresh:u})}),Object(_.jsx)(o.Route,{path:e+"/newtrul/:loadId",render:e=>Object(_.jsx)(F.a,{...e,callDetail:!1})})]})]})}},299:function(e,t,a){"use strict";var n=a(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(89)),o=a(2),i=(0,r.default)((0,o.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");t.default=i},313:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return d}));var n,r=a(11),o=a.n(r);function i(e,t){return void 0===e&&(e=""),void 0===t&&(t=n),t?e.split(" ").map((function(e){return t[e]||e})).join(" "):e}var c={};function s(e){c[e]||("undefined"!==typeof console&&console.error(e),c[e]=!0)}var l="object"===typeof window&&window.Element||function(){};o.a.oneOfType([o.a.string,o.a.func,function(e,t,a){if(!(e[t]instanceof l))return new Error("Invalid prop `"+t+"` supplied to `"+a+"`. Expected prop to be an instance of Element. Validation failed.")},o.a.shape({current:o.a.any})]);var d=o.a.oneOfType([o.a.func,o.a.string,o.a.shape({$$typeof:o.a.symbol,render:o.a.func}),o.a.arrayOf(o.a.oneOfType([o.a.func,o.a.string,o.a.shape({$$typeof:o.a.symbol,render:o.a.func})]))]);"undefined"===typeof window||!window.document||window.document.createElement},446:function(e,t,a){"use strict";var n=a(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(89)),o=a(2),i=(0,r.default)((0,o.jsx)("path",{d:"M19 13H5v-2h14v2z"}),"Remove");t.default=i},447:function(e,t,a){"use strict";var n=a(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(89)),o=a(2),i=(0,r.default)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.default=i},538:function(e,t,a){"use strict";var n=a(1),r=a(4),o=a(90),i=a(16),c=a(0),s=a.n(c),l=a(11),d=a.n(l),u=a(276),f=a.n(u),b=a(313),m=["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"],p={children:d.a.node,type:d.a.string,size:d.a.oneOfType([d.a.number,d.a.string]),bsSize:d.a.string,valid:d.a.bool,invalid:d.a.bool,tag:b.b,innerRef:d.a.oneOfType([d.a.object,d.a.func,d.a.string]),plaintext:d.a.bool,addon:d.a.bool,className:d.a.string,cssModule:d.a.object},j=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(o.a)(a)),a.focus=a.focus.bind(Object(o.a)(a)),a}Object(i.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.focus=function(){this.ref&&this.ref.focus()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,o=e.type,i=e.bsSize,c=e.valid,l=e.invalid,d=e.tag,u=e.addon,p=e.plaintext,j=e.innerRef,v=Object(r.a)(e,m),h=["radio","checkbox"].indexOf(o)>-1,g=new RegExp("\\D","g"),O=d||("select"===o||"textarea"===o?o:"input"),y="form-control";p?(y+="-plaintext",O=d||"input"):"file"===o?y+="-file":"range"===o?y+="-range":h&&(y=u?null:"form-check-input"),v.size&&g.test(v.size)&&(Object(b.c)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),i=v.size,delete v.size);var x=Object(b.a)(f()(t,l&&"is-invalid",c&&"is-valid",!!i&&"form-control-"+i,y),a);return("input"===O||d&&"function"===typeof d)&&(v.type=o),v.children&&!p&&"select"!==o&&"string"===typeof O&&"select"!==O&&(Object(b.c)('Input with a type of "'+o+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete v.children),s.a.createElement(O,Object(n.a)({},v,{ref:j,className:x,"aria-invalid":l}))},t}(s.a.Component);j.propTypes=p,j.defaultProps={type:"text"},t.a=j},539:function(e,t,a){"use strict";var n=a(1),r=a(4),o=a(0),i=a.n(o),c=a(11),s=a.n(c),l=a(276),d=a.n(l),u=a(313),f=["className","cssModule","row","disabled","check","inline","tag"],b={children:s.a.node,row:s.a.bool,check:s.a.bool,inline:s.a.bool,disabled:s.a.bool,tag:u.b,className:s.a.string,cssModule:s.a.object},m=function(e){var t=e.className,a=e.cssModule,o=e.row,c=e.disabled,s=e.check,l=e.inline,b=e.tag,m=Object(r.a)(e,f),p=Object(u.a)(d()(t,!!o&&"row",s?"form-check":"form-group",!(!s||!l)&&"form-check-inline",!(!s||!c)&&"disabled"),a);return"fieldset"===b&&(m.disabled=c),i.a.createElement(b,Object(n.a)({},m,{className:p}))};m.propTypes=b,m.defaultProps={tag:"div"},t.a=m}}]);
//# sourceMappingURL=20.a6dad498.chunk.js.map