{"version":3,"sources":["components/invoices/InvoiceService.js","components/invoices/NewInvoice.js","components/invoices/InvoicesList.js","hooks/useMutation.js","components/Atoms/Modal.js","components/Atoms/Dialog.js","components/Atoms/table/Pagination.jsx","components/Atoms/table/Table.jsx","hooks/useFetch.js","components/Atoms/form/InputField.js","hooks/useFetchWithSearchPagination.js","components/invoices/MoveToMyLoads.js"],"names":["LOOKUP_DATA","label","cost","InvoiceService","_ref","serviceName","amount","price","quantity","description","index","deleteService","onChangeService","handleChange","e","name","target","value","_jsx","Fragment","children","_jsxs","className","InputField","onChange","placeholder","parseInt","onBlur","type","onBlurPrice","concat","parseFloat","toFixed","_IconButton","onClick","bind","DeleteOutlineIcon","color","LookUp","_ref2","handleClose","anchorEl","onAddNewService","list","setList","useState","handleClick","selected","_Popover","id","open","Boolean","onClose","anchorOrigin","vertical","horizontal","transformOrigin","_Stack","sx","p","width","autoFocus","val","toLowerCase","filtered","filter","item","includes","_List","map","data","_ListItemButton","_ListItem","disablePadding","secondaryAction","_ListItemText","primary","_Button","startIcon","AddCircleOutlineIcon","InvoiceServiceWrapper","_ref3","services","setAnchorEl","React","servicesComp","useMemo","s","event","currentTarget","Title","variant","_Typography","fontWeight","InvoiceLayout","forwardRef","props","ref","pdf","setNotes","brokerage","loadNumber","getTotal","addService","notes","rateConfirmation","proofDelivery","accessorials","reactToPrintContent","reactToPrintTrigger","docFileViewer","noticeText","orgName","getUserDetail","user","_Grid","container","direction","display","media","xs","justifyContent","flexGrow","spacing","textAlign","readOnly","rows","_Divider","borderBottomWidth","borderColor","blue","height","alignItems","gap","htmlFor","background","borderRadius","cursor","accept","style","getCheckStatusIcon","length","ReactToPrint","content","documentTitle","removeAfterPrint","trigger","pageStyle","onPrintError","console","error","onBeforePrint","Promise","resolve","setTimeout","log","fonts","family","source","DialogComponent","transition","saveServices","useRef","pickup","drop","rate","bucketFiles","PdfViewer","pdfUrl","pdfFileName","pages","setPages","useEffect","script","document","createElement","src","async","onload","blob","fetch","then","response","headers","get","equalsIgnoreCase","reader","FileReader","result","pdfjsLib","window","GlobalWorkerOptions","workerSrc","version","getDocument","promise","pdfDocument","numPages","promises","i","push","getPage","all","pagePromises","page","viewport","getViewport","scale","canvas","context","getContext","renderContext","canvasContext","render","toDataURL","pageImages","readAsArrayBuffer","body","appendChild","_Fragment","position","minHeight","alt","_Box","objectFit","doc","fileLocation","fileName","useCallback","current","disabled","_Dialog","PaperProps","TransitionComponent","maxWidth","_DialogContent","Invoice","_ref4","match","params","setOpen","setPdf","setServices","mutation","loading","useMutation","fpData","isLoading","useFetch","GET_LOAD_HISTORY","Transition","history","useHistory","_Zoom","onExited","goBack","total","reduce","acc","service","getDollarPrefixedPrice","FullScreenLoader","obj","_ref5","row","clone","splice","_ref6","success","notification","message","modalConfig","title","InvoicesList","edit","canSendToTriumph","UserSettings","getUserPermissionsByDashboardId","path","useRouteMatch","isLoadingPdf","_data","limit","onPageChange","onLimitChange","refetch","isPaginationLoading","isRefetching","useFetchWithSearchPagination","checkboxes","setCheckboxes","loads","config","rowCellPadding","headerCellSx","pt","pb","emptyMessage","showRefresh","count","arguments","resetCheckboxes","showCheckbox","columns","renderer","pickupCity","pickupState","pickupDate","moment","format","dropCity","dropState","dropDate","firstName","lastName","valueFormatter","join","emptyState","readableDateTime","visible","_ref7","Tooltip","placement","component","Link","to","_id","DescriptionIcon","invoiceUrl","preventDefault","_PictureAsPdf","_ref8","ReplayIcon","actions","LoadingButton","loadingText","onSendToTriumph","loadIds","_ref9","forEach","invoice","invoiceCreated","EnhancedTable","onRefetch","onRefresh","onCheckboxChange","key","indexOf","newCheckboxes","toSpliced","checkboxKey","Route","MoveToMyLoads","onCloseUrl","getInvoices","exact","url","callback","undefined","showTriggers","options","setLoading","afterSubmit","uri","queryParams","serialize","asyncApiCall","fn","requestPut","requestDelete","requestPatch","requestPost","getRequestCb","res","catch","err","finally","BootstrapDialog","styled","Dialog","theme","padding","BootstrapDialogTitle","showClose","titleStyles","other","DialogTitle","m","IconButton","left","top","palette","grey","CloseIcon","Modal","closeCallback","closeUrl","paperProps","preventBackdropClick","useTheme","fullScreen","_useMediaQuery","breakpoints","down","addEvent","removeEvent","ENHANCED_DASHBOARD","DialogContent","dividers","borderTop","Slide","preventBackdropClose","onOk","okText","onCancel","MuiDialog","DialogActions","Button","StyledPagination","Pagination","StyledStack","Stack","flexWrap","TablePagination","setLength","Array","isArray","Typography","fontSize","Select","Math","ceil","size","pgNum","Cell","_TableCell","DeleteIcon","_Delete","Headers","role","handleRequestSort","hasSort","hasDelete","sortField","sortOrder","column","sort","_","isFunction","bgcolor","_TableSortLabel","active","unshift","_TableRow","TableData","handleRowClick","handleDelete","rest","dataKey","rowIndex","hasDeletePermission","onRowClick","rowStyleCb","rowCellSx","rowStyle","deleteCell","scope","cell","cellPadding","isCostCell","Error","checked","_Checkbox","hover","getTableCell","tableState","setTableState","dialog","setDialog","_columns","columnsBuilder","hasOnClickUrl","onPageSizeChange","onRowClickDataCallback","onDelete","deleteMessage","deletePermissions","containerHeight","handleSortChange","Actions","isValidElement","property","field","order","stopPropagation","ErrorOutlineIcon","onDialogClose","_DialogContentText","getTableContent","_TableHead","backgroundColor","_TableBody","_ref$current","table","calculatedHeight","offsetHeight","_ref$current2","tableContainer","scrollTo","py","_Refresh","_TableContainer","_Paper","el","boxShadow","mb","getLoader","innerHeight","Spinner","_Table","stickyHeader","_Backdrop","zIndex","drawer","withRouter","memo","setData","setError","setIsRefetching","requestCall","requestGet","InputPure","labelKey","valueKey","onChangeSelect","showFirstBlank","cloneDeep","opts","opt","Input","multiple","labelStyle","formGrpStyle","errorText","FormGroup","marginRight","values","l","orderBy","debounceTime","setPage","setLimit","searchQuery","setSearchQuery","setIsPaginationLoading","isSearching","setIsSearching","setSortField","setSortOrder","isInitialLoad","fetchData","debouncedSearch","debounce","cancel","handleSearch","Container","up","getLoadStatuses","setValue","statuses","LOAD_STATUSES","status","onSubmit","replace","showNone","fullWidth"],"mappings":"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","file":"static/js/23.55356246.chunk.js","sourcesContent":["import React, { useMemo, Fragment, useState } from \"react\";\r\nimport './styles.css'\r\nimport AddCircleOutlineIcon from '@mui/icons-material/AddCircleOutline';\r\nimport { Button, IconButton, List, Popover, Stack, ListItem, ListItemText, ListItemButton } from \"@mui/material\";\r\nimport InputField from \"../Atoms/form/InputField\";\r\nimport DeleteOutlineIcon from '@mui/icons-material/DeleteOutline';\r\n\r\nconst LOOKUP_DATA = [\r\n    { label: \"Detention\", cost: '67' },\r\n    { label: \"Loads\", cost: '1000' },\r\n    { label: \"Lumper\", cost: '786' },\r\n]\r\n\r\nconst InvoiceService = ({ serviceName, amount, price, quantity, description, index, deleteService, onChangeService }) => {\r\n    const handleChange = (e) => {\r\n        const name = e.target.name\r\n        const value = +e.target.value\r\n        if (onChangeService) {\r\n            onChangeService(index, { name, value })\r\n            // onChangeService(index, { name: 'amount', value: value * quantity });\r\n        }\r\n    }\r\n\r\n    const handleQuantity = (e) => {\r\n        const name = e.target.name\r\n        const value = parseInt(e.target.value)\r\n        onChangeService(index, { name, value })\r\n    }\r\n\r\n    const onBlur = (name, value) => {\r\n        if (+value < 0) {\r\n            if (onChangeService) {\r\n                onChangeService(index, { name, value: 1 })\r\n                onChangeService(index, { name: 'amount', value: parseInt(price) });\r\n\r\n            }\r\n        } else {\r\n            if (onChangeService) {\r\n                onChangeService(index, { name, value });\r\n                onChangeService(index, { name: 'amount', value: parseInt(price) * +value });\r\n            }\r\n        }\r\n    }\r\n\r\n    const onBlurPrice = (name, value) => {\r\n        value = +value;\r\n        if(value < 0) {\r\n            value = 1;\r\n            onChangeService(index, {name: 'amount', value: value * quantity})\r\n        } else {\r\n            onChangeService(index, {name: 'amount', value: value * quantity})\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <tr className='invoiceServiceRow'>\r\n                <td>{serviceName}</td>\r\n                <td><InputField name={'description'} value={description} onChange={handleChange} className='serviceInputField'\r\n                    placeholder={'Enter item description'} /></td>\r\n                <td><InputField name={'quantity'} onChange={handleQuantity} onBlur={onBlur} className='serviceInputField' type='number' value={quantity} /></td>\r\n                <td><InputField name={'price'} onChange={handleChange} value={price} onBlur={onBlurPrice} className='serviceInputField' type='number' /></td>\r\n                <td>{amount ? `$${parseFloat(amount).toFixed(2)}` : '$0.00'}</td>\r\n                <td><IconButton onClick={deleteService.bind(null, index)} className='deleteService'>\r\n                    <DeleteOutlineIcon color={'error'} />\r\n                </IconButton></td>\r\n            </tr>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\n\r\nconst LookUp = ({ handleClose, anchorEl, onAddNewService }) => {\r\n    const [list, setList] = useState(LOOKUP_DATA)\r\n    const onChange = (e) => {\r\n        const val = e.target.value.toLowerCase();\r\n        if (val) {\r\n            const filtered = list.filter(item => item.label.toLowerCase().includes(val));\r\n            setList(filtered)\r\n        } else setList(LOOKUP_DATA)\r\n    }\r\n\r\n    const handleClick = (selected) => {\r\n        if (onAddNewService) {\r\n            onAddNewService(selected)\r\n        }\r\n        handleClose()\r\n    }\r\n\r\n    return <Popover\r\n        id={'jugal'}\r\n        anchorEl={anchorEl}\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n            vertical: 'bottom',\r\n            horizontal: 'left',\r\n        }}\r\n        transformOrigin={{\r\n            vertical: 'center',\r\n            horizontal: 'left',\r\n        }}\r\n    >\r\n        <Stack sx={{ p: 2, width: 500 }}>\r\n            <Stack>\r\n                <InputField name={'search'} autoFocus placeholder='Type on item name' onChange={onChange} />\r\n            </Stack>\r\n            <Stack>\r\n                <List>\r\n                    {list.map(data => {\r\n                        return <ListItemButton key={data.label} onClick={handleClick.bind(null, data)}>\r\n                            <ListItem disablePadding secondaryAction={<span\r\n                                className={'listButtonPickerCost'}>{\"$\" + data.cost}</span>}>\r\n                                <ListItemText primary={data.label} />\r\n                            </ListItem>\r\n                        </ListItemButton>\r\n                    })}\r\n                </List>\r\n            </Stack>\r\n            <Stack>\r\n                <Button startIcon={<AddCircleOutlineIcon />}>\r\n                    Create a new Item\r\n                </Button>\r\n            </Stack>\r\n        </Stack>\r\n    </Popover>\r\n}\r\n\r\nconst InvoiceServiceWrapper = ({ services, onAddNewService, onChangeService, deleteService }) => {\r\n    // console.log('services', services)\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const servicesComp = useMemo(() => {\r\n        return services.map((s, index) => {\r\n            return <InvoiceService key={index} {...s} index={index} onChangeService={onChangeService}\r\n                deleteService={deleteService} />\r\n        })\r\n    }, [services])\r\n\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <table className='invoiceServiceTable'>\r\n                <tr className='tableHeader'>\r\n                    <th>Services</th>\r\n                    <th />\r\n                    <th>Quantity</th>\r\n                    <th>Price</th>\r\n                    <th>Amount</th>\r\n                    <th />\r\n                </tr>\r\n                {servicesComp}\r\n                <tr className='addNewItemRow'>\r\n                    <td className='addNewItem' onClick={handleClick}>\r\n                        <Button sx={{ width: 135 }} startIcon={<AddCircleOutlineIcon />}>\r\n                            Add new item\r\n                        </Button>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n            <LookUp handleClose={handleClose} anchorEl={anchorEl} onAddNewService={onAddNewService} />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default InvoiceServiceWrapper;","// import jsPDF from \"jspdf\";\r\n// import  'jspdf-autotable'\r\nimport {Box, Button, Dialog, DialogContent, Divider, Grid, Stack, Typography, Zoom,} from \"@mui/material\";\r\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {blue} from \"../layout/ui/Theme\";\r\nimport InputField from \"../Atoms/form/InputField\";\r\nimport ReactToPrint from \"react-to-print\";\r\nimport \"../../App.css\";\r\nimport \"./styles.css\";\r\nimport InvoiceServiceWrapper from \"./InvoiceService\";\r\nimport {getCheckStatusIcon, getDollarPrefixedPrice, getUserDetail} from \"../../utils/utils\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport {GET_LOAD_HISTORY} from \"../../config/requestEndpoints\";\r\nimport useMutation from \"../../hooks/useMutation\";\r\nimport {notification} from \"../../actions/alert\";\r\nimport {FullScreenLoader} from \"../Atoms\";\r\n\r\n\r\nconst Title = ({ name, sx = {}, variant = \"body1\", children }) => {\r\n    return (\r\n        <Typography sx={{ fontWeight: 700, ...sx }} variant={variant}>\r\n            {children || name}\r\n        </Typography>\r\n    );\r\n};\r\n\r\nconst InvoiceLayout = React.forwardRef((props, ref) => {\r\n    const {pdf,\r\n        setNotes,\r\n        brokerage,\r\n        loadNumber,\r\n        getTotal,\r\n        onChangeService,\r\n        services,\r\n        addService,\r\n        deleteService,\r\n        notes,\r\n        rateConfirmation,\r\n        proofDelivery,\r\n        accessorials,\r\n        reactToPrintContent,\r\n        reactToPrintTrigger,\r\n        docFileViewer,\r\n        noticeText} = props;\r\n    const {orgName} = getUserDetail().user;\r\n    return <div ref={ref} className=\"printArea\">\r\n        <Grid\r\n            container\r\n            direction=\"column\"\r\n            sx={{ display: pdf ? \"inline-flex\" : \"inline-flex\" }}\r\n        >\r\n            <style type=\"text/css\" media=\"print\">{\"\\\r\n               @page {\\ size: portrait;\\ }\\\r\n          \"}</style>\r\n            <Grid item xs={12} sx={{ p: 3 }}>\r\n                <Grid container justifyContent={\"space-between\"}>\r\n                    <Grid item sx={{ flexGrow: 1 }}>\r\n                        <Stack spacing={1}>\r\n                            <Stack>\r\n                                <Typography sx={{ textAlign: \"left\" }} variant=\"h5\">\r\n                                    {orgName}\r\n                                </Typography>\r\n                            </Stack>\r\n                        </Stack>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <Stack>\r\n                            <Stack>\r\n                                <Typography variant=\"h5\" sx={{ textAlign: \"right\" }}>\r\n                                    Invoice\r\n                                </Typography>\r\n                            </Stack>\r\n                            <Stack className='notesStack'>\r\n                                <InputField label=\"Notes\" value={noticeText} readOnly rows={4} type=\"textarea\" />\r\n                            </Stack>\r\n                        </Stack>\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n            <Divider sx={{ borderBottomWidth: \"thin\", borderColor: blue }} />\r\n            <Grid xs={12} item>\r\n                <Grid container justifyContent={\"space-between\"}>\r\n                    <Grid item>\r\n                        <Stack spacing={1} sx={{ p: 3 }}>\r\n                            <Stack>\r\n                                <Typography>Bill To:</Typography>\r\n                            </Stack>\r\n                            <Stack>\r\n                                <Title sx={{ fontWeight: 700 }}>{brokerage}</Title>\r\n                            </Stack>\r\n                        </Stack>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <Stack justifyContent={\"space-between\"} sx={{ height: \"100%\" }}>\r\n                            <Stack direction={\"row\"} alignItems={\"center\"} spacing={2} p={3}>\r\n                                <Title>Load Number: </Title>\r\n                                <Title>{loadNumber}</Title>\r\n                            </Stack>\r\n                        </Stack>\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n            <Divider sx={{ borderBottomWidth: \"thin\", borderColor: blue }} />\r\n\r\n            <Grid item sx={{ p: 2 }} display={\"inherit\"} direction=\"column\">\r\n                <Stack sx={{ textAlign: \"right\" }}>\r\n                    <Title>Total: {getTotal() || '- -'}</Title>\r\n                </Stack>\r\n                <Grid container alignItems={\"end\"} justifyContent={\"space-between\"}>\r\n                    <Grid item xs={12} className='invoiceServiceWrapperGrid'>\r\n                        <InvoiceServiceWrapper\r\n                            onChangeService={onChangeService} services={services} onAddNewService={addService}\r\n                            deleteService={deleteService}\r\n                        />\r\n                    </Grid>\r\n                    <Grid xs={3} item>\r\n                        <Typography className='notesPrintBlock'>Notes: {notes || 'N.A'}</Typography>\r\n                    </Grid>\r\n                    <Grid xs={5} item>\r\n                        <Stack justifyContent={\"center\"} gap={\"10px\"} className='stack_Uploaders'>\r\n                            <Stack direction={\"row\"} justifyContent={'center'} gap={'10px'}>\r\n                                <label htmlFor={'rateCon'}>\r\n                                    <Typography textAlign={'center'} sx={{\r\n                                        width: 150,\r\n                                        background: 'rgb(0, 123, 255)',\r\n                                        color: '#FFF',\r\n                                        borderRadius: '4px',\r\n                                        cursor: 'pointer'\r\n                                    }}>\r\n                                        Rate Con\r\n                                    </Typography>\r\n                                    <input type={'file'} accept={'pdf'} id={'rateCon'} style={{ display: 'none' }} />\r\n                                </label>\r\n                                <div>\r\n                                    {getCheckStatusIcon(!!rateConfirmation.length)}\r\n                                </div>\r\n                            </Stack>\r\n                            <Stack direction={\"row\"} justifyContent={'center'} gap={'10px'}>\r\n                                <label htmlFor={'pod'}>\r\n                                    <Typography textAlign={'center'} sx={{\r\n                                        width: 150,\r\n                                        background: 'rgb(0, 123, 255)',\r\n                                        color: '#FFF',\r\n                                        borderRadius: '4px',\r\n                                        cursor: 'pointer'\r\n                                    }}>\r\n                                        Proof Of Delivery\r\n                                    </Typography>\r\n                                    <input type={'file'} accept={'pdf'} id={'pod'} style={{ display: 'none' }} />\r\n                                </label>\r\n                                <div>\r\n                                    {getCheckStatusIcon(!!proofDelivery.length)}\r\n                                </div>\r\n                            </Stack>\r\n                            <Stack direction={\"row\"} justifyContent={'center'} gap={'10px'}>\r\n                                <label htmlFor={'accessorials'}>\r\n                                    <Typography textAlign={'center'} sx={{\r\n                                        width: 150,\r\n                                        background: 'rgb(0, 123, 255)',\r\n                                        color: '#FFF',\r\n                                        borderRadius: '4px',\r\n                                        cursor: 'pointer'\r\n                                    }}>Accessorials</Typography>\r\n                                    <input type={'file'} accept={'pdf'} id={'accessorials'} style={{ display: 'none' }} />\r\n                                </label>\r\n                                <div>\r\n                                    {getCheckStatusIcon(!!accessorials.length)}\r\n                                </div>\r\n                            </Stack>\r\n                        </Stack>\r\n                    </Grid>\r\n                    <Grid xs={3} item display={\"flex\"} justifyContent={\"end\"}>\r\n                        <ReactToPrint\r\n                            content={reactToPrintContent}\r\n                            documentTitle=\"Invoice\"\r\n                            removeAfterPrint\r\n                            trigger={reactToPrintTrigger}\r\n                            pageStyle={'portrait'}\r\n                            onPrintError={(e) => console.error(\"React to print error\", e)}\r\n                            onBeforePrint={() => new Promise(resolve => {\r\n                                setTimeout(() => {\r\n                                    console.log('waiting for print')\r\n                                    resolve(\"\")\r\n                                }, 1000)\r\n                            })}\r\n                            fonts={[{family: \"Open Sans\", source:\"\"}]}\r\n                        />\r\n                        {/*<Button variant='contained' onClick={createPdf}>Print Invoice</Button>*/}\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n        </Grid>\r\n        {docFileViewer}\r\n    </div>\r\n})\r\n\r\nconst DialogComponent = ({\r\n    transition,\r\n    handleClose,\r\n    open,\r\n    data,\r\n    pdf,\r\n    getTotal,\r\n    services,\r\n    addService,\r\n    onChangeService,\r\n    deleteService,\r\n    notes,\r\n    setNotes, saveServices, noticeText\r\n}) => {\r\n    const ref = React.useRef(null);\r\n    const {\r\n        brokerage = \"\",\r\n        loadNumber = \"\",\r\n        pickup = [],\r\n        drop = [],\r\n        rate = \"\",\r\n        accessorials = [],\r\n        proofDelivery = [],\r\n        rateConfirmation = [],\r\n        bucketFiles\r\n    } = data || {};\r\n\r\n\r\n    const PdfViewer = ({ pdfUrl, pdfFileName }) => {\r\n        const [pages, setPages] = useState([]);\r\n        useEffect(() => {\r\n\r\n            const script = document.createElement('script');\r\n            script.src = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js';\r\n            script.async = true;\r\n            script.onload = async () => {\r\n                // Once PDF.js script is loaded, fetch and render PDF\r\n\r\n\r\n                const blob = await fetch(`https://cors.freightdok.io/${pdfUrl}`)\r\n                    .then(response => {\r\n                        const contentType = response.headers.get('content-type');\r\n                        if (contentType.equalsIgnoreCase('application/pdf'))\r\n                            return response.blob();\r\n                        else\r\n                            return null;\r\n                    })\r\n\r\n                if (blob) {\r\n                    {\r\n                        const reader = new FileReader();\r\n                        reader.onload = () => {\r\n                            const pdf = reader.result;\r\n                            // Initialize PDF.js library\r\n                            const pdfjsLib = window['pdfjs-dist/build/pdf'];\r\n                            pdfjsLib.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.js`;\r\n\r\n                            // Load PDF document\r\n                            pdfjsLib.getDocument({ data: pdf }).promise.then(pdfDocument => {\r\n                                const numPages = pdfDocument.numPages;\r\n                                const promises = [];\r\n                                for (let i = 1; i <= numPages; i++) {\r\n                                    promises.push(pdfDocument.getPage(i));\r\n                                }\r\n                                Promise.all(promises).then(pages => {\r\n                                    const pagePromises = pages.map(page => {\r\n                                        const viewport = page.getViewport({ scale: 2 });\r\n                                        const canvas = document.createElement('canvas');\r\n                                        const context = canvas.getContext('2d');\r\n                                        canvas.height = viewport.height;\r\n                                        canvas.width = viewport.width;\r\n\r\n                                        const renderContext = {\r\n                                            canvasContext: context,\r\n                                            viewport: viewport\r\n                                        };\r\n                                        return page.render(renderContext).promise.then(() => {\r\n                                            return canvas.toDataURL();\r\n                                        });\r\n                                    });\r\n                                    Promise.all(pagePromises).then(pageImages => {\r\n                                        setPages(pageImages);\r\n                                    });\r\n                                });\r\n                            });\r\n                        };\r\n                        reader.readAsArrayBuffer(blob);\r\n                    }\r\n                }\r\n                else {\r\n                    setPages(false)\r\n                }\r\n            };\r\n            document.body.appendChild(script);\r\n        }, [pdfUrl]);\r\n\r\n        if (pages) {\r\n            return (\r\n                <>\r\n                    <div style={{ position: 'relative', minHeight: '100vh' }}>\r\n                        {pages.map((page, index) => (\r\n                            <img\r\n                                key={index}\r\n                                src={page}\r\n                                alt={`Page ${index + 1}`}\r\n                                style={{ width: '100%', /* position: 'absolute', top: `${index * 100}%`, left: 0,*/ }}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                </>\r\n            );\r\n        }\r\n        else {\r\n            return (<>\r\n                <Box sx={{ position: 'relative', minHeight: '100vh', display: 'flex', justifyContent: 'center' }}>\r\n                    <img className=\"printThisFull\" src={pdfUrl} alt={pdfFileName} style={{width: '1100px', height: '1200px', objectFit: 'contain'}} />\r\n                </Box>\r\n            </>)\r\n        }\r\n    };\r\n\r\n\r\n    const docFileViewer = React.useMemo(() => {\r\n        return bucketFiles && bucketFiles.map(doc => {\r\n            return (<div className=\"bucketImageContainer\">\r\n                <div>\r\n                    <PdfViewer pdfUrl={doc.fileLocation} pdfFileName={doc.fileName} />\r\n                    {/* <img className=\"printThisFull\" src={doc.fileLocation} alt={doc.fileName} /> */}\r\n                </div>\r\n            </div>)\r\n        })\r\n    }, [bucketFiles])\r\n\r\n    const reactToPrintContent = React.useCallback(() => {\r\n        if(saveServices){\r\n            saveServices();\r\n        }\r\n        return ref.current;\r\n    }, [ref.current, saveServices]);\r\n\r\n\r\n    const reactToPrintTrigger = React.useCallback(() => {\r\n        // NOTE: could just as easily return <SomeComponent />. Do NOT pass an `onClick` prop\r\n        // to the root node of the returned component as it will be overwritten.\r\n\r\n        // Bad: the `onClick` here will be overwritten by `react-to-print`\r\n        // return <button onClick={() => alert('This will not work')}>Print this out!</button>;\r\n\r\n        // Good\r\n        return (\r\n            <Button className='printInvoice' variant={'contained'} disabled={!services.length}>\r\n                Create Invoice\r\n            </Button>\r\n        );\r\n    }, [services]);\r\n\r\n    return (\r\n        <Dialog\r\n            className=\"printThisFull\"\r\n            PaperProps={{\r\n                sx: { width: \"70%\" },\r\n            }}\r\n            open={open}\r\n            onClose={handleClose}\r\n            TransitionComponent={transition}\r\n            maxWidth={\"lg\"}\r\n        >\r\n            <DialogContent sx={{ p: 0 }}>\r\n                <InvoiceLayout\r\n                    ref={ref}\r\n                    pdf={pdf}\r\n                    setNotes={setNotes}\r\n                    brokerage={brokerage}\r\n                    loadNumber={loadNumber}\r\n                    getTotal={getTotal}\r\n                    onChangeService={onChangeService}\r\n                    services={services}\r\n                    addService={addService}\r\n                    deleteService={deleteService}\r\n                    notes={notes}\r\n                    rateConfirmation={rateConfirmation}\r\n                    proofDelivery={proofDelivery}\r\n                    accessorials={accessorials}\r\n                    reactToPrintContent={reactToPrintContent}\r\n                    docFileViewer={docFileViewer}\r\n                    reactToPrintTrigger={reactToPrintTrigger}\r\n                    noticeText={noticeText}\r\n                />\r\n            </DialogContent>\r\n        </Dialog >\r\n    );\r\n};\r\n\r\nconst Invoice = ({ match: { params: { id = \"\" } = {} } = {} }) => {\r\n    const [open, setOpen] = useState(false);\r\n    const [pdf, setPdf] = useState(false);\r\n    const [services, setServices] = useState([]),\r\n        [notes, setNotes] = useState(''),\r\n        {mutation, loading} = useMutation('/api/create-invoicev2', null),\r\n        {data: {data = {}, fpData = {}} = {}, loading: isLoading} = useFetch(GET_LOAD_HISTORY + `/${id}`),\r\n        {loadNumber = null} = data || {},\r\n        {noticeText} = fpData || {};\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    useEffect(() => {\r\n        handleClickOpen();\r\n    }, []);\r\n\r\n    const handleClose = (e, reason = \"\") => {\r\n        // if (reason === 'backdropClick') return\r\n        setOpen(false);\r\n    };\r\n\r\n    const addService = (service) => {\r\n        const { label, cost } = service;\r\n        let obj = {\r\n            serviceName: label,\r\n            description: '',\r\n            quantity: 1,\r\n            price: cost,\r\n            amount: cost\r\n        }\r\n        setServices([...services, obj])\r\n    }\r\n\r\n    const onChangeService = (index, { name, value }) => {\r\n        const row = services[index];\r\n        row[name] = value;\r\n        const clone = [...services];\r\n        clone[index] = row\r\n        setServices(clone);\r\n    }\r\n\r\n    const Transition = useMemo(() => {\r\n        return React.forwardRef(function Transition(props, ref) {\r\n            const history = useHistory();\r\n            return (\r\n                <Zoom\r\n                    ref={ref}\r\n                    {...props}\r\n                    onExited={() => {\r\n                        return history.goBack();\r\n                    }}\r\n                />\r\n            );\r\n        });\r\n    }, []);\r\n\r\n    const getTotal = useCallback(() => {\r\n        const total = services.reduce((acc, service) => parseFloat(service.amount) + acc, 0)\r\n        return getDollarPrefixedPrice(total.toFixed(2))\r\n    }, [services]);\r\n\r\n    const deleteService = (index) => {\r\n        const data = services\r\n        data.splice(index, 1)\r\n        setServices([...data])\r\n    }\r\n\r\n    const saveServices = () => {\r\n        const data = {\r\n            services, notes, loadNumber\r\n        }\r\n        mutation(data, 'post', ({data, success}) => {\r\n            if(!success){\r\n                notification(data.message || 'Error Saving services', 'error')\r\n            }\r\n        });\r\n    }\r\n\r\n    // const createInvoice = async () => {\r\n        // const blob = await pdf(\r\n        //     <Document>\r\n        //         <Page size=\"A4\">\r\n        //             <View>\r\n        //                 jugal\r\n        //             </View>\r\n        //         </Page>\r\n        //     </Document>\r\n        // ).toBlob()\r\n        // console.log(blob)\r\n    // };\r\n\r\n    if(isLoading){\r\n        return <FullScreenLoader />\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <DialogComponent\r\n                open={open}\r\n                handleClose={handleClose}\r\n                transition={Transition}\r\n                data={data}\r\n                pdf={pdf}\r\n                services={services}\r\n                addService={addService}\r\n                onChangeService={onChangeService}\r\n                getTotal={getTotal}\r\n                deleteService={deleteService}\r\n                notes={notes}\r\n                setNotes={setNotes}\r\n                saveServices={saveServices}\r\n                noticeText={noticeText}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Invoice;\r\n","import React, {Fragment, useState} from 'react';\r\nimport {Box, Stack, IconButton} from \"@mui/material\";\r\nimport {Link, Route, useRouteMatch} from \"react-router-dom\";\r\nimport {PictureAsPdf} from \"@mui/icons-material\";\r\nimport DescriptionIcon from '@mui/icons-material/Description';\r\nimport Invoice from \"./NewInvoice\";\r\nimport moment from \"moment\";\r\nimport EnhancedTable from \"../Atoms/table/Table\";\r\nimport ReplayIcon from '@mui/icons-material/Replay';\r\nimport MoveToMyLoads from \"./MoveToMyLoads\";\r\nimport {UserSettings} from \"../Atoms/client\";\r\nimport {getDollarPrefixedPrice, readableDateTime} from \"../../utils/utils\";\r\nimport useFetchWithSearchPagination from \"../../hooks/useFetchWithSearchPagination\";\r\nimport Tooltip from \"../Atoms/Tooltip\";\r\nimport useMutation from \"../../hooks/useMutation\";\r\nimport {LoadingButton} from \"../Atoms\";\r\nimport {notification} from \"../../actions/alert\";\r\n\r\nconst modalConfig = {\r\n    title: 'Move invoice'\r\n}\r\nexport default function InvoicesList() {\r\n    const {edit = false, canSendToTriumph} = UserSettings.getUserPermissionsByDashboardId('invoices') || {};\r\n    const {path} = useRouteMatch();\r\n    const {mutation, loading: isLoadingPdf} = useMutation('/create-be-invoice-pdf', null, true)\r\n    const {\r\n            data: _data, loading, page, limit, onPageChange, onLimitChange, refetch,\r\n            isPaginationLoading, isRefetching\r\n        } = useFetchWithSearchPagination('/api/load/invoice_loads'),\r\n        [checkboxes, setCheckboxes] = useState([]),\r\n        {loads, total} = _data || {};\r\n\r\n    const config = {\r\n        rowCellPadding: \"normal\",\r\n        headerCellSx: {pt: 1, pb: 1},\r\n        emptyMessage: 'No Invoices found',\r\n        showRefresh: true,\r\n        page,\r\n        limit,\r\n        count: total,\r\n        onPageChange: (...args) => {\r\n            onPageChange(...args);\r\n            resetCheckboxes();\r\n        },\r\n        onLimitChange: (...args) => {\r\n            onLimitChange(...args);\r\n            resetCheckboxes();\r\n        },\r\n        showCheckbox: !!canSendToTriumph,\r\n        columns: [\r\n            {\r\n                id: 'loadNumber',\r\n                label: 'Load Number',\r\n            },\r\n            {\r\n                id: \"country\",\r\n                label: \"Pickup City/State\",\r\n                renderer: ({row}) => {\r\n                    return (\r\n                        <Fragment>\r\n                            {row.pickup[0].pickupCity}, {row.pickup[0].pickupState}\r\n                        </Fragment>\r\n                    );\r\n                },\r\n            },\r\n            {\r\n                id: \"pickupDate\",\r\n                label: \"Pickup Date\",\r\n                renderer: ({row: {pickup = []} = {}}) => {\r\n                    const [{pickupDate = ''}] = pickup;\r\n                    return moment(pickupDate).format('MM/DD/YYYY')\r\n                }\r\n            },\r\n            {\r\n                id: \"deliveryCountry\",\r\n                label: \"Delivery City/State\",\r\n                renderer: ({row}) => {\r\n                    return (\r\n                        <Fragment>\r\n                            {row.drop[0].dropCity}, {row.drop[0].dropState}\r\n                        </Fragment>\r\n                    );\r\n                },\r\n            },\r\n            {\r\n                id: \"deliveryDate\",\r\n                label: \"Delivery Date\",\r\n                renderer: ({row: {drop = []} = {}}) => {\r\n                    const [{dropDate = ''}] = drop;\r\n                    return moment(dropDate).format('MM/DD/YYYY')\r\n                }\r\n            },\r\n            {\r\n                id: \"assigned\",\r\n                label: \"Assigned To\",\r\n                renderer: ({row}) => {\r\n                    const {user = {}} = {} = row || {},\r\n                        {name = '', firstName, lastName} = user || {};\r\n                    return name || `${firstName || '--'} ${lastName || ''}`\r\n                }\r\n            },\r\n            {\r\n                id: \"accessorials\",\r\n                label: \"Accessorials\",\r\n                valueFormatter: (value) => (value || []).join(', ')\r\n            },\r\n            {\r\n                id: \"company\",\r\n                label: \"Company\",\r\n                renderer: ({row}) => {\r\n                    return row?.brokerage\r\n                },\r\n                emptyState: '--'\r\n            },\r\n            {\r\n                id: 'rate',\r\n                label: 'Rate',\r\n                emptyState: '--',\r\n                valueFormatter: (value) => value ? getDollarPrefixedPrice(value) : ''\r\n            },\r\n            {\r\n                id: 'updatedAt',\r\n                label: 'Updated On',\r\n                valueFormatter: (value) => readableDateTime(value)\r\n            },\r\n            {\r\n                id: '',\r\n                label: 'Invoice',\r\n                visible: !!edit,\r\n                renderer: ({row}) => {\r\n                    return <Stack direction={'row'}>\r\n                        <Tooltip title='Create Invoice' placement='top'>\r\n                            <IconButton\r\n                                component={Link}\r\n                                to={path + '/' + row._id}\r\n                                variant=\"outlined\"\r\n                                color=\"primary\"\r\n                            >\r\n                                <DescriptionIcon/>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        {row.invoiceUrl && <Tooltip title='Server Invoice' placement='top'>\r\n                            <IconButton\r\n                                onClick={(e) => {\r\n                                    e.preventDefault();\r\n                                    window.open(row.invoiceUrl, '_blank')\r\n                                }}\r\n                                variant=\"outlined\"\r\n                                color=\"primary\"\r\n                            >\r\n                                <PictureAsPdf sx={{color: 'red'}}/>\r\n                            </IconButton>\r\n                        </Tooltip>}\r\n                    </Stack>\r\n                }\r\n            },\r\n            {\r\n                id: '',\r\n                label: 'Move',\r\n                visible: !!edit,\r\n                renderer: ({row}) => {\r\n                    return <IconButton\r\n                        component={Link}\r\n                        to={path + '/moveToMyLoads/' + row._id}\r\n                        variant=\"outlined\"\r\n                        color=\"primary\"\r\n                    >\r\n                        <ReplayIcon/>\r\n                    </IconButton>\r\n                }\r\n            },\r\n        ]\r\n    }\r\n\r\n    const onCheckboxChange = (row, e) => {\r\n        e.preventDefault();\r\n        const key = row['loadNumber'];\r\n        const index = checkboxes.indexOf(key);\r\n        let newCheckboxes = [...checkboxes]\r\n        if(index > -1) {\r\n            newCheckboxes = newCheckboxes.toSpliced(index, 1)\r\n        } else {\r\n            newCheckboxes.push(key);\r\n        }\r\n        setCheckboxes(newCheckboxes);\r\n    }\r\n\r\n    const onRefresh = () => {\r\n        refetch();\r\n        resetCheckboxes();\r\n    }\r\n\r\n    const resetCheckboxes = () => setCheckboxes([])\r\n\r\n    const onSendToTriumph = () => {\r\n        mutation({loadIds: checkboxes}, null, ({success, data}) => {\r\n              if(data.data.length){\r\n                data.data.forEach((invoice, index) => {\r\n                    setTimeout(() => {\r\n                        notification(invoice.message, invoice.invoiceCreated ? 'success' : 'error');\r\n                    }, index * 2000);\r\n                });\r\n              }\r\n            if(success) {\r\n                resetCheckboxes();\r\n                refetch();\r\n            }\r\n        })\r\n    }\r\n\r\n    const actions = <Box>\r\n        {canSendToTriumph && <LoadingButton\r\n            variant='contained'\r\n            disabled={!checkboxes.length}\r\n            isLoading={isLoadingPdf}\r\n            loadingText='Please Wait...'\r\n            onClick={onSendToTriumph}\r\n        >\r\n            Upload on Triumph\r\n        </LoadingButton>}\r\n    </Box>\r\n\r\n    return (\r\n        <Box sx={{height: 'inherit'}} className='dashboardRoot'>\r\n            <Fragment>\r\n                <EnhancedTable\r\n                    config={config}\r\n                    data={loads}\r\n                    loading={loading}\r\n                    onRefetch={onRefresh}\r\n                    isRefetching={isRefetching}\r\n                    isPaginationLoading={isPaginationLoading}\r\n                    onCheckboxChange={onCheckboxChange}\r\n                    checkboxes={checkboxes}\r\n                    checkboxKey={'loadNumber'}\r\n                    actions={actions}\r\n                />\r\n                {edit && <Route path={path + '/moveToMyLoads/:id'}\r\n                                render={(props) => <MoveToMyLoads onCloseUrl={path}\r\n                                                                  getInvoices={refetch}\r\n                                                                  modalConfig={modalConfig} {...props} />}/>}\r\n                {edit && <Route path={path + '/:id'} exact component={Invoice} onCloseUrl={path}/>}\r\n            </Fragment>\r\n        </Box>\r\n    )\r\n}","import {useState} from \"react\";\r\nimport {requestDelete, requestPatch, requestPost, requestPut} from \"../utils/request\";\r\nimport {serialize} from \"../utils/utils\";\r\n\r\nconst getRequestCb = (type) => {\r\n    let fn;\r\n    // eslint-disable-next-line default-case\r\n    switch (type) {\r\n        case 'put' : {\r\n            fn = requestPut\r\n            break;\r\n        }\r\n        case 'delete' : {\r\n            fn = requestDelete\r\n            break;\r\n        }\r\n        case 'patch' : {\r\n            fn = requestPatch\r\n            break;\r\n        }\r\n        default: {\r\n            fn = requestPost;\r\n        }\r\n    }\r\n    return fn;\r\n}\r\n\r\nconst useMutation = (url, callback = null, showTriggers=false, options={}) => {\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const mutation = async (body, type = 'post', afterSubmit) => {\r\n        let uri = url;\r\n        if(options.queryParams){\r\n            uri = uri + \"?\" + serialize(options.queryParams)\r\n        }\r\n        setLoading(true);\r\n        if(!type){\r\n            type = 'post'\r\n        }\r\n        const asyncApiCall = getRequestCb(type.toLowerCase());\r\n        if(asyncApiCall) {\r\n            return asyncApiCall({uri, callback, body, showTriggers})\r\n                .then(res => {\r\n                    if(afterSubmit){\r\n                        afterSubmit({...res})\r\n                    }\r\n                    return res\r\n                })\r\n                .catch(err => {\r\n                    return err;\r\n                })\r\n                .finally(() => {\r\n                    setLoading(false);\r\n                });\r\n        }\r\n    }\r\n\r\n    return { mutation, loading }\r\n}\r\n\r\nexport default useMutation;","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {styled, useTheme} from \"@mui/material/styles\";\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport DialogTitle from \"@mui/material/DialogTitle\";\r\nimport DialogContent from \"@mui/material/DialogContent\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport {useMemo} from \"react\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {useMediaQuery, Zoom} from \"@mui/material\";\r\nimport {addEvent, removeEvent} from \"../../utils/utils\";\r\nimport {ENHANCED_DASHBOARD} from \"../client/routes\";\r\n\r\nconst BootstrapDialog = styled(Dialog)(({theme}) => ({\r\n    \"& .MuiDialogContent-root\": {\r\n        padding: theme.spacing(2),\r\n    },\r\n    \"& .MuiDialogActions-root\": {\r\n        padding: theme.spacing(1),\r\n    },\r\n}));\r\n\r\nconst BootstrapDialogTitle = (props) => {\r\n    const {children, onClose, showClose,titleStyles, ...other} = props;\r\n\r\n    return (\r\n        <DialogTitle sx={{ m: 0, p: 2, textAlign: 'center', ...titleStyles }} {...other}>\r\n            {showClose ? (\r\n                <IconButton\r\n                    aria-label=\"close\"\r\n                    onClick={onClose}\r\n                    sx={{\r\n                        position: \"absolute\",\r\n                        left: 8,\r\n                        top: 12,\r\n                        color: (theme) => theme.palette.grey[500],\r\n                    }}\r\n                >\r\n                    <CloseIcon/>\r\n                </IconButton>\r\n            ) : null}\r\n            {children}\r\n        </DialogTitle>\r\n    );\r\n};\r\n\r\nBootstrapDialogTitle.propTypes = {\r\n    children: PropTypes.node,\r\n    onClose: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default function Modal(props) {\r\n    const {config = {}, children, closeCallback} = props,\r\n        {\r\n            title = \"\",\r\n            closeUrl = \"\",\r\n            showClose = true,\r\n            paperProps = {},\r\n            preventBackdropClick = false,\r\n            titleStyles = {},\r\n            maxWidth = 'md'\r\n        } = config;\r\n    const [open, setOpen] = React.useState(false);\r\n    const theme = useTheme();\r\n    const fullScreen = useMediaQuery(theme.breakpoints.down('sm'));\r\n\r\n    const handleClose = (e, reason = '') => {\r\n        if (preventBackdropClick && reason.equalsIgnoreCase('backdropClick')) {\r\n            return;\r\n        }\r\n        setOpen(false);\r\n    };\r\n\r\n\r\n    React.useEffect(() => {\r\n        setOpen(true);\r\n        addEvent(window, 'closeModal', handleClose)\r\n\r\n        return () => removeEvent(window, 'closeModal', handleClose)\r\n    }, []);\r\n\r\n    const Transition = useMemo(() => {\r\n        return React.forwardRef(function Transition(props, ref) {\r\n            const history = useHistory();\r\n            return (\r\n                <Zoom\r\n                    ref={ref}\r\n                    {...props}\r\n                    onExited={() => {\r\n                        return closeCallback ? closeCallback() : closeUrl ? history.push(closeUrl || ENHANCED_DASHBOARD) : history.goBack()\r\n                    }}\r\n                />\r\n            );\r\n        });\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    return (\r\n        <BootstrapDialog\r\n            onClose={handleClose}\r\n            aria-labelledby={title || \"customized-dialog-title\"}\r\n            open={open}\r\n            maxWidth={maxWidth}\r\n            TransitionComponent={Transition}\r\n            PaperProps={paperProps}\r\n            fullScreen={fullScreen}\r\n        >\r\n            {title && <BootstrapDialogTitle\r\n                id={title || \"customized-dialog-title\"}\r\n                onClose={handleClose}\r\n                showClose={showClose}\r\n                titleStyles={titleStyles}\r\n            >\r\n                {title}\r\n            </BootstrapDialogTitle>}\r\n            <DialogContent dividers sx={{borderTop: 'none'}}>{children}</DialogContent>\r\n            {/* <DialogActions>\r\n          <Button autoFocus onClick={onOkHandler}>\r\n            {okButtonText}\r\n          </Button>\r\n        </DialogActions> */}\r\n        </BootstrapDialog>\r\n    );\r\n}\r\n","import * as React from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport MuiDialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport Slide from '@mui/material/Slide';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Dialog(props) {\r\n    const {open = false, config, onClose, preventBackdropClose = false, className} = props,\r\n        {title, onOk, okText = 'Save', content, onCancel} = config;\r\n\r\n    const handleClose = (e, reason = '') => {\r\n        if (preventBackdropClose && reason.equalsIgnoreCase('backdropclick')) {\r\n            return\r\n        }\r\n        onClose()\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <MuiDialog\r\n                className={className}\r\n                open={open}\r\n                TransitionComponent={Transition}\r\n                onClose={handleClose}\r\n                aria-describedby=\"alert-dialog-slide-description\"\r\n            >\r\n                {typeof title === 'function' ? title({...config}) :\r\n                    <DialogTitle sx={{fontWeight: 550}}>{title}</DialogTitle>}\r\n                <DialogContent>\r\n                    {typeof content === 'function' ? content({config}) : content}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    {typeof onCancel === 'function' ? onCancel({config, onClose}): <Button variant='outlined' onClick={handleClose}>Cancel</Button>}\r\n                    {typeof okText === 'function' ? okText({config, onOk}) : <Button variant='contained'\r\n                                                                                     color={okText.equalsIgnoreCase('delete') ? 'error' : 'primary'}\r\n                                                                                     onClick={onOk}\r\n                    >\r\n                        {okText}\r\n                    </Button>}\r\n                </DialogActions>\r\n            </MuiDialog>\r\n        </div>\r\n    );\r\n}","import Pagination from \"@mui/material/Pagination\"\r\nimport Stack from \"@mui/material/Stack\"\r\nimport Typography from \"@mui/material/Typography\"\r\nimport React, {useEffect, useState} from \"react\"\r\nimport styled from \"@mui/material/styles/styled\";\r\nimport {Select} from \"../index\";\r\n\r\nconst StyledPagination = styled(Pagination)(({theme}) => ({\r\n    \"& .MuiPaginationItem-root\": {\r\n        [theme.breakpoints.down(\"md\")]: {\r\n            height: \"1.8rem\",\r\n            width: \"1rem\"\r\n        }\r\n    }\r\n}));\r\n\r\nconst StyledStack = styled(Stack)(({theme}) => ({\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n        justifyContent: 'center'\r\n    },\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    flexWrap: 'wrap',\r\n        '& .pageSizeSelect': {\r\n        width: 80\r\n        }\r\n}))\r\n\r\nconst TablePagination = ({data = [], onPageChange, page = 1, count = 0, limit = 1, onLimitChange, isLoading}) => {\r\n    const [length, setLength] = useState(0);\r\n\r\n    useEffect(() => {\r\n        if (Array.isArray(data)) {\r\n            setLength(data.length);\r\n        }\r\n    }, [data]);\r\n\r\n    const onChange = (e, pgNum) => {\r\n        if (+page !== +pgNum && typeof onPageChange === 'function') {\r\n            onPageChange(e, +pgNum)\r\n        }\r\n    }\r\n\r\n    const handlePageSize = ({value}) => {\r\n        if(typeof onLimitChange === 'function'){\r\n            onLimitChange({value});\r\n        }\r\n    }\r\n\r\n    if (count <= 5) {\r\n        return null;\r\n    }\r\n    return (\r\n        <StyledStack direction='row' alignItems={'center'}>\r\n            <Typography sx={{color: '#525F7F'}} fontSize={12}>Showing {length} of {count} entries</Typography>\r\n            <Stack direction='row' alignItems='center'>\r\n                <Select\r\n                    disabled={isLoading}\r\n                    name='pageSize'\r\n                    label=''\r\n                    value={limit}\r\n                    options={[\r\n                        {id: 5, label: 5},\r\n                        {id: 10, label: 10},\r\n                        {id: 20, label: 20},\r\n                        {id: 50, label: 50},\r\n                        {id: 100, label: 100},\r\n                    ]}\r\n                    className='pageSizeSelect'\r\n                    onChange={handlePageSize}\r\n                />\r\n                <StyledPagination\r\n                    disabled={isLoading}\r\n                    count={Math.ceil(count / limit)}\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                    page={page}\r\n                    size=\"medium\"\r\n                    onChange={onChange}\r\n                />\r\n            </Stack>\r\n        </StyledStack>\r\n    )\r\n}\r\n\r\nexport default TablePagination\r\n","import {\r\n    Backdrop,\r\n    Box,\r\n    Checkbox,\r\n    DialogContentText,\r\n    Grid,\r\n    IconButton,\r\n    Paper,\r\n    Stack,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableContainer,\r\n    TableHead,\r\n    TableRow, TableSortLabel, Typography\r\n} from '@mui/material';\r\nimport _ from 'lodash';\r\nimport ErrorOutlineIcon from '@mui/icons-material/ErrorOutline';\r\nimport React, {Fragment, memo, useEffect, useMemo, useState} from 'react';\r\nimport {withRouter} from 'react-router-dom';\r\nimport TablePagination from './Pagination';\r\nimport Spinner from \"../../layout/Spinner\";\r\nimport {Delete, Refresh} from \"@mui/icons-material\";\r\nimport Dialog from \"../Dialog\";\r\nimport {styled} from \"@mui/material/styles\";\r\nimport {getDollarPrefixedPrice, getUserDetail} from \"../../../utils/utils\";\r\nimport Tooltip from \"../Tooltip\";\r\n\r\nconst Cell = styled(TableCell)(({theme}) => ({\r\n    [theme.breakpoints.down('xs')]: {\r\n        fontSize: 12,\r\n        padding: '0 8px',\r\n    }\r\n}))\r\nconst DeleteIcon = styled(Delete)(({theme}) => ({\r\n    [theme.breakpoints.down('xs')]: {\r\n        fontSize: 14,\r\n    }\r\n}))\r\n\r\nfunction Headers({columns = [], config = {}, role, handleRequestSort, hasSort}) {\r\n    const {headerCellSx = {}, hasDelete, sortField, sortOrder, showCheckbox} = config;\r\n    const headers = useMemo(() => {\r\n        return columns.map((column, index) => {\r\n            const {label = '', id = '', visible = true, sort = false} = column || {};\r\n            // eslint-disable-next-line array-callback-return\r\n            const isVisible = _.isFunction(visible) ? visible({column, role}) : visible;\r\n            if (!isVisible) {\r\n                return null;\r\n            }\r\n            return (\r\n                <Cell padding={'normal'} sx={{color: '#000', bgcolor: '#fafafa', fontWeight: 800, ...headerCellSx}}\r\n                      key={id || index}>\r\n                    {(hasSort && sort)\r\n                        ? <TableSortLabel onClick={(e) => handleRequestSort(e, id)} active={id === sortField}\r\n                                     direction={sortOrder}\r\n                                     sx={{ ...headerCellSx}}>\r\n                        {label}\r\n                    </TableSortLabel>\r\n                        : label}\r\n                </Cell>\r\n            )\r\n        })\r\n    }, [columns, headerCellSx])\r\n\r\n    if(showCheckbox){\r\n        headers.unshift(<Cell key='checkbox-header' padding={'normal'} sx={{color: '#000', bgcolor: '#fafafa', fontWeight: 800, ...headerCellSx}} />)\r\n    }\r\n    return <TableRow>\r\n        {headers}\r\n        {hasDelete && <Cell padding={'none'} sx={{color: '#000', bgcolor: '#fafafa', fontWeight: 800, ...headerCellSx}}/>}\r\n    </TableRow>;\r\n}\r\n\r\nconst getTableCell = ({\r\n                          row = [],\r\n                          columns = {},\r\n                          config = {},\r\n                          handleRowClick,\r\n                          rowIndex,\r\n                          handleDelete,\r\n                          hasDeletePermission,\r\n                          checkboxKey,\r\n                          ...rest\r\n                      }) => {\r\n    const {\r\n        hasDelete = false,\r\n        rowCellPadding = 'none',\r\n        onRowClick = undefined,\r\n        rowStyleCb,\r\n        showCheckbox = false,\r\n        rowCellSx={}\r\n    } = config;\r\n    const {role, onCheckboxChange, checkboxes} = rest;\r\n    let rowStyle = {}\r\n    if (rowStyleCb) {\r\n        rowStyle = rowStyleCb({row}) || {};\r\n    }\r\n    const rowClickHandler = (e) => {\r\n            e.preventDefault();\r\n            if (_.isFunction(handleRowClick)) handleRowClick(row)\r\n        },\r\n        deleteCell = <Cell sx={{}} padding={'none'} component=\"th\" scope=\"row\">\r\n            <Tooltip title='Delete' placement='top'>\r\n                <IconButton onClick={handleDelete.bind(this, row._id, row)} disabled={!hasDeletePermission}>\r\n                    <DeleteIcon color={hasDeletePermission ? 'error' : 'disabled'}/>\r\n                </IconButton>\r\n            </Tooltip>\r\n        </Cell>;\r\n\r\n    const cell = columns.map((column, i) => {\r\n        const {id = '', renderer, emptyState = '--', valueFormatter, visible = true, cellPadding, isCostCell} = column || {};\r\n        const isVisible = _.isFunction(visible) ? visible({column, role}) : visible;\r\n        if (!isVisible) {\r\n            return null;\r\n        }\r\n        let cell;\r\n        if(isCostCell){\r\n            cell = row[id] ? getDollarPrefixedPrice(row[id] || '') : emptyState\r\n        }\r\n        else if (valueFormatter && _.isFunction(valueFormatter)) {\r\n            cell = valueFormatter(row[id], row);\r\n        } else if (_.isFunction(renderer)) {\r\n            cell = renderer({row, role}, rowIndex) || emptyState;\r\n        } else {\r\n            cell = _.get(row, id, emptyState) || emptyState;\r\n        }\r\n        return <Cell key={id + i} padding={cellPadding || rowCellPadding || 'normal'} sx={rowCellSx} component=\"th\" scope=\"row\">\r\n            {cell}\r\n        </Cell>\r\n    });\r\n\r\n    if(showCheckbox){\r\n        if(!checkboxKey){\r\n            throw new Error('Checkbox key not provided');\r\n        }\r\n        const checked = checkboxes.indexOf(row[checkboxKey]) > -1;\r\n        cell.unshift(<Cell onClick={onCheckboxChange.bind(this, row)} key={`checkbox-${rowIndex}`} sx={rowCellSx}>\r\n            <Checkbox checked={checked} />\r\n        </Cell>)\r\n    }\r\n\r\n    return <TableRow key={rowIndex} hover={!!onRowClick} onClick={rowClickHandler}\r\n                     sx={!!onRowClick ? {cursor: 'pointer', ...rowStyle} : {...rowStyle}}>\r\n        {cell}\r\n        {hasDelete && deleteCell}\r\n    </TableRow>;\r\n}\r\n\r\nconst TableData = ({columns, data = [], config = {}, handleRowClick, handleDelete, ...rest}) => {\r\n\r\n    return (data || []).map((row, index) => {\r\n        const {dataKey = ''} = config;\r\n        if (dataKey) {\r\n            row = row[dataKey];\r\n        }\r\n        return getTableCell({row, columns, config, handleRowClick, rowIndex: index, handleDelete, ...rest})\r\n    })\r\n}\r\n\r\n\r\nconst EnhancedTable = ({config = {}, data = [], history, loading = false, onRefetch, isRefetching, actions, isPaginationLoading=false, ...rest}) => {\r\n    data = data || [];\r\n    const {onCheckboxChange, checkboxes, checkboxKey} = rest;\r\n    const [tableState, setTableState] = useState({}),\r\n        [dialog, setDialog] = useState({open: false, config: {}}),\r\n        {\r\n            columns: _columns = [],\r\n            columnsBuilder,\r\n            onRowClick,\r\n            hasOnClickUrl = true,\r\n            onPageChange,\r\n            page,\r\n            count,\r\n            limit,\r\n            onPageSizeChange,\r\n            onLimitChange,\r\n            size = 'medium',\r\n            emptyMessage = '',\r\n            onRowClickDataCallback,\r\n            showRefresh = false,\r\n            onDelete,\r\n            deleteMessage,\r\n            deletePermissions = [],\r\n            containerHeight='',\r\n            sortField,\r\n            sortOrder = 'asc',\r\n            handleSortChange,\r\n            hasSort = false\r\n        } = config,\r\n        {role = ''} = getUserDetail().user,\r\n        hasDeletePermission = typeof deletePermissions === 'boolean' ? deletePermissions : deletePermissions.indexOf(role) > -1 || false,\r\n        ref = React.useRef([]);\r\n    const columns = typeof columnsBuilder === 'function' ? columnsBuilder({data, columns: _columns}) : _columns;\r\n    const length = Array.isArray(data) && data.length,\r\n        Actions = useMemo(() => {\r\n        if(actions && React.isValidElement(actions)){\r\n            return actions;\r\n        }\r\n        return <></>\r\n    }, [actions]);\r\n\r\n    const handleRowClick = (row) => {\r\n        if (hasOnClickUrl && onRowClick) {\r\n            const url = onRowClick(row);\r\n            if (onRowClickDataCallback) {\r\n                row = onRowClickDataCallback(row)\r\n            }\r\n            history.push(url, row);\r\n        } else if (onRowClick) {\r\n            onRowClick(row)\r\n        }\r\n    }\r\n\r\n    const handleRequestSort = (event, property) => {\r\n        const isAsc = sortField === property && sortOrder === 'asc';\r\n        // setOrder(isAsc ? 'desc' : 'asc');\r\n        // setOrderBy(property);\r\n        handleSortChange && handleSortChange({field: property, order: isAsc ? 'desc' : 'asc'})\r\n    };\r\n\r\n    const handleDelete = (id, row, e) => {\r\n        e.stopPropagation();\r\n        const config = {\r\n            title: () => <Grid container alignItems='center' sx={{p: '16px 24px'}} gap={1}>\r\n                <ErrorOutlineIcon color='error'/>\r\n                <Typography sx={{fontSize: '1.25rem', fontWeight: 550}} color='error'>Delete</Typography>\r\n            </Grid>,\r\n            okText: 'Delete',\r\n            onOk: () => onDelete(id, onDialogClose, {row}),\r\n            content: () => <DialogContentText\r\n                sx={{color: '#000'}}>{_.isFunction(deleteMessage) ? deleteMessage({row}) : deleteMessage || 'Are you sure you want to delete the record?'}</DialogContentText>\r\n        }\r\n        setDialog({...dialog, open: true, config});\r\n    }\r\n\r\n    function onDialogClose() {\r\n        setDialog({...dialog, open: false})\r\n    }\r\n\r\n    const getLoader = () => {\r\n        const innerHeight = window.innerHeight - 180,\r\n            height = (tableState.height ? tableState.height > innerHeight ? innerHeight : tableState.height : innerHeight) || innerHeight;\r\n        return <Grid container alignItems={'center'} justifyContent='center' sx={{height}}>\r\n            <Grid item alignItems='center' sx={{position: 'relative'}}>\r\n                <Spinner/>\r\n            </Grid>\r\n        </Grid>\r\n    }\r\n    const getTableContent = useMemo(() => {\r\n        if (!length) {\r\n            return (<tbody style={{height: 300}}>\r\n            <tr>\r\n                <td style={{textAlign: 'center'}}><h4>{emptyMessage || 'No records found'}</h4></td>\r\n            </tr>\r\n            </tbody>)\r\n        }\r\n        return <Fragment>\r\n            <TableHead className={''} sx={{backgroundColor: '#fafafa', borderTop: '1px solid rgba(224, 224, 224, 1)'}}>\r\n                <Headers columns={columns} config={config} role={role} handleRequestSort={handleRequestSort} hasSort={hasSort}/>\r\n            </TableHead>\r\n            <TableBody>\r\n                <TableData\r\n                    role={role}\r\n                    columns={columns}\r\n                    data={data}\r\n                    config={config}\r\n                    checkboxes={checkboxes}\r\n                    checkboxKey={checkboxKey}\r\n                    handleRowClick={handleRowClick}\r\n                    handleDelete={handleDelete}\r\n                    onCheckboxChange={onCheckboxChange}\r\n                    hasDeletePermission={hasDeletePermission}\r\n                />\r\n            </TableBody>\r\n        </Fragment>\r\n    }, [data, config, checkboxes])\r\n\r\n    useEffect(() => {\r\n        if (ref?.current?.table) {\r\n            const calculatedHeight = ref.current.table.offsetHeight;\r\n            setTableState({...tableState, height: calculatedHeight > 200 ? calculatedHeight : undefined})\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if((isPaginationLoading || isRefetching) && ref.current?.tableContainer){\r\n            ref.current.tableContainer.scrollTo(0, 0)\r\n        }\r\n    }, [isPaginationLoading, isRefetching])\r\n\r\n    return <Box className='enhanced-table' sx={{height: length && !loading ? (containerHeight || '95%') : 'auto'}}>\r\n        <Stack alignItems='flex-end' justifyContent='flex-end' direction='row' py={1} gap={.5}>\r\n            {Actions}\r\n            {showRefresh && <IconButton title='Refresh' onClick={onRefetch}>\r\n                <Refresh className={(isRefetching) ? 'rotateIcon' : undefined}/>\r\n            </IconButton>}\r\n        </Stack>\r\n        <TableContainer\r\n            component={Paper}\r\n            className='tableContainer'\r\n            ref={el => ref.current['tableContainer'] = el}\r\n            sx={{boxShadow: '0px 0px 32px #8898AA26', mb: 2, height: length && !loading ? 'calc(100% - 80px)' : 'auto', position: 'relative'}}\r\n        >\r\n            {loading\r\n                ? getLoader()\r\n                : <Table ref={el => ref.current['table'] = el} aria-label=\"caption table\" size={size} stickyHeader>\r\n                    {getTableContent}\r\n                </Table>}\r\n            <Backdrop\r\n                sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1, position: 'absolute' }}\r\n                open={isPaginationLoading || isRefetching || false}\r\n            >\r\n                <Spinner sx={{color: 'inherit'}} />\r\n            </Backdrop>\r\n        </TableContainer>\r\n        {!loading && data.length > 0 &&\r\n            <TablePagination data={data} onPageChange={onPageChange} page={page} count={count} limit={limit} onLimitChange={onLimitChange || onPageSizeChange} isLoading={isRefetching || isPaginationLoading} />}\r\n        <Dialog className='enhancedTable_dialog' open={dialog.open} config={dialog.config} onClose={onDialogClose}/>\r\n    </Box>;\r\n};\r\n\r\nexport default withRouter(memo(EnhancedTable));\r\n","import {useEffect, useState} from \"react\";\r\nimport {requestGet} from \"../utils/request\";\r\nimport {serialize} from \"../utils/utils\";\r\n\r\nconst useFetch = (url, callback = null, options = {}) => {\r\n    const [data, setData] = useState(undefined);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null),\r\n        [isRefetching, setIsRefetching] = useState(false);\r\n\r\n    function requestCall() {\r\n        let uri = url\r\n        if (options.queryParams) {\r\n            uri = `${uri}?${serialize(options.queryParams)}`\r\n        }\r\n        requestGet({uri, callback, showTriggers: false})\r\n            .then(result => {\r\n                result.data && setData(result.data);\r\n            })\r\n            .finally(() => {\r\n                setLoading(false);\r\n                setIsRefetching(false);\r\n            })\r\n    }\r\n\r\n    function onRefetch() {\r\n        setIsRefetching(true);\r\n        requestCall();\r\n    }\r\n\r\n    useEffect(() => {\r\n        setLoading(true)\r\n        setError(null);\r\n        requestCall();\r\n    }, [url])\r\n\r\n    return {data, loading, error, refetch: onRefetch, isRefetching}\r\n}\r\n\r\nexport default useFetch;","import React from \"react\";\r\nimport _ from 'lodash';\r\nimport {FormGroup, Input} from \"reactstrap\";\r\nimport {Typography} from \"@mui/material\";\r\n\r\nconst InputPure = (props) => {\r\n    const {\r\n        label = '',\r\n        type = 'text',\r\n        options = [],\r\n        labelKey = 'label',\r\n        valueKey = 'id',\r\n        onChangeSelect,\r\n        showFirstBlank = false,\r\n        onBlur\r\n    } = props;\r\n    props = _.cloneDeep(props);\r\n    delete props.showFirstBlank;\r\n\r\n    if (type.toLowerCase() === 'select') {\r\n        if (!Array.isArray(options) || !options.length) {\r\n            console.error('Options are mandatory in array format');\r\n        }\r\n        const opts = (options || []).map((opt) => {\r\n            return <option value={opt[valueKey]} key={opt[valueKey]}>{opt[labelKey]}</option>\r\n        })\r\n        if (showFirstBlank) opts.unshift(<option value=''>{'Select an option'}</option>)\r\n        return <Input\r\n            {...props}\r\n            onChange={onChangeSelect}\r\n            id={label}\r\n            type={type}\r\n        >{opts}</Input>\r\n    }\r\n    return <Input\r\n        id={label}\r\n        type={type}\r\n        {...props}\r\n        onBlur={onBlur}\r\n    />\r\n}\r\nconst InputField = (props = {}) => {\r\n    const {\r\n        label = '',\r\n        type = 'text',\r\n        multiple = false,\r\n        onChange,\r\n        labelStyle = {},\r\n        direction = 'column',\r\n        formGrpStyle = {},\r\n        errorText = '',\r\n        onBlur\r\n    } = props;\r\n\r\n    const onChangeSelect = (e) => {\r\n        if (type.toLowerCase() === 'select' && multiple) {\r\n            const {options, name} = e.target;\r\n            const values = [];\r\n            for (let i = 0, l = options.length; i < l; i++) {\r\n                if (options[i].selected) {\r\n                    values.push(options[i].value);\r\n                }\r\n            }\r\n            if (onChange) onChange(e, values, name)\r\n        } else if (onChange) onChange(e)\r\n    }\r\n\r\n    const handleBlur = (e) => {\r\n        if (onBlur) {\r\n            onBlur(e.target.name, e.target.value)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <FormGroup\r\n            style={direction === 'row' ? {display: 'flex', alignItems: 'center', ...formGrpStyle} : {...formGrpStyle}}>\r\n            {label && <label\r\n                className=\"form-control-label\"\r\n                htmlFor={label}\r\n                style={{color: '#525F7F', marginRight: 8, ...labelStyle}}\r\n            >\r\n                {label}\r\n            </label>}\r\n            <InputPure {...props} onChangeSelect={onChangeSelect} onBlur={handleBlur}/>\r\n            {errorText &&\r\n                <Typography variant='subtitle2' sx={{color: 'red', fontSize: '0.75em'}}>{errorText}</Typography>}\r\n        </FormGroup>\r\n    )\r\n}\r\n\r\nexport default InputField;","import React, {useState, useEffect, useCallback, useRef} from 'react';\r\nimport _ from 'lodash'\r\nimport {requestGet} from \"../utils/request\";\r\n\r\nconst useFetchWithSearchPagination = (url, options) => {\r\n    const {order = 'asc', orderBy, debounceTime = 500 } = options || {};\r\n    const [data, setData] = useState([]),\r\n        [loading, setLoading] = useState(false),\r\n        [page, setPage] = useState(1),\r\n        [limit, setLimit] = useState(100),\r\n        [searchQuery, setSearchQuery] = useState(''),\r\n        [isPaginationLoading, setIsPaginationLoading] = useState(false),\r\n        [isSearching, setIsSearching] = useState(false),\r\n        [isRefetching, setIsRefetching] = useState(false),\r\n        [sortField, setSortField] = useState(orderBy),\r\n        [sortOrder, setSortOrder] = useState(order),\r\n        isInitialLoad = useRef(true);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [url, page, limit, sortField, sortOrder]);\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const debouncedSearch = _.debounce(() => {\r\n            if (!isInitialLoad.current) {\r\n                setIsSearching(true);\r\n                fetchData();\r\n            }\r\n        }, debounceTime);\r\n\r\n        debouncedSearch();\r\n\r\n        return debouncedSearch.cancel;\r\n    }, [searchQuery, debounceTime]);\r\n\r\n    const fetchData = useCallback(async () => {\r\n        requestGet({uri: `${url}?page=${page}&search=${searchQuery}&limit=${limit}&sortField=${sortField}&sortOrder=${sortOrder}`})\r\n            .then(res => {\r\n                const {data} = res;\r\n                setData(data);\r\n            })\r\n            .catch(e => {\r\n                console.error(e.message);\r\n            })\r\n            .finally(() => {\r\n                setLoading(false);\r\n                setIsPaginationLoading(false);\r\n                setIsSearching(false);\r\n                setIsRefetching(false);\r\n                if (isInitialLoad.current) {\r\n                    isInitialLoad.current = false;\r\n                }\r\n            })\r\n    }, [url, page, limit, searchQuery, sortField, sortOrder]);\r\n\r\n    const onPageChange = useCallback((e, pgNum) => {\r\n        setIsPaginationLoading(true);\r\n        setPage(pgNum);\r\n    }, [])\r\n\r\n    const handleSearch = useCallback(({value}) => {\r\n        setSearchQuery(value);\r\n        setPage(1);\r\n    }, []);\r\n\r\n    const onLimitChange = useCallback(({value}) => {\r\n        setIsPaginationLoading(true);\r\n        setPage(1);\r\n        setLimit(value);\r\n    }, [])\r\n\r\n    const handleSortChange = useCallback(({ field, order }) => {\r\n        setSortField(field);\r\n        setSortOrder(order);\r\n        setIsPaginationLoading(true);\r\n        setPage(1);\r\n    }, []);\r\n\r\n    const refetch = () => {\r\n        setPage(1);\r\n        setIsRefetching(true);\r\n        fetchData();\r\n    };\r\n\r\n    return {\r\n        data,\r\n        loading,\r\n        page,\r\n        limit,\r\n        onPageChange,\r\n        handleSearch,\r\n        refetch,\r\n        onLimitChange,\r\n        searchQuery,\r\n        isPaginationLoading,\r\n        isSearching,\r\n        isRefetching,\r\n        sortField,\r\n        sortOrder,\r\n        handleSortChange,\r\n    };\r\n};\r\n\r\nexport default useFetchWithSearchPagination","import Modal from \"../Atoms/Modal\";\r\nimport { Grid, Typography } from \"@mui/material\";\r\nimport Select from \"../Atoms/form/Select\";\r\nimport {LOAD_STATUSES} from \"../constants\";\r\nimport {useState} from \"react\";\r\nimport useMutation from \"../../hooks/useMutation\";\r\nimport {LoadingButton} from \"../Atoms\";\r\nimport {styled} from \"@mui/material/styles\";\r\n\r\nconst config = {\r\n    title: 'Move Invoice to My Loads',\r\n    preventBackdropClick: true\r\n}\r\n\r\nconst Container = styled(Grid)(({theme}) => ({\r\n    [theme.breakpoints.down('sm')]: {\r\n        width: 'auto'\r\n    },\r\n    [theme.breakpoints.up('sm')]: {\r\n        width: 300\r\n    }\r\n}))\r\n\r\nconst MoveToMyLoads = (props) => {\r\n    const {onCloseUrl, getInvoices, refetch, getLoadStatuses = undefined, modalConfig, match: {params: {id} = {}} = {}, history} = props,\r\n        [value, setValue] = useState(),\r\n        {mutation, loading} = useMutation('/api/invoice/moveToMyLoads'),\r\n        statuses = getLoadStatuses ? getLoadStatuses(LOAD_STATUSES) : LOAD_STATUSES.map(status => {\r\n            if(status.id.equalsIgnoreCase('delivered')){\r\n                return {...status, disabled: true}\r\n            }\r\n            return status;\r\n        });\r\n\r\n    const onChange = ({value}) => {\r\n        setValue(value)\r\n    }\r\n\r\n    const onSubmit = (e) => {\r\n        e.preventDefault();\r\n        mutation({id, status: value}, null, () => {\r\n            getInvoices && getInvoices();\r\n            refetch && refetch();\r\n            history.replace(onCloseUrl);\r\n        });\r\n    }\r\n\r\n    return <Modal config={modalConfig || config}>\r\n        <Container container component='form' spacing={2} onSubmit={onSubmit}>\r\n            <Grid item>\r\n                <Typography>Select a load status</Typography>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n                <Select\r\n                    label='Status'\r\n                    name='status'\r\n                    options={statuses}\r\n                    onChange={onChange}\r\n                    value={value}\r\n                    showNone={true}\r\n                />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n                <LoadingButton type='submit' fullWidth disabled={!value} isLoading={loading} loadingText='Moving...'>\r\n                    Move\r\n                </LoadingButton>\r\n            </Grid>\r\n        </Container>\r\n    </Modal>\r\n}\r\n\r\nexport default MoveToMyLoads;"],"sourceRoot":""}