(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[25],{1127:function(e,t,n){"use strict";n.r(t);var a=n(1006),i=n(0),o=n.n(i),r=n(13),c=n(270),l=n(1077),s=n(262),d=n.n(s),h=n(44),j=n(197),u=n(1144),b=n(1076),g=n(27),m=n(89),O=n(274),p=n(340),f=n(263),x=n(2);const w={firstName:"",lastName:"",phone:""};var C=e=>{const{history:t,match:{params:{id:n=""}={}}={},onCloseUrl:a}=e,[r,c]=o.a.useState(w),[s,C]=Object(i.useState)(w),{mutation:v,loading:y}=Object(O.a)("/api/ownerOperator"),{loading:S,data:P}=Object(p.a)("/api/ownerOperator/"+n),{data:k}=P||{},N=e=>{let{name:t,value:n}=e;c({...r,[t]:n})};Object(i.useEffect)((()=>{k&&c(k)}),[k]);const R=e=>{let{name:t,value:n}=e;n&&C({...s,[t]:""})},D=e=>{let{success:t,data:n}=e;const{message:a}=n||{};t?(Object(m.j)("refreshOwnerOp"),Object(g.a)(a||"Owner operator created"),F()):Object(g.a)(a,"error")},F=()=>{t.push(a)};return Object(x.jsxs)(b.a,{fullWidth:!1,maxWidth:"md",open:!0,onClose:F,"aria-labelledby":"form-dialog-title",PaperProps:{sx:{width:400}},children:[Object(x.jsxs)(l.a,{id:"form-dialog-title",sx:{color:h.b,textAlign:"center",fontWeight:400,letterSpacing:1},children:[n?"Edit":"Add"," Owner Operator"]}),Object(x.jsx)(u.a,{children:Object(x.jsxs)(j.a,{container:!0,component:"form",noValidate:!0,direction:"column",rowSpacing:3,p:1,children:[Object(x.jsx)(j.a,{item:!0,xs:12,children:Object(x.jsx)("div",{children:Object(x.jsx)(f.b,{name:"firstName",label:"First Name",onChange:N,value:r.firstName||"",errors:s,onBlur:R,fullWidth:!0,disabled:S||y,required:!0})})}),Object(x.jsx)(j.a,{item:!0,xs:12,children:Object(x.jsx)(f.b,{name:"lastName",label:"Last Name",onChange:N,value:r.lastName||"",errors:s,onBlur:R,fullWidth:!0,disabled:S||y,required:!0})}),Object(x.jsx)(j.a,{item:!0,xs:12,children:Object(x.jsx)(f.b,{name:"phone",label:"Phone Number",onChange:N,value:r.phone||"",onBlur:R,errors:s,fullWidth:!0,disabled:S||y,required:!0})}),Object(x.jsx)(j.a,{item:!0,xs:12,children:Object(x.jsx)(f.c,{fullWidth:!0,type:"submit",onClick:e=>{e.preventDefault();const t={...r},n=(e=>{let{firstName:t,lastName:n,phone:a}=e,i={};return t||(i.firstName="Please provide the First Name"),n||(i.lastName="Please provide the Last Name"),a||(i.phone="Please provide the Phone Number"),i})(t);d.a.isEmpty(n)?v(t,null,D):C({...n})},isLoading:y||S,loadingText:y?"Updating...":S?"Please wait...":null,children:"Update"})})]})})]})},v=n(283),y=n(65),S=n(402);t.default=()=>{const{path:e}=Object(r.useRouteMatch)(),{edit:t,delete:n}=y.a.getUserPermissionsByDashboardId("ownerOperator"),{data:o={},isRefetching:l,loading:s,refetch:d,page:h,limit:j,onLimitChange:u,onPageChange:b,isPaginationLoading:g}=Object(S.a)("/api/ownerOperator",{page:1,limit:10}),{data:O,totalCount:p}=o||{},f=Object(r.useHistory)(),w=Object(i.useCallback)((()=>{d()}),[d]);Object(i.useEffect)((()=>(Object(m.a)(window,"refreshOwnerOp",w),()=>Object(m.g)(window,"refreshOwnerOp",w))),[w]);const P=e=>{let{success:t}=e;t&&w()},k={rowCellPadding:"inherit",showRefresh:!0,emptyMessage:"No Owner Operator Found",count:p,page:h,limit:j,onPageSizeChange:u,onPageChange:b,columns:[{id:"firstName",label:"First Name",emptyState:"--"},{id:"lastName",label:"Last Name",emptyState:"--"},{id:"role",label:"Role",renderer:()=>Object(x.jsx)(i.Fragment,{children:"Owner Operator"})},{id:"email",label:"Email"},{id:"update",renderer:o=>{let{row:r}=o;return Object(x.jsxs)(i.Fragment,{children:[Object(x.jsx)(a.a,{variant:"contained",onClick:t=>{t.stopPropagation(),f.push(e+"/edit/".concat(r._id))},sx:{mr:1},disabled:!t,children:"Update"}),Object(x.jsx)(a.a,{variant:"contained",color:"error",onClick:Object(v.c)({uri:"/api/ownerOperator/"+r._id,message:"Are you sure you want to delete this Owner Operator?",afterSuccessCb:P}),disabled:!n,children:"Delete"})]})}}]};return Object(x.jsxs)("div",{children:[Object(x.jsx)(c.a,{config:k,data:O,loading:s,isRefetching:l,onRefetch:d,isPaginationLoading:g}),Object(x.jsx)(r.Route,{path:e+"/add",render:t=>Object(x.jsx)(C,{...t,onCloseUrl:e})}),Object(x.jsx)(r.Route,{path:e+"/edit/:id",render:t=>Object(x.jsx)(C,{...t,onCloseUrl:e})})]})}},269:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(198),i=(n(0),n(199)),o=n(2);function r(e){return Object(o.jsx)(a.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center","& > * + *":{marginLeft:2}},children:Object(o.jsx)(i.a,{...e})})}},270:function(e,t,n){"use strict";var a=n(198),i=n(244),o=n(1152),r=n(1147),c=n(1153),l=n(491),s=n(293),d=n.n(s),h=n(1151),j=n(1150),u=n(1131),b=n(197),g=n(87),m=n(245),O=n(1149),p=n(300),f=n.n(p),x=n(1148),w=n(262),C=n.n(w),v=n(290),y=n.n(v),S=n(0),P=n.n(S),k=n(13),N=n(1102),R=n(9),D=n(263),F=n(2);const z=Object(R.a)(N.a)((e=>{let{theme:t}=e;return{"& .MuiPaginationItem-root":{[t.breakpoints.down("md")]:{height:"1.8rem",width:"1rem"}}}})),I=Object(R.a)(l.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{justifyContent:"center"},display:"flex",justifyContent:"space-between",flexWrap:"wrap","& .pageSizeSelect":{width:80}}}));var A=e=>{let{data:t=[],onPageChange:n,page:a=1,count:i=0,limit:o=1,onPageSizeChange:r}=e;const[c,s]=Object(S.useState)(0);Object(S.useEffect)((()=>{Array.isArray(t)&&s(t.length)}),[t]);return i<=5?null:Object(F.jsxs)(I,{direction:"row",alignItems:"center",children:[Object(F.jsxs)(g.a,{sx:{color:"#525F7F"},fontSize:12,children:["Showing ",c," of ",i," entries"]}),Object(F.jsxs)(l.a,{direction:"row",alignItems:"center",children:[Object(F.jsx)(D.e,{name:"pageSize",label:"",value:o,options:[{id:5,label:5},{id:10,label:10},{id:20,label:20},{id:50,label:50},{id:100,label:100}],className:"pageSizeSelect",onChange:e=>{let{value:t}=e;"function"===typeof r&&r({value:t})}}),Object(F.jsx)(z,{count:Math.ceil(i/o),color:"primary",variant:"contained",page:a,size:"medium",onChange:(e,t)=>{+a!==+t&&"function"===typeof n&&n(e,+t)}})]})]})},L=n(269),E=n(289),W=n(89);const M=Object(R.a)(x.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:12,padding:"0 8px"}}})),U=Object(R.a)(f.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:14}}}));function q(e){let{columns:t=[],config:n={},role:a}=e;const{headerCellSx:i={},hasDelete:o}=n,r=Object(S.useMemo)((()=>t.map(((e,t)=>{const{label:n="",id:o="",visible:r=!0}=e||{};return(C.a.isFunction(r)?r({column:e,role:a}):r)?Object(F.jsx)(M,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...i},children:n},o||t):null}))),[t,i]);return Object(F.jsxs)(O.a,{children:[r,o&&Object(F.jsx)(M,{padding:"none",sx:{...i}})]})}const T=e=>{let{columns:t,data:n=[],config:a={},handleRowClick:i,handleDelete:o,...r}=e;return(n||[]).map(((e,n)=>{const{dataKey:c=""}=a;return c&&(e=e[c]),(e=>{let{row:t=[],columns:n={},config:a={},handleRowClick:i,rowIndex:o,handleDelete:r,hasDeletePermission:c,...l}=e;const{hasDelete:s=!1,rowCellPadding:d="none",onRowClick:h,rowStyleCb:j}=a,{role:u}=l;let b={};j&&(b=j({row:t})||{});const g=Object(F.jsx)(M,{sx:{},padding:"none",component:"th",scope:"row",children:Object(F.jsx)(m.a,{onClick:r.bind(void 0,t._id,t),disabled:!c,children:Object(F.jsx)(U,{color:"error"})})}),p=n.map(((e,n)=>{const{id:a="",renderer:i,emptyState:r="--",valueFormatter:c,visible:l=!0}=e||{};if(!(C.a.isFunction(l)?l({column:e,role:u}):l))return null;let s;return s=c&&C.a.isFunction(c)?c(t[a]):C.a.isFunction(i)?i({row:t,role:u},o)||r:C.a.get(t,a,r)||r,Object(F.jsx)(M,{padding:d||"normal",component:"th",scope:"row",children:s},a+n)}));return Object(F.jsxs)(O.a,{hover:!!h,onClick:e=>{e.preventDefault(),C.a.isFunction(i)&&i(t)},sx:h?{cursor:"pointer",...b}:{...b},children:[p,s&&g]},o)})({row:e,columns:t,config:a,handleRowClick:i,rowIndex:n,handleDelete:o,...r})}))},H=e=>{let{config:t={},data:n=[],history:s,loading:O=!1,onRefetch:p,isRefetching:f,actions:x,isPaginationLoading:w=!1}=e;n=n||[];const[v,k]=Object(S.useState)({}),[N,R]=Object(S.useState)({open:!1,config:{}}),{columns:D=[],onRowClick:z,hasOnClickUrl:I=!0,onPageChange:M,page:U,count:H,limit:B,onPageSizeChange:_,size:J="medium",emptyMessage:V="",onRowClickDataCallback:K,showRefresh:G=!1,onDelete:Q,deleteMessage:X,deletePermissions:Y=[],containerHeight:Z=""}=t,{role:$=""}=Object(W.d)().user,ee="boolean"===typeof Y?Y:Y.indexOf($)>-1||!1,te=P.a.useRef([]),ne=Array.isArray(n)&&n.length,ae=Object(S.useMemo)((()=>x&&P.a.isValidElement(x)?x:Object(F.jsx)(F.Fragment,{})),[]),ie=e=>{if(I&&z){const t=z(e);K&&(e=K(e)),s.push(t,e)}else z&&z(e)},oe=(e,t,n)=>{n.stopPropagation();const a={title:()=>Object(F.jsxs)(b.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(F.jsx)(y.a,{color:"error"}),Object(F.jsx)(g.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]}),okText:"Delete",onOk:()=>Q(e,re,{row:t}),content:()=>Object(F.jsx)(u.a,{sx:{color:"#000"},children:C.a.isFunction(X)?X({row:t}):X||"Are you sure you want to delete the record?"})};R({...N,open:!0,config:a})};function re(){R({...N,open:!1})}const ce=Object(S.useMemo)((()=>ne?Object(F.jsxs)(S.Fragment,{children:[Object(F.jsx)(j.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(F.jsx)(q,{columns:D,config:t,role:$})}),Object(F.jsx)(h.a,{children:Object(F.jsx)(T,{role:$,columns:D,data:n,config:t,handleRowClick:ie,handleDelete:oe,hasDeletePermission:ee},Date.now())})]}):Object(F.jsx)("tbody",{style:{height:300},children:Object(F.jsx)("tr",{children:Object(F.jsx)("td",{style:{textAlign:"center"},children:Object(F.jsx)("h4",{children:V||"No records found"})})})})),[n,t]);return Object(S.useEffect)((()=>{var e;if(null!==te&&void 0!==te&&null!==(e=te.current)&&void 0!==e&&e.table){const e=te.current.table.offsetHeight;k({...v,height:e>200?e:void 0})}}),[]),Object(F.jsxs)(a.a,{className:"enhanced-table",sx:{height:ne&&!O?Z||"95%":"auto"},children:[Object(F.jsxs)(l.a,{alignItems:"flex-end",justifyContent:"flex-end",direction:"row",py:1,gap:.5,children:[ae,G&&Object(F.jsx)(m.a,{title:"Refresh",onClick:p,children:Object(F.jsx)(d.a,{className:f?"rotateIcon":void 0})})]}),Object(F.jsxs)(o.a,{component:i.a,className:"",sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2,height:ne&&!O?"calc(100% - 80px)":"auto",position:"relative"},children:[O?(()=>{const e=window.innerHeight-180,t=(v.height?v.height>e?e:v.height:e)||e;return Object(F.jsx)(b.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(F.jsx)(b.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(F.jsx)(L.a,{})})})})():Object(F.jsx)(c.a,{ref:e=>te.current.table=e,"aria-label":"caption table",size:J,stickyHeader:!0,children:ce}),Object(F.jsx)(r.a,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,position:"absolute"},open:w||f||!1,children:Object(F.jsx)(L.a,{sx:{color:"inherit"}})})]}),!O&&n.length>0&&Object(F.jsx)(A,{data:n,onPageChange:M,page:U,count:H,limit:B,onPageSizeChange:_}),Object(F.jsx)(E.a,{className:"enhancedTable_dialog",open:N.open,config:N.config,onClose:re})]})};t.a=Object(k.withRouter)(Object(S.memo)(H))},340:function(e,t,n){"use strict";var a=n(0),i=n(56),o=n(89);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,c]=Object(a.useState)(void 0),[l,s]=Object(a.useState)(!1),[d,h]=Object(a.useState)(null),[j,u]=Object(a.useState)(!1);function b(){let a=e;n.queryParams&&(a="".concat(a,"?").concat(Object(o.h)(n.queryParams))),Object(i.b)({uri:a,callback:t,showTriggers:!1}).then((e=>{e.data&&c(e.data)})).finally((()=>{s(!1),u(!1)}))}return Object(a.useEffect)((()=>{s(!0),c(null),h(null),b()}),[e]),{data:r,loading:l,error:d,refetch:function(){u(!0),b()},isRefetching:j}}},402:function(e,t,n){"use strict";var a=n(0),i=n(56),o=n(89);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{showPagination:r=!0,page:c,limit:l}=t,[s,d]=Object(a.useState)(void 0),[h,j]=Object(a.useState)({page:c||1,limit:l||10}),[u,b]=Object(a.useState)(!1),[g,m]=Object(a.useState)(null),[O,p]=Object(a.useState)(!1),[f,x]=Object(a.useState)(!1);function w(a){const{page:c,limit:l}=a||{};let s=e;r&&(c&&l&&j({page:c,limit:l}),s="".concat(s,"?page=").concat(c||h.page,"&limit=").concat(l||h.limit)),t.queryParams&&(s="".concat(s,"&").concat(Object(o.h)(t.queryParams))),Object(i.b)({uri:s,callback:n,showTriggers:!1}).then((e=>{e.data&&d(e.data)})).finally((()=>{b(!1),p(!1),x(!1)}))}return Object(a.useEffect)((()=>{b(!0),d(null),m(null),w()}),[e]),{data:s,loading:u,error:g,refetch:function(){p(!0),w({page:c,limit:h.limit})},isRefetching:O,onLimitChange:e=>{let{value:t}=e;x(!0),w({limit:t,page:h.page})},onPageChange:(e,t)=>{x(!0),w({page:t,limit:h.limit})},isPaginationLoading:f,...h}}}}]);
//# sourceMappingURL=25.dbda8c91.chunk.js.map