(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[21],{1115:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ee}));var c=n(198),a=n(245),r=n(995),i=n(0),o=n.n(i),s=n(13),l=n(72),d=n(374),j=n.n(d),b=n(366),u=n(543),h=n(646),p=n(1071),x=n(197),g=n(501),O=n(87),m=n(43),f=n(44),v=n(287),C=n(711),y=n.n(C),w=(n(145),n(550),n(1134)),S=n(1136),k=n(1075),N=n(1112),F=n(1077),P=n(713),I=n.n(P),D=n(712),R=n.n(D),T=n(2);const A=[{label:"Detention",cost:"67"},{label:"Loads",cost:"1000"},{label:"Lumper",cost:"786"}],M=e=>{let{serviceName:t,amount:n,price:c,quantity:r,description:o,index:s,deleteService:l,onChangeService:d}=e;const j=e=>{const t=e.target.name,n=e.target.value;d&&d(s,{name:t,value:n})};return Object(T.jsx)(i.Fragment,{children:Object(T.jsxs)("tr",{className:"invoiceServiceRow",children:[Object(T.jsx)("td",{children:t}),Object(T.jsx)("td",{children:Object(T.jsx)(v.a,{name:"description",value:o,onChange:j,className:"serviceInputField",placeholder:"Enter item description"})}),Object(T.jsx)("td",{children:Object(T.jsx)(v.a,{name:"quantity",onChange:e=>{const t=e.target.name,n=parseInt(e.target.value);d(s,{name:t,value:n})},onBlur:e=>{var t,c;const a=parseInt((null===(t=e.target)||void 0===t?void 0:t.value)||0),r=null===(c=e.target)||void 0===c?void 0:c.name;a<1?d&&(d(s,{name:r,value:1}),d(s,{name:"price",value:parseInt(n)})):d&&(d(s,{name:r,value:a}),d(s,{name:"price",value:parseInt(n)*a}))},className:"serviceInputField",type:"number",value:r})}),Object(T.jsx)("td",{children:Object(T.jsx)(v.a,{name:"price",onChange:j,value:c,className:"serviceInputField"})}),Object(T.jsx)("td",{children:c?"$".concat(parseFloat(c).toFixed(2)):"$0.00"}),Object(T.jsx)("td",{children:Object(T.jsx)(a.a,{onClick:l.bind(null,s),className:"deleteService",children:Object(T.jsx)(R.a,{color:"error"})})})]})})},L=e=>{let{handleClose:t,anchorEl:n,onAddNewService:c}=e;const[a,o]=Object(i.useState)(A),s=e=>{c&&c(e),t()};return Object(T.jsx)(w.b,{id:"jugal",anchorEl:n,open:Boolean(n),onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"left"},children:Object(T.jsxs)(g.a,{sx:{p:2,width:500},children:[Object(T.jsx)(g.a,{children:Object(T.jsx)(v.a,{name:"search",autoFocus:!0,placeholder:"Type on item name",onChange:e=>{const t=e.target.value.toLowerCase();if(t){const e=a.filter((e=>e.label.toLowerCase().includes(t)));o(e)}else o(A)}})}),Object(T.jsx)(g.a,{children:Object(T.jsx)(S.a,{children:a.map((e=>Object(T.jsx)(k.a,{onClick:s.bind(null,e),children:Object(T.jsx)(N.a,{disablePadding:!0,secondaryAction:Object(T.jsx)("span",{className:"listButtonPickerCost",children:"$"+e.cost}),children:Object(T.jsx)(F.a,{primary:e.label})})},e.label)))})}),Object(T.jsx)(g.a,{children:Object(T.jsx)(r.a,{startIcon:Object(T.jsx)(I.a,{}),children:"Create a new Item"})})]})})};var B=e=>{let{services:t,onAddNewService:n,onChangeService:c,deleteService:a}=e;const[s,l]=o.a.useState(null),d=Object(i.useMemo)((()=>t.map(((e,t)=>Object(T.jsx)(M,{...e,index:t,onChangeService:c,deleteService:a},t)))),[t]);return Object(T.jsxs)(o.a.Fragment,{children:[Object(T.jsxs)("table",{className:"invoiceServiceTable",children:[Object(T.jsxs)("tr",{className:"tableHeader",children:[Object(T.jsx)("th",{children:"Services"}),Object(T.jsx)("th",{}),Object(T.jsx)("th",{children:"Quantity"}),Object(T.jsx)("th",{children:"Price"}),Object(T.jsx)("th",{children:"Amount"}),Object(T.jsx)("th",{})]}),d,Object(T.jsx)("tr",{className:"addNewItemRow",children:Object(T.jsx)("td",{className:"addNewItem",onClick:e=>{l(e.currentTarget)},children:Object(T.jsx)(r.a,{sx:{width:135},startIcon:Object(T.jsx)(I.a,{}),"aria-describedby":"jugal",children:"Add new item"})})})]}),Object(T.jsx)(L,{handleClose:()=>{l(null)},anchorEl:s,onAddNewService:n})]})},E=n(89),z=n(288),W=n(104);const q=e=>{let{name:t,sx:n={},variant:c="body1",children:a}=e;return Object(T.jsx)(O.a,{sx:{fontWeight:700,...n},variant:c,children:a||t})},U=o.a.forwardRef(((e,t)=>{const{pdf:n,setNotes:c,brokerage:a,loadNumber:r,getTotal:i,onChangeService:o,services:s,addService:l,deleteService:d,notes:j,rateConfirmation:b,proofDelivery:u,accessorials:h,reactToPrintContent:m,reactToPrintTrigger:C,docFileViewer:w}=e;return Object(T.jsxs)("div",{ref:t,className:"printArea",children:[Object(T.jsxs)(x.a,{container:!0,direction:"column",sx:{display:"inline-flex"},children:[Object(T.jsx)("style",{type:"text/css",media:"print",children:"               @page { size: portrait; }          "}),Object(T.jsx)(x.a,{item:!0,xs:12,sx:{p:3},children:Object(T.jsxs)(x.a,{container:!0,justifyContent:"space-between",children:[Object(T.jsx)(x.a,{item:!0,sx:{flexGrow:1},children:Object(T.jsx)(g.a,{spacing:1,children:Object(T.jsx)(g.a,{children:Object(T.jsx)(O.a,{sx:{textAlign:"left"},variant:"h5",children:"Sunny Freight"})})})}),Object(T.jsx)(x.a,{item:!0,children:Object(T.jsxs)(g.a,{children:[Object(T.jsx)(g.a,{children:Object(T.jsx)(O.a,{variant:"h5",sx:{textAlign:"right"},children:"Invoice"})}),Object(T.jsx)(g.a,{className:"notesStack",children:Object(T.jsx)(v.a,{label:"Notes",type:"textarea",onChange:e=>c(e.target.value)})})]})})]})}),Object(T.jsx)(p.a,{sx:{borderBottomWidth:"thin",borderColor:f.b}}),Object(T.jsx)(x.a,{xs:12,item:!0,children:Object(T.jsxs)(x.a,{container:!0,justifyContent:"space-between",children:[Object(T.jsx)(x.a,{item:!0,children:Object(T.jsxs)(g.a,{spacing:1,sx:{p:3},children:[Object(T.jsx)(g.a,{children:Object(T.jsx)(O.a,{children:"Bill To:"})}),Object(T.jsx)(g.a,{children:Object(T.jsx)(q,{sx:{fontWeight:700},children:a})})]})}),Object(T.jsx)(x.a,{item:!0,children:Object(T.jsx)(g.a,{justifyContent:"space-between",sx:{height:"100%"},children:Object(T.jsxs)(g.a,{direction:"row",alignItems:"center",spacing:2,p:3,children:[Object(T.jsx)(q,{children:"Load Number: "}),Object(T.jsx)(q,{children:r})]})})})]})}),Object(T.jsx)(p.a,{sx:{borderBottomWidth:"thin",borderColor:f.b}}),Object(T.jsxs)(x.a,{item:!0,sx:{p:2},display:"inherit",direction:"column",children:[Object(T.jsx)(g.a,{sx:{textAlign:"right"},children:Object(T.jsxs)(q,{children:["Total: ",i()||"- -"]})}),Object(T.jsxs)(x.a,{container:!0,alignItems:"end",justifyContent:"space-between",children:[Object(T.jsx)(x.a,{item:!0,xs:12,className:"invoiceServiceWrapperGrid",children:Object(T.jsx)(B,{onChangeService:o,services:s,onAddNewService:l,deleteService:d})}),Object(T.jsx)(x.a,{xs:3,item:!0,children:Object(T.jsxs)(O.a,{className:"notesPrintBlock",children:["Notes: ",j||"N.A"]})}),Object(T.jsx)(x.a,{xs:6,item:!0,children:Object(T.jsxs)(g.a,{justifyContent:"center",gap:"10px",className:"stack_Uploaders",children:[Object(T.jsxs)(g.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(T.jsxs)("label",{htmlFor:"rateCon",children:[Object(T.jsx)(O.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Rate Con"}),Object(T.jsx)("input",{type:"file",accept:"pdf",id:"rateCon",style:{display:"none"}})]}),Object(T.jsx)("div",{children:Object(E.b)(!!b.length)})]}),Object(T.jsxs)(g.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(T.jsxs)("label",{htmlFor:"pod",children:[Object(T.jsx)(O.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Proof Of Delivery"}),Object(T.jsx)("input",{type:"file",accept:"pdf",id:"pod",style:{display:"none"}})]}),Object(T.jsx)("div",{children:Object(E.b)(!!u.length)})]}),Object(T.jsxs)(g.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(T.jsxs)("label",{htmlFor:"accessorials",children:[Object(T.jsx)(O.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Accessorials"}),Object(T.jsx)("input",{type:"file",accept:"pdf",id:"accessorials",style:{display:"none"}})]}),Object(T.jsx)("div",{children:Object(E.b)(!!h.length)})]})]})}),Object(T.jsx)(x.a,{xs:3,item:!0,display:"flex",justifyContent:"end",children:Object(T.jsx)(y.a,{content:m,documentTitle:"Invoice",removeAfterPrint:!0,trigger:C,pageStyle:"portrait",onPrintError:e=>console.error("React to print error",e),onBeforePrint:()=>new Promise((e=>{setTimeout((()=>{console.log("waiting for print"),e("")}),1e3)})),fonts:[{family:"Open Sans",source:""}]})})]})]})]}),w]})})),H=e=>{let{transition:t,handleClose:n,open:a,data:s,pdf:l,getTotal:d,services:j,addService:b,onChangeService:p,deleteService:x,notes:g,setNotes:O}=e;const m=o.a.useRef(null),{brokerage:f="",loadNumber:v="",pickup:C=[],drop:y=[],rate:w="",accessorials:S=[],proofDelivery:k=[],rateConfirmation:N=[],bucketFiles:F}=s||{},P=e=>{let{pdfUrl:t,pdfFileName:n}=e;const[a,r]=Object(i.useState)([]);return Object(i.useEffect)((()=>{const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js",e.async=!0,e.onload=async()=>{const e=await fetch("https://cors.freightdok.io/".concat(t)).then((e=>e.headers.get("content-type").equalsIgnoreCase("application/pdf")?e.blob():null));if(e){const t=new FileReader;t.onload=()=>{const e=t.result,n=window["pdfjs-dist/build/pdf"];n.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(n.version,"/pdf.worker.js"),n.getDocument({data:e}).promise.then((e=>{const t=e.numPages,n=[];for(let c=1;c<=t;c++)n.push(e.getPage(c));Promise.all(n).then((e=>{const t=e.map((e=>{const t=e.getViewport({scale:2}),n=document.createElement("canvas"),c=n.getContext("2d");n.height=t.height,n.width=t.width;const a={canvasContext:c,viewport:t};return e.render(a).promise.then((()=>n.toDataURL()))}));Promise.all(t).then((e=>{r(e)}))}))}))},t.readAsArrayBuffer(e)}else r(!1)},document.body.appendChild(e)}),[t]),a?Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("div",{style:{position:"relative",minHeight:"100vh"},children:a.map(((e,t)=>Object(T.jsx)("img",{src:e,alt:"Page ".concat(t+1),style:{width:"100%"}},t)))})}):Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(c.a,{sx:{position:"relative",minHeight:"100vh",display:"flex",justifyContent:"center"},children:Object(T.jsx)("img",{className:"printThisFull",src:t,alt:n,style:{width:"1100px",height:"1200px",objectFit:"contain"}})})})},I=o.a.useMemo((()=>F&&F.map((e=>Object(T.jsx)("div",{className:"bucketImageContainer",children:Object(T.jsx)("div",{children:Object(T.jsx)(P,{pdfUrl:e.fileLocation,pdfFileName:e.fileName})})})))),[F]),D=o.a.useCallback((()=>m.current),[m.current]),R=o.a.useCallback((()=>Object(T.jsx)(r.a,{className:"printInvoice",variant:"contained",children:"Create Invoice"})),[]);return Object(T.jsx)(u.a,{className:"printThisFull",PaperProps:{sx:{width:"70%"}},open:a,onClose:n,TransitionComponent:t,maxWidth:"lg",children:Object(T.jsx)(h.a,{sx:{p:0},children:Object(T.jsx)(U,{ref:m,pdf:l,setNotes:O,brokerage:f,loadNumber:v,getTotal:d,onChangeService:p,services:j,addService:b,deleteService:x,notes:g,rateConfirmation:N,proofDelivery:k,accessorials:S,reactToPrintContent:D,docFileViewer:I,reactToPrintTrigger:R})})})};var Y=e=>{let{match:{params:{id:t=""}={}}={}}=e;const[n,c]=Object(i.useState)(!1),[a,r]=Object(i.useState)(!1),[l,d]=(Object(m.e)((e=>e.load.invoices.data)),Object(i.useState)([])),[j,u]=Object(i.useState)(""),{data:{data:h={}}={}}=Object(z.a)(W.b+"/".concat(t));Object(i.useEffect)((()=>{c(!0)}),[]);const p=Object(i.useMemo)((()=>o.a.forwardRef((function(e,t){const n=Object(s.useHistory)();return Object(T.jsx)(b.a,{ref:t,...e,onExited:()=>n.goBack()})}))),[]),x=Object(i.useCallback)((()=>{const e=l.reduce(((e,t)=>parseFloat(t.price)+e),0);return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.toFixed(2))}),[l]);return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(H,{open:n,handleClose:function(e){c(!1)},transition:p,data:h,pdf:a,services:l,addService:e=>{const{label:t,cost:n}=e;let c={serviceName:t,description:"",quantity:1,price:n,amount:n};d([...l,c])},onChangeService:(e,t)=>{let{name:n,value:c}=t;const a=l[e];a[n]=c;const r=[...l];r[e]=a,d(r)},getTotal:x,deleteService:e=>{const t=l;t.splice(e,1),d([...t])},notes:j,setNotes:u})})},_=n(73),G=n.n(_),V=n(275),K=n(469),$=n.n(K),J=n(462),Q=n(65),X=n(324);const Z={title:"Move invoice"};function ee(){const{edit:e=!1}=Q.a.getUserPermissionsByDashboardId("invoices")||{},{path:t}=Object(s.useRouteMatch)(),{data:n,loading:o,page:d,limit:b,onPageChange:u,onLimitChange:h,refetch:p,isPaginationLoading:x,isRefetching:g}=Object(X.a)("/api/load/invoice_loads"),{loads:O,total:m}=n||{},f={rowCellPadding:"normal",headerCellSx:{pt:1,pb:1},emptyMessage:"No Invoices found",showRefresh:!0,page:d,limit:b,count:m,onPageChange:u,onLimitChange:h,columns:[{id:"loadNumber",label:"Load Number"},{id:"country",label:"Pickup City/State",renderer:e=>{let{row:t}=e;return Object(T.jsxs)(i.Fragment,{children:[t.pickup[0].pickupCity,", ",t.pickup[0].pickupState]})}},{id:"pickupDate",label:"Pickup Date",renderer:e=>{let{row:{pickup:t=[]}={}}=e;const[{pickupDate:n=""}]=t;return G()(n).format("MM/DD/YYYY")}},{id:"deliveryCountry",label:"Delivery City/State",renderer:e=>{let{row:t}=e;return Object(T.jsxs)(i.Fragment,{children:[t.drop[0].dropCity,", ",t.drop[0].dropState]})}},{id:"deliveryDate",label:"Delivery Date",renderer:e=>{let{row:{drop:t=[]}={}}=e;const[{dropDate:n=""}]=t;return G()(n).format("MM/DD/YYYY")}},{id:"assigned",label:"Assigned To",renderer:e=>{let{row:t}=e;const{user:n={}}=({}=t||{}),{name:c="",firstName:a,lastName:r}=n||{};return c||"".concat(a||"--"," ").concat(r||"")}},{id:"accessorials",label:"Accessorials",valueFormatter:e=>(e||[]).join(", ")},{id:"company",label:"Company",renderer:e=>{let{row:t}=e;return null===t||void 0===t?void 0:t.brokerage},emptyState:"--"},{id:"rate",label:"Rate",emptyState:"--",valueFormatter:e=>e?Object(E.d)(e):""},{id:"",label:"Invoice",visible:!!e,renderer:e=>{let{row:n}=e;return Object(T.jsx)(r.a,{component:l.b,to:t+"/"+n._id,variant:"outlined",color:"primary",startIcon:Object(T.jsx)(j.a,{}),children:"Create Invoice"})}},{id:"",label:"Move",visible:!!e,renderer:e=>{let{row:n}=e;return Object(T.jsx)(a.a,{component:l.b,to:t+"/moveToMyLoads/"+n._id,variant:"outlined",color:"primary",children:Object(T.jsx)($.a,{})})}}]};return Object(T.jsx)(c.a,{sx:{height:"inherit"},children:Object(T.jsxs)(i.Fragment,{children:[Object(T.jsx)(V.a,{config:f,data:O,loading:o,onRefetch:p,isRefetching:g,isPaginationLoading:x}),e&&Object(T.jsx)(s.Route,{path:t+"/moveToMyLoads/:id",render:e=>Object(T.jsx)(J.a,{onCloseUrl:t,getInvoices:p,modalConfig:Z,...e})}),e&&Object(T.jsx)(s.Route,{path:t+"/:id",exact:!0,component:Y,onCloseUrl:t})]})})}},266:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var c=n(366),a=n(233),r=n(0),i=n.n(r),o=n(9),s=n(32),l=n(543),d=n(544),j=n(646),b=n(245),u=n(271),h=n.n(u),p=n(13),x=n(89),g=n(74),O=n(2);const m=Object(o.a)(l.a)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),f=e=>{const{children:t,onClose:n,showClose:c,titleStyles:a,...r}=e;return Object(O.jsxs)(d.a,{sx:{m:0,p:2,textAlign:"center",...a},...r,children:[c?Object(O.jsx)(b.a,{"aria-label":"close",onClick:n,sx:{position:"absolute",left:8,top:12,color:e=>e.palette.grey[500]},children:Object(O.jsx)(h.a,{})}):null,t]})};function v(e){const{config:t={},children:n,closeCallback:o}=e,{title:l="",closeUrl:d="",showClose:b=!0,paperProps:u={},preventBackdropClick:h=!1,titleStyles:v={}}=t,[C,y]=i.a.useState(!1),w=Object(s.a)(),S=Object(a.a)(w.breakpoints.down("sm")),k=function(e){h&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropClick")||y(!1)};i.a.useEffect((()=>(y(!0),Object(x.a)(window,"closeModal",k),()=>Object(x.i)(window,"closeModal",k))),[]);const N=Object(r.useMemo)((()=>i.a.forwardRef((function(e,t){const n=Object(p.useHistory)();return Object(O.jsx)(c.a,{ref:t,...e,onExited:()=>o?o():d?n.push(d||g.a):n.goBack()})}))),[]);return Object(O.jsxs)(m,{onClose:k,"aria-labelledby":l||"customized-dialog-title",open:C,maxWidth:"lg",TransitionComponent:N,PaperProps:u,fullScreen:S,children:[l&&Object(O.jsx)(f,{id:l||"customized-dialog-title",onClose:k,showClose:b,titleStyles:v,children:l}),Object(O.jsx)(j.a,{dividers:!0,sx:{borderTop:"none"},children:n})]})}},268:function(e,t,n){"use strict";var c=n(0),a=n(48),r=n(89);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const[o,s]=Object(c.useState)(!1);return{mutation:async function(c){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post",l=arguments.length>2?arguments[2]:void 0,d=e;i.queryParams&&(d=d+"?"+Object(r.j)(i.queryParams)),s(!0),o||(o="post");const j=(e=>{let t;switch(e){case"put":t=a.e;break;case"delete":t=a.a;break;case"patch":t=a.c;break;default:t=a.d}return t})(o.toLowerCase());if(j)return j({uri:d,callback:t,body:c,showTriggers:n}).then((e=>(l&&l({...e}),e))).catch((e=>e)).finally((()=>{s(!1)}))},loading:o}}},269:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var c=n(0),a=n(995),r=n(543),i=n(999),o=n(646),s=n(544),l=n(234),d=n(2);const j=c.forwardRef((function(e,t){return Object(d.jsx)(l.a,{direction:"up",ref:t,...e})}));function b(e){const{open:t=!1,config:n,onClose:c,preventBackdropClose:l=!1,className:b}=e,{title:u,onOk:h,okText:p="Save",content:x,onCancel:g}=n,O=function(e){l&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropclick")||c()};return Object(d.jsx)("div",{children:Object(d.jsxs)(r.a,{className:b,open:t,TransitionComponent:j,onClose:O,"aria-describedby":"alert-dialog-slide-description",children:["function"===typeof u?u({...n}):Object(d.jsx)(s.a,{sx:{fontWeight:550},children:u}),Object(d.jsx)(o.a,{children:"function"===typeof x?x({config:n}):x}),Object(d.jsxs)(i.a,{children:["function"===typeof g?g({config:n,onClose:c}):Object(d.jsx)(a.a,{variant:"outlined",onClick:O,children:"Cancel"}),"function"===typeof p?p({config:n,onOk:h}):Object(d.jsx)(a.a,{variant:"contained",color:p.equalsIgnoreCase("delete")?"error":"primary",onClick:h,children:p})]})]})})}},275:function(e,t,n){"use strict";var c=n(198),a=n(244),r=n(1146),i=n(1135),o=n(1147),s=n(501),l=n(296),d=n.n(l),j=n(1145),b=n(1144),u=n(996),h=n(197),p=n(87),x=n(245),g=n(1143),O=n(304),m=n.n(O),f=n(1142),v=n(256),C=n.n(v),y=n(284),w=n.n(y),S=n(0),k=n.n(S),N=n(13),F=n(1098),P=n(9),I=n(259),D=n(2);const R=Object(P.a)(F.a)((e=>{let{theme:t}=e;return{"& .MuiPaginationItem-root":{[t.breakpoints.down("md")]:{height:"1.8rem",width:"1rem"}}}})),T=Object(P.a)(s.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{justifyContent:"center"},display:"flex",justifyContent:"space-between",flexWrap:"wrap","& .pageSizeSelect":{width:80}}}));var A=e=>{let{data:t=[],onPageChange:n,page:c=1,count:a=0,limit:r=1,onLimitChange:i,isLoading:o}=e;const[l,d]=Object(S.useState)(0);Object(S.useEffect)((()=>{Array.isArray(t)&&d(t.length)}),[t]);return a<=5?null:Object(D.jsxs)(T,{direction:"row",alignItems:"center",children:[Object(D.jsxs)(p.a,{sx:{color:"#525F7F"},fontSize:12,children:["Showing ",l," of ",a," entries"]}),Object(D.jsxs)(s.a,{direction:"row",alignItems:"center",children:[Object(D.jsx)(I.f,{disabled:o,name:"pageSize",label:"",value:r,options:[{id:5,label:5},{id:10,label:10},{id:20,label:20},{id:50,label:50},{id:100,label:100}],className:"pageSizeSelect",onChange:e=>{let{value:t}=e;"function"===typeof i&&i({value:t})}}),Object(D.jsx)(R,{disabled:o,count:Math.ceil(a/r),color:"primary",variant:"contained",page:c,size:"medium",onChange:(e,t)=>{+c!==+t&&"function"===typeof n&&n(e,+t)}})]})]})},M=n(279),L=n(269),B=n(89),E=n(273);const z=Object(P.a)(f.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:12,padding:"0 8px"}}})),W=Object(P.a)(m.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:14}}}));function q(e){let{columns:t=[],config:n={},role:c}=e;const{headerCellSx:a={},hasDelete:r}=n,i=Object(S.useMemo)((()=>t.map(((e,t)=>{const{label:n="",id:r="",visible:i=!0}=e||{};return(C.a.isFunction(i)?i({column:e,role:c}):i)?Object(D.jsx)(z,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...a},children:n},r||t):null}))),[t,a]);return Object(D.jsxs)(g.a,{children:[i,r&&Object(D.jsx)(z,{padding:"none",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...a}})]})}const U=e=>{let{columns:t,data:n=[],config:c={},handleRowClick:a,handleDelete:r,...i}=e;return(n||[]).map(((e,n)=>{const{dataKey:o=""}=c;return o&&(e=e[o]),(e=>{let{row:t=[],columns:n={},config:c={},handleRowClick:a,rowIndex:r,handleDelete:i,hasDeletePermission:o,...s}=e;const{hasDelete:l=!1,rowCellPadding:d="none",onRowClick:j,rowStyleCb:b}=c,{role:u}=s;let h={};b&&(h=b({row:t})||{});const p=Object(D.jsx)(z,{sx:{},padding:"none",component:"th",scope:"row",children:Object(D.jsx)(E.a,{title:"Delete",placement:"top",children:Object(D.jsx)(x.a,{onClick:i.bind(void 0,t._id,t),disabled:!o,children:Object(D.jsx)(W,{color:"error"})})})}),O=n.map(((e,n)=>{const{id:c="",renderer:a,emptyState:i="--",valueFormatter:o,visible:s=!0}=e||{};if(!(C.a.isFunction(s)?s({column:e,role:u}):s))return null;let l;return l=o&&C.a.isFunction(o)?o(t[c]):C.a.isFunction(a)?a({row:t,role:u},r)||i:C.a.get(t,c,i)||i,Object(D.jsx)(z,{padding:d||"normal",component:"th",scope:"row",children:l},c+n)}));return Object(D.jsxs)(g.a,{hover:!!j,onClick:e=>{e.preventDefault(),C.a.isFunction(a)&&a(t)},sx:j?{cursor:"pointer",...h}:{...h},children:[O,l&&p]},r)})({row:e,columns:t,config:c,handleRowClick:a,rowIndex:n,handleDelete:r,...i})}))},H=e=>{let{config:t={},data:n=[],history:l,loading:g=!1,onRefetch:O,isRefetching:m,actions:f,isPaginationLoading:v=!1}=e;n=n||[];const[y,N]=Object(S.useState)({}),[F,P]=Object(S.useState)({open:!1,config:{}}),{columns:I=[],onRowClick:R,hasOnClickUrl:T=!0,onPageChange:E,page:z,count:W,limit:H,onPageSizeChange:Y,onLimitChange:_,size:G="medium",emptyMessage:V="",onRowClickDataCallback:K,showRefresh:$=!1,onDelete:J,deleteMessage:Q,deletePermissions:X=[],containerHeight:Z=""}=t,{role:ee=""}=Object(B.f)().user,te="boolean"===typeof X?X:X.indexOf(ee)>-1||!1,ne=k.a.useRef([]),ce=Array.isArray(n)&&n.length,ae=Object(S.useMemo)((()=>f&&k.a.isValidElement(f)?f:Object(D.jsx)(D.Fragment,{})),[f]),re=e=>{if(T&&R){const t=R(e);K&&(e=K(e)),l.push(t,e)}else R&&R(e)},ie=(e,t,n)=>{n.stopPropagation();const c={title:()=>Object(D.jsxs)(h.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(D.jsx)(w.a,{color:"error"}),Object(D.jsx)(p.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]}),okText:"Delete",onOk:()=>J(e,oe,{row:t}),content:()=>Object(D.jsx)(u.a,{sx:{color:"#000"},children:C.a.isFunction(Q)?Q({row:t}):Q||"Are you sure you want to delete the record?"})};P({...F,open:!0,config:c})};function oe(){P({...F,open:!1})}const se=Object(S.useMemo)((()=>ce?Object(D.jsxs)(S.Fragment,{children:[Object(D.jsx)(b.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(D.jsx)(q,{columns:I,config:t,role:ee})}),Object(D.jsx)(j.a,{children:Object(D.jsx)(U,{role:ee,columns:I,data:n,config:t,handleRowClick:re,handleDelete:ie,hasDeletePermission:te})})]}):Object(D.jsx)("tbody",{style:{height:300},children:Object(D.jsx)("tr",{children:Object(D.jsx)("td",{style:{textAlign:"center"},children:Object(D.jsx)("h4",{children:V||"No records found"})})})})),[n,t]);return Object(S.useEffect)((()=>{var e;if(null!==ne&&void 0!==ne&&null!==(e=ne.current)&&void 0!==e&&e.table){const e=ne.current.table.offsetHeight;N({...y,height:e>200?e:void 0})}}),[]),Object(S.useEffect)((()=>{var e;(v||m)&&null!==(e=ne.current)&&void 0!==e&&e.tableContainer&&ne.current.tableContainer.scrollTo(0,0)}),[v,m]),Object(D.jsxs)(c.a,{className:"enhanced-table",sx:{height:ce&&!g?Z||"95%":"auto"},children:[Object(D.jsxs)(s.a,{alignItems:"flex-end",justifyContent:"flex-end",direction:"row",py:1,gap:.5,children:[ae,$&&Object(D.jsx)(x.a,{title:"Refresh",onClick:O,children:Object(D.jsx)(d.a,{className:m?"rotateIcon":void 0})})]}),Object(D.jsxs)(r.a,{component:a.a,className:"",ref:e=>ne.current.tableContainer=e,sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2,height:ce&&!g?"calc(100% - 80px)":"auto",position:"relative"},children:[g?(()=>{const e=window.innerHeight-180,t=(y.height?y.height>e?e:y.height:e)||e;return Object(D.jsx)(h.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(D.jsx)(h.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(D.jsx)(M.a,{})})})})():Object(D.jsx)(o.a,{ref:e=>ne.current.table=e,"aria-label":"caption table",size:G,stickyHeader:!0,children:se}),Object(D.jsx)(i.a,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,position:"absolute"},open:v||m||!1,children:Object(D.jsx)(M.a,{sx:{color:"inherit"}})})]}),!g&&n.length>0&&Object(D.jsx)(A,{data:n,onPageChange:E,page:z,count:W,limit:H,onLimitChange:_||Y,isLoading:m||v}),Object(D.jsx)(L.a,{className:"enhancedTable_dialog",open:F.open,config:F.config,onClose:oe})]})};t.a=Object(N.withRouter)(Object(S.memo)(H))},287:function(e,t,n){"use strict";var c=n(87),a=(n(0),n(256)),r=n.n(a),i=n(701),o=n(702),s=n(2);const l=e=>{const{label:t="",type:n="text",options:c=[],labelKey:a="label",valueKey:o="id",onChangeSelect:l,showFirstBlank:d=!1,onBlur:j}=e;if(delete(e=r.a.cloneDeep(e)).showFirstBlank,"select"===n.toLowerCase()){Array.isArray(c)&&c.length||console.error("Options are mandatory in array format");const r=(c||[]).map((e=>Object(s.jsx)("option",{value:e[o],children:e[a]},e[o])));return d&&r.unshift(Object(s.jsx)("option",{value:"",children:"Select an option"})),Object(s.jsx)(i.a,{...e,onChange:l,id:t,type:n,children:r})}return Object(s.jsx)(i.a,{id:t,type:n,...e,onBlur:j})};t.a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{label:t="",type:n="text",multiple:a=!1,onChange:r,labelStyle:i={},direction:d="column",formGrpStyle:j={},errorText:b="",onBlur:u}=e;return Object(s.jsxs)(o.a,{style:"row"===d?{display:"flex",alignItems:"center",...j}:{...j},children:[t&&Object(s.jsx)("label",{className:"form-control-label",htmlFor:t,style:{color:"#525F7F",marginRight:8,...i},children:t}),Object(s.jsx)(l,{...e,onChangeSelect:e=>{if("select"===n.toLowerCase()&&a){const{options:t,name:n}=e.target,c=[];for(let e=0,a=t.length;e<a;e++)t[e].selected&&c.push(t[e].value);r&&r(e,c,n)}else r&&r(e)},onBlur:e=>{u&&u(e.target.name,e.target.value)}}),b&&Object(s.jsx)(c.a,{variant:"subtitle2",sx:{color:"red",fontSize:"0.75em"},children:b})]})}},288:function(e,t,n){"use strict";var c=n(0),a=n(48),r=n(89);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[i,o]=Object(c.useState)(void 0),[s,l]=Object(c.useState)(!1),[d,j]=Object(c.useState)(null),[b,u]=Object(c.useState)(!1);function h(){let c=e;n.queryParams&&(c="".concat(c,"?").concat(Object(r.j)(n.queryParams))),Object(a.b)({uri:c,callback:t,showTriggers:!1}).then((e=>{e.data&&o(e.data)})).finally((()=>{l(!1),u(!1)}))}return Object(c.useEffect)((()=>{l(!0),j(null),h()}),[e]),{data:i,loading:s,error:d,refetch:function(){u(!0),h()},isRefetching:b}}},324:function(e,t,n){"use strict";var c=n(0),a=n(256),r=n.n(a),i=n(48);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const[n,a]=Object(c.useState)([]),[o,s]=Object(c.useState)(!1),[l,d]=Object(c.useState)(1),[j,b]=Object(c.useState)(100),[u,h]=Object(c.useState)(""),[p,x]=Object(c.useState)(!1),[g,O]=Object(c.useState)(!1),[m,f]=Object(c.useState)(!1),v=Object(c.useRef)(!0);Object(c.useEffect)((()=>{C()}),[e,l,j]),Object(c.useEffect)((()=>{s(!0)}),[]),Object(c.useEffect)((()=>{const e=r.a.debounce((()=>{v.current||(O(!0),C())}),t);return e(),e.cancel}),[u,t]);const C=Object(c.useCallback)((async()=>{Object(i.b)({uri:"".concat(e,"?page=").concat(l,"&search=").concat(u,"&limit=").concat(j)}).then((e=>{const{data:t}=e;a(t)})).catch((e=>{console.error(e.message)})).finally((()=>{s(!1),x(!1),O(!1),f(!1),v.current&&(v.current=!1)}))}),[e,l,j,u]),y=Object(c.useCallback)(((e,t)=>{x(!0),d(t)}),[]),w=Object(c.useCallback)((e=>{let{value:t}=e;h(t),d(1)}),[]),S=Object(c.useCallback)((e=>{let{value:t}=e;x(!0),d(1),b(t)}),[]);return{data:n,loading:o,page:l,limit:j,onPageChange:y,handleSearch:w,refetch:()=>{d(1),f(!0),C()},onLimitChange:S,searchQuery:u,isPaginationLoading:p,isSearching:g,isRefetching:m}}},462:function(e,t,n){"use strict";var c=n(87),a=n(197),r=n(266),i=n(286),o=n(33),s=n(0),l=n(268),d=n(259),j=n(9),b=n(2);const u={title:"Move Invoice to My Loads",preventBackdropClick:!0},h=Object(j.a)(a.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{width:"auto"},[t.breakpoints.up("sm")]:{width:300}}}));t.a=e=>{const{onCloseUrl:t,getInvoices:n,refetch:j,getLoadStatuses:p,modalConfig:x,match:{params:{id:g}={}}={},history:O}=e,[m,f]=Object(s.useState)(),{mutation:v,loading:C}=Object(l.a)("/api/invoice/moveToMyLoads"),y=p?p(o.d):o.d.map((e=>e.id.equalsIgnoreCase("delivered")?{...e,disabled:!0}:e));return Object(b.jsx)(r.a,{config:x||u,children:Object(b.jsxs)(h,{container:!0,component:"form",spacing:2,onSubmit:e=>{e.preventDefault(),v({id:g,status:m},null,(()=>{n&&n(),j&&j(),O.replace(t)}))},children:[Object(b.jsx)(a.a,{item:!0,children:Object(b.jsx)(c.a,{children:"Select a load status"})}),Object(b.jsx)(a.a,{item:!0,xs:12,children:Object(b.jsx)(i.a,{label:"Status",name:"status",options:y,onChange:e=>{let{value:t}=e;f(t)},value:m,showNone:!0})}),Object(b.jsx)(a.a,{item:!0,xs:12,children:Object(b.jsx)(d.d,{type:"submit",fullWidth:!0,disabled:!m,isLoading:C,loadingText:"Moving...",children:"Move"})})]})})}},550:function(e,t,n){}}]);
//# sourceMappingURL=21.99ee7778.chunk.js.map