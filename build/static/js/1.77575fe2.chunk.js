(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[1],{1106:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var a=n(1110),i=n(1067),r=n(9),c=n(5),o=n(12),l=n(1),s=n(55),d=n.n(s),u=n(8),b=n(51),j=n(372),f=n(367),O=n(373),m=n(369),p=n(231),h=n.n(p),g=n(58),x=n(42),v=n(140),y=n(2),C=["children","onClose","showClose"],w=Object(u.a)(j.a)((function(e){var t=e.theme;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),E=function(e){var t=e.children,n=e.onClose,a=e.showClose,i=Object(o.a)(e,C);return Object(y.jsxs)(f.a,Object(c.a)(Object(c.a)({sx:{m:0,p:2,textAlign:"center"}},i),{},{children:[a?Object(y.jsx)(m.a,{"aria-label":"close",onClick:n,sx:{position:"absolute",left:8,top:8,color:function(e){return e.palette.grey[500]}},children:Object(y.jsx)(h.a,{})}):null,t]}))};function I(e){var t=e.config,n=void 0===t?{}:t,o=e.children,s=n.title,u=void 0===s?"":s,j=n.closeUrl,f=void 0===j?"":j,m=(n.okButtonText,n.showClose),p=void 0===m||m,h=n.onOk,C=(void 0===h&&d.a.noop(),n.paperProps),I=void 0===C?{}:C,k=n.maxWidth,P=void 0===k?"xl":k,S=n.preventBackdropClick,L=void 0!==S&&S,U=l.useState(!1),W=Object(r.a)(U,2),R=W[0],D=W[1],M=Object(b.a)(),N=Object(i.a)(M.breakpoints.down("xs")),H=function(e){L&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropClick")||D(!1)};l.useEffect((function(){return D(!0),Object(x.a)(window,"closeModal",H),function(){return Object(x.h)(window,"closeModal",H)}}),[]);var T=Object(l.useMemo)((function(){return l.forwardRef((function(e,t){var n=Object(g.useHistory)();return Object(y.jsx)(a.a,Object(c.a)(Object(c.a)({ref:t},e),{},{onExited:function(){return f?n.push(f||v.a):n.goBack()}}))}))}),[]);return Object(y.jsxs)(w,{onClose:H,"aria-labelledby":"customized-dialog-title",open:R,maxWidth:P,TransitionComponent:T,PaperProps:I,fullScreen:N,children:[u&&Object(y.jsx)(E,{id:"customized-dialog-title",onClose:H,showClose:p,children:u}),Object(y.jsx)(O.a,{dividers:!0,sx:{borderTop:"none"},children:o})]})}},1108:function(e,t,n){"use strict";var a=n(9),i=n(1),r=n(59);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(i.useState)(null),c=Object(a.a)(n,2),o=c[0],l=c[1],s=Object(i.useState)(!1),d=Object(a.a)(s,2),u=d[0],b=d[1],j=Object(i.useState)(null),f=Object(a.a)(j,2),O=f[0],m=f[1],p=Object(i.useState)(!1),h=Object(a.a)(p,2),g=h[0],x=h[1];function v(){Object(r.b)({uri:e,callback:t,showTriggers:!1}).then((function(e){e.data&&l(e.data)})).finally((function(){b(!1),x(!1)}))}return Object(i.useEffect)((function(){b(!0),l(null),m(null),v()}),[e]),{data:o,loading:u,error:O,refetch:function(){x(!0),v()},isRefetching:g}}},1110:function(e,t,n){"use strict";var a=n(3),i=n(7),r=n(1),c=n(216),o=n(51),l=n(94),s=n(46),d=n(2),u=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],b={entering:{transform:"none"},entered:{transform:"none"}},j=r.forwardRef((function(e,t){var n=Object(o.a)(),j={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},f=e.addEndListener,O=e.appear,m=void 0===O||O,p=e.children,h=e.easing,g=e.in,x=e.onEnter,v=e.onEntered,y=e.onEntering,C=e.onExit,w=e.onExited,E=e.onExiting,I=e.style,k=e.timeout,P=void 0===k?j:k,S=e.TransitionComponent,L=void 0===S?c.a:S,U=Object(i.a)(e,u),W=r.useRef(null),R=Object(s.a)(W,p.ref,t),D=function(e){return function(t){if(e){var n=W.current;void 0===t?e(n):e(n,t)}}},M=D(y),N=D((function(e,t){Object(l.b)(e);var a=Object(l.a)({style:I,timeout:P,easing:h},{mode:"enter"});e.style.webkitTransition=n.transitions.create("transform",a),e.style.transition=n.transitions.create("transform",a),x&&x(e,t)})),H=D(v),T=D(E),A=D((function(e){var t=Object(l.a)({style:I,timeout:P,easing:h},{mode:"exit"});e.style.webkitTransition=n.transitions.create("transform",t),e.style.transition=n.transitions.create("transform",t),C&&C(e)})),F=D(w);return Object(d.jsx)(L,Object(a.a)({appear:m,in:g,nodeRef:W,onEnter:N,onEntered:H,onEntering:M,onExit:A,onExited:F,onExiting:T,addEndListener:function(e){f&&f(W.current,e)},timeout:P},U,{children:function(e,t){return r.cloneElement(p,Object(a.a)({style:Object(a.a)({transform:"scale(0)",visibility:"exited"!==e||g?void 0:"hidden"},b[e],I,p.props.style),ref:R},t))}}))}));t.a=j},1120:function(e,t,n){"use strict";var a=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(69)),r=n(2),c=(0,i.default)((0,r.jsx)("path",{d:"M2 12.5C2 9.46 4.46 7 7.5 7H18c2.21 0 4 1.79 4 4s-1.79 4-4 4H9.5C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10H17v2H9.41c-.55 0-.55 1 0 1H18c1.1 0 2-.9 2-2s-.9-2-2-2H7.5C5.57 9 4 10.57 4 12.5S5.57 16 7.5 16H17v2H7.5C4.46 18 2 15.54 2 12.5z"}),"Attachment");t.default=c},1134:function(e,t,n){"use strict";n.r(t);var a=n(308),i=n(245),r=n(547),c=(n(369),n(1)),o=n(375),l=n(33),s=n(20),d=n(29),u=n(59),b=n(16),j=function(){return function(){var e=Object(d.a)(Object(s.a)().mark((function e(t){var n,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:b.m,payload:{loading:!0,data:{}}}),e.prev=1,e.next=4,Object(u.b)({uri:"/api/carrierProfile"});case 4:n=e.sent,a=n.data,t({type:b.m,payload:{loading:!1,data:a.data}}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t({type:b.m,payload:{loading:!1,data:{}}});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},f=n(58),O=n(39),m=n(42),p=n(67),h=n(368),g=n(193),x=n(4),v=n(5),y=n(9),C=n(1106),w=n(550),E=n(27),I=n(2),k=function(e){var t=e.onCloseUrl,n=Object(c.useState)({}),o=Object(y.a)(n,2),b=o[0],O=o[1],C=Object(f.useHistory)(),k=Object(c.useState)(!1),P=Object(y.a)(k,2),S=P[0],L=P[1],U=(Object(m.e)().user||{}).id,W=Object(l.d)();Object(c.useEffect)((function(){var e=function(){var e=Object(d.a)(Object(s.a)().mark((function e(){var t,n,a,i,r,c,o,l,d,b;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)({uri:"/api/fmcsa/"+U});case 2:t=e.sent,n=t.success,a=t.data,n&&(i=a.data,c=(r=void 0===i?{}:i).autoLiabilityInsurance,o=r.generalLiabilityInsurance,l=r.cargoLiabilityInsurance,d=r.email,b=r.phone,O({autoLiabilityInsurance:c?c.url:"",generalLiabilityInsurance:o?o.url:"",cargoLiabilityInsurance:l?l.url:"",email:d,phone:b}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var R=function(e){var t=e.target,n=t.name,a=t.files;O((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},n,a||null))}))},D=function(e){var t=e.target,n=t.name,a=t.value;O(Object(v.a)(Object(v.a)({},b),{},Object(x.a)({},n,a)))};return Object(I.jsx)(a.a,{component:"form",noValidate:!0,sx:{minWidth:400},onSubmit:function(e){L(!0),e.preventDefault();for(var n=new FormData,a=0,i=Object.keys(b);a<i.length;a++){var r=i[a];if(["generalLiabilityInsurance","autoLiabilityInsurance","cargoLiabilityInsurance"].indexOf(r)<0){var c=b[r],o=Array.isArray(c)&&!(null===c)?JSON.stringify(c):c;n.append(r,o)}}for(var l=0,s=["generalLiabilityInsurance","autoLiabilityInsurance","cargoLiabilityInsurance"];l<s.length;l++){var d=s[l],f=b[d];if(f){var O,m=Object(g.a)(f);try{for(m.s();!(O=m.n()).done;){var p=O.value;n.append(d,p)}}catch(h){m.e(h)}finally{m.f()}}}Object(u.d)({uri:"/api/fmcsa",body:n}).then((function(e){Object(E.a)(e.data.message),W(j()),C.push(t)})).catch((function(e){console.log(e),Object(E.a)(e.message,"error")})).finally((function(){return L(!1)}))},children:Object(I.jsxs)(r.a,{spacing:3,children:[Object(I.jsx)(h.a,{type:"email",label:"Email",fullWidth:!0,onChange:D,value:b.email||"",name:"email"}),Object(I.jsx)(h.a,{type:"email",label:"Phone Number",fullWidth:!0,value:b.phone||"",onChange:D,name:"phone"}),Object(I.jsxs)(r.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(I.jsx)(p.a,{children:"General Liability Insurance"}),Object(I.jsxs)("label",{htmlFor:"contained-button-file1",children:[Object(I.jsx)("input",{style:{display:"none"},type:"file",accept:"application/pdf,application/msword,application/vnd.ms-excel",name:"generalLiabilityInsurance",onChange:R,id:"contained-button-file1"}),Object(I.jsx)(i.a,{variant:"contained",component:"span",children:"Attach"})]})]}),Object(I.jsxs)(r.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(I.jsx)(p.a,{children:"Auto Liability Insurance"}),Object(I.jsxs)("label",{htmlFor:"contained-button-file2",children:[Object(I.jsx)("input",{style:{display:"none"},type:"file",accept:"application/pdf,application/msword,application/vnd.ms-excel",name:"autoLiabilityInsurance",onChange:R,id:"contained-button-file2"}),Object(I.jsx)(i.a,{variant:"contained",component:"span",children:"Attach"})]})]}),Object(I.jsxs)(r.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(I.jsx)(p.a,{children:"Cargo Liability Insurance"}),Object(I.jsxs)("label",{htmlFor:"contained-button-file3",children:[Object(I.jsx)("input",{style:{display:"none"},type:"file",accept:"application/pdf,application/msword,application/vnd.ms-excel",name:"cargoLiabilityInsurance",onChange:R,id:"contained-button-file3"}),Object(I.jsx)(i.a,{variant:"contained",component:"span",children:"Attach"})]})]}),Object(I.jsx)(w.a,{loading:S,loadingIndicator:"Updating...",type:"submit",variant:"contained",children:"Update"})]})})},P=function(e){var t=e.onCloseUrl,n={title:"Update Carrier Profile",closeUrl:t,paperProps:{sx:{width:"auto"}}};return Object(I.jsx)(C.a,{config:n,children:Object(I.jsx)(k,{onCloseUrl:t})})},S=n(60),L=(n(379),n(1120),n(72)),U=function(e){var t=e.path,n=e._dbData,a=e.list,r=e.refetch;return{rowCellPadding:"normal",showRefresh:!1,columns:[{id:"integrationName",label:"Integrations"},{id:"code",label:"Key/Code",valueFormatter:function(){return"********"}},{id:"email",label:"Email"},{id:"mc",label:"MC#"},{renderer:function(e,c){var o=e.row;return Object(I.jsx)(i.a,{component:O.b,to:{pathname:t+L.g,state:{row:o,rowIndex:c,_dbData:n,list:a,refetch:r}},variant:"contained",children:"Update"})}}]}},W={rowCellPadding:"normal",showRefresh:!0,columns:[{id:"companyName",label:"Company Name"},{id:"ein",label:"EIN#"},{id:"dotNumber",label:"DOT#"},{id:"operatingStatus",label:"Operating Status",renderer:function(e){var t=e.row,n=(void 0===t?{}:t).operatingStatus;return Object(m.c)("Y"===n)}}]},R={title:"Update Integration Details",preventBackdropClick:!0},D=n(111),M=n(168),N=n(410),H=n(236),T=Object(c.memo)((function(e){var t=e.onChange,n=e.form,a=e.onSubmit,i=e.errors,r=e.loading,c=n.password,o=n.email;return Object(I.jsxs)(D.a,{container:!0,spacing:3,direction:"column",sx:{minWidth:350},component:"form",onSubmit:a,noValidate:!0,children:[Object(I.jsx)(D.a,{item:!0,children:Object(I.jsx)(p.a,{fontWeight:600,color:S.a,children:"Please verify your credentials."})}),Object(I.jsx)(D.a,{item:!0,children:Object(I.jsx)(H.a,{label:"Email",fullWidth:!0,type:"email",value:o,name:"email",onChange:t,errors:i})}),Object(I.jsx)(D.a,{item:!0,children:Object(I.jsx)(H.b,{label:"Password",fullWidth:!0,value:c,name:"password",onChange:t,errors:i})}),Object(I.jsx)(D.a,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:Object(I.jsx)(w.a,{type:"submit",variant:"contained",color:"primary",loading:r,children:r?"Please wait...":"Verify"})})]})})),A=function(e){var t=e.location.state,n=void 0===t?{}:t,a=n.row,i=n.rowIndex,r=n.list,o=a.integrationName.equalsIgnoreCase("chrobinson"),l=Object(c.useState)({email:"",mc:"",code:""}),s=Object(y.a)(l,2),d=s[0],u=s[1],b=Object(c.useState)(!1),j=Object(y.a)(b,2),f=j[0],O=j[1],p=Object(c.useState)({email:"",password:""}),h=Object(y.a)(p,2),g=h[0],k=h[1],P=Object(c.useState)({}),S=Object(y.a)(P,2),L=S[0],U=S[1],W=Object(M.a)(N.a,null,!0),A=W.loading,F=W.mutation,_=Object(M.a)("/api/carrierProfile/secret-manager?update=true",null,!0),B=_.loading,V=_.mutation,z=function(e){var t=e.name,n=e.value;u(Object(v.a)(Object(v.a)({},d),{},Object(x.a)({},t,n))),U(Object(v.a)(Object(v.a)({},L),{},Object(x.a)({},t,"")))};return f?Object(I.jsx)(C.a,{config:R,children:Object(I.jsx)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault();var t=d.email;d.mc,d.code;if(!Object(m.f)(t)||!t)return U(Object(v.a)(Object(v.a)({},L),{},{email:"Invalid Email"}));var n,a=r[i].integrationName,c=(n={},Object(x.a)(n,a,d.code),Object(x.a)(n,"mc",d.mc),Object(x.a)(n,"email",d.email),n);o&&Object.assign(c,{token:d.token}),r.forEach((function(e){e.integrationName!==a&&Object.assign(c,Object(x.a)({},e.integrationName,e.code))})),V(c).then((function(e){if(!e.success)return Object(E.a)(e.message,"error");Object(m.j)("fetchCarrierProfile"),Object(m.j)("closeModal")}))},children:Object(I.jsxs)(D.a,{container:!0,spacing:3,direction:"column",sx:{minWidth:350},children:[o&&Object(I.jsx)(D.a,{item:!0,children:Object(I.jsx)(H.a,{fullWidth:!0,label:"Token",name:"token",onChange:z,value:d.token||"",multiline:!0,rows:3})}),Object(I.jsx)(D.a,{item:!0,children:Object(I.jsx)(H.a,{fullWidth:!0,label:"Code",name:"code",onChange:z,value:d.code||""})}),Object(I.jsx)(D.a,{item:!0,children:Object(I.jsx)(H.a,{fullWidth:!0,label:"Email",onChange:z,name:"email",value:d.email||""})}),Object(I.jsx)(D.a,{item:!0,children:Object(I.jsx)(H.a,{fullWidth:!0,label:"MC#",name:"mc",onChange:z,value:d.mc||""})}),Object(I.jsx)(D.a,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:Object(I.jsx)(w.a,{type:"submit",variant:"contained",color:"primary",loading:B,children:B?"Updating...":"Update"})})]})})}):Object(I.jsx)(C.a,{config:R,children:Object(I.jsx)(T,{onChange:function(e){var t=e.name,n=e.value;k(Object(v.a)(Object(v.a)({},g),{},Object(x.a)({},t,n))),U(Object(v.a)(Object(v.a)({},L),{},Object(x.a)({},t,"")))},form:g,onSubmit:function(e){e.preventDefault();var t=g.email,n=g.password;t||U(Object(v.a)(Object(v.a)({},L),{},{email:"Please enter Email"})),n?Object(m.f)(t)?F(g,null).then((function(e){e.token&&(O(!0),u(a))})):U(Object(v.a)(Object(v.a)({},L),{},{email:"Invalid Email"})):U(Object(v.a)(Object(v.a)({},L),{},{email:"Please enter Password"}))},errors:L,loading:A})})},F=n(1108);t.default=Object(f.withRouter)((function(e){var t=e.match,n=(void 0===t?{}:t).path,r=Object(f.useRouteMatch)(n+"/updateCarrierProfile"),s=Object(m.e)().user||{},d=s.role,u=void 0===d?"admin":d,b=s.orgId,p=void 0===b?"":b,h=Object(l.e)((function(e){return e.carrierProfile})),g=h.data,x=h.loading,v=Object(l.d)(),y=Object(F.a)("/api/carrierProfile/secret-manager?orgId="+p),C=y.data,w=void 0===C?{}:C,E=y.loading,k=y.refetch,S=y.isRefetching,R=w||{},D=R.data,M=R._dbData;Object(c.useEffect)((function(){return v(j()),Object(m.a)(window,"fetchCarrierProfile",k),function(){return Object(m.h)(window,"fetchCarrierProfile",k)}}),[]);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(o.a,{data:g,loading:x,config:W,onRefetch:k,isRefetching:S}),r&&Object(I.jsx)(P,{onCloseUrl:n}),"admin"!==u&&Object(I.jsx)(a.a,{sx:{display:"flex",justifyContent:"flex-end"},children:Object(I.jsx)(i.a,{variant:"contained",component:O.b,to:n+"/updateCarrierProfile",children:"Update Profile"})}),Object(I.jsx)(a.a,{sx:{mt:4},children:Object(I.jsx)(o.a,{data:D,loading:E,config:U({path:n,data:M,list:D})})}),Object(I.jsx)(f.Route,{component:A,path:n+L.g})]})}))}}]);
//# sourceMappingURL=1.77575fe2.chunk.js.map