(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{1065:function(e,t,n){"use strict";var r=n(11),a=n(1),o=n(58);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(a.useState)(null),i=Object(r.a)(n,2),c=i[0],d=i[1],s=Object(a.useState)(!1),l=Object(r.a)(s,2),u=l[0],f=l[1],b=Object(a.useState)(null),v=Object(r.a)(b,2),j=v[0],O=v[1],m=Object(a.useState)(!1),p=Object(r.a)(m,2),h=p[0],g=p[1];function x(){Object(o.b)({uri:e,callback:t,showTriggers:!1}).then((function(e){e.data&&d(e.data)})).finally((function(){f(!1),g(!1)}))}return Object(a.useEffect)((function(){f(!0),d(null),O(null),x()}),[e]),{data:c,loading:u,error:j,refetch:function(){g(!0),x()},isRefetching:h}}},1097:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n(1),o=n(357),i=n(57),c=n(103),d=n(528),s=n(233),l=n(65),u=n(351),f=n(11),b=n(1063),v=n(526),j=n(37),O=n(1069),m=n.n(O),p=n(1068),h=n.n(p),g=function(e){var t=e||{},n=t.bidAmount,r=void 0===n?"":n,a=t.offerStatus,o=t.vendorName,i=t.event_data,c=void 0===i?{}:i,d=t.loadDetail,s=(void 0===d?{}:d).client,l=(void 0===s?{}:s).client_name,u=void 0===l?"":l,f=c.counter_offer,b=void 0===f?{}:f,v=b.expired_at,j=void 0===v?"":v,O=b.id,m=c.offer,p=(void 0===m?{}:m).external_id,h=r.includes(",")?r.split(","):r;return{amount:Array.isArray(h)?h[h.length-1]:h,offerStatus:a,vendorName:o,external_id:p,expired_at:j,counterOfferId:O,client_name:u}},x=n(19),C=n(30),y=n(58),w=n(78),D=function(){var e=Object(C.a)(Object(x.a)().mark((function e(t,n){var r,a;return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(y.d)({uri:Object(w.d)()+"/newTrulCounterOffer",body:t});case 3:r=e.sent,a=r.data,n&&n(a),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(C.a)(Object(x.a)().mark((function e(t){return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(y.c)({uri:Object(w.d)()+"/newtrulUpdateOfferStatus",body:t});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(C.a)(Object(x.a)().mark((function e(t){return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(y.d)({uri:Object(w.d)()+"/newTrulFinalOffer",body:t});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),_=n(356),I=n(26),R=n(1064),k=n(162),F=n(42),Y=n(367),L=n(2),E=void 0,q=function(e){var t=e.value,n=e.name,r=e.handleChange,o=Object(a.useState)(t),i=Object(f.a)(o,2),c=i[0],d=i[1];return Object(a.useEffect)((function(){r&&r({name:n,value:c})}),[c,n,r]),Object(L.jsxs)(a.Fragment,{children:[Object(L.jsx)(u.a,{onClick:function(){c>0&&d(c-1)},disabled:c<=0,children:Object(L.jsx)(h.a,{})}),Object(L.jsx)("div",{className:"dollarInput",children:Object(L.jsx)(j.a,{name:"bidAmount",label:"Amount ($)",onChange:function(e){var t=e.target.value;d(t)},type:"number",value:c,className:""})}),Object(L.jsx)(u.a,{onClick:function(){d(parseInt(c)+1)},children:Object(L.jsx)(m.a,{})})]})},A=["final_offer_created","accepted"],B=function(e){var t=e.location,n=(void 0===t?{}:t).state,r=void 0===n?{}:n,o=e.history,i=e.onCloseUrl,u=e.onRefresh,j=r.loadNumber,O=void 0===j?"":j,m=r.vendorName,p=void 0===m?"":m,h=Object(a.useState)("0.00"),x=Object(f.a)(h,2),C=x[0],y=x[1],w=Object(k.a)("/api/bid/deleteBidByLoadNumber/"+O,K).mutation,B=Object(a.useState)({amount:0}),T=Object(f.a)(B,2),M=T[0],U=T[1],z=(null===r||void 0===r?void 0:r.offerStatus)||"",P=A.some((function(e){return e.equalsIgnoreCase(z)}))||!1,H=z.equalsIgnoreCase("COUNTER_OFFER_CREATED"),$=p.equalsIgnoreCase("c.h. robinson"),J=!!M.offerStatus,W=M.client_name,G=$&&z.equalsIgnoreCase("notconsidered");Object(a.useEffect)((function(){if(p.equalsIgnoreCase("new trul")){var e=g(r);y(e.amount),U(e)}else if($){var t=function(e){var t=e||{},n=t.bidAmount,r=void 0===n?"":n,a=t.offerStatus,o=t.vendorName,i=t.event_data;return{amount:r,offerStatus:a,vendorName:o,event_data:void 0===i?{}:i}}(r);U(t),y(t.amount)}}),[r,p]);var V=function(e){e.error?Object(I.a)(e.message,"error"):o.goBack()};function K(e,t){e?(V({}),Object(I.a)("Bid success for Load number",O)):Object(I.a)(t.message,"error")}var Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={offerId:M.counterOfferId,mcNumber:_.c,carrierMail:_.a,status:e};if(P){if(p.equalsIgnoreCase("c.h. robinson")){if("reject"===e)return w({},"delete");var n=(new Date).toDateString(),a=(new Date).toTimeString(),c=r.loadDetail.availableLoadCosts[0]||{},d=c.type,s=c.code,l=c.description,f=c.units,b=c.currencyCode,v={carrierCode:_.h.carrierCode,loadNumber:Number(O),emptyDateTime:new Date(n+" "+a).toISOString(),availableLoadCosts:[{type:d,code:s,description:l,units:f,currencyCode:b,sourceCostPerUnit:Number(C)}],emptyLocation:{city:"Greenwood",state:"IN",country:"NA",zip:"46143"},rateConfirmation:{email:Object(F.e)().user.email,name:Object(F.e)().user.name}};return Object(R.b)(O,v,K)}N(t).then((function(e){"error"===e.data.status&&Object(I.a)(e.data.message,"error")})).catch((function(e){return console.log(e)}))}else S(t).then((function(e){"error"===e.data.status?Object(I.a)(e.data.message,"error"):e.data.status.equalsIgnoreCase("success")&&(u&&u(),o.push(i))})).catch((function(e){return console.log(e)}))};return Object(L.jsx)(b.a,{children:Object(L.jsx)(c.a,{sx:{px:3},justifyContent:"center",display:"flex",children:Object(L.jsxs)("form",{onSubmit:function(){},style:{textAlign:"center"},className:"form_bidding",children:[Object(L.jsx)(l.a,{sx:{fontSize:32},children:W||p||"--"}),Object(L.jsxs)(l.a,{sx:{fontSize:32},children:["Load Number: ",O]}),P&&Object(L.jsx)(l.a,{fontSize:18,sx:{my:3},children:"Final Offer: $".concat(M.amount)}),H&&Object(L.jsx)(l.a,{fontSize:18,children:"Offer: $".concat(M.amount)}),Object(L.jsxs)(d.a,{gap:2,direction:"row",justifyContent:"center",my:2,children:[Object(L.jsx)(s.a,{variant:"contained",color:"success",sx:{px:5},onClick:Q.bind(E,"accept"),disabled:!J,children:"Accept"}),Object(L.jsx)(s.a,{variant:"contained",color:"error",sx:{px:5},onClick:Q.bind(E,"reject"),disabled:!J,children:G?"Delete":"Reject"})]}),$&&!J?Object(L.jsx)(Y.a,{config:{open:!0,message:"We are waiting for the response on this bid.",severity:"info"}}):null,!P&&!$&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(l.a,{children:"OR"}),Object(L.jsx)(d.a,{direction:"row",sx:{py:2},alignItems:"end",gap:"10px",justifyContent:"center",children:Object(L.jsx)(q,{value:C,handleChange:function(e){var t=e.value;y(t)}})}),Object(L.jsx)(s.a,{variant:"contained",color:"primary",sx:{px:2,py:.5,fontSize:14},onClick:function(){if(p.equalsIgnoreCase("new trul")){var e={offerId:M.counterOfferId,external_id:Object(v.a)(),offer_amount:C,expired_at:M.expired_at,mcNumber:_.c,carrierMail:_.a};M.offerStatus.equalsIgnoreCase("COUNTER_OFFER_CREATED")&&D(e,V)}},children:H?"Submit Counter":"Submit Bid"})]})]})})})},T=Object(a.memo)(B,(function(){return!0})),M=n(1070),U=n(1065),z=n(172),P=n.n(z),H=function(e,t,n){return{rowCellPadding:"normal",emptyMessage:"No Bids Found",showRefresh:!0,onRowClick:function(e){var n=e.loadNumber,r=e.vendorName;return"new trul"===(void 0===r?"":r).toLowerCase()?"".concat(t,"/newtrul/").concat(n):"".concat(t,"/").concat(n)},onRowClickDataCallback:function(e){return e.loadDetail||{}},count:n,rowStyleCb:function(e){var t=e.row,n=t.bidLevel,r=t.status;return 2===n?{borderLeft:"5px solid #ffeaa7"}:1===n?{borderLeft:r?"5px solid #00b894":"5px solid #e74c3c"}:void 0},columns:[{id:"loadNumber",label:"Load Number"},{id:"pickup",label:"Pickup City/State",renderer:function(e){var t,n,r,o,i=e.row,c=i.loadDetail,d=void 0===c?{}:c;if("c.h. robinson"===(null===(t=i.vendorName)||void 0===t?void 0:t.toLowerCase()))return"".concat(null===d||void 0===d||null===(r=d.origin)||void 0===r?void 0:r.city,", ").concat(null===d||void 0===d||null===(o=d.origin)||void 0===o?void 0:o.stateCode);var s=(null===i||void 0===i||null===(n=i.loadDetail)||void 0===n?void 0:n.stops)||[],l=Object(f.a)(s,2),u=(l[0],(l[1]||{}).geo||{}),b=u.city,v=void 0===b?"":b,j=u.state,O=void 0===j?"":j;return v||O?Object(L.jsxs)(a.Fragment,{children:[v,", ",O]}):"--"}},{id:"",label:"PickUp Date",renderer:function(e){var t,n,r=e.row,o=(null===r||void 0===r||null===(t=r.loadDetail)||void 0===t?void 0:t.stops)||[{}],i=Object(f.a)(o,2),c=(i[0],i[1]);if("C.H. Robinson"===r.vendorName)return P()(r.loadDetail.pickUpByDate).format("M/DD/YYYY");if(c){var d=(c||{}).early_datetime,s=void 0===d?"":d;return s?P()(s).format("M/DD/YYYY"):"--"}var l=(c||{}).early_datetime,u=void 0===l?"":l;return n=u?P()(u).format("M/DD/YYYY"):"--",Object(L.jsx)(a.Fragment,{children:n})}},{id:"",label:"Delivery City / State",renderer:function(e){var t,n,r,o=e.row,i=void 0===o?{}:o,c=i.loadDetail,d=void 0===c?{}:c;if("c.h. robinson"===(null===(t=i.vendorName)||void 0===t?void 0:t.toLowerCase()))return"".concat(null===d||void 0===d||null===(n=d.destination)||void 0===n?void 0:n.city,", ").concat(null===d||void 0===d||null===(r=d.destination)||void 0===r?void 0:r.stateCode);var s=d.stops||[],l=(Object(f.a)(s,1)[0]||{}).geo||{},u=l.city,b=void 0===u?"":u,v=l.state,j=void 0===v?"":v;return b||j?Object(L.jsxs)(a.Fragment,{children:[b,", ",j]}):"--"}},{id:"deliveryDate",label:"Delivery Date",renderer:function(e){var t,n,r,a=e.row;if(null!==(t=a.loadDetail)&&void 0!==t&&t.deliverBy)return P()(null===(r=a.loadDetail)||void 0===r?void 0:r.deliverBy).format("M/DD/YYYY");var o=(null===a||void 0===a||null===(n=a.loadDetail)||void 0===n?void 0:n.stops)||[],i=Object(f.a)(o,2),c=i[0],d=(i[1],(c||{}).early_datetime);return d?P()(d).format("M/DD/YYYY"):"--"}},{id:"equipment",label:"Equipment",renderer:function(e){var t=e.row,n=t.loadDetail||{},r=n.equipment,o=n.vendorName;if("chrobinson"===(void 0===o?"":o).toLowerCase()){var i=Object(_.g)(t.loadDetail||{}),c=i.modesString,d=void 0===c?"":c,s=i.standard,l=void 0===s?"":s;return Object(L.jsxs)(a.Fragment,{children:[d," ",l]})}return"string"===typeof r?Object(L.jsx)(a.Fragment,{children:r}):"--"}},{id:"",label:"Weight",renderer:function(e){var t=e.row,n=(t.loadDetail||{}).weight;if("number"===typeof n)return Object(L.jsxs)(a.Fragment,{children:[n," lbs"]});if(null!==n&&void 0!==n&&n.pounds){var r=(t.loadDetail||{}).weight,o=(void 0===r?{}:r).pounds,i=void 0===o?"":o;return i&&(i+=" lbs"),i}return"--"}},{id:"vendorName",label:"Company",renderer:function(e){var t=e.row,n=t.loadDetail,r=(void 0===n?{}:n).client,a=void 0===r?{}:r;return a.client_name?a.client_name:t.vendorName||""}},{id:"status",label:"Bid Status",renderer:function(e){var t,n=e.row,r=(g(n)||{}).offerStatus,o=(void 0===r?"":r).toLowerCase().includes("rejected");return"C.H. Robinson"===n.vendorName&&n.offerStatus?n.offerStatus:Object(L.jsx)(a.Fragment,{children:n.status?"Accepted":o?"Rejected":(t=n.bidLevel,2===t?"Counter":1===t?"Pending":"Final Offer")})}},{id:"Bidding",label:"Bid",renderer:function(n){var o=n.row,i=(o||{}).vendorName,c=void 0===i?"":i,d=t+"/bid/".concat(o.loadNumber),l=(g(o)||{}).offerStatus,u=void 0===l?"":l,f=(u.equalsIgnoreCase("COUNTER_OFFER_CREATED"),u.equalsIgnoreCase("final_offer_created"),u.toLowerCase().includes("rejected"));return c.toLowerCase(),Object(L.jsx)(a.Fragment,{children:!f&&Object(L.jsx)(s.a,{variant:"contained",color:"primary",onClick:function(t){t.stopPropagation(),e.push(d,Object(r.a)({},o))},children:"View"})})}}]}},$=n(1039),J=n(261),W=n.n(J),G=function(e){var t=e.message;return Object(L.jsxs)($.a,{elevation:0,sx:{height:"500px",alignItems:"center",display:"flex",justifyContent:"center",gap:1},children:[Object(L.jsx)(W.a,{color:"warning"}),Object(L.jsx)(l.a,{align:"center",children:t})]})};t.default=function(){var e=Object(i.useRouteMatch)().path,t=Object(i.useHistory)(),n=Object(U.a)("/api/bid/biddings"),c=n.data,d=void 0===c?{}:c,s=n.loading,l=void 0===s||s,u=n.refetch,f=n.isRefetching,b=d||{},v=b.data,j=void 0===v?[]:v,O=b.totalCount,m=void 0===O?0:O,p=b.message,h=b.success;return Object(a.useEffect)((function(){var e=setInterval((function(){u()}),5e3);return h||clearInterval(e),function(){return clearInterval(e)}}),[h]),p?Object(L.jsx)(G,{message:p}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(o.a,{config:H(t,e,m),data:j,loading:l,onRefetch:u,isRefetching:f}),Object(L.jsxs)(i.Switch,{children:[Object(L.jsx)(i.Route,{path:e+"/bid/:loadNumber",render:function(t){return Object(L.jsx)(T,Object(r.a)(Object(r.a)({},t),{},{onCloseUrl:e,onRefresh:u}))}}),Object(L.jsx)(i.Route,{path:e+"/newtrul/:loadId",render:function(e){return Object(L.jsx)(M.a,Object(r.a)(Object(r.a)({},e),{},{callDetail:!1}))}})]})]})}}}]);
//# sourceMappingURL=6.4d404a16.chunk.js.map