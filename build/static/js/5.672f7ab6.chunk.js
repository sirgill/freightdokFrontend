(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[5],{441:function(e,t,n){"use strict";var r=n(423),a=n(1077),c=n(1078),o=n(254),i=n(451),s=n.n(i),u=n(1076),l=n(1075),d=n(1065),p=n(97),f=n(43),b=n(14),v=n(255),j=n(27),h=n(1074),O=n(4),g=n(464),x=n.n(g),m=n(3),y=n(1073),w=n(118),k=n.n(w),C=n(446),D=n.n(C),S=n(0),R=n.n(S),_=n(34),P=n(1050),A=n(1),F=function(e){var t=e.data,n=void 0===t?[]:t,r=e.onPageChange,a=e.page,c=void 0===a?0:a,i=e.count,s=void 0===i?0:i,u=e.limit,l=void 0===u?1:u,d=Object(S.useState)(0),p=Object(b.a)(d,2),v=p[0],j=p[1];Object(S.useEffect)((function(){Array.isArray(n)&&j(n.length)}),[n]);return v<10&&s<10?null:Object(A.jsxs)(o.a,{direction:"row",sx:{display:"flex",justifyContent:"space-between",p:3},alignItems:"center",children:[s>10&&Object(A.jsxs)(f.a,{sx:{color:"#525F7F"},fontSize:13,children:["Showing ",n.length," of ",s," entries"]}),n.length!==s&&Object(A.jsx)(P.a,{count:Math.ceil(s/l),color:"primary",variant:"contained",page:c+1,size:"large",onChange:function(e,t){r&&r(e,t)}})]})},I=n(187),T=n(351);function z(){return Object(A.jsx)(I.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center","& > * + *":{marginLeft:2}},children:Object(A.jsx)(T.a,{})})}var N=n(445),M=n(7),J=n(30),E=["row","columns","config","handleRowClick","rowIndex","handleDelete","hasDeletePermission"],L=["columns","data","config","handleRowClick","handleDelete"],U=Object(M.a)(y.a)((function(e){var t=e.theme;return Object(m.a)({},t.breakpoints.down("xs"),{fontSize:12,padding:"0 8px"})})),q=Object(M.a)(x.a)((function(e){var t=e.theme;return Object(m.a)({},t.breakpoints.down("xs"),{fontSize:14})}));function H(e){var t=e.columns,n=void 0===t?[]:t,r=e.config,a=void 0===r?{}:r,c=a.headerCellSx,o=void 0===c?{}:c,i=a.hasDelete,s=Object(S.useMemo)((function(){return n.map((function(e,t){var n=e||{},r=n.label,a=void 0===r?"":r,c=n.id,i=void 0===c?"":c,s=n.visible,u=void 0===s||s;return(k.a.isFunction(u)?u({column:e}):u)?Object(A.jsx)(U,{padding:"normal",sx:Object(O.a)({color:"#000",fontWeight:800},o),children:a},i||t):null}))}),[n,o]);return Object(A.jsxs)(h.a,{children:[s,i&&Object(A.jsx)(U,{padding:"none",sx:{headerCellSx:o}})]})}var K=function(e){var t=e.columns,n=e.data,r=void 0===n?[]:n,a=e.config,c=void 0===a?{}:a,o=e.handleRowClick,i=e.handleDelete,s=Object(j.a)(e,L);return(r||[]).map((function(e,n){var r=c.dataKey,a=void 0===r?"":r;return a&&(e=e[a]),function(e){var t=e.row,n=void 0===t?[]:t,r=e.columns,a=void 0===r?{}:r,c=e.config,o=void 0===c?{}:c,i=e.handleRowClick,s=e.rowIndex,u=e.handleDelete,l=e.hasDeletePermission,d=Object(j.a)(e,E),p=o.hasDelete,f=void 0!==p&&p,b=o.rowCellPadding,g=void 0===b?"none":b,x=o.onRowClick,m=void 0===x?void 0:x,y=o.rowStyleCb,w=d.role,C={};y&&(C=y({row:n})||{});var D=Object(A.jsx)(U,{sx:{},padding:"none",component:"th",scope:"row",children:Object(A.jsx)(v.a,{onClick:u.bind(void 0,n._id,n),disabled:!l,children:Object(A.jsx)(q,{color:"error"})})}),S=a.map((function(e,t){var r,a=e||{},c=a.id,o=void 0===c?"":c,i=a.renderer,u=a.emptyState,l=void 0===u?"":u,d=a.valueFormatter,p=a.visible,f=void 0===p||p;return(k.a.isFunction(f)?f({column:e}):f)?(r=d&&k.a.isFunction(d)?d(n[o]):k.a.isFunction(i)?i({row:n,role:w},s)||l:k.a.isObject(n)?k.a.get(n,o,l):n[o]||l,Object(A.jsx)(U,{padding:g||"normal",component:"th",scope:"row",children:r},o+t)):null}));return Object(A.jsxs)(h.a,{hover:!!m,onClick:function(e){e.preventDefault(),k.a.isFunction(i)&&i(n)},sx:m?Object(O.a)({cursor:"pointer"},C):{},children:[S,f&&D]},s)}(Object(O.a)({row:e,columns:t,config:c,handleRowClick:o,rowIndex:n,handleDelete:i},s))}))},W=function(e){var t=e.config,n=void 0===t?{}:t,i=e.data,j=void 0===i?[]:i,h=e.history,g=e.loading,x=void 0!==g&&g,m=e.onRefetch,y=e.isRefetching;j=j||[];var w=Object(S.useState)({}),k=Object(b.a)(w,2),C=k[0],_=k[1],P=Object(S.useState)({open:!1,config:{}}),I=Object(b.a)(P,2),T=I[0],M=I[1],E=n.columns,L=void 0===E?[]:E,U=n.onRowClick,q=n.hasOnClickUrl,W=void 0===q||q,B=n.onPageChange,G=n.page,Q=n.count,V=n.limit,X=n.size,Y=void 0===X?"medium":X,Z=n.emptyMessage,$=void 0===Z?"":Z,ee=n.onRowClickDataCallback,te=n.showRefresh,ne=void 0!==te&&te,re=n.onDelete,ae=n.deleteMessage,ce=n.deletePermissions,oe=void 0===ce?[]:ce,ie=Object(J.d)().user.role,se=void 0===ie?"":ie,ue=oe.indexOf(se)>-1||!1,le=R.a.useRef([]),de=function(e){if(W&&U){var t=U(e);ee&&(e=ee(e)),h.push(t,e)}else U&&U(e)},pe=function(e,t,n){n.stopPropagation();var r={title:function(){return Object(A.jsxs)(p.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(A.jsx)(D.a,{color:"error"}),Object(A.jsx)(f.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]})},okText:"Delete",onOk:function(){return re(e,fe)},content:function(){return Object(A.jsx)(d.a,{sx:{color:"#000"},children:ae||"Are you sure you want to delete the record?"})}};M(Object(O.a)(Object(O.a)({},T),{},{open:!0,config:r}))};function fe(){M(Object(O.a)(Object(O.a)({},T),{},{open:!1}))}var be=Object(S.useMemo)((function(){return Array.isArray(j)&&j.length?Object(A.jsxs)(S.Fragment,{children:[Object(A.jsx)(l.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(A.jsx)(H,{columns:L,config:n})}),Object(A.jsx)(u.a,{children:Object(A.jsx)(K,{role:se,columns:L,data:j,config:n,handleRowClick:de,handleDelete:pe,hasDeletePermission:ue},Date.now())})]}):Object(A.jsx)("tbody",{style:{height:300},children:Object(A.jsx)("tr",{children:Object(A.jsx)("td",{style:{textAlign:"center"},children:Object(A.jsx)("h4",{children:$||"No records found"})})})})}),[j,n]);return Object(S.useEffect)((function(){var e;if(null!==le&&void 0!==le&&null!==(e=le.current)&&void 0!==e&&e.table){var t=le.current.table.offsetHeight;_(Object(O.a)(Object(O.a)({},C),{},{height:t>200?t:void 0}))}}),[]),Object(A.jsxs)("div",{children:[ne&&Object(A.jsx)(o.a,{alignItems:"flex-end",children:Object(A.jsx)(v.a,{title:"Refresh",onClick:m,children:Object(A.jsx)(s.a,{className:y?"rotateIcon":void 0})})}),Object(A.jsxs)(a.a,{component:r.a,className:"",sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2},children:[x?function(){var e=window.innerHeight-180,t=(C.height?C.height>e?e:C.height:e)||e;return Object(A.jsx)(p.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(A.jsx)(p.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(A.jsx)(z,{})})})}():Object(A.jsx)(c.a,{ref:function(e){return le.current.table=e},"aria-label":"caption table",size:Y,children:be}),!x&&j.length>0&&Object(A.jsx)(F,{data:j,onPageChange:B,page:G,count:Q,limit:V})]}),Object(A.jsx)(N.a,{className:"enhancedTable_dialog",open:T.open,config:T.config,onClose:fe})]})};t.a=Object(_.withRouter)(Object(S.memo)(W))},443:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"g",(function(){return v})),n.d(t,"a",(function(){return j})),n.d(t,"h",(function(){return h})),n.d(t,"b",(function(){return O}));n(4);var r=n(169),a=n(33),c=n(51),o=n(48),i=n.n(o),s=n(35),u=n(10),l=n(79),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var r=Object(c.a)(Object(a.a)().mark((function r(c){var o,i,d;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(l.b)({uri:"/api/load/me?page=".concat(e+1,"&limit=").concat(t,"&module=").concat(n)});case 3:o=r.sent,i=o.success,d=o.data,i?c({type:u.E,payload:{loads:d,page:e,limit:t}}):Object(s.a)(d.message,"error"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),c(Object(s.b)(r.t0.message,"error"));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var r=Object(c.a)(Object(a.a)().mark((function r(c){var o,l,d,p,f,b;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o="/api/load/invoice_loads?page=".concat(e+1,"&limit=").concat(t,"&search=").concat(n),r.next=4,i.a.get(o);case 4:l=r.sent,d=l.data,p=d.loads,f=d.total,b=d.totalPages,c({type:u.K,payload:{invoices:p,page:e,limit:t,search:n,total:f,totalPages:b}}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),c(Object(s.b)(r.t0.message,"error"));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(){var o=Object(c.a)(Object(a.a)().mark((function c(o){var l,d;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,l="/api/load/me?page=".concat(e+1,"&limit=15&search=").concat(n,"&module=").concat(r),a.next=4,i.a.get(l);case 4:d=a.sent,o({type:u.fb,payload:{data:d.data,page:e,limit:t,search:n}}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),o(Object(s.b)(a.t0.message,"error"));case 11:case"end":return a.stop()}}),c,null,[[0,8]])})));return function(e){return o.apply(this,arguments)}}()},b=function(){return function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,n){var r,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:u.db}),r=n(),c=r.load,c.page,c.rowsPerPage;case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:u.gb,payload:e}},j=function(e,t){return function(){var n=Object(c.a)(Object(a.a)().mark((function n(r){var c,o;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c={headers:{"Content-Type":"application/json"}},n.next=4,i.a.post("/api/load",e,c);case 4:o=n.sent,r({type:u.b,payload:o.data}),Object(s.a)("Load Created"),t&&t(200===o.status,o.data),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),r(Object(s.b)(n.t0.message,"error"));case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;return function(){var i=Object(c.a)(Object(a.a)().mark((function c(i,u){var p,b,v,j,h,O,g,x,m,y,w,k,C,D,S,R,_,P,A,F,I,T,z;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(a.prev=0,p=new FormData,b=0,v=Object.keys(e);b<v.length;b++)j=v[b],["rateConfirmation","proofDelivery"].indexOf(j)<0&&(h=e[j],O=Array.isArray(h),g=null===h,x=O&&!g?JSON.stringify(h):h,p.append(j,x));for(p.append("bucketFiles",JSON.stringify(n)),m=0,y=["rateConfirmation","proofDelivery"];m<y.length;m++)if(k=e[w=y[m]]){C=Object(r.a)(k);try{for(C.s();!(D=C.n()).done;)S=D.value,p.append(w,S)}catch(c){C.e(c)}finally{C.f()}}return a.next=7,Object(l.c)({uri:"/api/load/modify",body:p});case 7:R=a.sent,_=R.success,P=R.data,_&&Object(s.a)("Load Updated"),A=u(),F=A.load.search,I=F.page,T=F.limit,z=F.query,i(z?f(I,T,z):d(0,5,t)),o(_,P),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(0),Object(s.a)(a.t0.message,"error");case 19:case"end":return a.stop()}}),c,null,[[0,16]])})));return function(e,t){return i.apply(this,arguments)}}()},O=function(e,t){return function(){var n=Object(c.a)(Object(a.a)().mark((function n(r){var c,o,i;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(l.a)({uri:"/api/load",body:{data:{load_id:e}}});case 3:c=n.sent,o=c.success,i=c.data,Object(s.a)(i.message,o?"success":"error"),o&&r({type:u.s,payload:e}),t&&t(o,i),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),Object(s.a)(n.t0.message,"error");case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}},465:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return f}));var r=n(33),a=n(51),c=n(48),o=n.n(c),i=n(35),s=n(10),u=function(){return function(){var e=Object(a.a)(Object(r.a)().mark((function e(t){var n,a,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get("/api/drivers/me");case 3:n=e.sent,Object.assign(n.data,{timestamp:new Date}),t({type:s.C,payload:n.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t({type:s.t,payload:{msg:null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.statusText,status:null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c?void 0:c.status}});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},l=function(e,t){return function(){var t=Object(a.a)(Object(r.a)().mark((function t(n){var a,c,s;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={headers:{"Content-Type":"application/json"}},t.next=4,o.a.post("/api/drivers",e,a);case 4:c=t.sent,Object(i.a)(c.data.message),n(u()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),s=t.t0.errors&&Array.isArray(t.t0.errors)&&t.t0.errors.length?t.t0.errors[0].msg:t.t0.message,n(Object(i.b)(s,"error"));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},d=function(e,t){return function(){var n=Object(a.a)(Object(r.a)().mark((function n(a,c){var i,u,l;return Object(r.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=c().driver.drivers,n.next=4,o.a.patch("/api/drivers/loads?driver_id=".concat(e),{loads:t});case 4:u=n.sent,-1!==(l=i.indexOf(i.find((function(e){return e._id===u.data._id}))))&&(i[l]=u.data),a({type:s.U,payload:i}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:s.t,payload:{msg:n.t0.response.statusText,status:n.t0.response.status}});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(a.a)(Object(r.a)().mark((function t(n,a){var c,u,l;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=a().driver.drivers,t.next=4,o.a.delete("/api/drivers/",{data:{driver_id:e}});case 4:u=t.sent,-1!==(l=c.indexOf(c.find((function(e){return e._id===u.data._id}))))&&c.splice(l,1),Object(i.a)("Deleted Successfully"),n({type:s.q,payload:c}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:s.t,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},f=function(e,t){return function(){var n=Object(a.a)(Object(r.a)().mark((function n(a,c){var i,u,l;return Object(r.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=c().driver.drivers,n.next=4,o.a.delete("/api/drivers/loads",{data:{load_id:t,driver_id:e}});case 4:u=n.sent,-1!==(l=i.indexOf(i.find((function(e){return e._id===u.data._id}))))&&(i[l]=u.data),a({type:s.r,payload:i}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:s.t,payload:{msg:n.t0.response.statusText,status:n.t0.response.status}});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=5.672f7ab6.chunk.js.map