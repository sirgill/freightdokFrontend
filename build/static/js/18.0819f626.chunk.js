(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[18],{1010:function(e,t,n){"use strict";var a=n(115);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(116)),o=n(1),c=(0,i.default)((0,o.jsx)("path",{d:"M2 12.5C2 9.46 4.46 7 7.5 7H18c2.21 0 4 1.79 4 4s-1.79 4-4 4H9.5C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10H17v2H9.41c-.55 0-.55 1 0 1H18c1.1 0 2-.9 2-2s-.9-2-2-2H7.5C5.57 9 4 10.57 4 12.5S5.57 16 7.5 16H17v2H7.5C4.46 18 2 15.54 2 12.5z"}),"Attachment");t.default=c},1019:function(e,t,n){"use strict";var a=n(3),i=n(6),o=n(2),c=n(0),r=n(15),l=n(104),s=n(132),d=n(7),u=n(16),b=n(359),j=n(361),O=n(72),h=n(79);function f(e){return Object(O.a)("MuiLoadingButton",e)}var g=Object(h.a)("MuiLoadingButton",["root","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]),m=n(1),p=["children","disabled","id","loading","loadingIndicator","loadingPosition","variant"],v=Object(d.a)(b.a,{shouldForwardProp:function(e){return function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e&&"classes"!==e}(e)||"classes"===e},name:"MuiLoadingButton",slot:"Root",overridesResolver:function(e,t){return[t.root,t.startIconLoadingStart&&Object(a.a)({},"& .".concat(g.startIconLoadingStart),t.startIconLoadingStart),t.endIconLoadingEnd&&Object(a.a)({},"& .".concat(g.endIconLoadingEnd),t.endIconLoadingEnd)]}})((function(e){var t=e.ownerState,n=e.theme;return Object(o.a)(Object(a.a)({},"& .".concat(g.startIconLoadingStart,", & .").concat(g.endIconLoadingEnd),{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0}),"center"===t.loadingPosition&&Object(a.a)({transition:n.transitions.create(["background-color","box-shadow","border-color"],{duration:n.transitions.duration.short})},"&.".concat(g.loading),{color:"transparent"}),"start"===t.loadingPosition&&t.fullWidth&&Object(a.a)({},"& .".concat(g.startIconLoadingStart,", & .").concat(g.endIconLoadingEnd),{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0,marginRight:-8}),"end"===t.loadingPosition&&t.fullWidth&&Object(a.a)({},"& .".concat(g.startIconLoadingStart,", & .").concat(g.endIconLoadingEnd),{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0,marginLeft:-8}))})),x=Object(d.a)("div",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:function(e,t){var n=e.ownerState;return[t.loadingIndicator,t["loadingIndicator".concat(Object(r.a)(n.loadingPosition))]]}})((function(e){var t=e.theme,n=e.ownerState;return Object(o.a)({position:"absolute",visibility:"visible",display:"flex"},"start"===n.loadingPosition&&("outlined"===n.variant||"contained"===n.variant)&&{left:"small"===n.size?10:14},"start"===n.loadingPosition&&"text"===n.variant&&{left:6},"center"===n.loadingPosition&&{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled},"end"===n.loadingPosition&&("outlined"===n.variant||"contained"===n.variant)&&{right:"small"===n.size?10:14},"end"===n.loadingPosition&&"text"===n.variant&&{right:6},"start"===n.loadingPosition&&n.fullWidth&&{position:"relative",left:-10},"end"===n.loadingPosition&&n.fullWidth&&{position:"relative",right:-10})})),y=c.forwardRef((function(e,t){var n=Object(u.a)({props:e,name:"MuiLoadingButton"}),a=n.children,c=n.disabled,d=void 0!==c&&c,b=n.id,O=n.loading,h=void 0!==O&&O,g=n.loadingIndicator,y=n.loadingPosition,w=void 0===y?"center":y,C=n.variant,I=void 0===C?"text":C,S=Object(i.a)(n,p),P=Object(l.a)(b),L=null!=g?g:Object(m.jsx)(j.a,{"aria-labelledby":P,color:"inherit",size:16}),k=Object(o.a)({},n,{disabled:d,loading:h,loadingIndicator:L,loadingPosition:w,variant:I}),D=function(e){var t=e.loading,n=e.loadingPosition,a=e.classes,i={root:["root",t&&"loading"],startIcon:[t&&"startIconLoading".concat(Object(r.a)(n))],endIcon:[t&&"endIconLoading".concat(Object(r.a)(n))],loadingIndicator:["loadingIndicator",t&&"loadingIndicator".concat(Object(r.a)(n))]},c=Object(s.a)(i,f,a);return Object(o.a)({},a,c)}(k),R=h?Object(m.jsx)(x,{className:D.loadingIndicator,ownerState:k,children:L}):null;return Object(m.jsxs)(v,Object(o.a)({disabled:d||h,id:P,ref:t},S,{variant:I,classes:D,ownerState:k,children:["end"===k.loadingPosition?a:R,"end"===k.loadingPosition?R:a]}))}));t.a=y},1069:function(e,t,n){"use strict";n.r(t);var a=n(188),i=n(359),o=n(261),c=(n(262),n(0)),r=n(448),l=n(74),s=n(33),d=n(51),u=n(91),b=n(10),j=n(30),O=Object(j.d)().user.orgId,h=function(){return function(){var e=Object(d.a)(Object(s.a)().mark((function e(t){var n,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:b.m,payload:{loading:!0,data:{}}}),e.prev=1,e.next=4,Object(u.b)({uri:"/api/organizations?orgId="+O});case 4:n=e.sent,a=n.data,t({type:b.m,payload:{loading:!1,data:a.data}}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t({type:b.m,payload:{loading:!1,data:{}}});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},f=n(34),g=n(46),m=n(43),p=n(189),v=n(171),x=n(3),y=n(4),w=n(14),C=n(457),I=n(1019),S=n(35),P=n(1),L=function(e){var t=e.onCloseUrl,n=Object(c.useState)({}),r=Object(w.a)(n,2),b=r[0],O=r[1],g=Object(f.useHistory)(),C=Object(c.useState)(!1),L=Object(w.a)(C,2),k=L[0],D=L[1],R=(Object(j.d)().user||{}).id,W=Object(l.d)();Object(c.useEffect)((function(){var e=function(){var e=Object(d.a)(Object(s.a)().mark((function e(){var t,n,a,i,o,c,r,l,d,b;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)({uri:"/api/fmcsa/"+R});case 2:t=e.sent,n=t.success,a=t.data,n&&(i=a.data,c=(o=void 0===i?{}:i).autoLiabilityInsurance,r=o.generalLiabilityInsurance,l=o.cargoLiabilityInsurance,d=o.email,b=o.phone,O({autoLiabilityInsurance:c?c.url:"",generalLiabilityInsurance:r?r.url:"",cargoLiabilityInsurance:l?l.url:"",email:d,phone:b}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var E=function(e){var t=e.target,n=t.name,a=t.files;O((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(x.a)({},n,a||null))}))},M=function(e){var t=e.target,n=t.name,a=t.value;O(Object(y.a)(Object(y.a)({},b),{},Object(x.a)({},n,a)))};return Object(P.jsx)(a.a,{component:"form",noValidate:!0,sx:{minWidth:400},onSubmit:function(e){D(!0),e.preventDefault();for(var n=new FormData,a=0,i=Object.keys(b);a<i.length;a++){var o=i[a];if(["generalLiabilityInsurance","autoLiabilityInsurance","cargoLiabilityInsurance"].indexOf(o)<0){var c=b[o],r=Array.isArray(c)&&!(null===c)?JSON.stringify(c):c;n.append(o,r)}}for(var l=0,s=["generalLiabilityInsurance","autoLiabilityInsurance","cargoLiabilityInsurance"];l<s.length;l++){var d=s[l],j=b[d];if(j){var O,f=Object(v.a)(j);try{for(f.s();!(O=f.n()).done;){var m=O.value;n.append(d,m)}}catch(p){f.e(p)}finally{f.f()}}}Object(u.d)({uri:"/api/fmcsa",body:n}).then((function(e){Object(S.a)(e.data.message),W(h()),g.push(t)})).catch((function(e){console.log(e),Object(S.a)(e.message,"error")})).finally((function(){return D(!1)}))},children:Object(P.jsxs)(o.a,{spacing:3,children:[Object(P.jsx)(p.a,{type:"email",label:"Email",fullWidth:!0,onChange:M,value:b.email||"",name:"email"}),Object(P.jsx)(p.a,{type:"email",label:"Phone Number",fullWidth:!0,value:b.phone||"",onChange:M,name:"phone"}),Object(P.jsxs)(o.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(P.jsx)(m.a,{children:"General Liability Insurance"}),Object(P.jsxs)("label",{htmlFor:"contained-button-file1",children:[Object(P.jsx)("input",{style:{display:"none"},type:"file",accept:"application/pdf,application/msword,application/vnd.ms-excel",name:"generalLiabilityInsurance",onChange:E,id:"contained-button-file1"}),Object(P.jsx)(i.a,{variant:"contained",component:"span",children:"Attach"})]})]}),Object(P.jsxs)(o.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(P.jsx)(m.a,{children:"Auto Liability Insurance"}),Object(P.jsxs)("label",{htmlFor:"contained-button-file2",children:[Object(P.jsx)("input",{style:{display:"none"},type:"file",accept:"application/pdf,application/msword,application/vnd.ms-excel",name:"autoLiabilityInsurance",onChange:E,id:"contained-button-file2"}),Object(P.jsx)(i.a,{variant:"contained",component:"span",children:"Attach"})]})]}),Object(P.jsxs)(o.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(P.jsx)(m.a,{children:"Cargo Liability Insurance"}),Object(P.jsxs)("label",{htmlFor:"contained-button-file3",children:[Object(P.jsx)("input",{style:{display:"none"},type:"file",accept:"application/pdf,application/msword,application/vnd.ms-excel",name:"cargoLiabilityInsurance",onChange:E,id:"contained-button-file3"}),Object(P.jsx)(i.a,{variant:"contained",component:"span",children:"Attach"})]})]}),Object(P.jsx)(I.a,{loading:k,loadingIndicator:"Updating...",type:"submit",variant:"contained",children:"Update"})]})})},k=function(e){var t=e.onCloseUrl,n={title:"Update Carrier Profile",closeUrl:t,paperProps:{sx:{width:"auto"}}};return Object(P.jsx)(C.a,{config:n,children:Object(P.jsx)(L,{onCloseUrl:t})})},D=n(93),R=(n(205),n(1010),n(38)),W={chRobinson:"C.H. Robinson",newtrul:"New Trul"},E=function(e){var t=e.path,n=e._dbData,a=e.list,o=e.refetch;return{rowCellPadding:"normal",showRefresh:!1,columns:[{id:"integrationName",label:"Integrations",valueFormatter:function(e){return W[e]||e}},{id:"code",label:"Key/Code",renderer:function(e){var t=e.row;return t.code||t.clientSecret?"******":"--"}},{id:"email",label:"Email"},{id:"mc",label:"MC#"},{renderer:function(e,c){var r=e.row;return Object(P.jsx)(i.a,{component:g.b,to:{pathname:t+R.h,state:{row:r,rowIndex:c,_dbData:n,list:a,refetch:o}},variant:"contained",children:"Update"})}}]}},M={containerHeight:"auto",rowCellPadding:"normal",showRefresh:!0,columns:[{id:"name",label:"Company Name"},{id:"otherOrgMetaData.carrier.ein",label:"EIN#"},{id:"otherOrgMetaData.carrier.dotNumber",label:"DOT#",emptyState:"--"},{id:"operatingStatus",label:"Operating Status",renderer:function(e){var t=e.row,n=(void 0===t?{}:t).otherOrgMetaData,a=(void 0===n?{}:n).carrier,i=(void 0===a?{}:a).allowedToOperate;return Object(j.b)("Y"===i)}}]},F={title:"Update Integration Details",preventBackdropClick:!0,titleStyles:{}},N=n(98),A=n(451),H=n(226),U=n(194),z=Object(c.memo)((function(e){var t=e.onChange,n=e.form,a=e.onSubmit,i=e.errors,o=e.loading,c=n.password,r=n.email;return Object(P.jsxs)(N.a,{container:!0,spacing:3,direction:"column",sx:{minWidth:350},component:"form",onSubmit:a,noValidate:!0,children:[Object(P.jsx)(N.a,{item:!0,children:Object(P.jsx)(m.a,{fontWeight:600,color:D.a,children:"Please verify your credentials."})}),Object(P.jsx)(N.a,{item:!0,children:Object(P.jsx)(U.b,{readOnly:!0,label:"Email",fullWidth:!0,type:"email",value:r,name:"email",onChange:t,errors:i})}),Object(P.jsx)(N.a,{item:!0,children:Object(P.jsx)(U.d,{label:"Password",fullWidth:!0,value:c,name:"password",onChange:t,errors:i})}),Object(P.jsx)(N.a,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:Object(P.jsx)(I.a,{type:"submit",variant:"contained",color:"primary",loading:o,children:o?"Please wait...":"Verify"})})]})})),T=function(e){var t=e.location.state,n=(void 0===t?{}:t).row,a=n.integrationName.equalsIgnoreCase("chrobinson"),i=W[n.integrationName],o=Object(c.useState)({email:"",mc:"",code:""}),r=Object(w.a)(o,2),l=r[0],s=r[1],d=Object(c.useState)(!1),u=Object(w.a)(d,2),b=u[0],O=u[1],h=Object(c.useState)({email:Object(j.d)().user.email,password:""}),f=Object(w.a)(h,2),g=f[0],p=f[1],v=Object(c.useState)({}),L=Object(w.a)(v,2),k=L[0],D=L[1],R=Object(A.a)(H.a,null,!0),E=R.loading,M=R.mutation,T=Object(A.a)("/api/carrierProfile/secret-manager?update=true",null,!0),_=T.loading,B=T.mutation,V=function(e){var t=e.name,n=e.value;s(Object(y.a)(Object(y.a)({},l),{},Object(x.a)({},t,n))),D(Object(y.a)(Object(y.a)({},k),{},Object(x.a)({},t,"")))};return b?Object(P.jsxs)(C.a,{config:F,children:[Object(P.jsx)(m.a,{align:"center",variant:"h6",fontWeight:550,mb:1,children:i}),Object(P.jsx)(U.a,{config:{open:!0,message:"Data changes will reflect after an hour of saving.",severity:"info"},inStyles:{mb:2}}),Object(P.jsx)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault();var t=l.email,i=l.code;if(!Object(j.e)(t)||!t)return D(Object(y.a)(Object(y.a)({},k),{},{email:"Invalid Email"}));var o={mc:l.mc,email:l.email};if(i&&Object.assign(o,{code:i}),a){var c=l.clientId,r=l.clientSecret,s=l.tCode;Object.assign(o,{clientId:c,clientSecret:r,tCode:s})}B(Object(x.a)({},n.integrationName,Object(y.a)({},o))).then((function(e){if(!e.success)return Object(S.a)(e.message,"error");Object(S.a)("Updated Successfully"),Object(j.i)("fetchCarrierProfile"),Object(j.i)("closeModal")}))},children:Object(P.jsxs)(N.a,{container:!0,spacing:3,direction:"column",sx:{minWidth:350},children:[a&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(N.a,{item:!0,children:Object(P.jsx)(U.b,{fullWidth:!0,label:"Client ID",name:"clientId",onChange:V,value:l.clientId||""})}),Object(P.jsx)(N.a,{item:!0,children:Object(P.jsx)(U.b,{fullWidth:!0,label:"Client Secret",name:"clientSecret",onChange:V,value:l.clientSecret||"",multiline:!0,rows:3})}),Object(P.jsx)(N.a,{item:!0,children:Object(P.jsx)(U.b,{fullWidth:!0,label:"TCode",name:"tCode",onChange:V,value:l.tCode||""})})]}),!a&&Object(P.jsx)(N.a,{item:!0,children:Object(P.jsx)(U.b,{fullWidth:!0,label:"Code",name:"code",onChange:V,value:l.code||"",multiline:!0,rows:5})}),Object(P.jsx)(N.a,{item:!0,children:Object(P.jsx)(U.b,{fullWidth:!0,label:"Email",onChange:V,name:"email",value:l.email||""})}),Object(P.jsx)(N.a,{item:!0,children:Object(P.jsx)(U.b,{fullWidth:!0,label:"MC#",name:"mc",onChange:V,value:l.mc||""})}),Object(P.jsx)(N.a,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:Object(P.jsx)(I.a,{type:"submit",variant:"contained",color:"primary",loading:_,children:_?"Updating...":"Update"})})]})})]}):Object(P.jsx)(C.a,{config:F,children:Object(P.jsx)(z,{onChange:function(e){var t=e.name,n=e.value;p(Object(y.a)(Object(y.a)({},g),{},Object(x.a)({},t,n))),D(Object(y.a)(Object(y.a)({},k),{},Object(x.a)({},t,"")))},form:g,onSubmit:function(e){e.preventDefault();var t=g.email,a=g.password;t||D(Object(y.a)(Object(y.a)({},k),{},{email:"Please enter Email"})),a?Object(j.e)(t)?M(g,null).then((function(e){e.token&&(O(!0),s(n))})):D(Object(y.a)(Object(y.a)({},k),{},{email:"Invalid Email"})):D(Object(y.a)(Object(y.a)({},k),{},{password:"Please enter Password"}))},errors:k,loading:E})})},_=n(502);t.default=Object(f.withRouter)((function(e){var t=e.match,n=(void 0===t?{}:t).path,o=Object(f.useRouteMatch)(n+"/updateCarrierProfile"),s=Object(j.d)().user||{},d=s.role,u=void 0===d?"admin":d,b=s.orgId,O=void 0===b?"":b,m=Object(l.e)((function(e){return e.carrierProfile})),p=m.data,v=m.loading,x=Object(l.d)(),y=Object(_.a)("/api/carrierProfile/secret-manager?orgId="+O),w=y.data,C=void 0===w?{}:w,I=y.loading,S=y.refetch,L=y.isRefetching,D=C||{},W=D.data,F=D._dbData;Object(c.useEffect)((function(){return x(h()),Object(j.a)(window,"fetchCarrierProfile",S),function(){return Object(j.g)(window,"fetchCarrierProfile",S)}}),[]);return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(r.a,{data:p,loading:v,config:M,onRefetch:S,isRefetching:L}),o&&Object(P.jsx)(k,{onCloseUrl:n}),"admin"!==u&&Object(P.jsx)(a.a,{sx:{display:"flex",justifyContent:"flex-end"},children:Object(P.jsx)(i.a,{variant:"contained",component:g.b,to:n+"/updateCarrierProfile",children:"Update Profile"})}),Object(P.jsx)(a.a,{sx:{mt:4},children:Object(P.jsx)(r.a,{data:W,loading:I,config:E({path:n,data:F,list:W})})}),Object(P.jsx)(f.Route,{component:T,path:n+R.h})]})}))},448:function(e,t,n){"use strict";var a=n(188),i=n(434),o=n(1094),c=n(1095),r=n(261),l=n(458),s=n.n(l),d=n(1093),u=n(1092),b=n(1082),j=n(98),O=n(43),h=n(14),f=n(262),g=n(27),m=n(1091),p=n(4),v=n(464),x=n.n(v),y=n(3),w=n(1090),C=n(119),I=n.n(C),S=n(455),P=n.n(S),L=n(0),k=n.n(L),D=n(34),R=n(1065),W=n(7),E=n(1),M=Object(W.a)(R.a)((function(e){var t=e.theme;return{"& .MuiPaginationItem-root":Object(y.a)({},t.breakpoints.down("md"),{height:"1.8rem",width:"1rem"})}})),F=Object(W.a)(r.a)((function(e){var t,n=e.theme;return t={},Object(y.a)(t,n.breakpoints.down("sm"),{justifyContent:"center"}),Object(y.a)(t,"display","flex"),Object(y.a)(t,"justifyContent","space-between"),Object(y.a)(t,"flexWrap","wrap"),t})),N=function(e){var t=e.data,n=void 0===t?[]:t,a=e.onPageChange,i=e.page,o=void 0===i?0:i,c=e.count,r=void 0===c?0:c,l=e.limit,s=void 0===l?1:l,d=Object(L.useState)(0),u=Object(h.a)(d,2),b=u[0],j=u[1];Object(L.useEffect)((function(){Array.isArray(n)&&j(n.length)}),[n]);return b<10&&r<10?null:Object(E.jsxs)(F,{direction:"row",alignItems:"center",children:[r>10&&Object(E.jsxs)(O.a,{sx:{color:"#525F7F"},fontSize:12,children:["Showing ",n.length," of ",r," entries"]}),n.length!==r&&Object(E.jsx)(M,{count:Math.ceil(r/s),color:"primary",variant:"contained",page:o+1,size:"medium",onChange:function(e,t){a&&a(e,t)}})]})},A=n(361);function H(){return Object(E.jsx)(a.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center","& > * + *":{marginLeft:2}},children:Object(E.jsx)(A.a,{})})}var U=n(454),z=n(30),T=["row","columns","config","handleRowClick","rowIndex","handleDelete","hasDeletePermission"],_=["columns","data","config","handleRowClick","handleDelete"],B=Object(W.a)(w.a)((function(e){var t=e.theme;return Object(y.a)({},t.breakpoints.down("xs"),{fontSize:12,padding:"0 8px"})})),V=Object(W.a)(x.a)((function(e){var t=e.theme;return Object(y.a)({},t.breakpoints.down("xs"),{fontSize:14})}));function J(e){var t=e.columns,n=void 0===t?[]:t,a=e.config,i=void 0===a?{}:a,o=i.headerCellSx,c=void 0===o?{}:o,r=i.hasDelete,l=Object(L.useMemo)((function(){return n.map((function(e,t){var n=e||{},a=n.label,i=void 0===a?"":a,o=n.id,r=void 0===o?"":o,l=n.visible,s=void 0===l||l;return(I.a.isFunction(s)?s({column:e}):s)?Object(E.jsx)(B,{padding:"normal",sx:Object(p.a)({color:"#000",bgcolor:"#fafafa",fontWeight:800},c),children:i},r||t):null}))}),[n,c]);return Object(E.jsxs)(m.a,{children:[l,r&&Object(E.jsx)(B,{padding:"none",sx:Object(p.a)({},c)})]})}var K=function(e){var t=e.columns,n=e.data,a=void 0===n?[]:n,i=e.config,o=void 0===i?{}:i,c=e.handleRowClick,r=e.handleDelete,l=Object(g.a)(e,_);return(a||[]).map((function(e,n){var a=o.dataKey,i=void 0===a?"":a;return i&&(e=e[i]),function(e){var t=e.row,n=void 0===t?[]:t,a=e.columns,i=void 0===a?{}:a,o=e.config,c=void 0===o?{}:o,r=e.handleRowClick,l=e.rowIndex,s=e.handleDelete,d=e.hasDeletePermission,u=Object(g.a)(e,T),b=c.hasDelete,j=void 0!==b&&b,O=c.rowCellPadding,h=void 0===O?"none":O,v=c.onRowClick,x=void 0===v?void 0:v,y=c.rowStyleCb,w=u.role,C={};y&&(C=y({row:n})||{});var S=Object(E.jsx)(B,{sx:{},padding:"none",component:"th",scope:"row",children:Object(E.jsx)(f.a,{onClick:s.bind(void 0,n._id,n),disabled:!d,children:Object(E.jsx)(V,{color:"error"})})}),P=i.map((function(e,t){var a,i=e||{},o=i.id,c=void 0===o?"":o,r=i.renderer,s=i.emptyState,d=void 0===s?"":s,u=i.valueFormatter,b=i.visible,j=void 0===b||b;return(I.a.isFunction(j)?j({column:e}):j)?(a=u&&I.a.isFunction(u)?u(n[c]):I.a.isFunction(r)?r({row:n,role:w},l)||d:I.a.isObject(n)?I.a.get(n,c,d):n[c]||d,Object(E.jsx)(B,{padding:h||"normal",component:"th",scope:"row",children:a},c+t)):null}));return Object(E.jsxs)(m.a,{hover:!!x,onClick:function(e){e.preventDefault(),I.a.isFunction(r)&&r(n)},sx:x?Object(p.a)({cursor:"pointer"},C):Object(p.a)({},C),children:[P,j&&S]},l)}(Object(p.a)({row:e,columns:t,config:o,handleRowClick:c,rowIndex:n,handleDelete:r},l))}))},q=function(e){var t=e.config,n=void 0===t?{}:t,l=e.data,g=void 0===l?[]:l,m=e.history,v=e.loading,x=void 0!==v&&v,y=e.onRefetch,w=e.isRefetching;g=g||[];var C=Object(L.useState)({}),I=Object(h.a)(C,2),S=I[0],D=I[1],R=Object(L.useState)({open:!1,config:{}}),W=Object(h.a)(R,2),M=W[0],F=W[1],A=n.columns,T=void 0===A?[]:A,_=n.onRowClick,B=n.hasOnClickUrl,V=void 0===B||B,q=n.onPageChange,G=n.page,Y=n.count,Q=n.limit,X=n.size,Z=void 0===X?"medium":X,$=n.emptyMessage,ee=void 0===$?"":$,te=n.onRowClickDataCallback,ne=n.showRefresh,ae=void 0!==ne&&ne,ie=n.onDelete,oe=n.deleteMessage,ce=n.deletePermissions,re=void 0===ce?[]:ce,le=n.containerHeight,se=void 0===le?"":le,de=Object(z.d)().user.role,ue=void 0===de?"":de,be=re.indexOf(ue)>-1||!1,je=k.a.useRef([]),Oe=Array.isArray(g)&&g.length,he=function(e){if(V&&_){var t=_(e);te&&(e=te(e)),m.push(t,e)}else _&&_(e)},fe=function(e,t,n){n.stopPropagation();var a={title:function(){return Object(E.jsxs)(j.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(E.jsx)(P.a,{color:"error"}),Object(E.jsx)(O.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]})},okText:"Delete",onOk:function(){return ie(e,ge)},content:function(){return Object(E.jsx)(b.a,{sx:{color:"#000"},children:oe||"Are you sure you want to delete the record?"})}};F(Object(p.a)(Object(p.a)({},M),{},{open:!0,config:a}))};function ge(){F(Object(p.a)(Object(p.a)({},M),{},{open:!1}))}var me=Object(L.useMemo)((function(){return Oe?Object(E.jsxs)(L.Fragment,{children:[Object(E.jsx)(u.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(E.jsx)(J,{columns:T,config:n})}),Object(E.jsx)(d.a,{children:Object(E.jsx)(K,{role:ue,columns:T,data:g,config:n,handleRowClick:he,handleDelete:fe,hasDeletePermission:be},Date.now())})]}):Object(E.jsx)("tbody",{style:{height:300},children:Object(E.jsx)("tr",{children:Object(E.jsx)("td",{style:{textAlign:"center"},children:Object(E.jsx)("h4",{children:ee||"No records found"})})})})}),[g,n]);return Object(L.useEffect)((function(){var e;if(null!==je&&void 0!==je&&null!==(e=je.current)&&void 0!==e&&e.table){var t=je.current.table.offsetHeight;D(Object(p.a)(Object(p.a)({},S),{},{height:t>200?t:void 0}))}}),[]),Object(E.jsxs)(a.a,{className:"enhanced-table",sx:{height:Oe&&!x?se||"95%":"auto"},children:[ae&&Object(E.jsx)(r.a,{alignItems:"flex-end",children:Object(E.jsx)(f.a,{title:"Refresh",onClick:y,children:Object(E.jsx)(s.a,{className:w?"rotateIcon":void 0})})}),Object(E.jsx)(o.a,{component:i.a,className:"",sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2,height:Oe&&!x?"calc(100% - 64px)":"auto"},children:x?function(){var e=window.innerHeight-180,t=(S.height?S.height>e?e:S.height:e)||e;return Object(E.jsx)(j.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(E.jsx)(j.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(E.jsx)(H,{})})})}():Object(E.jsx)(c.a,{ref:function(e){return je.current.table=e},"aria-label":"caption table",size:Z,stickyHeader:!0,children:me})}),!x&&g.length>0&&Object(E.jsx)(N,{data:g,onPageChange:q,page:G,count:Y,limit:Q}),Object(E.jsx)(U.a,{className:"enhancedTable_dialog",open:M.open,config:M.config,onClose:ge})]})};t.a=Object(D.withRouter)(Object(L.memo)(q))},502:function(e,t,n){"use strict";var a=n(14),i=n(0),o=n(91);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(i.useState)(null),c=Object(a.a)(n,2),r=c[0],l=c[1],s=Object(i.useState)(!1),d=Object(a.a)(s,2),u=d[0],b=d[1],j=Object(i.useState)(null),O=Object(a.a)(j,2),h=O[0],f=O[1],g=Object(i.useState)(!1),m=Object(a.a)(g,2),p=m[0],v=m[1];function x(){Object(o.b)({uri:e,callback:t,showTriggers:!1}).then((function(e){e.data&&l(e.data)})).finally((function(){b(!1),v(!1)}))}return Object(i.useEffect)((function(){b(!0),l(null),f(null),x()}),[e]),{data:r,loading:u,error:h,refetch:function(){v(!0),x()},isRefetching:p}}}}]);
//# sourceMappingURL=18.0819f626.chunk.js.map