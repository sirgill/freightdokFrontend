(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[36],{1118:function(e,t,a){"use strict";a.r(t);var s=a(527),n=a(201),c=a(248),r=a(280),o=a.n(r),l=a(0),i=a(13),d=a(253),b=a(73),u=a.n(b),p=a(33),y=a(257),O=a.n(y),j=a(496),f=a(57),D=a(2);const g=Object(l.lazy)((()=>a.e(31).then(a.bind(null,1029)))),h=Object(l.lazy)((()=>Promise.all([a.e(0),a.e(5),a.e(37),a.e(34)]).then(a.bind(null,1037))));t.default=Object(i.withRouter)((e=>{const{canViewCards:t}=f.a.getUserPermissionsByDashboardId("businessIntelligence"),a=u()().subtract(1,"weeks").startOf("week"),r=u()().subtract(1,"weeks").endOf("week"),i=Object(p.e)((e=>O.a.get(e,"businessIntelligence.isRefetching",!1))),{match:{path:b=""},history:y}=e,w=Object(p.d)(),[k,v]=Object(l.useState)({startDate:new Date,endDate:new Date,key:"selection"}),S=Object(l.useCallback)((e=>{let{value:t}=e;const{startDate:a,endDate:s}=t;w(Object(j.b)({startDate:u()(a).utc(!0).toISOString(),endDate:u()(s).utc(!0).toISOString()},!0)),v({...k,startDate:new Date(a),endDate:new Date(s)})}),[k]);Object(l.useEffect)((()=>{v({key:"selection",startDate:new Date(a.toDate()),endDate:new Date(r.toDate())})}),[b,y]),Object(l.useEffect)((()=>{m(),x()}),[k]);const m=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];w(Object(j.b)({startDate:a.toISOString(),endDate:r.toISOString()},e))},x=()=>{w(Object(j.c)({startDate:k.startDate.toISOString(),endDate:k.endDate.toISOString()}))},I=Object(l.useCallback)((()=>{const e=u()().subtract(1,"weeks").startOf("week"),t=u()().subtract(1,"weeks").endOf("week"),a=u()().subtract(2,"weeks").startOf("week"),s=u()().subtract(2,"weeks").endOf("week"),n=u()().subtract(3,"weeks").startOf("week"),c=u()().subtract(3,"weeks").endOf("week");w(Object(j.d)([{startDate:e,endDate:t},{startDate:a,endDate:s},{startDate:n,endDate:c}]))}),[w]);return Object(D.jsxs)(s.a,{sx:{height:"100%",pt:2,gap:{xs:2,md:4},overflow:"auto"},className:"dashboardRoot",children:[t&&Object(D.jsxs)(n.a,{sx:{textAlign:"right"},children:[Object(D.jsx)(d.b,{label:"Date Range",value:k,pickerProps:{maxDate:r.toDate()},onChange:S}),Object(D.jsx)(c.a,{title:"Refresh",onClick:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];m(e),I(e),x(e)}.bind(null,!0),children:Object(D.jsx)(o.a,{className:i?"rotateIcon":void 0})})]}),t&&Object(D.jsx)(l.Suspense,{fallback:Object(D.jsx)(d.f,{}),children:Object(D.jsx)(g,{})}),Object(D.jsx)(l.Suspense,{fallback:Object(D.jsx)(d.f,{}),children:Object(D.jsx)(h,{basePath:b,dateRange:k,fetchHistoricalTabData:I,getFinancialsTabData:x})})]})}))},280:function(e,t,a){"use strict";var s=a(89);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(91)),c=a(2),r=(0,n.default)((0,c.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");t.default=r},496:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return d})),a.d(t,"c",(function(){return b})),a.d(t,"a",(function(){return u}));var s=a(48),n=a(98),c=a(90),r=a(28),o=a(3),l=a(49);const i=(e,t)=>async a=>{try{a(t?{type:o.V,payload:!0}:{type:o.U,payload:!0});const r="".concat(n.b,"?").concat(Object(c.n)(e)),{data:l,success:i}=await Object(s.b)({uri:r});a({type:o.D,payload:{data:l,success:i}}),a(t?{type:o.V,payload:!1}:{type:o.U,payload:!1})}catch(l){Object(r.a)(l.message,"error"),a(t?{type:o.V,payload:!1}:{type:o.U,payload:!1})}},d=e=>async t=>{try{t({type:o.s,payload:!0});const a=e.map((async e=>{let{startDate:t,endDate:a}=e;return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t="".concat(n.d,"?").concat(Object(c.n)(e));return Object(s.b)({uri:t})}({startDate:t.utc(!0).toISOString(),endDate:a.utc(!0).toISOString()})}));await Object(c.r)(2e3);const r=await Promise.all(a);let l=!1;const i=r.map(((t,a)=>{const{success:s,data:n}=t;if(s&&n)return{data:n,dateRange:e[a]};l=!0}));t(l?{type:o.r,payload:{open:!0,message:"No data found",severity:"error"}}:{type:o.q,payload:i})}catch(a){t({type:o.r,payload:{open:!0,message:a.err||"Error getting data",severity:"error"}}),console.log(a)}finally{t({type:o.s,payload:!1})}},b=e=>async t=>{try{t({type:o.p,payload:!0});const{success:a,data:r}=await Object(s.b)({uri:n.c+"?".concat(Object(c.n)(e))});a?t({type:o.n,payload:r}):(t({type:o.o,payload:{open:!0,message:r.message||"Error getting data",severity:"error"}}),t({type:o.p,payload:!1}))}catch(a){t({type:o.o,payload:{open:!0,message:a.error||"Error getting results",severity:"error"}}),t({type:o.p,payload:!1})}finally{t({type:o.p,payload:!1})}},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.o;l.a.dispatch({type:e,payload:{open:!1,message:null,severity:"error"}})}}}]);
//# sourceMappingURL=36.0ff036e3.chunk.js.map