(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[5],{442:function(e,t,n){"use strict";var r=n(187),a=n(424),c=n(1073),o=n(1074),i=n(258),s=n(453),u=n.n(s),l=n(1072),d=n(1071),p=n(1061),f=n(97),b=n(43),v=n(14),j=n(259),h=n(27),O=n(1070),g=n(4),x=n(466),m=n.n(x),y=n(3),w=n(1069),k=n(119),C=n.n(k),D=n(448),R=n.n(D),S=n(0),_=n.n(S),P=n(34),A=n(1046),F=n(1),I=function(e){var t=e.data,n=void 0===t?[]:t,r=e.onPageChange,a=e.page,c=void 0===a?0:a,o=e.count,s=void 0===o?0:o,u=e.limit,l=void 0===u?1:u,d=Object(S.useState)(0),p=Object(v.a)(d,2),f=p[0],j=p[1];Object(S.useEffect)((function(){Array.isArray(n)&&j(n.length)}),[n]);return f<10&&s<10?null:Object(F.jsxs)(i.a,{direction:"row",sx:{display:"flex",justifyContent:"space-between"},alignItems:"center",children:[s>10&&Object(F.jsxs)(b.a,{sx:{color:"#525F7F"},fontSize:13,children:["Showing ",n.length," of ",s," entries"]}),n.length!==s&&Object(F.jsx)(A.a,{count:Math.ceil(s/l),color:"primary",variant:"contained",page:c+1,size:"large",onChange:function(e,t){r&&r(e,t)}})]})},T=n(355);function N(){return Object(F.jsx)(r.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center","& > * + *":{marginLeft:2}},children:Object(F.jsx)(T.a,{})})}var z=n(447),M=n(7),H=n(30),J=["row","columns","config","handleRowClick","rowIndex","handleDelete","hasDeletePermission"],E=["columns","data","config","handleRowClick","handleDelete"],L=Object(M.a)(w.a)((function(e){var t=e.theme;return Object(y.a)({},t.breakpoints.down("xs"),{fontSize:12,padding:"0 8px"})})),U=Object(M.a)(m.a)((function(e){var t=e.theme;return Object(y.a)({},t.breakpoints.down("xs"),{fontSize:14})}));function q(e){var t=e.columns,n=void 0===t?[]:t,r=e.config,a=void 0===r?{}:r,c=a.headerCellSx,o=void 0===c?{}:c,i=a.hasDelete,s=Object(S.useMemo)((function(){return n.map((function(e,t){var n=e||{},r=n.label,a=void 0===r?"":r,c=n.id,i=void 0===c?"":c,s=n.visible,u=void 0===s||s;return(C.a.isFunction(u)?u({column:e}):u)?Object(F.jsx)(L,{padding:"normal",sx:Object(g.a)({color:"#000",bgcolor:"#fafafa",fontWeight:800},o),children:a},i||t):null}))}),[n,o]);return Object(F.jsxs)(O.a,{children:[s,i&&Object(F.jsx)(L,{padding:"none",sx:Object(g.a)({},o)})]})}var K=function(e){var t=e.columns,n=e.data,r=void 0===n?[]:n,a=e.config,c=void 0===a?{}:a,o=e.handleRowClick,i=e.handleDelete,s=Object(h.a)(e,E);return(r||[]).map((function(e,n){var r=c.dataKey,a=void 0===r?"":r;return a&&(e=e[a]),function(e){var t=e.row,n=void 0===t?[]:t,r=e.columns,a=void 0===r?{}:r,c=e.config,o=void 0===c?{}:c,i=e.handleRowClick,s=e.rowIndex,u=e.handleDelete,l=e.hasDeletePermission,d=Object(h.a)(e,J),p=o.hasDelete,f=void 0!==p&&p,b=o.rowCellPadding,v=void 0===b?"none":b,x=o.onRowClick,m=void 0===x?void 0:x,y=o.rowStyleCb,w=d.role,k={};y&&(k=y({row:n})||{});var D=Object(F.jsx)(L,{sx:{},padding:"none",component:"th",scope:"row",children:Object(F.jsx)(j.a,{onClick:u.bind(void 0,n._id,n),disabled:!l,children:Object(F.jsx)(U,{color:"error"})})}),R=a.map((function(e,t){var r,a=e||{},c=a.id,o=void 0===c?"":c,i=a.renderer,u=a.emptyState,l=void 0===u?"":u,d=a.valueFormatter,p=a.visible,f=void 0===p||p;return(C.a.isFunction(f)?f({column:e}):f)?(r=d&&C.a.isFunction(d)?d(n[o]):C.a.isFunction(i)?i({row:n,role:w},s)||l:C.a.isObject(n)?C.a.get(n,o,l):n[o]||l,Object(F.jsx)(L,{padding:v||"normal",component:"th",scope:"row",children:r},o+t)):null}));return Object(F.jsxs)(O.a,{hover:!!m,onClick:function(e){e.preventDefault(),C.a.isFunction(i)&&i(n)},sx:m?Object(g.a)({cursor:"pointer"},k):{},children:[R,f&&D]},s)}(Object(g.a)({row:e,columns:t,config:c,handleRowClick:o,rowIndex:n,handleDelete:i},s))}))},W=function(e){var t=e.config,n=void 0===t?{}:t,s=e.data,h=void 0===s?[]:s,O=e.history,x=e.loading,m=void 0!==x&&x,y=e.onRefetch,w=e.isRefetching;h=h||[];var k=Object(S.useState)({}),C=Object(v.a)(k,2),D=C[0],P=C[1],A=Object(S.useState)({open:!1,config:{}}),T=Object(v.a)(A,2),M=T[0],J=T[1],E=n.columns,L=void 0===E?[]:E,U=n.onRowClick,W=n.hasOnClickUrl,B=void 0===W||W,G=n.onPageChange,Q=n.page,V=n.count,X=n.limit,Y=n.size,Z=void 0===Y?"medium":Y,$=n.emptyMessage,ee=void 0===$?"":$,te=n.onRowClickDataCallback,ne=n.showRefresh,re=void 0!==ne&&ne,ae=n.onDelete,ce=n.deleteMessage,oe=n.deletePermissions,ie=void 0===oe?[]:oe,se=n.containerHeight,ue=void 0===se?"":se,le=Object(H.d)().user.role,de=void 0===le?"":le,pe=ie.indexOf(de)>-1||!1,fe=_.a.useRef([]),be=Array.isArray(h)&&h.length,ve=function(e){if(B&&U){var t=U(e);te&&(e=te(e)),O.push(t,e)}else U&&U(e)},je=function(e,t,n){n.stopPropagation();var r={title:function(){return Object(F.jsxs)(f.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(F.jsx)(R.a,{color:"error"}),Object(F.jsx)(b.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]})},okText:"Delete",onOk:function(){return ae(e,he)},content:function(){return Object(F.jsx)(p.a,{sx:{color:"#000"},children:ce||"Are you sure you want to delete the record?"})}};J(Object(g.a)(Object(g.a)({},M),{},{open:!0,config:r}))};function he(){J(Object(g.a)(Object(g.a)({},M),{},{open:!1}))}var Oe=Object(S.useMemo)((function(){return be?Object(F.jsxs)(S.Fragment,{children:[Object(F.jsx)(d.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(F.jsx)(q,{columns:L,config:n})}),Object(F.jsx)(l.a,{children:Object(F.jsx)(K,{role:de,columns:L,data:h,config:n,handleRowClick:ve,handleDelete:je,hasDeletePermission:pe},Date.now())})]}):Object(F.jsx)("tbody",{style:{height:300},children:Object(F.jsx)("tr",{children:Object(F.jsx)("td",{style:{textAlign:"center"},children:Object(F.jsx)("h4",{children:ee||"No records found"})})})})}),[h,n]);return Object(S.useEffect)((function(){var e;if(null!==fe&&void 0!==fe&&null!==(e=fe.current)&&void 0!==e&&e.table){var t=fe.current.table.offsetHeight;P(Object(g.a)(Object(g.a)({},D),{},{height:t>200?t:void 0}))}}),[]),Object(F.jsxs)(r.a,{className:"enhanced-table",sx:{height:be&&!m?ue||"95%":"auto"},children:[re&&Object(F.jsx)(i.a,{alignItems:"flex-end",children:Object(F.jsx)(j.a,{title:"Refresh",onClick:y,children:Object(F.jsx)(u.a,{className:w?"rotateIcon":void 0})})}),Object(F.jsx)(c.a,{component:a.a,className:"",sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2,height:be&&!m?"calc(100% - 64px)":"auto"},children:m?function(){var e=window.innerHeight-180,t=(D.height?D.height>e?e:D.height:e)||e;return Object(F.jsx)(f.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(F.jsx)(f.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(F.jsx)(N,{})})})}():Object(F.jsx)(o.a,{ref:function(e){return fe.current.table=e},"aria-label":"caption table",size:Z,stickyHeader:!0,children:Oe})}),!m&&h.length>0&&Object(F.jsx)(I,{data:h,onPageChange:G,page:Q,count:V,limit:X}),Object(F.jsx)(z.a,{className:"enhancedTable_dialog",open:M.open,config:M.config,onClose:he})]})};t.a=Object(P.withRouter)(Object(S.memo)(W))},444:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"g",(function(){return v})),n.d(t,"a",(function(){return j})),n.d(t,"h",(function(){return h})),n.d(t,"b",(function(){return O}));n(4);var r=n(169),a=n(33),c=n(51),o=n(48),i=n.n(o),s=n(35),u=n(10),l=n(80),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var r=Object(c.a)(Object(a.a)().mark((function r(c){var o,i,d;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(l.b)({uri:"/api/load/me?page=".concat(e+1,"&limit=").concat(t,"&module=").concat(n)});case 3:o=r.sent,i=o.success,d=o.data,i?c({type:u.E,payload:{loads:d,page:e,limit:t}}):Object(s.a)(d.message,"error"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),c(Object(s.b)(r.t0.message,"error"));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var r=Object(c.a)(Object(a.a)().mark((function r(c){var o,l,d,p,f,b;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o="/api/load/invoice_loads?page=".concat(e+1,"&limit=").concat(t,"&search=").concat(n),r.next=4,i.a.get(o);case 4:l=r.sent,d=l.data,p=d.loads,f=d.total,b=d.totalPages,c({type:u.K,payload:{invoices:p,page:e,limit:t,search:n,total:f,totalPages:b}}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),c(Object(s.b)(r.t0.message,"error"));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(){var o=Object(c.a)(Object(a.a)().mark((function c(o){var l,d;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,l="/api/load/me?page=".concat(e+1,"&limit=15&search=").concat(n,"&module=").concat(r),a.next=4,i.a.get(l);case 4:d=a.sent,o({type:u.fb,payload:{data:d.data,page:e,limit:t,search:n}}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),o(Object(s.b)(a.t0.message,"error"));case 11:case"end":return a.stop()}}),c,null,[[0,8]])})));return function(e){return o.apply(this,arguments)}}()},b=function(){return function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,n){var r,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:u.db}),r=n(),c=r.load,c.page,c.rowsPerPage;case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:u.gb,payload:e}},j=function(e,t){return function(){var n=Object(c.a)(Object(a.a)().mark((function n(r){var c,o;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c={headers:{"Content-Type":"application/json"}},n.next=4,i.a.post("/api/load",e,c);case 4:o=n.sent,r({type:u.b,payload:o.data}),Object(s.a)("Load Created"),t&&t(200===o.status,o.data),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),r(Object(s.b)(n.t0.message,"error"));case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;return function(){var i=Object(c.a)(Object(a.a)().mark((function c(i,u){var p,b,v,j,h,O,g,x,m,y,w,k,C,D,R,S,_,P,A,F,I,T,N;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(a.prev=0,p=new FormData,b=0,v=Object.keys(e);b<v.length;b++)j=v[b],["rateConfirmation","proofDelivery"].indexOf(j)<0&&(h=e[j],O=Array.isArray(h),g=null===h,x=O&&!g?JSON.stringify(h):h,p.append(j,x));for(p.append("bucketFiles",JSON.stringify(n)),m=0,y=["rateConfirmation","proofDelivery"];m<y.length;m++)if(k=e[w=y[m]]){C=Object(r.a)(k);try{for(C.s();!(D=C.n()).done;)R=D.value,p.append(w,R)}catch(c){C.e(c)}finally{C.f()}}return a.next=7,Object(l.c)({uri:"/api/load/modify",body:p});case 7:S=a.sent,_=S.success,P=S.data,_&&Object(s.a)("Load Updated"),A=u(),F=A.load.search,I=F.page,T=F.limit,N=F.query,i(N?f(I,T,N):d(0,5,t)),o(_,P),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(0),Object(s.a)(a.t0.message,"error");case 19:case"end":return a.stop()}}),c,null,[[0,16]])})));return function(e,t){return i.apply(this,arguments)}}()},O=function(e,t){return function(){var n=Object(c.a)(Object(a.a)().mark((function n(r){var c,o,i;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(l.a)({uri:"/api/load",body:{data:{load_id:e}}});case 3:c=n.sent,o=c.success,i=c.data,Object(s.a)(i.message,o?"success":"error"),o&&r({type:u.s,payload:e}),t&&t(o,i),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),Object(s.a)(n.t0.message,"error");case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}},467:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return f}));var r=n(33),a=n(51),c=n(48),o=n.n(c),i=n(35),s=n(10),u=function(){return function(){var e=Object(a.a)(Object(r.a)().mark((function e(t){var n,a,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get("/api/drivers/me");case 3:n=e.sent,Object.assign(n.data,{timestamp:new Date}),t({type:s.C,payload:n.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t({type:s.t,payload:{msg:null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.statusText,status:null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c?void 0:c.status}});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},l=function(e,t){return function(){var t=Object(a.a)(Object(r.a)().mark((function t(n){var a,c,s;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={headers:{"Content-Type":"application/json"}},t.next=4,o.a.post("/api/drivers",e,a);case 4:c=t.sent,Object(i.a)(c.data.message),n(u()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),s=t.t0.errors&&Array.isArray(t.t0.errors)&&t.t0.errors.length?t.t0.errors[0].msg:t.t0.message,n(Object(i.b)(s,"error"));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},d=function(e,t){return function(){var n=Object(a.a)(Object(r.a)().mark((function n(a,c){var i,u,l;return Object(r.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=c().driver.drivers,n.next=4,o.a.patch("/api/drivers/loads?driver_id=".concat(e),{loads:t});case 4:u=n.sent,-1!==(l=i.indexOf(i.find((function(e){return e._id===u.data._id}))))&&(i[l]=u.data),a({type:s.U,payload:i}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:s.t,payload:{msg:n.t0.response.statusText,status:n.t0.response.status}});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(a.a)(Object(r.a)().mark((function t(n,a){var c,u,l;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=a().driver.drivers,t.next=4,o.a.delete("/api/drivers/",{data:{driver_id:e}});case 4:u=t.sent,-1!==(l=c.indexOf(c.find((function(e){return e._id===u.data._id}))))&&c.splice(l,1),Object(i.a)("Deleted Successfully"),n({type:s.q,payload:c}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:s.t,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},f=function(e,t){return function(){var n=Object(a.a)(Object(r.a)().mark((function n(a,c){var i,u,l;return Object(r.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=c().driver.drivers,n.next=4,o.a.delete("/api/drivers/loads",{data:{load_id:t,driver_id:e}});case 4:u=n.sent,-1!==(l=i.indexOf(i.find((function(e){return e._id===u.data._id}))))&&(i[l]=u.data),a({type:s.r,payload:i}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:s.t,payload:{msg:n.t0.response.statusText,status:n.t0.response.status}});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=5.3b606f55.chunk.js.map