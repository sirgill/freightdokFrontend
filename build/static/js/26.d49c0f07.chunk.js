(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[26],{1124:function(e,t,n){"use strict";n.r(t);var a=n(995),i=n(0),o=n.n(i),c=n(303),r=n.n(c),l=n(13),s=n(72),d=n(276),u=n(538),j=n(259),h=n.n(j),b=n(44),g=n(197),f=n(644),m=n(537),O=n(27),p=n(89),x=n(267),v=n(260),C=n(459),w=n(2);const y={firstName:"",lastName:"",phone:""};var S=e=>{const{history:t,match:{params:{id:n=""}={}}={},onCloseUrl:a}=e,[c,r]=o.a.useState(y),[l,s]=Object(i.useState)(y),{mutation:d,loading:j}=Object(x.a)("/api/ownerOperator"),{loading:S,data:k}=Object(C.a)("/api/ownerOperator/"+n,{lazyFetchCondition:!!n}),{data:P}=k||{},N=e=>{let{name:t,value:n}=e;r({...c,[t]:n})};Object(i.useEffect)((()=>{P&&r(P)}),[P]);const R=e=>{let{name:t,value:n}=e;n&&s({...l,[t]:""})},F=e=>{let{success:t,data:n}=e;const{message:a}=n||{};t?(Object(p.l)("refreshOwnerOp"),Object(O.a)(a||"Owner operator created"),z()):Object(O.a)(a,"error")},z=()=>{t.push(a)};return Object(w.jsxs)(m.a,{fullWidth:!1,maxWidth:"md",open:!0,onClose:z,"aria-labelledby":"form-dialog-title",PaperProps:{sx:{width:400}},children:[Object(w.jsxs)(u.a,{id:"form-dialog-title",sx:{color:b.b,textAlign:"center",fontWeight:400,letterSpacing:1},children:[n?"Edit":"Add"," Owner Operator"]}),Object(w.jsx)(f.a,{children:Object(w.jsxs)(g.a,{container:!0,component:"form",noValidate:!0,direction:"column",rowSpacing:3,p:1,children:[Object(w.jsx)(g.a,{item:!0,xs:12,children:Object(w.jsx)("div",{children:Object(w.jsx)(v.b,{name:"firstName",label:"First Name",onChange:N,value:c.firstName||"",errors:l,onBlur:R,fullWidth:!0,disabled:S||j,required:!0})})}),Object(w.jsx)(g.a,{item:!0,xs:12,children:Object(w.jsx)(v.b,{name:"lastName",label:"Last Name",onChange:N,value:c.lastName||"",errors:l,onBlur:R,fullWidth:!0,disabled:S||j,required:!0})}),Object(w.jsx)(g.a,{item:!0,xs:12,children:Object(w.jsx)(v.b,{name:"email",label:"Email",onChange:N,value:c.email||"",errors:l,onBlur:R,fullWidth:!0,disabled:S||j,required:!0})}),Object(w.jsx)(g.a,{item:!0,xs:12,children:Object(w.jsx)(v.b,{name:"phone",label:"Phone Number",onChange:N,value:c.phone||"",onBlur:R,errors:l,fullWidth:!0,disabled:S||j,required:!0})}),Object(w.jsx)(g.a,{item:!0,xs:12,children:Object(w.jsx)(v.c,{fullWidth:!0,type:"submit",onClick:e=>{e.preventDefault();const t={...c},n=(e=>{let{firstName:t,lastName:n,phone:a,email:i}=e,o={};return t||(o.firstName="Please provide the First Name"),n||(o.lastName="Please provide the Last Name"),a||(o.phone="Please provide the Phone Number"),i||(o.email="Please provide the Email"),Object(p.g)(i)||(o.email="Invalid Email"),o})(t);h.a.isEmpty(n)?d(t,null,F):s({...n})},isLoading:j||S,loadingText:j?"Updating...":S?"Please wait...":null,children:n?"Update":"Add"})})]})})]})},k=n(292),P=n(65),N=n(371);t.default=()=>{const{path:e}=Object(l.useRouteMatch)(),{edit:t,delete:n,add:o}=P.a.getUserPermissionsByDashboardId("ownerOperator"),{data:c,loading:u,page:j,isPaginationLoading:h,limit:b,onLimitChange:g,onPageChange:f,refetch:m,isRefetching:O}=Object(N.a)("/api/ownerOperator"),{data:x,totalCount:v}=c||{},C=Object(l.useHistory)(),y=Object(i.useCallback)((()=>{m()}),[m]);Object(i.useEffect)((()=>(Object(p.a)(window,"refreshOwnerOp",y),()=>Object(p.i)(window,"refreshOwnerOp",y))),[y]);const R=e=>{let{success:t}=e;t&&y()},F={rowCellPadding:"normal",showRefresh:!0,emptyMessage:"No Owner Operator Found",count:v,page:j,limit:b,onPageSizeChange:g,onPageChange:f,columns:[{id:"firstName",label:"First Name",emptyState:"--"},{id:"lastName",label:"Last Name",emptyState:"--"},{id:"role",label:"Role",renderer:()=>Object(w.jsx)(i.Fragment,{children:"Owner Operator"})},{id:"email",label:"Email"},{id:"update",renderer:o=>{let{row:c}=o;return Object(w.jsxs)(i.Fragment,{children:[Object(w.jsx)(a.a,{variant:"contained",onClick:t=>{t.stopPropagation(),C.push(e+"/edit/".concat(c._id))},sx:{mr:1},disabled:!t,children:"Update"}),Object(w.jsx)(a.a,{variant:"contained",color:"error",onClick:Object(k.c)({uri:"/api/ownerOperator/"+c._id,message:"Are you sure you want to delete this Owner Operator?",afterSuccessCb:R}),disabled:!n,children:"Delete"})]})}}]},z=Object(w.jsx)(a.a,{variant:"contained",component:s.b,to:e+"/add",disabled:!o,startIcon:Object(w.jsx)(r.a,{}),children:"Add"});return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(d.a,{config:F,data:x,loading:u,isRefetching:O,onRefetch:m,isPaginationLoading:h,actions:z}),Object(w.jsx)(l.Route,{path:e+"/add",render:t=>Object(w.jsx)(S,{...t,onCloseUrl:e})}),Object(w.jsx)(l.Route,{path:e+"/edit/:id",render:t=>Object(w.jsx)(S,{...t,onCloseUrl:e})})]})}},267:function(e,t,n){"use strict";var a=n(0),i=n(48),o=n(89);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const[r,l]=Object(a.useState)(!1);return{mutation:async function(a){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post",s=arguments.length>2?arguments[2]:void 0,d=e;c.queryParams&&(d=d+"?"+Object(o.j)(c.queryParams)),l(!0),r||(r="post");const u=(e=>{let t;switch(e){case"put":t=i.e;break;case"delete":t=i.a;break;case"patch":t=i.c;break;default:t=i.d}return t})(r.toLowerCase());if(u)return u({uri:d,callback:t,body:a,showTriggers:n}).then((e=>(s&&s({...e}),e))).catch((e=>e)).finally((()=>{l(!1)}))},loading:r}}},269:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(0),i=n(995),o=n(537),c=n(999),r=n(644),l=n(538),s=n(234),d=n(2);const u=a.forwardRef((function(e,t){return Object(d.jsx)(s.a,{direction:"up",ref:t,...e})}));function j(e){const{open:t=!1,config:n,onClose:a,preventBackdropClose:s=!1,className:j}=e,{title:h,onOk:b,okText:g="Save",content:f,onCancel:m}=n,O=function(e){s&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropclick")||a()};return Object(d.jsx)("div",{children:Object(d.jsxs)(o.a,{className:j,open:t,TransitionComponent:u,onClose:O,"aria-describedby":"alert-dialog-slide-description",children:["function"===typeof h?h({...n}):Object(d.jsx)(l.a,{sx:{fontWeight:550},children:h}),Object(d.jsx)(r.a,{children:"function"===typeof f?f({config:n}):f}),Object(d.jsxs)(c.a,{children:["function"===typeof m?m({config:n,onClose:a}):Object(d.jsx)(i.a,{variant:"outlined",onClick:O,children:"Cancel"}),"function"===typeof g?g({config:n,onOk:b}):Object(d.jsx)(i.a,{variant:"contained",color:g.equalsIgnoreCase("delete")?"error":"primary",onClick:b,children:g})]})]})})}},274:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(198),i=(n(0),n(199)),o=n(2);function c(e){return Object(o.jsx)(a.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center","& > * + *":{marginLeft:2}},children:Object(o.jsx)(i.a,{...e})})}},276:function(e,t,n){"use strict";var a=n(198),i=n(244),o=n(1146),c=n(1141),r=n(1147),l=n(494),s=n(293),d=n.n(s),u=n(1145),j=n(1144),h=n(996),b=n(197),g=n(87),f=n(245),m=n(1143),O=n(301),p=n.n(O),x=n(1142),v=n(259),C=n.n(v),w=n(284),y=n.n(w),S=n(0),k=n.n(S),P=n(13),N=n(1099),R=n(9),F=n(260),z=n(2);const I=Object(R.a)(N.a)((e=>{let{theme:t}=e;return{"& .MuiPaginationItem-root":{[t.breakpoints.down("md")]:{height:"1.8rem",width:"1rem"}}}})),D=Object(R.a)(l.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{justifyContent:"center"},display:"flex",justifyContent:"space-between",flexWrap:"wrap","& .pageSizeSelect":{width:80}}}));var E=e=>{let{data:t=[],onPageChange:n,page:a=1,count:i=0,limit:o=1,onPageSizeChange:c,isLoading:r}=e;const[s,d]=Object(S.useState)(0);Object(S.useEffect)((()=>{Array.isArray(t)&&d(t.length)}),[t]);return i<=5?null:Object(z.jsxs)(D,{direction:"row",alignItems:"center",children:[Object(z.jsxs)(g.a,{sx:{color:"#525F7F"},fontSize:12,children:["Showing ",s," of ",i," entries"]}),Object(z.jsxs)(l.a,{direction:"row",alignItems:"center",children:[Object(z.jsx)(F.e,{disabled:r,name:"pageSize",label:"",value:o,options:[{id:5,label:5},{id:10,label:10},{id:20,label:20},{id:50,label:50},{id:100,label:100}],className:"pageSizeSelect",onChange:e=>{let{value:t}=e;"function"===typeof c&&c({value:t})}}),Object(z.jsx)(I,{disabled:r,count:Math.ceil(i/o),color:"primary",variant:"contained",page:a,size:"medium",onChange:(e,t)=>{+a!==+t&&"function"===typeof n&&n(e,+t)}})]})]})},L=n(274),A=n(269),W=n(89),M=n(273);const q=Object(R.a)(x.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:12,padding:"0 8px"}}})),T=Object(R.a)(p.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:14}}}));function U(e){let{columns:t=[],config:n={},role:a}=e;const{headerCellSx:i={},hasDelete:o}=n,c=Object(S.useMemo)((()=>t.map(((e,t)=>{const{label:n="",id:o="",visible:c=!0}=e||{};return(C.a.isFunction(c)?c({column:e,role:a}):c)?Object(z.jsx)(q,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...i},children:n},o||t):null}))),[t,i]);return Object(z.jsxs)(m.a,{children:[c,o&&Object(z.jsx)(q,{padding:"none",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...i}})]})}const B=e=>{let{columns:t,data:n=[],config:a={},handleRowClick:i,handleDelete:o,...c}=e;return(n||[]).map(((e,n)=>{const{dataKey:r=""}=a;return r&&(e=e[r]),(e=>{let{row:t=[],columns:n={},config:a={},handleRowClick:i,rowIndex:o,handleDelete:c,hasDeletePermission:r,...l}=e;const{hasDelete:s=!1,rowCellPadding:d="none",onRowClick:u,rowStyleCb:j}=a,{role:h}=l;let b={};j&&(b=j({row:t})||{});const g=Object(z.jsx)(q,{sx:{},padding:"none",component:"th",scope:"row",children:Object(z.jsx)(M.a,{title:"Delete",placement:"top",children:Object(z.jsx)(f.a,{onClick:c.bind(void 0,t._id,t),disabled:!r,children:Object(z.jsx)(T,{color:"error"})})})}),O=n.map(((e,n)=>{const{id:a="",renderer:i,emptyState:c="--",valueFormatter:r,visible:l=!0}=e||{};if(!(C.a.isFunction(l)?l({column:e,role:h}):l))return null;let s;return s=r&&C.a.isFunction(r)?r(t[a]):C.a.isFunction(i)?i({row:t,role:h},o)||c:C.a.get(t,a,c)||c,Object(z.jsx)(q,{padding:d||"normal",component:"th",scope:"row",children:s},a+n)}));return Object(z.jsxs)(m.a,{hover:!!u,onClick:e=>{e.preventDefault(),C.a.isFunction(i)&&i(t)},sx:u?{cursor:"pointer",...b}:{...b},children:[O,s&&g]},o)})({row:e,columns:t,config:a,handleRowClick:i,rowIndex:n,handleDelete:o,...c})}))},H=e=>{let{config:t={},data:n=[],history:s,loading:m=!1,onRefetch:O,isRefetching:p,actions:x,isPaginationLoading:v=!1}=e;n=n||[];const[w,P]=Object(S.useState)({}),[N,R]=Object(S.useState)({open:!1,config:{}}),{columns:F=[],onRowClick:I,hasOnClickUrl:D=!0,onPageChange:M,page:q,count:T,limit:H,onPageSizeChange:_,size:V="medium",emptyMessage:J="",onRowClickDataCallback:K,showRefresh:Q=!1,onDelete:G,deleteMessage:X,deletePermissions:Y=[],containerHeight:Z=""}=t,{role:$=""}=Object(W.f)().user,ee="boolean"===typeof Y?Y:Y.indexOf($)>-1||!1,te=k.a.useRef([]),ne=Array.isArray(n)&&n.length,ae=Object(S.useMemo)((()=>x&&k.a.isValidElement(x)?x:Object(z.jsx)(z.Fragment,{})),[x]),ie=e=>{if(D&&I){const t=I(e);K&&(e=K(e)),s.push(t,e)}else I&&I(e)},oe=(e,t,n)=>{n.stopPropagation();const a={title:()=>Object(z.jsxs)(b.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(z.jsx)(y.a,{color:"error"}),Object(z.jsx)(g.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]}),okText:"Delete",onOk:()=>G(e,ce,{row:t}),content:()=>Object(z.jsx)(h.a,{sx:{color:"#000"},children:C.a.isFunction(X)?X({row:t}):X||"Are you sure you want to delete the record?"})};R({...N,open:!0,config:a})};function ce(){R({...N,open:!1})}const re=Object(S.useMemo)((()=>ne?Object(z.jsxs)(S.Fragment,{children:[Object(z.jsx)(j.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(z.jsx)(U,{columns:F,config:t,role:$})}),Object(z.jsx)(u.a,{children:Object(z.jsx)(B,{role:$,columns:F,data:n,config:t,handleRowClick:ie,handleDelete:oe,hasDeletePermission:ee})})]}):Object(z.jsx)("tbody",{style:{height:300},children:Object(z.jsx)("tr",{children:Object(z.jsx)("td",{style:{textAlign:"center"},children:Object(z.jsx)("h4",{children:J||"No records found"})})})})),[n,t]);return Object(S.useEffect)((()=>{var e;if(null!==te&&void 0!==te&&null!==(e=te.current)&&void 0!==e&&e.table){const e=te.current.table.offsetHeight;P({...w,height:e>200?e:void 0})}}),[]),Object(S.useEffect)((()=>{var e;(v||p)&&null!==(e=te.current)&&void 0!==e&&e.tableContainer&&te.current.tableContainer.scrollTo(0,0)}),[v,p]),Object(z.jsxs)(a.a,{className:"enhanced-table",sx:{height:ne&&!m?Z||"95%":"auto"},children:[Object(z.jsxs)(l.a,{alignItems:"flex-end",justifyContent:"flex-end",direction:"row",py:1,gap:.5,children:[ae,Q&&Object(z.jsx)(f.a,{title:"Refresh",onClick:O,children:Object(z.jsx)(d.a,{className:p?"rotateIcon":void 0})})]}),Object(z.jsxs)(o.a,{component:i.a,className:"",ref:e=>te.current.tableContainer=e,sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2,height:ne&&!m?"calc(100% - 80px)":"auto",position:"relative"},children:[m?(()=>{const e=window.innerHeight-180,t=(w.height?w.height>e?e:w.height:e)||e;return Object(z.jsx)(b.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(z.jsx)(b.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(z.jsx)(L.a,{})})})})():Object(z.jsx)(r.a,{ref:e=>te.current.table=e,"aria-label":"caption table",size:V,stickyHeader:!0,children:re}),Object(z.jsx)(c.a,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,position:"absolute"},open:v||p||!1,children:Object(z.jsx)(L.a,{sx:{color:"inherit"}})})]}),!m&&n.length>0&&Object(z.jsx)(E,{data:n,onPageChange:M,page:q,count:T,limit:H,onPageSizeChange:_,isLoading:p||v}),Object(z.jsx)(A.a,{className:"enhancedTable_dialog",open:N.open,config:N.config,onClose:ce})]})};t.a=Object(P.withRouter)(Object(S.memo)(H))},303:function(e,t,n){"use strict";var a=n(88);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(90)),o=n(2),c=(0,i.default)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.default=c},371:function(e,t,n){"use strict";var a=n(0),i=n(259),o=n.n(i),c=n(48);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const[n,i]=Object(a.useState)([]),[r,l]=Object(a.useState)(!1),[s,d]=Object(a.useState)(1),[u,j]=Object(a.useState)(100),[h,b]=Object(a.useState)(""),[g,f]=Object(a.useState)(!1),[m,O]=Object(a.useState)(!1),[p,x]=Object(a.useState)(!1),v=Object(a.useRef)(!0);Object(a.useEffect)((()=>{C()}),[e,s,u]),Object(a.useEffect)((()=>{l(!0)}),[]),Object(a.useEffect)((()=>{const e=o.a.debounce((()=>{v.current||(O(!0),C())}),t);return e(),e.cancel}),[h]);const C=Object(a.useCallback)((async()=>{Object(c.b)({uri:"".concat(e,"?page=").concat(s,"&search=").concat(h,"&limit=").concat(u)}).then((e=>{const{data:t}=e;i(t)})).catch((e=>{console.error(e.message)})).finally((()=>{l(!1),f(!1),O(!1),x(!1),v.current&&(v.current=!1)}))}),[e,s,u,h,p]);return{data:n,loading:r,page:s,limit:u,onPageChange:(e,t)=>{f(!0),d(t)},handleSearch:e=>{let{value:t}=e;b(t),d(1)},refetch:()=>{d(1),x(!0),C()},onLimitChange:e=>{let{value:t}=e;f(!0),d(1),j(t)},searchQuery:h,isPaginationLoading:g,isSearching:m,isRefetching:p}}},459:function(e,t,n){"use strict";var a=n(0),i=n(48),o=n(89);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{showPagination:c=!0,page:r,limit:l,lazyFetchCondition:s}=t,[d,u]=Object(a.useState)(void 0),[j,h]=Object(a.useState)({page:r||1,limit:l||10}),[b,g]=Object(a.useState)(!1),[f,m]=Object(a.useState)(null),[O,p]=Object(a.useState)(!1),[x,v]=Object(a.useState)(!1);function C(a){const{page:r,limit:l}=a||{};let s=e;c&&(r&&l&&h({page:r,limit:l}),s="".concat(s,"?page=").concat(r||j.page,"&limit=").concat(l||j.limit)),t.queryParams&&(s="".concat(s,"&").concat(Object(o.j)(t.queryParams))),Object(i.b)({uri:s,callback:n,showTriggers:!1}).then((e=>{e.data&&u(e.data)})).finally((()=>{g(!1),p(!1),v(!1)}))}const w=()=>{g(!0),C()};return Object(a.useEffect)((()=>{("function"===typeof s?s():s)&&w()}),[]),{lazyFetch:w,data:d,loading:b,error:f,refetch:function(){p(!0),C({page:r,limit:j.limit})},isRefetching:O,onLimitChange:e=>{let{value:t}=e;v(!0),C({limit:t,page:j.page})},onPageChange:(e,t)=>{v(!0),C({page:t,limit:j.limit})},isPaginationLoading:x,...j}}}}]);
//# sourceMappingURL=26.d49c0f07.chunk.js.map