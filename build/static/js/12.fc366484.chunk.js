(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[12],{1047:function(e,t,a){"use strict";var n=a(16),r=a(29),c=a(13),o=a(1),i=a(86),s=function(e){var t;switch(e){case"put":t=i.e;break;case"delete":t=i.a;break;case"patch":t=i.c;break;default:t=i.d}return t};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=Object(o.useState)(!1),i=Object(c.a)(a,2),u=i[0],l=i[1],b=function(){var a=Object(r.a)(Object(n.a)().mark((function a(r){var c,o,i=arguments;return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=i.length>1&&void 0!==i[1]?i[1]:"post",l(!0),!(o=s(c.toLowerCase()))){a.next=5;break}return a.abrupt("return",o({uri:e,callback:t,body:r}).then((function(e){return e.data})).catch((function(e){return e})).finally((function(){l(!1)})));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return{mutation:b,loading:u}}},1123:function(e,t,a){"use strict";a.r(t);var n=a(160),r=a(13),c=a(1),o=a.n(c),i=a(58),s=a(40),u=a(352),l=a(35),b=a.n(l),d=a(83),O=a(16),j=a(29),p=a(5),m=a(4),h=a(520),f=a(61),v=a.n(f),x=a(54),g=a(525),w=a(28),N=a(37),k=a(524),y=a(27),C=a(51),P=a(1047),S=a(2),F=function(e){var t=e.firstName,a=e.lastName,n=e.phoneNumber,r={};return t||(r.firstName="Please provide the First Name"),a||(r.lastName="Please provide the Last Name"),n||(r.phoneNumber="Please provide the Phone Number"),r},E={firstName:"",lastName:"",phoneNumber:"",email:""},T=function(e){var t=e.history,a=e.match,i=(void 0===a?{}:a).params,s=(void 0===i?{}:i).id,u=void 0===s?"":s,l=Object(c.useState)([]),f=Object(r.a)(l,2),T=f[0],B=f[1],L=o.a.useState(E),R=Object(r.a)(L,2),A=R[0],M=R[1],W=Object(c.useState)(E),_=Object(r.a)(W,2),D=_[0],J=_[1],H=Object(P.a)("/api/ownerOperator"),U=H.mutation,q=H.loading,z=function(e){var t=e.target,a=void 0===t?{}:t,n=a.name,r=a.value;M(Object(m.a)(Object(m.a)({},A),{},Object(p.a)({},n,r)))},G=Object(c.useMemo)((function(){return(T||[]).filter((function(e){return"owneroperator"===e.role.toLowerCase()}))}),[T]);Object(c.useEffect)((function(){u&&b.a.get(Object(d.c)()+"/api/ownerOperator/"+u).then((function(e){var t=e.data,a=(void 0===t?{}:t).data,n=void 0===a?{}:a;n&&M(n)})).catch((function(e){Object(y.a)(e.message)})),v.a.isEmpty(G)&&b.a.get("/api/users?page=".concat(0,"&limit=",0)).then((function(e){B(e.data.users)})).catch((function(e){console.log(e.message),Object(y.a)(e.message,"error")}))}),[u,G]);var I=function(e,t){t&&J(Object(m.a)(Object(m.a)({},D),{},Object(p.a)({},e,"")))},K=function(){var e=Object(j.a)(Object(O.a)().mark((function e(t){var a,n,r,c,o,i;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=Object(m.a)({},A),n=F(a),!v.a.isEmpty(n)){e.next=13;break}return e.next=6,U(a);case 6:r=e.sent,c=r.success,o=r.data,i=(o||{}).message,c?(Object(y.a)(i),Q(),setTimeout((function(){Object(C.i)("refreshOwnerOp")}),500)):Object(y.a)(i,"error"),e.next=14;break;case 13:J(Object(m.a)({},n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){t.push("/dashboard")};return Object(S.jsxs)(k.a,{fullWidth:!1,maxWidth:"md",open:!0,onClose:Q,"aria-labelledby":"form-dialog-title",PaperProps:{sx:{width:400}},children:[Object(S.jsxs)(h.a,{id:"form-dialog-title",sx:{color:x.b,textAlign:"center",fontWeight:400,letterSpacing:1},children:[u?"Edit":"Add"," Owner Operator"]}),Object(S.jsx)(g.a,{children:Object(S.jsx)("div",{className:"",children:Object(S.jsxs)("form",{className:"",children:[Object(S.jsxs)("div",{children:[Object(S.jsx)(w.a,{name:"firstName",label:"First Name",onChange:z,value:A.firstName||"",errorText:D.firstName,onBlur:I}),Object(S.jsx)(w.a,{name:"lastName",label:"Last Name",onChange:z,value:A.lastName||"",errorText:D.lastName,onBlur:I}),Object(S.jsx)(w.a,{name:"phoneNumber",label:"Phone Number",onChange:z,value:A.phoneNumber||"",onBlur:I,errorText:D.phoneNumber}),Object(S.jsx)(w.a,{name:"email",label:"Email",onChange:z,value:A.email||"",onBlur:I,errorText:D.email,type:"email"}),!u&&Object(S.jsx)(w.a,{value:A.user,name:"user",onChange:z,label:"Select Onwer Operator",type:"select",showFirstBlank:!0,options:G.map((function(e){return{id:e._id,label:e.email}}))})]}),Object(S.jsxs)(N.a,{container:!0,spacing:1,style:{marginTop:"20px"},children:[Object(S.jsx)(N.a,{item:!0,xs:3}),Object(S.jsx)(N.a,{item:!0,xs:6,children:Object(S.jsx)(n.a,{className:"",type:"submit",variant:"contained",onClick:K,style:{width:"100%"},disabled:!Object(C.b)(A)||q,children:"Save"})}),Object(S.jsx)(N.a,{item:!0,xs:3})]})]})})})]})};t.default=function(){var e=Object(i.useRouteMatch)().path,t=Object(c.useState)([]),a=Object(r.a)(t,2),o=a[0],l=a[1],O=Object(c.useState)(!1),j=Object(r.a)(O,2),p=j[0],m=j[1],h=Object(i.useHistory)();function f(){m(!0),b.a.get(Object(d.c)()+"/api/ownerOperator").then((function(e){var t=e.data,a=(void 0===t?{}:t).data;l(void 0===a?[]:a),m(!1)})).catch((function(e){console.log(e.message),m(!1)}))}Object(c.useEffect)((function(){return f(),Object(C.a)(window,"refreshOwnerOp",f),function(){return Object(C.g)(window,"refreshOwnerOp",f)}}),[]);var v=function(e,t){t.stopPropagation(),b.a.delete(Object(d.c)()+"/api/ownerOperator/"+e).then((function(e){var t=e.data,a=void 0===t?{}:t;Object(y.a)(a.message),f()})).catch((function(e){return console.log(e.message)}))},x={rowCellPadding:"inherit",emptyMessage:"No Owner Operator Found",columns:[{id:"firstName",label:"First Name"},{id:"lastName",label:"Last Name"},{id:"role",label:"Role",renderer:function(e){e.row;return Object(S.jsx)(c.Fragment,{children:"Owner Operator"})}},{id:"update",renderer:function(t){var a=t.row;return Object(S.jsxs)(c.Fragment,{children:[Object(S.jsx)(n.a,{variant:"contained",onClick:function(t){t.stopPropagation(),h.push(e+"/ownerOp/edit/".concat(a._id))},sx:{mr:1},children:"Update"}),Object(S.jsx)(n.a,{variant:"contained",color:"error",onClick:v.bind(undefined,a._id),children:"Delete"})]})}}]};return Object(S.jsxs)("div",{children:[Object(S.jsx)(u.a,{config:x,data:o,loading:p}),Object(S.jsx)(n.a,{variant:"contained",component:s.b,to:e+"/ownerOp/add",className:"addNewOwnerOp",sx:{position:"absolute",right:10},children:"Add Owner Operator"}),Object(S.jsx)(i.Route,{path:e+"/ownerOp/add",component:T}),Object(S.jsx)(i.Route,{path:e+"/ownerOp/edit/:id",component:T})]})}}}]);
//# sourceMappingURL=12.fc366484.chunk.js.map