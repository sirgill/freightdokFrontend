(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[8],{1094:function(e,t,r){"use strict";r.r(t);var o=r(350),n=r(11),a=r(1),i=r(172),d=r.n(i),c=r(35),u=r(106),l=r(46),s=r(357),p=r(1074),b=r(488),f=r(2);t.default=Object(c.b)((function(e){return{load:e.load,driver:e.driver}}),{getLoads:u.g,searchLoads:u.k})((function(e){var t=e.getLoads,r=e.searchLoads,i=e.load,v=i.loads,j=i.loads_pagination,O=i.page,m=i.rowsPerPage,g=i.search,h=e.resetSearchField,k=e.searchText,D=Object(c.d)(),w=Object(l.e)(),C=Object(a.useState)(!0),x=Object(n.a)(C,2),y=x[0],S=x[1],P=Object(a.useState)({open:!1,data:{}}),L=Object(n.a)(P,2),T=L[0],M=L[1],A=j.total,E=(j.currPage,Object(a.useState)([])),N=Object(n.a)(E,2),I=N[0],J=N[1],R=Object(c.e)((function(e){return e})),_=R.auth,q=void 0===_?{}:_,F=q.user,U=void 0===F?{}:F,z=(q.roles,R.driver),B=(void 0===z?{}:z).drivers,G=void 0===B?[]:B,H=Object(c.e)((function(e){return e.load.search})),K=H.query,Q=H.loads,V=H.page,W=H.limit,X=H.total;Object(a.useEffect)((function(){return setTimeout((function(){S(!1)}),1e3),h&&h(),k?r(+O,+W,g,"loads"):t(O),function(){h&&h()}}),[]),Object(a.useEffect)((function(){if(U&&"load planner"===U.role){var e=v.filter((function(e){if(!e.assignedTo)return e}));J(e)}else J(K?Q:v);var r=setInterval((function(){t(O)}),3e3);return function(){clearInterval(r)}}),[v,Q,O]);var Y=function(e,o){o-=1,K?r(o,W,K):t(o,m)},Z=function(e,r){D(Object(u.c)(e,(function(e,o){e&&(setTimeout((function(){return t(O)}),500),r())})))},$=Object(a.useMemo)((function(){return{onRowClick:function(e){return M({open:!0,data:e})},rowCellPadding:"normal",count:K?X:A,page:O,limit:K?V:m,onPageChange:Y,hasDelete:!0,onDelete:Z,deletePermissions:["admin","ownerOperator","superAdmin"],columns:[{id:"loadNumber",label:"Load Number"},{id:"pickup",label:"PickUp City/State",renderer:function(e){var t=e.row,r=(void 0===t?{}:t).pickup,o=void 0===r?[]:r,a=Object(n.a)(o,1)[0],i=a.pickupCity,d=void 0===i?"":i,c=a.pickupState,u=void 0===c?"":c;return"".concat(d,", ").concat(u)}},{id:"pickupDate",label:"Pickup Date",renderer:function(e){var t=e.row,r=(void 0===t?{}:t).pickup,o=void 0===r?[]:r,a=Object(n.a)(o,1)[0].pickupDate,i=void 0===a?"":a;return d()(i).format("MM/DD")}},{id:"dropCity",label:"Drop City/State",renderer:function(e){var t=e.row,r=(void 0===t?{}:t).drop,o=void 0===r?[]:r,a=Object(n.a)(o,1)[0],i=a.dropCity,d=void 0===i?"":i,c=a.dropState,u=void 0===c?"":c;return"".concat(d,", ").concat(u)}},{id:"dropDate",label:"Drop Date",renderer:function(e){var t=e.row,r=(void 0===t?{}:t).drop,o=void 0===r?[]:r,a=Object(n.a)(o,1)[0].dropDate,i=void 0===a?"":a;return d()(i).format("MM/DD")}},{id:"brokerage",label:"Customer",renderer:function(e){var t=e.row,r=(void 0===t?{}:t).brokerage;return void 0===r?"":r}},{id:"rate",label:"Rate",emptyState:"--"},{id:"assignedTo",label:"Assigned To",renderer:function(e){var t=(e.row||{}).user,r=(G.find((function(e){return e.user&&e.user._id===t}))||{}).user,o=(void 0===r?{}:r).name;return void 0===o?"":o}}]}}),[I]);return Object(f.jsxs)("div",{className:w.table,children:[Object(f.jsx)(s.a,{config:$,data:I,loading:y}),(null===U||void 0===U?void 0:U.role)&&Object(f.jsx)(o.a,{sx:{display:"flex",justifyContent:"flex-end"},children:["admin","superAdmin","dispatch"].includes(U.role)&&Object(f.jsx)(b.a,{})}),T.open&&Object(f.jsx)(p.a,{modalEdit:!1,open:T.open,load:T.data,handleClose:function(){M({open:!1,data:{}}),D(Object(u.l)())},deleteLoad:function(e){return D(Object(u.c)(e))}})]})}))}}]);
//# sourceMappingURL=8.7279e4f3.chunk.js.map