{"version":3,"sources":["components/driver-forms/AddDriver.js","components/driverbar/Driverlistbar.js","components/layout/Spinner.js","components/Atoms/table/Pagination.jsx","components/Atoms/table/Table.jsx","actions/load.js","actions/driver.js"],"names":["add","UserSettings","getUserPermissionsByDashboardId","connect","_ref4","load","auth","user","driver","all_drivers","addDriver","getLoads","props","isEdit","data","closeEditForm","loading","isSaving","mutation","useMutation","formTemplate","firstName","lastName","phoneNumber","loads","dispatch","useDispatch","open","setOpen","useState","count","setCount","form","setForm","errors","setErrors","useEffect","handleClickOpen","handleClose","updateForm","_ref3","name","value","prev","_jsxs","_Fragment","children","_jsx","Button","disabled","color","onClick","style","marginBottom","variant","Dialog","maxWidth","onClose","PaperProps","sx","width","DialogTitle","id","blue","textAlign","fontWeight","letterSpacing","IconButton","position","left","top","theme","palette","grey","CloseIcon","DialogContent","className","_Box","component","px","pb","onSubmit","e","preventDefault","valid","_ref","validateForm","_ref2","success","getDrivers","notification","message","noValidate","Grid","container","mb","Input","label","onChange","formControlSx","mt","required","Select","showNone","options","map","_id","email","LoadingButton","type","loadingText","fullWidth","isLoading","edit","canEdit","delete","canDelete","state","patchDriverLoads","deleteDriverLoads","deleteDriver","arguments","length","undefined","drivers","useSelector","shallowEqual","setEdit","handleUpdate","row","stopPropagation","fetchDrivers","tableConfig","rowCellPadding","emptyMessage","hasDelete","deletePermissions","deleteMessage","onDelete","onDialogClose","columns","renderer","Fragment","_Button","mr","bind","Actions","display","justifyContent","AddDriverForm","EnhancedTable","config","actions","EditDriver","onRefresh","CircularIndeterminate","height","alignItems","marginLeft","CircularProgress","StyledPagination","styled","Pagination","breakpoints","down","StyledStack","Stack","flexWrap","TablePagination","onPageChange","page","limit","onPageSizeChange","setLength","Array","isArray","direction","Typography","fontSize","Math","ceil","size","pgNum","Cell","_TableCell","padding","DeleteIcon","_Delete","Headers","role","headerCellSx","headers","useMemo","column","index","visible","_","isFunction","bgcolor","_TableRow","TableData","_ref5","handleRowClick","handleDelete","rest","dataKey","rowIndex","hasDeletePermission","onRowClick","rowStyleCb","rowStyle","deleteCell","scope","_IconButton","cell","i","emptyState","valueFormatter","get","hover","cursor","getTableCell","_ref6","history","onRefetch","isRefetching","isPaginationLoading","tableState","setTableState","dialog","setDialog","hasOnClickUrl","onRowClickDataCallback","showRefresh","containerHeight","getUserDetail","indexOf","ref","React","useRef","isValidElement","url","push","title","_Grid","p","gap","ErrorOutlineIcon","_Typography","okText","onOk","content","_DialogContentText","getTableContent","_TableHead","backgroundColor","borderTop","_TableBody","Date","now","_ref$current","current","table","calculatedHeight","offsetHeight","_Stack","py","_Refresh","_TableContainer","_Paper","boxShadow","getLoader","innerHeight","window","item","Spinner","_Table","el","stickyHeader","_Backdrop","zIndex","drawer","withRouter","memo","module","async","requestGet","uri","concat","GET_LOADS","payload","err","setAlert","getInvoiceLoads","search","INVOICE_LOAD_FETCHED","response","axios","total","totalPages","searchLoads","res","RETURNED_SEARCHED_LOADS","resetLoadsSearch","getState","RESET_SEARCHED_LOADS","rowsPerPage","selectLoad","input","SELECT_LOAD","addLoad","formData","callback","post","ADD_LOAD","status","updateLoad","bucketFiles","FormData","key","Object","keys","dataToSend","JSON","stringify","append","files","file","requestPatch","body","query","deleteLoad","load_id","requestDelete","DELETE_LOAD","assign","timestamp","GET_DRIVERS","_err$response","_err$response2","console","log","DRIVER_ERROR","msg","statusText","error","driver_id","patch","find","o","PATCH_DRIVER","cb","splice","DELETE_DRIVER","DELETE_DRIVER_LOAD"],"mappings":"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","file":"static/js/24.2f5c02f5.chunk.js","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\n// Redux\r\nimport PropTypes from \"prop-types\";\r\nimport {connect, useDispatch} from \"react-redux\";\r\nimport {addDriver} from \"../../actions/driver.js\";\r\nimport {getLoads} from \"../../actions/load\";\r\n//Material\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport DialogContent from \"@mui/material/DialogContent\";\r\nimport DialogTitle from \"@mui/material/DialogTitle\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Button from \"@mui/material/Button\";\r\nimport {blue} from \"../layout/ui/Theme\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport {Box} from \"@mui/material\";\r\nimport useMutation from \"../../hooks/useMutation\";\r\nimport {notification} from \"../../actions/alert\";\r\nimport {getDrivers} from \"../../actions/driver\";\r\nimport {UserSettings} from \"../Atoms/client\";\r\nimport {Input, LoadingButton, Select} from \"../Atoms\";\r\n\r\n// const ADD_DRIVERS_ROLES_PERMITTED = [ROLES.superadmin, ROLES.admin, ROLES.afterhours];\r\n\r\nconst {add} = UserSettings.getUserPermissionsByDashboardId('drivers')\r\n\r\nconst validateForm = ({firstName, phoneNumber, user}) => {\r\n    let valid = true, errors = {}\r\n    if (!firstName) {\r\n        valid = false;\r\n        errors.firstName = 'First Name is required'\r\n    }\r\n    if (!phoneNumber) {\r\n        valid = false;\r\n        errors.phoneNumber = 'Phone Number is required'\r\n    }\r\n    if (!user) {\r\n        valid = false;\r\n        errors.user = 'Please select a Driver'\r\n    }\r\n    return {valid, errors};\r\n}\r\n\r\nconst AddDriverForm = (props) => {\r\n    const {\r\n        all_drivers,\r\n        getLoads,\r\n        isEdit = false,\r\n        data = {},\r\n        closeEditForm,\r\n    } = props;\r\n    const {loading: isSaving, mutation} = useMutation(\"/api/drivers\")\r\n    const formTemplate = {\r\n            firstName: \"\",\r\n            lastName: \"\",\r\n            phoneNumber: \"\",\r\n            loads: [],\r\n            user: \"\",\r\n        },\r\n        dispatch = useDispatch();\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [count, setCount] = useState(1);\r\n    const [form, setForm] = useState(formTemplate),\r\n        [errors, setErrors] = useState({});\r\n\r\n    useEffect(() => {\r\n        if (count === 2) {\r\n            getLoads();\r\n        }\r\n    }, [count]);\r\n\r\n    const handleClickOpen = () => {\r\n        // setForm(formTemplate);\r\n        setCount(1);\r\n        setOpen(true);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isEdit) {\r\n            handleClickOpen()\r\n            setForm(data)\r\n        }\r\n    }, [isEdit])\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            setForm(formTemplate);\r\n        }\r\n    }, [])\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n        // setForm(formTemplate);\r\n        setCount(1);\r\n        if (closeEditForm) closeEditForm()\r\n    };\r\n\r\n    const onSubmit = (e) => {\r\n        e.preventDefault();\r\n        const {valid, errors} = validateForm(form);\r\n        if (!valid) {\r\n            return setErrors({...errors})\r\n        }\r\n        mutation(form, null, ({success, data}) => {\r\n            if (success) {\r\n                dispatch(getDrivers());\r\n                handleClose();\r\n            } else {\r\n                notification(data.message, 'error')\r\n            }\r\n        })\r\n    };\r\n\r\n    const updateForm = ({name, value}) => {\r\n        setForm({\r\n            ...form,\r\n            [name]: value,\r\n        });\r\n        setErrors((prev) => ({...prev, [name]: ''}))\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {(!isEdit &&\r\n                <Button\r\n                    disabled={!add}\r\n                    color=\"primary\"\r\n                    onClick={handleClickOpen}\r\n                    style={{marginBottom: \"20%\"}}\r\n                    variant={'contained'}\r\n                >\r\n                    Add Driver\r\n                </Button>\r\n            )}\r\n\r\n            <Dialog\r\n                maxWidth={\"md\"}\r\n                open={open}\r\n                onClose={handleClose}\r\n                aria-labelledby=\"form-dialog-title\"\r\n                PaperProps={{\r\n                    sx: {\r\n                        width: 400\r\n                    }\r\n                }}\r\n            >\r\n                <DialogTitle id=\"form-dialog-title\" sx={{\r\n                    color: blue,\r\n                    textAlign: 'center',\r\n                    fontWeight: 400,\r\n                    letterSpacing: 1\r\n                }}>\r\n\r\n                    <IconButton\r\n                        aria-label=\"close\"\r\n                        onClick={handleClose}\r\n                        sx={{\r\n                            position: \"absolute\",\r\n                            left: 8,\r\n                            top: 8,\r\n                            color: (theme) => theme.palette.grey[500],\r\n                        }}\r\n                    >\r\n                        <CloseIcon/>\r\n                    </IconButton>\r\n\r\n                    {isEdit ? 'Edit' : 'Add'} Driver\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <div className=\"\">\r\n                        <Box component={'form'} sx={{px: 4, pb: 3}} onSubmit={onSubmit} noValidate>\r\n                            <Grid container sx={{'& .MuiFormControl-fullWidth': {mb: 2}}}>\r\n                                <Input\r\n                                    name={\"firstName\"}\r\n                                    label={\"First Name\"}\r\n                                    onChange={updateForm}\r\n                                    value={form.firstName}\r\n                                    errors={errors}\r\n                                    formControlSx={{mt: .8}}\r\n                                    required\r\n                                />\r\n                                <Input\r\n                                    name={\"lastName\"}\r\n                                    label={\"Last Name\"}\r\n                                    onChange={updateForm}\r\n                                    value={form.lastName}\r\n                                />\r\n                                <Input\r\n                                    name={\"phoneNumber\"}\r\n                                    label={\"Phone Number\"}\r\n                                    onChange={updateForm}\r\n                                    value={form.phoneNumber}\r\n                                    errors={errors}\r\n                                    required\r\n                                />\r\n                                {!isEdit && <Select\r\n                                    value={form.user}\r\n                                    name=\"user\"\r\n                                    onChange={updateForm}\r\n                                    label='Select Driver'\r\n                                    showNone={true}\r\n                                    options={all_drivers.map(driver => ({id: driver._id, label: driver.email}))}\r\n                                    errors={errors}\r\n                                    required\r\n                                />}\r\n                            </Grid>\r\n                            <LoadingButton\r\n                                sx={{mt: 2}}\r\n                                type=\"submit\"\r\n                                variant=\"contained\"\r\n                                loadingText={isEdit ? 'Updating...' : 'Saving...'}\r\n                                fullWidth\r\n                                isLoading={isSaving}\r\n                            >\r\n                                {(isEdit ? 'Update ' : 'Add ') + 'Driver'}\r\n                            </LoadingButton>\r\n                        </Box>\r\n                    </div>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </>\r\n    );\r\n};\r\n\r\nAddDriverForm.propTypes = {\r\n    addDriver: PropTypes.func.isRequired,\r\n    getLoads: PropTypes.func.isRequired,\r\n    load: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = ({\r\n                             load,\r\n                             auth: {user},\r\n                             driver: {all_drivers},\r\n                         }) => ({load, user, all_drivers});\r\n\r\nexport default connect(mapStateToProps, {addDriver, getLoads})(AddDriverForm);\r\n","import React, {Fragment, useEffect, useState} from \"react\";\r\nimport {connect, shallowEqual, useDispatch, useSelector} from \"react-redux\";\r\nimport {Box, Button} from \"@mui/material\";\r\n\r\nimport EnhancedTable from \"../Atoms/table/Table\";\r\nimport {getDrivers} from \"../../actions/driver\";\r\nimport {\r\n    patchDriverLoads,\r\n    deleteDriverLoads,\r\n    deleteDriver,\r\n} from \"../../actions/driver\";\r\nimport EditDriver from \"../driver-forms/AddDriver\";\r\nimport AddDriverForm from \"../driver-forms/AddDriver\";\r\nimport {UserSettings} from \"../Atoms/client\";\r\n\r\nconst {edit: canEdit, delete: canDelete } = UserSettings.getUserPermissionsByDashboardId('drivers')\r\n\r\nconst Driverlistbar = (props = {}) => {\r\n    const {deleteDriver} = props;\r\n    const {drivers = [], loading = false} = useSelector((state) => state.driver, shallowEqual);\r\n    const [edit, setEdit] = useState({open: false, data: {}});\r\n    const dispatch = useDispatch();\r\n\r\n    const handleDeleteDriver = (driver = {}, onDialogClose, {row}) => {\r\n        const _id = typeof row.user !== \"string\" ? row.user._id : row.user;\r\n        deleteDriver(_id, onDialogClose);\r\n    };\r\n\r\n    const handleUpdate = (row = {}, e) => {\r\n        e.stopPropagation();\r\n        setEdit({open: true, data: row})\r\n    };\r\n\r\n    const fetchDrivers = () => {\r\n        dispatch(getDrivers());\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchDrivers()\r\n\r\n    }, [])\r\n\r\n\r\n    const tableConfig = {\r\n        rowCellPadding: 'normal',\r\n        emptyMessage: 'No drivers found',\r\n        // onRowClick: (row) => setEdit({open: true, data: row}),\r\n        hasDelete: true,\r\n        deletePermissions: !!canDelete,\r\n        deleteMessage: ({row}) => 'Are you sure you want to delete ' + row.firstName + \" \" + (row.lastName || '') + '?',\r\n        onDelete: handleDeleteDriver,\r\n        columns: [\r\n            {\r\n                id: 'firstName',\r\n                label: 'First Name'\r\n            },\r\n            {\r\n                id: 'lastName',\r\n                label: 'Last Name'\r\n            },\r\n            {\r\n                id: 'phoneNumber',\r\n                label: 'Phone Number'\r\n            },\r\n            {\r\n                id: 'delete',\r\n                renderer: ({row}) => {\r\n                    return <Fragment>\r\n                        <Button disabled={!canEdit} variant={'contained'} sx={{mr: 2}} onClick={handleUpdate.bind(this, row)}\r\n                                color='primary'>\r\n                            Update\r\n                        </Button>\r\n                    </Fragment>\r\n                }\r\n            }\r\n        ]\r\n    }\r\n\r\n    const closeEditForm = () => {\r\n        setEdit({open: false, data: {}});\r\n    }\r\n\r\n    const Actions = <Box sx={{display :'flex', justifyContent: 'flex-end'}}>\r\n        <AddDriverForm/>\r\n    </Box>\r\n\r\n    return (\r\n        <div>\r\n            <EnhancedTable config={tableConfig} data={drivers} loading={loading} actions={Actions}/>\r\n            {edit.open && <EditDriver closeEditForm={closeEditForm} data={edit.data} isEdit={true} onRefresh={fetchDrivers} />}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    driver: state.driver\r\n})\r\n\r\nexport default connect(mapStateToProps, {\r\n    getDrivers,\r\n    patchDriverLoads,\r\n    deleteDriverLoads,\r\n    deleteDriver,\r\n})(Driverlistbar)\r\n","import React from 'react';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport {Box} from \"@mui/material\";\r\n\r\n\r\nexport default function CircularIndeterminate(props) {\r\n  return (\r\n    <Box sx={{\r\n      height: '100%',\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      '& > * + *': {\r\n        marginLeft: 2,\r\n      },\r\n    }}>\r\n      <CircularProgress {...props}/>\r\n    </Box>\r\n  );\r\n}\r\n","import Pagination from \"@mui/material/Pagination\"\r\nimport Stack from \"@mui/material/Stack\"\r\nimport Typography from \"@mui/material/Typography\"\r\nimport React, {useEffect, useState} from \"react\"\r\nimport styled from \"@mui/material/styles/styled\";\r\nimport {Select} from \"../index\";\r\n\r\nconst StyledPagination = styled(Pagination)(({theme}) => ({\r\n    \"& .MuiPaginationItem-root\": {\r\n        [theme.breakpoints.down(\"md\")]: {\r\n            height: \"1.8rem\",\r\n            width: \"1rem\"\r\n        }\r\n    }\r\n}));\r\n\r\nconst StyledStack = styled(Stack)(({theme}) => ({\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n        justifyContent: 'center'\r\n    },\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    flexWrap: 'wrap',\r\n        '& .pageSizeSelect': {\r\n        width: 80\r\n        }\r\n}))\r\n\r\nconst TablePagination = ({data = [], onPageChange, page = 1, count = 0, limit = 1, onPageSizeChange}) => {\r\n    const [length, setLength] = useState(0);\r\n\r\n    useEffect(() => {\r\n        if (Array.isArray(data)) {\r\n            setLength(data.length);\r\n        }\r\n    }, [data]);\r\n\r\n    const onChange = (e, pgNum) => {\r\n        if (+page !== +pgNum && typeof onPageChange === 'function') {\r\n            onPageChange(e, +pgNum)\r\n        }\r\n    }\r\n\r\n    const handlePageSize = ({value}) => {\r\n        if(typeof onPageSizeChange === 'function'){\r\n            onPageSizeChange({value});\r\n        }\r\n    }\r\n\r\n    if (count <= 5) {\r\n        return null;\r\n    }\r\n    return (\r\n        <StyledStack direction='row' alignItems={'center'}>\r\n            <Typography sx={{color: '#525F7F'}} fontSize={12}>Showing {length} of {count} entries</Typography>\r\n            <Stack direction='row' alignItems='center'>\r\n                <Select\r\n                    name='pageSize'\r\n                    label=''\r\n                    value={limit}\r\n                    options={[\r\n                        {id: 5, label: 5},\r\n                        {id: 10, label: 10},\r\n                        {id: 20, label: 20},\r\n                        {id: 50, label: 50},\r\n                        {id: 100, label: 100},\r\n                    ]}\r\n                    className='pageSizeSelect'\r\n                    onChange={handlePageSize}\r\n                />\r\n                <StyledPagination\r\n                    count={Math.ceil(count / limit)}\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                    page={page}\r\n                    size=\"medium\"\r\n                    onChange={onChange}\r\n                />\r\n            </Stack>\r\n        </StyledStack>\r\n    )\r\n}\r\n\r\nexport default TablePagination\r\n","import {\r\n    Backdrop,\r\n    Box,\r\n    DialogContentText,\r\n    Grid,\r\n    IconButton,\r\n    Paper,\r\n    Stack,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableContainer,\r\n    TableHead,\r\n    TableRow, Typography\r\n} from '@mui/material';\r\nimport _ from 'lodash';\r\nimport ErrorOutlineIcon from '@mui/icons-material/ErrorOutline';\r\nimport React, {Fragment, memo, useEffect, useMemo, useState} from 'react';\r\nimport {withRouter} from 'react-router-dom';\r\nimport TablePagination from './Pagination';\r\nimport Spinner from \"../../layout/Spinner\";\r\nimport {Delete, Refresh} from \"@mui/icons-material\";\r\nimport Dialog from \"../Dialog\";\r\nimport {styled} from \"@mui/material/styles\";\r\nimport {getUserDetail} from \"../../../utils/utils\";\r\n\r\nconst Cell = styled(TableCell)(({theme}) => ({\r\n    [theme.breakpoints.down('xs')]: {\r\n        fontSize: 12,\r\n        padding: '0 8px',\r\n    }\r\n}))\r\nconst DeleteIcon = styled(Delete)(({theme}) => ({\r\n    [theme.breakpoints.down('xs')]: {\r\n        fontSize: 14,\r\n    }\r\n}))\r\n\r\nfunction Headers({columns = [], config = {}, role}) {\r\n    const {headerCellSx = {}, hasDelete} = config;\r\n    const headers = useMemo(() => {\r\n        return columns.map((column, index) => {\r\n            const {label = '', id = '', visible = true} = column || {};\r\n            // eslint-disable-next-line array-callback-return\r\n            const isVisible = _.isFunction(visible) ? visible({column, role}) : visible;\r\n            if (!isVisible) {\r\n                return null;\r\n            }\r\n            return (\r\n                <Cell padding={'normal'} sx={{color: '#000', bgcolor: '#fafafa', fontWeight: 800, ...headerCellSx}}\r\n                      key={id || index}>{label}</Cell>\r\n            )\r\n        })\r\n    }, [columns, headerCellSx])\r\n    return <TableRow>\r\n        {headers}\r\n        {hasDelete && <Cell padding={'none'} sx={{...headerCellSx}}/>}\r\n    </TableRow>;\r\n}\r\n\r\nconst getTableCell = ({\r\n                          row = [],\r\n                          columns = {},\r\n                          config = {},\r\n                          handleRowClick,\r\n                          rowIndex,\r\n                          handleDelete,\r\n                          hasDeletePermission,\r\n                          ...rest\r\n                      }) => {\r\n    const {\r\n        hasDelete = false,\r\n        rowCellPadding = 'none',\r\n        onRowClick = undefined,\r\n        rowStyleCb\r\n    } = config;\r\n    const {role} = rest;\r\n    let rowStyle = {}\r\n    if (rowStyleCb) {\r\n        rowStyle = rowStyleCb({row}) || {};\r\n    }\r\n    const rowClickHandler = (e) => {\r\n            e.preventDefault();\r\n            if (_.isFunction(handleRowClick)) handleRowClick(row)\r\n        },\r\n        deleteCell = <Cell sx={{}} padding={'none'} component=\"th\" scope=\"row\">\r\n            <IconButton onClick={handleDelete.bind(this, row._id, row)} disabled={!hasDeletePermission}>\r\n                <DeleteIcon color={'error'}/>\r\n            </IconButton>\r\n        </Cell>;\r\n\r\n    const cell = columns.map((column, i) => {\r\n        const {id = '', renderer, emptyState = '--', valueFormatter, visible = true} = column || {};\r\n        const isVisible = _.isFunction(visible) ? visible({column, role}) : visible;\r\n        if (!isVisible) {\r\n            return null;\r\n        }\r\n        let cell;\r\n        if (valueFormatter && _.isFunction(valueFormatter)) {\r\n            cell = valueFormatter(row[id]);\r\n        } else if (_.isFunction(renderer)) {\r\n            cell = renderer({row, role}, rowIndex) || emptyState;\r\n        } else {\r\n            cell = _.get(row, id, emptyState) || emptyState;\r\n        }\r\n        return <Cell key={id + i} padding={rowCellPadding || 'normal'} component=\"th\" scope=\"row\">\r\n            {cell}\r\n        </Cell>\r\n    });\r\n\r\n    return <TableRow key={rowIndex} hover={!!onRowClick} onClick={rowClickHandler}\r\n                     sx={!!onRowClick ? {cursor: 'pointer', ...rowStyle} : {...rowStyle}}>\r\n        {cell}\r\n        {hasDelete && deleteCell}\r\n    </TableRow>;\r\n}\r\n\r\nconst TableData = ({columns, data = [], config = {}, handleRowClick, handleDelete, ...rest}) => {\r\n\r\n    return (data || []).map((row, index) => {\r\n        const {dataKey = ''} = config;\r\n        if (dataKey) {\r\n            row = row[dataKey];\r\n        }\r\n        return getTableCell({row, columns, config, handleRowClick, rowIndex: index, handleDelete, ...rest})\r\n    })\r\n}\r\n\r\n\r\nconst EnhancedTable = ({config = {}, data = [], history, loading = false, onRefetch, isRefetching, actions, isPaginationLoading=false}) => {\r\n    data = data || [];\r\n    const [tableState, setTableState] = useState({}),\r\n        [dialog, setDialog] = useState({open: false, config: {}}),\r\n        {\r\n            columns = [],\r\n            onRowClick,\r\n            hasOnClickUrl = true,\r\n            onPageChange,\r\n            page,\r\n            count,\r\n            limit,\r\n            onPageSizeChange,\r\n            size = 'medium',\r\n            emptyMessage = '',\r\n            onRowClickDataCallback,\r\n            showRefresh = false,\r\n            onDelete,\r\n            deleteMessage,\r\n            deletePermissions = [],\r\n            containerHeight='',\r\n        } = config,\r\n        {role = ''} = getUserDetail().user,\r\n        hasDeletePermission = typeof deletePermissions === 'boolean' ? deletePermissions : deletePermissions.indexOf(role) > -1 || false,\r\n        ref = React.useRef([]);\r\n    const length = Array.isArray(data) && data.length,\r\n        Actions = useMemo(() => {\r\n        if(actions && React.isValidElement(actions)){\r\n            return actions;\r\n        }\r\n        return <></>\r\n    }, [actions]);\r\n\r\n    const handleRowClick = (row) => {\r\n        if (hasOnClickUrl && onRowClick) {\r\n            const url = onRowClick(row);\r\n            if (onRowClickDataCallback) {\r\n                row = onRowClickDataCallback(row)\r\n            }\r\n            history.push(url, row);\r\n        } else if (onRowClick) {\r\n            onRowClick(row)\r\n        }\r\n    }\r\n\r\n    const handleDelete = (id, row, e) => {\r\n        e.stopPropagation();\r\n        const config = {\r\n            title: () => <Grid container alignItems='center' sx={{p: '16px 24px'}} gap={1}>\r\n                <ErrorOutlineIcon color='error'/>\r\n                <Typography sx={{fontSize: '1.25rem', fontWeight: 550}} color='error'>Delete</Typography>\r\n            </Grid>,\r\n            okText: 'Delete',\r\n            onOk: () => onDelete(id, onDialogClose, {row}),\r\n            content: () => <DialogContentText\r\n                sx={{color: '#000'}}>{_.isFunction(deleteMessage) ? deleteMessage({row}) : deleteMessage || 'Are you sure you want to delete the record?'}</DialogContentText>\r\n        }\r\n        setDialog({...dialog, open: true, config});\r\n    }\r\n\r\n    function onDialogClose() {\r\n        setDialog({...dialog, open: false})\r\n    }\r\n\r\n    const getLoader = () => {\r\n        const innerHeight = window.innerHeight - 180,\r\n            height = (tableState.height ? tableState.height > innerHeight ? innerHeight : tableState.height : innerHeight) || innerHeight;\r\n        return <Grid container alignItems={'center'} justifyContent='center' sx={{height}}>\r\n            <Grid item alignItems='center' sx={{position: 'relative'}}>\r\n                <Spinner/>\r\n            </Grid>\r\n        </Grid>\r\n    }\r\n    const getTableContent = useMemo(() => {\r\n        if (!length) {\r\n            return (<tbody style={{height: 300}}>\r\n            <tr>\r\n                <td style={{textAlign: 'center'}}><h4>{emptyMessage || 'No records found'}</h4></td>\r\n            </tr>\r\n            </tbody>)\r\n        }\r\n        return <Fragment>\r\n            <TableHead className={''} sx={{backgroundColor: '#fafafa', borderTop: '1px solid rgba(224, 224, 224, 1)'}}>\r\n                <Headers columns={columns} config={config} role={role} />\r\n            </TableHead>\r\n            <TableBody>\r\n                <TableData\r\n                    role={role}\r\n                    key={Date.now()}\r\n                    columns={columns}\r\n                    data={data}\r\n                    config={config}\r\n                    handleRowClick={handleRowClick}\r\n                    handleDelete={handleDelete}\r\n                    hasDeletePermission={hasDeletePermission}\r\n                />\r\n            </TableBody>\r\n        </Fragment>\r\n    }, [data, config])\r\n\r\n    useEffect(() => {\r\n        if (ref?.current?.table) {\r\n            const calculatedHeight = ref.current.table.offsetHeight;\r\n            setTableState({...tableState, height: calculatedHeight > 200 ? calculatedHeight : undefined})\r\n        }\r\n    }, [])\r\n\r\n    return <Box className='enhanced-table' sx={{height: length && !loading ? (containerHeight || '95%') : 'auto'}}>\r\n        <Stack alignItems='flex-end' justifyContent='flex-end' direction='row' py={1} gap={.5}>\r\n            {Actions}\r\n            {showRefresh && <IconButton title='Refresh' onClick={onRefetch}>\r\n                <Refresh className={(isRefetching) ? 'rotateIcon' : undefined}/>\r\n            </IconButton>}\r\n        </Stack>\r\n        <TableContainer\r\n            component={Paper}\r\n            className={''}\r\n            sx={{boxShadow: '0px 0px 32px #8898AA26', mb: 2, height: length && !loading ? 'calc(100% - 80px)' : 'auto', position: 'relative'}}\r\n        >\r\n            {loading\r\n                ? getLoader()\r\n                : <Table ref={el => ref.current['table'] = el} aria-label=\"caption table\" size={size} stickyHeader>\r\n                    {getTableContent}\r\n                </Table>}\r\n            <Backdrop\r\n                sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1, position: 'absolute' }}\r\n                open={isPaginationLoading || isRefetching || false}\r\n            >\r\n                <Spinner sx={{color: 'inherit'}} />\r\n            </Backdrop>\r\n        </TableContainer>\r\n        {!loading && data.length > 0 &&\r\n            <TablePagination data={data} onPageChange={onPageChange} page={page} count={count} limit={limit} onPageSizeChange={onPageSizeChange}/>}\r\n        <Dialog className='enhancedTable_dialog' open={dialog.open} config={dialog.config} onClose={onDialogClose}/>\r\n    </Box>;\r\n};\r\n\r\nexport default withRouter(memo(EnhancedTable));\r\n","import axios from \"axios\";\r\nimport { notification, setAlert } from \"./alert\";\r\nimport {\r\n  GET_LOADS,\r\n  GET_LOAD,\r\n  LOAD_ERROR,\r\n  ADD_LOAD,\r\n  PATCH_PICKUP,\r\n  PICKUP_ERROR,\r\n  PATCH_DROP,\r\n  DROP_ERROR,\r\n  DELETE_LOAD,\r\n  DELETE_LOAD_ERROR,\r\n  UPDATE_LOAD,\r\n  UPDATE_LOAD_ERROR,\r\n  LOAD_DOC_DELETE,\r\n  LOAD_DOC_UPLOAD,\r\n  RETURNED_SEARCHED_LOADS,\r\n  RESET_SEARCHED_LOADS,\r\n  INVOICE_CREATED,\r\n  SELECT_LOAD,\r\n  INVOICE_LOAD_FETCHED,\r\n  MERGE_LOAD_DOCS,\r\n  RESET_INVOICE_GENERATED,\r\n} from \"./types\";\r\nimport { requestDelete, requestGet, requestPatch } from \"../utils/request\";\r\n\r\n// import { proxy } from \"../../package.json\";\r\n\r\nexport const SERVER_ADDRESS = \"https://api.freightdok.io\";\r\n// Get current users loads\r\nexport const getLoads =\r\n  (page = 0, limit = 15, module = \"\") =>\r\n    async (dispatch) => {\r\n      try {\r\n        const { success, data } = await requestGet({\r\n          uri: `/api/load/me?page=${page + 1\r\n            }&limit=${limit}&module=${module}`\r\n        });\r\n        if (success) {\r\n          dispatch({\r\n            type: GET_LOADS,\r\n            payload: { loads: data, page, limit },\r\n          });\r\n        } else {\r\n          notification(data.message, 'error');\r\n        }\r\n      } catch (err) {\r\n        dispatch(setAlert(err.message, \"error\"));\r\n      }\r\n    };\r\n\r\nexport const getInvoiceLoads =\r\n  (page = 0, limit = 5, search = \"\") =>\r\n    async (dispatch) => {\r\n      dispatch({\r\n        type: INVOICE_LOAD_FETCHED,\r\n        payload: { data: [], loading: true },\r\n      });\r\n\r\n      try {\r\n        const url = `/api/load/invoice_loads?page=${page + 1\r\n          }&limit=${limit}&search=${search}`;\r\n        const response = await axios.get(url);\r\n        const { loads, total, totalPages } = response.data;\r\n        dispatch({\r\n          type: INVOICE_LOAD_FETCHED,\r\n          payload: { data: loads, page, limit, search, total, totalPages, loading: false },\r\n        });\r\n      } catch (err) {\r\n        dispatch(setAlert(err.message, \"error\"));\r\n      }\r\n    };\r\n\r\nexport const deleteLoadDocument =\r\n  (load_id, doc_type, doc_name) => async (dispatch) => {\r\n    try {\r\n      const url = `/api/load/remove/doc/${load_id}/${doc_type}/${doc_name}`;\r\n      await axios.delete(url);\r\n      dispatch({\r\n        type: LOAD_DOC_DELETE,\r\n        payload: { load_id, doc_type },\r\n      });\r\n    } catch (err) {\r\n      dispatch(setAlert(err.message, \"error\"));\r\n    }\r\n  };\r\n\r\nexport const uploadLoadDocument =\r\n  (load_id, doc_type, documents) => async (dispatch) => {\r\n    try {\r\n      const url = `/api/load/upload/load/${load_id}/${doc_type}`;\r\n      const form = new FormData();\r\n      for (let doc of documents) form.append(doc_type, doc);\r\n      const response = await axios.patch(url, form);\r\n      const { file_data } = response.data;\r\n      dispatch({\r\n        type: LOAD_DOC_UPLOAD,\r\n        payload: { file_data, load_id, doc_type },\r\n      });\r\n    } catch (err) {\r\n      dispatch(setAlert(err.message, \"error\"));\r\n    }\r\n  };\r\n\r\nexport const generateInvoice = (load_id, data) => async (dispatch) => {\r\n  try {\r\n    await axios.post(\"/api/invoice\", {\r\n      load_id,\r\n      ...data,\r\n    });\r\n    dispatch({\r\n      type: INVOICE_CREATED,\r\n      payload: { load_id },\r\n    });\r\n  } catch (err) {\r\n    dispatch(setAlert(err.message, \"error\"));\r\n  }\r\n};\r\n\r\nexport const searchLoads = (page = 0, limit = 15, search = \"\", module = \"\") => async (dispatch) => {\r\n  try {\r\n    const url = `/api/load/me?page=${page + 1\r\n      }&limit=15&search=${search}&module=${module}`;\r\n    const res = await axios.get(url);\r\n    dispatch({\r\n      type: RETURNED_SEARCHED_LOADS,\r\n      payload: { data: res.data, page, limit, search },\r\n    });\r\n  } catch (err) {\r\n    dispatch(setAlert(err.message, \"error\"));\r\n  }\r\n};\r\n\r\nexport const resetLoadsSearch =\r\n  (listBarType = \"\") =>\r\n    async (dispatch, getState) => {\r\n      dispatch({ type: RESET_SEARCHED_LOADS });\r\n      const {\r\n        load: { page, rowsPerPage },\r\n      } = getState();\r\n      // dispatch(getLoads(+page, +rowsPerPage, listBarType));\r\n    };\r\n\r\nexport const selectLoad = (input = null) => ({\r\n  type: SELECT_LOAD,\r\n  payload: input,\r\n});\r\n\r\n// Get post\r\nexport const getLoad = (id) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(`/loads/${id}`);\r\n\r\n    dispatch({\r\n      type: GET_LOAD,\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {\r\n    dispatch(setAlert(err.message, \"error\"));\r\n  }\r\n};\r\n\r\n//add load\r\nexport const addLoad = (formData, callback) => async (dispatch) => {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n    const res = await axios.post(\"/api/load\", formData, config);\r\n\r\n    dispatch({\r\n      type: ADD_LOAD,\r\n      payload: res.data,\r\n    });\r\n\r\n    notification(\"Load Created\")\r\n    if (callback) {\r\n      callback(res.status === 200, res.data)\r\n    }\r\n  } catch (err) {\r\n    dispatch(setAlert(err.message, \"error\"));\r\n  }\r\n};\r\n\r\nexport const updateLoad = (formData, module = \"\", bucketFiles = {}, callback) => async (dispatch, getState) => {\r\n  try {\r\n    const form = new FormData();\r\n    for (let key of Object.keys(formData)) {\r\n      if ([\"rateConfirmation\", \"proofDelivery\"].indexOf(key) < 0) {\r\n        const data = formData[key];\r\n        const isArray = Array.isArray(data);\r\n        const isNull = data === null;\r\n        let dataToSend = isArray && !isNull ? JSON.stringify(data) : data;\r\n        form.append(key, dataToSend);\r\n      }\r\n    }\r\n    form.append('bucketFiles', JSON.stringify(bucketFiles))\r\n    for (let key of [\"rateConfirmation\", \"proofDelivery\", \"accessorialsFiles\"]) {\r\n      const files = formData[key];\r\n      if (files) for (let file of files) form.append(key, file);\r\n    }\r\n\r\n    const { success, data } = await requestPatch({ uri: \"/api/load/modify\", body: form })\r\n    if (success) {\r\n      notification('Load Updated')\r\n    }\r\n    const {\r\n      load: {\r\n        search: { page, limit, query },\r\n      },\r\n    } = getState();\r\n    if (!query) dispatch(getLoads(0, 5, module));\r\n    else dispatch(searchLoads(page, limit, query));\r\n    callback(success, data)\r\n  } catch (err) {\r\n    notification(err.message, \"error\");\r\n  }\r\n};\r\n\r\nexport const downloadDocuments = (file_name) => {\r\n  axios({\r\n    url: \"/api/load/download/\" + file_name,\r\n    method: \"GET\",\r\n    responseType: \"blob\",\r\n  }).then((res) => {\r\n    const parts = res.config.url.split(\"/\");\r\n    const name = parts[parts.length - 1];\r\n    const url = window.URL.createObjectURL(new Blob([res.data]));\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.setAttribute(\"download\", name);\r\n    document.body.appendChild(link);\r\n    link.click();\r\n  });\r\n};\r\n\r\n//add pickup\r\n\r\n//patch pickup\r\nexport const patchPickup = (load_id, pickup) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.patch(\r\n      `/api/load/pickup?load_id=${load_id}`,\r\n      pickup\r\n    );\r\n    dispatch({\r\n      type: PATCH_PICKUP,\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {\r\n    dispatch(setAlert(err.message, \"error\"));\r\n  }\r\n};\r\n\r\n//patch drop\r\nexport const patchDrop = (load_id, drop) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.patch(`/api/load/drop?load_id=${load_id}`, drop);\r\n    dispatch({\r\n      type: PATCH_DROP,\r\n      payload: res.date,\r\n    });\r\n  } catch (err) {\r\n    dispatch(setAlert(err.message, \"error\"));\r\n  }\r\n};\r\n\r\n// Delete a load\r\nexport const deleteLoad = (load_id, callback) => async (dispatch) => {\r\n  try {\r\n    const { success, data } = await requestDelete({ uri: '/api/load', body: { data: { load_id: load_id } } })\r\n    notification(data.message, success ? 'success' : 'error');\r\n    if (success) {\r\n      dispatch({\r\n        type: DELETE_LOAD,\r\n        payload: load_id,\r\n      });\r\n    }\r\n    callback && callback(success, data)\r\n  } catch (err) {\r\n    notification(err.message, 'error')\r\n  }\r\n};\r\n\r\nexport const mergeDocuments = (data, headers) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.post(`/api/load/invoice/merge_docs`, data, headers);\r\n    console.log(\"Response :\", res);\r\n    dispatch({\r\n      type: MERGE_LOAD_DOCS,\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {\r\n    dispatch(setAlert(err.message, \"error\"));\r\n  }\r\n};\r\n\r\nexport const resetInvoiceGenerated = () => async (dispatch) => {\r\n  try {\r\n    dispatch({\r\n      type: RESET_INVOICE_GENERATED,\r\n      payload: null,\r\n    });\r\n  } catch (err) {\r\n    dispatch(setAlert(err.message, \"error\"));\r\n  }\r\n};\r\n","import axios from \"axios\";\r\nimport {notification, setAlert} from \"./alert\";\r\nimport { GET_DRIVERS, GET_DRIVER, ADD_DRIVER, PATCH_DRIVER, DELETE_DRIVER, DRIVER_ERROR, DELETE_DRIVER_LOAD } from \"./types.js\";\r\n\r\n//get current users drivers\r\nexport const getDrivers = () => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(\"/api/drivers/me\");\r\n    Object.assign(res.data, {timestamp: new Date()})\r\n    dispatch({\r\n      type: GET_DRIVERS,\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {\r\n    console.log(err);\r\n    dispatch({\r\n      type: DRIVER_ERROR,\r\n      payload: { msg: err?.response?.statusText, status: err?.response?.status },\r\n    });\r\n  }\r\n};\r\n\r\n//add load\r\nexport const addDriver = (formData, isEdit) => async (dispatch) => {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n\r\n    const res = await axios.post(\"/api/drivers\", formData, config);\r\n\r\n    notification(res.data.message);\r\n    dispatch(getDrivers());\r\n\r\n  } catch (err) {\r\n    let error = err.errors && Array.isArray(err.errors) && err.errors.length ? err.errors[0].msg : err.message;\r\n    dispatch(setAlert( error, \"error\"));\r\n    // dispatch({\r\n    //   type: DRIVER_ERROR,\r\n    //   payload: { msg: err.response.statusText, status: err.response.status },\r\n    // });\r\n  }\r\n};\r\n\r\n//patch driver\r\nexport const patchDriverLoads = (driver_id, loads) => async (dispatch, getState) => {\r\n  try {\r\n    let drivers = getState().driver.drivers;\r\n    const res = await axios.patch(`/api/drivers/loads?driver_id=${driver_id}`, { loads: loads });\r\n    let index = drivers.indexOf(drivers.find((o) => o._id === res.data._id));\r\n    if (index !== -1) {\r\n      drivers[index] = res.data;\r\n    }\r\n    dispatch({\r\n      type: PATCH_DRIVER,\r\n      payload: drivers,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: DRIVER_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status },\r\n    });\r\n  }\r\n};\r\n\r\n//delete driver\r\nexport const deleteDriver = (driver_id, cb) => async (dispatch, getState) => {\r\n  try {\r\n    let drivers = getState().driver.drivers;\r\n    const res = await axios.delete(`/api/drivers/`, { data: { driver_id: driver_id } });\r\n    let index = drivers.indexOf(drivers.find((o) => o._id === res.data._id));\r\n    if (index !== -1) {\r\n      drivers.splice(index, 1);\r\n    }\r\n    notification('Deleted Successfully')\r\n    cb && cb(res);\r\n    dispatch({\r\n      type: DELETE_DRIVER,\r\n      payload: drivers,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: DRIVER_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status },\r\n    });\r\n  }\r\n};\r\n\r\n//delete driver load\r\nexport const deleteDriverLoads = (driver_id, load_id) => async (dispatch, getState) => {\r\n  try {\r\n    let drivers = getState().driver.drivers;\r\n    const res = await axios.delete(`/api/drivers/loads`, { data: { load_id: load_id, driver_id: driver_id } });\r\n    let index = drivers.indexOf(drivers.find((o) => o._id === res.data._id));\r\n    if (index !== -1) {\r\n      drivers[index] = res.data;\r\n    }\r\n    dispatch({\r\n      type: DELETE_DRIVER_LOAD,\r\n      payload: drivers,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: DRIVER_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status },\r\n    });\r\n  }\r\n};\r\n"],"sourceRoot":""}