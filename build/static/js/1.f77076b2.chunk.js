(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[1],{1106:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var a=n(1110),i=n(1067),r=n(9),c=n(5),o=n(12),l=n(1),s=n(55),d=n.n(s),u=n(8),b=n(51),j=n(372),f=n(367),O=n(373),p=n(369),m=n(231),h=n.n(m),g=n(58),v=n(42),x=n(140),y=n(2),C=["children","onClose","showClose"],w=Object(u.a)(j.a)((function(e){var t=e.theme;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),E=function(e){var t=e.children,n=e.onClose,a=e.showClose,i=Object(o.a)(e,C);return Object(y.jsxs)(f.a,Object(c.a)(Object(c.a)({sx:{m:0,p:2,textAlign:"center"}},i),{},{children:[a?Object(y.jsx)(p.a,{"aria-label":"close",onClick:n,sx:{position:"absolute",left:8,top:8,color:function(e){return e.palette.grey[500]}},children:Object(y.jsx)(h.a,{})}):null,t]}))};function I(e){var t=e.config,n=void 0===t?{}:t,o=e.children,s=n.title,u=void 0===s?"":s,j=n.closeUrl,f=void 0===j?"":j,p=(n.okButtonText,n.showClose),m=void 0===p||p,h=n.onOk,C=(void 0===h&&d.a.noop(),n.paperProps),I=void 0===C?{}:C,P=n.maxWidth,S=void 0===P?"xl":P,k=n.preventBackdropClick,L=void 0!==k&&k,U=l.useState(!1),W=Object(r.a)(U,2),M=W[0],D=W[1],H=Object(b.a)(),N=Object(i.a)(H.breakpoints.down("xs")),R=function(e){L&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropClick")||D(!1)};l.useEffect((function(){return D(!0),Object(v.a)(window,"closeModal",R),function(){return Object(v.h)(window,"closeModal",R)}}),[]);var A=Object(l.useMemo)((function(){return l.forwardRef((function(e,t){var n=Object(g.useHistory)();return Object(y.jsx)(a.a,Object(c.a)(Object(c.a)({ref:t},e),{},{onExited:function(){return f?n.push(f||x.a):n.goBack()}}))}))}),[]);return Object(y.jsxs)(w,{onClose:R,"aria-labelledby":"customized-dialog-title",open:M,maxWidth:S,TransitionComponent:A,PaperProps:I,fullScreen:N,children:[u&&Object(y.jsx)(E,{id:"customized-dialog-title",onClose:R,showClose:m,children:u}),Object(y.jsx)(O.a,{dividers:!0,sx:{borderTop:"none"},children:o})]})}},1108:function(e,t,n){"use strict";var a=n(9),i=n(1),r=n(60);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(i.useState)(null),c=Object(a.a)(n,2),o=c[0],l=c[1],s=Object(i.useState)(!1),d=Object(a.a)(s,2),u=d[0],b=d[1],j=Object(i.useState)(null),f=Object(a.a)(j,2),O=f[0],p=f[1];function m(){Object(r.b)({uri:e,callback:t,showTriggers:!1}).then((function(e){e.data&&l(e.data)})).finally((function(){return b(!1)}))}return Object(i.useEffect)((function(){b(!0),l(null),p(null),m()}),[e]),{data:o,loading:u,error:O,refetch:m}}},1110:function(e,t,n){"use strict";var a=n(3),i=n(7),r=n(1),c=n(216),o=n(51),l=n(94),s=n(46),d=n(2),u=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],b={entering:{transform:"none"},entered:{transform:"none"}},j=r.forwardRef((function(e,t){var n=Object(o.a)(),j={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},f=e.addEndListener,O=e.appear,p=void 0===O||O,m=e.children,h=e.easing,g=e.in,v=e.onEnter,x=e.onEntered,y=e.onEntering,C=e.onExit,w=e.onExited,E=e.onExiting,I=e.style,P=e.timeout,S=void 0===P?j:P,k=e.TransitionComponent,L=void 0===k?c.a:k,U=Object(i.a)(e,u),W=r.useRef(null),M=Object(s.a)(W,m.ref,t),D=function(e){return function(t){if(e){var n=W.current;void 0===t?e(n):e(n,t)}}},H=D(y),N=D((function(e,t){Object(l.b)(e);var a=Object(l.a)({style:I,timeout:S,easing:h},{mode:"enter"});e.style.webkitTransition=n.transitions.create("transform",a),e.style.transition=n.transitions.create("transform",a),v&&v(e,t)})),R=D(x),A=D(E),T=D((function(e){var t=Object(l.a)({style:I,timeout:S,easing:h},{mode:"exit"});e.style.webkitTransition=n.transitions.create("transform",t),e.style.transition=n.transitions.create("transform",t),C&&C(e)})),F=D(w);return Object(d.jsx)(L,Object(a.a)({appear:p,in:g,nodeRef:W,onEnter:N,onEntered:R,onEntering:H,onExit:T,onExited:F,onExiting:A,addEndListener:function(e){f&&f(W.current,e)},timeout:S},U,{children:function(e,t){return r.cloneElement(m,Object(a.a)({style:Object(a.a)({transform:"scale(0)",visibility:"exited"!==e||g?void 0:"hidden"},b[e],I,m.props.style),ref:M},t))}}))}));t.a=j},1120:function(e,t,n){"use strict";var a=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(69)),r=n(2),c=(0,i.default)((0,r.jsx)("path",{d:"M2 12.5C2 9.46 4.46 7 7.5 7H18c2.21 0 4 1.79 4 4s-1.79 4-4 4H9.5C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10H17v2H9.41c-.55 0-.55 1 0 1H18c1.1 0 2-.9 2-2s-.9-2-2-2H7.5C5.57 9 4 10.57 4 12.5S5.57 16 7.5 16H17v2H7.5C4.46 18 2 15.54 2 12.5z"}),"Attachment");t.default=c},1134:function(e,t,n){"use strict";n.r(t);var a=n(308),i=n(245),r=n(547),c=(n(369),n(1)),o=n(375),l=n(33),s=n(20),d=n(29),u=n(60),b=n(16),j=function(){return function(){var e=Object(d.a)(Object(s.a)().mark((function e(t){var n,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:b.m,payload:{loading:!0,data:{}}}),e.prev=1,e.next=4,Object(u.b)({uri:"/api/carrierProfile"});case 4:n=e.sent,a=n.data,t({type:b.m,payload:{loading:!1,data:a.data}}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t({type:b.m,payload:{loading:!1,data:{}}});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},f=n(58),O=n(39),p=n(42),m=n(67),h=n(368),g=n(193),v=n(4),x=n(5),y=n(9),C=n(1106),w=n(550),E=n(27),I=n(2),P=function(e){var t=e.onCloseUrl,n=Object(c.useState)({}),o=Object(y.a)(n,2),b=o[0],O=o[1],C=Object(f.useHistory)(),P=Object(c.useState)(!1),S=Object(y.a)(P,2),k=S[0],L=S[1],U=(Object(p.e)().user||{}).id,W=Object(l.d)();Object(c.useEffect)((function(){var e=function(){var e=Object(d.a)(Object(s.a)().mark((function e(){var t,n,a,i,r,c,o,l,d,b;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)({uri:"/api/fmcsa/"+U});case 2:t=e.sent,n=t.success,a=t.data,n&&(i=a.data,c=(r=void 0===i?{}:i).autoLiabilityInsurance,o=r.generalLiabilityInsurance,l=r.cargoLiabilityInsurance,d=r.email,b=r.phone,O({autoLiabilityInsurance:c?c.url:"",generalLiabilityInsurance:o?o.url:"",cargoLiabilityInsurance:l?l.url:"",email:d,phone:b}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var M=function(e){var t=e.target,n=t.name,a=t.files;O((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(v.a)({},n,a||null))}))},D=function(e){var t=e.target,n=t.name,a=t.value;O(Object(x.a)(Object(x.a)({},b),{},Object(v.a)({},n,a)))};return Object(I.jsx)(a.a,{component:"form",noValidate:!0,sx:{minWidth:400},onSubmit:function(e){L(!0),e.preventDefault();for(var n=new FormData,a=0,i=Object.keys(b);a<i.length;a++){var r=i[a];if(["generalLiabilityInsurance","autoLiabilityInsurance","cargoLiabilityInsurance"].indexOf(r)<0){var c=b[r],o=Array.isArray(c)&&!(null===c)?JSON.stringify(c):c;n.append(r,o)}}for(var l=0,s=["generalLiabilityInsurance","autoLiabilityInsurance","cargoLiabilityInsurance"];l<s.length;l++){var d=s[l],f=b[d];if(f){var O,p=Object(g.a)(f);try{for(p.s();!(O=p.n()).done;){var m=O.value;n.append(d,m)}}catch(h){p.e(h)}finally{p.f()}}}Object(u.d)({uri:"/api/fmcsa",body:n}).then((function(e){Object(E.a)(e.data.message),W(j()),C.push(t)})).catch((function(e){console.log(e),Object(E.a)(e.message,"error")})).finally((function(){return L(!1)}))},children:Object(I.jsxs)(r.a,{spacing:3,children:[Object(I.jsx)(h.a,{type:"email",label:"Email",fullWidth:!0,onChange:D,value:b.email||"",name:"email"}),Object(I.jsx)(h.a,{type:"email",label:"Phone Number",fullWidth:!0,value:b.phone||"",onChange:D,name:"phone"}),Object(I.jsxs)(r.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(I.jsx)(m.a,{children:"General Liability Insurance"}),Object(I.jsxs)("label",{htmlFor:"contained-button-file1",children:[Object(I.jsx)("input",{style:{display:"none"},type:"file",accept:"application/pdf,application/msword,application/vnd.ms-excel",name:"generalLiabilityInsurance",onChange:M,id:"contained-button-file1"}),Object(I.jsx)(i.a,{variant:"contained",component:"span",children:"Attach"})]})]}),Object(I.jsxs)(r.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(I.jsx)(m.a,{children:"Auto Liability Insurance"}),Object(I.jsxs)("label",{htmlFor:"contained-button-file2",children:[Object(I.jsx)("input",{style:{display:"none"},type:"file",accept:"application/pdf,application/msword,application/vnd.ms-excel",name:"autoLiabilityInsurance",onChange:M,id:"contained-button-file2"}),Object(I.jsx)(i.a,{variant:"contained",component:"span",children:"Attach"})]})]}),Object(I.jsxs)(r.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(I.jsx)(m.a,{children:"Cargo Liability Insurance"}),Object(I.jsxs)("label",{htmlFor:"contained-button-file3",children:[Object(I.jsx)("input",{style:{display:"none"},type:"file",accept:"application/pdf,application/msword,application/vnd.ms-excel",name:"cargoLiabilityInsurance",onChange:M,id:"contained-button-file3"}),Object(I.jsx)(i.a,{variant:"contained",component:"span",children:"Attach"})]})]}),Object(I.jsx)(w.a,{loading:k,loadingIndicator:"Updating...",type:"submit",variant:"contained",children:"Update"})]})})},S=function(e){var t=e.onCloseUrl,n={title:"Update Carrier Profile",closeUrl:t,paperProps:{sx:{width:"auto"}}};return Object(I.jsx)(C.a,{config:n,children:Object(I.jsx)(P,{onCloseUrl:t})})},k=n(59),L=(n(379),n(1120),n(72)),U=function(e){var t=e.path,n=e._dbData,a=e.list,r=e.refetch;return{rowCellPadding:"normal",showRefresh:!1,columns:[{id:"integrationName",label:"Integrations"},{id:"code",label:"Key/Code",valueFormatter:function(){return"********"}},{id:"email",label:"Email"},{id:"mc",label:"MC#"},{renderer:function(e,c){var o=e.row;return Object(I.jsx)(i.a,{component:O.b,to:{pathname:t+L.g,state:{row:o,rowIndex:c,_dbData:n,list:a,refetch:r}},variant:"contained",children:"Update"})}}]}},W={rowCellPadding:"normal",showRefresh:!0,columns:[{id:"companyName",label:"Company Name"},{id:"ein",label:"EIN#"},{id:"dotNumber",label:"DOT#"},{id:"operatingStatus",label:"Operating Status",renderer:function(e){var t=e.row,n=(void 0===t?{}:t).operatingStatus;return Object(p.c)("Y"===n)}}]},M={title:"Update Integration Details",preventBackdropClick:!0},D=n(111),H=n(168),N=n(410),R=n(236),A=Object(c.memo)((function(e){var t=e.onChange,n=e.form,a=e.onSubmit,i=e.errors,r=e.loading,c=n.password,o=n.email;return Object(I.jsxs)(D.a,{container:!0,spacing:3,direction:"column",sx:{minWidth:350},component:"form",onSubmit:a,noValidate:!0,children:[Object(I.jsx)(D.a,{item:!0,children:Object(I.jsx)(m.a,{fontWeight:600,color:k.a,children:"Please verify your credentials."})}),Object(I.jsx)(D.a,{item:!0,children:Object(I.jsx)(R.a,{label:"Email",fullWidth:!0,type:"email",value:o,name:"email",onChange:t,errors:i})}),Object(I.jsx)(D.a,{item:!0,children:Object(I.jsx)(R.b,{label:"Password",fullWidth:!0,value:c,name:"password",onChange:t,errors:i})}),Object(I.jsx)(D.a,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:Object(I.jsx)(w.a,{type:"submit",variant:"contained",color:"primary",loading:r,children:r?"Please wait...":"Verify"})})]})})),T=function(e){var t=e.location.state,n=void 0===t?{}:t,a=n.row,i=n.rowIndex,r=n.list,o=Object(c.useState)({email:"",mc:"",code:""}),l=Object(y.a)(o,2),s=l[0],d=l[1],u=Object(c.useState)(!1),b=Object(y.a)(u,2),j=b[0],f=b[1],O=Object(c.useState)({email:"",password:""}),m=Object(y.a)(O,2),h=m[0],g=m[1],E=Object(c.useState)({}),P=Object(y.a)(E,2),S=P[0],k=P[1],L=Object(H.a)(N.a,null,!0),U=L.loading,W=L.mutation,T=Object(H.a)("/api/carrierProfile/secret-manager?update=true",null,!0),F=T.loading,B=T.mutation,_=function(e){var t=e.name,n=e.value;d(Object(x.a)(Object(x.a)({},s),{},Object(v.a)({},t,n))),k(Object(x.a)(Object(x.a)({},S),{},Object(v.a)({},t,"")))};return j?Object(I.jsx)(C.a,{config:M,children:Object(I.jsx)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault();var t=s.email;s.mc,s.code;if(!Object(p.f)(t)||!t)return k(Object(x.a)(Object(x.a)({},S),{},{email:"Invalid Email"}));var n,a=r[i].integrationName,c=(n={},Object(v.a)(n,a,s.code),Object(v.a)(n,"mc",s.mc),Object(v.a)(n,"email",s.email),n);r.forEach((function(e){e.integrationName!==a&&Object.assign(c,Object(v.a)({},e.integrationName,e.code))})),B(c).then((function(e){console.log(e),Object(p.j)("fetchCarrierProfile"),Object(p.j)("closeModal")}))},children:Object(I.jsxs)(D.a,{container:!0,spacing:3,direction:"column",sx:{minWidth:350},children:[Object(I.jsx)(D.a,{item:!0,children:Object(I.jsx)(R.a,{fullWidth:!0,label:"Code",name:"code",onChange:_,value:s.code||""})}),Object(I.jsx)(D.a,{item:!0,children:Object(I.jsx)(R.a,{fullWidth:!0,label:"Email",onChange:_,name:"email",value:s.email||""})}),Object(I.jsx)(D.a,{item:!0,children:Object(I.jsx)(R.a,{fullWidth:!0,label:"MC#",name:"mc",onChange:_,value:s.mc||""})}),Object(I.jsx)(D.a,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:Object(I.jsx)(w.a,{type:"submit",variant:"contained",color:"primary",loading:F,children:F?"Updating...":"Update"})})]})})}):Object(I.jsx)(C.a,{config:M,children:Object(I.jsx)(A,{onChange:function(e){var t=e.name,n=e.value;g(Object(x.a)(Object(x.a)({},h),{},Object(v.a)({},t,n))),k(Object(x.a)(Object(x.a)({},S),{},Object(v.a)({},t,"")))},form:h,onSubmit:function(e){e.preventDefault();var t=h.email,n=h.password;t||k(Object(x.a)(Object(x.a)({},S),{},{email:"Please enter Email"})),n?Object(p.f)(t)?W(h,null).then((function(e){e.token&&(f(!0),d(a))})):k(Object(x.a)(Object(x.a)({},S),{},{email:"Invalid Email"})):k(Object(x.a)(Object(x.a)({},S),{},{email:"Please enter Password"}))},errors:S,loading:U})})},F=n(1108);t.default=Object(f.withRouter)((function(e){var t=e.match,n=(void 0===t?{}:t).path,r=Object(f.useRouteMatch)(n+"/updateCarrierProfile"),s=(Object(p.e)().user||{}).role,d=void 0===s?"admin":s,u=Object(l.e)((function(e){return e.carrierProfile})),b=u.data,m=u.loading,h=Object(l.d)(),g=Object(F.a)("/api/carrierProfile/secret-manager?orgId=62115ab8019d32486c260888"),v=g.data,x=void 0===v?{}:v,y=g.loading,C=g.refetch,w=x||{},E=w.data,P=w._dbData;Object(c.useEffect)((function(){return h(j()),Object(p.a)(window,"fetchCarrierProfile",C),function(){return Object(p.h)(window,"fetchCarrierProfile",C)}}),[]);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(o.a,{data:b,loading:m,config:W,onRefetch:function(){return h(j())}}),r&&Object(I.jsx)(S,{onCloseUrl:n}),"admin"!==d&&Object(I.jsx)(i.a,{variant:"contained",component:O.b,to:n+"/updateCarrierProfile",sx:{position:"absolute",right:10,"&.MuiButton-contained:hover":{color:"#fff"}},children:"Update Profile"}),Object(I.jsx)(a.a,{sx:{mt:2},children:Object(I.jsx)(o.a,{data:E,loading:y,config:U({path:n,data:P,list:E})})}),Object(I.jsx)(f.Route,{component:T,path:n+L.g})]})}))}}]);
//# sourceMappingURL=1.f77076b2.chunk.js.map