(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[21],{1114:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ce}));var a=n(200),c=n(1007),r=n(0),i=n.n(r),s=n(287),o=n(43),l=n(271),d=n(13),j=n(72),b=n(1084),h=n(1078),u=n(1146),p=n(1074),x=n(199),O=n(490),m=n(86),g=n(44),f=n(286),v=n(724),y=n.n(v),w=(n(147),n(547),n(1140)),C=n(1141),S=n(1080),k=n(1116),F=n(1082),N=n(247),I=n(726),D=n.n(I),A=n(725),P=n.n(A),R=n(2);const M=[{label:"Detention",cost:"67"},{label:"Loads",cost:"1000"},{label:"Lumper",cost:"786"}],T=e=>{let{serviceName:t,amount:n,price:a,quantity:c,description:i,index:s,deleteService:o,onChangeService:l}=e;const d=e=>{const t=e.target.name,n=e.target.value;l&&l(s,{name:t,value:n})};return Object(R.jsx)(r.Fragment,{children:Object(R.jsxs)("tr",{className:"invoiceServiceRow",children:[Object(R.jsx)("td",{children:t}),Object(R.jsx)("td",{children:Object(R.jsx)(f.a,{name:"description",value:i,onChange:d,className:"serviceInputField",placeholder:"Enter item description"})}),Object(R.jsx)("td",{children:Object(R.jsx)(f.a,{name:"quantity",onChange:e=>{const t=e.target.name,n=parseInt(e.target.value);l(s,{name:t,value:n})},onBlur:e=>{const t=parseInt(e.target.value),a=e.target.name;t<1?l&&(l(s,{name:a,value:1}),l(s,{name:"price",value:parseInt(n)})):l&&(l(s,{name:a,value:t}),l(s,{name:"price",value:parseInt(n)*t}))},className:"serviceInputField",type:"number",value:c})}),Object(R.jsx)("td",{children:Object(R.jsx)(f.a,{name:"price",onChange:d,value:a,className:"serviceInputField"})}),Object(R.jsx)("td",{children:a?"$".concat(parseFloat(a).toFixed(2)):"$0.00"}),Object(R.jsx)("td",{children:Object(R.jsx)(N.a,{onClick:o.bind(null,s),children:Object(R.jsx)(P.a,{color:"error"})})})]})})},B=e=>{let{handleClose:t,anchorEl:n,onAddNewService:a}=e;const[i,s]=Object(r.useState)(M),o=e=>{a&&a(e),t()};return Object(R.jsx)(w.b,{id:"jugal",anchorEl:n,open:Boolean(n),onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"left"},children:Object(R.jsxs)(O.a,{sx:{p:2,width:500},children:[Object(R.jsx)(O.a,{children:Object(R.jsx)(f.a,{name:"search",autoFocus:!0,placeholder:"Type on item name",onChange:e=>{const t=e.target.value.toLowerCase();if(t){const e=i.filter((e=>e.label.toLowerCase().includes(t)));s(e)}else s(M)}})}),Object(R.jsx)(O.a,{children:Object(R.jsx)(C.a,{children:i.map((e=>Object(R.jsx)(S.a,{onClick:o.bind(null,e),children:Object(R.jsx)(k.a,{disablePadding:!0,secondaryAction:Object(R.jsx)("span",{className:"listButtonPickerCost",children:"$"+e.cost}),children:Object(R.jsx)(F.a,{primary:e.label})})},e.label)))})}),Object(R.jsx)(O.a,{children:Object(R.jsx)(c.a,{startIcon:Object(R.jsx)(D.a,{}),children:"Create a new Item"})})]})})};var L=e=>{let{services:t,onAddNewService:n,onChangeService:a,deleteService:s}=e;const[o,l]=i.a.useState(null),d=Object(r.useMemo)((()=>t.map(((e,t)=>Object(R.jsx)(T,{...e,index:t,onChangeService:a,deleteService:s})))),[t]);return Object(R.jsxs)(i.a.Fragment,{children:[Object(R.jsxs)("table",{className:"invoiceServiceTable",children:[Object(R.jsxs)("tr",{className:"tableHeader",children:[Object(R.jsx)("th",{children:"Services"}),Object(R.jsx)("th",{}),Object(R.jsx)("th",{children:"Quantity"}),Object(R.jsx)("th",{children:"Price"}),Object(R.jsx)("th",{children:"Amount"}),Object(R.jsx)("th",{})]}),d,Object(R.jsx)("tr",{className:"addNewItemRow",children:Object(R.jsx)("td",{className:"addNewItem",onClick:e=>{l(e.currentTarget)},children:Object(R.jsx)(c.a,{sx:{width:135},startIcon:Object(R.jsx)(D.a,{}),"aria-describedby":"jugal",children:"Add new item"})})})]}),Object(R.jsx)(B,{handleClose:()=>{l(null)},anchorEl:o,onAddNewService:n})]})},z=n(88);const E=e=>{let{name:t,sx:n={},variant:a="body1",children:c}=e;return Object(R.jsx)(m.a,{sx:{fontWeight:700,...n},variant:a,children:c||t})},W=e=>{let{transition:t,handleClose:n,open:a,data:r,pdf:s,setPdf:o,getTotal:l,services:d,addService:j,onChangeService:b,deleteService:v}=e;const w=i.a.useRef(null),{brokerage:C="",loadNumber:S="",pickup:k=[],drop:F=[],rate:N="",accessorials:I=[],proofDelivery:D=[],rateConfirmation:A=[],bucketFiles:P}=r||{},[{receiverName:M=""}]=F||[],[{pickupAddress:T,pickupCity:B,pickupState:W,pickupZip:U}]=k;console.log(P);const Y=i.a.useMemo((()=>P&&P.map((e=>Object(R.jsx)("div",{className:"bucketImageContainer",children:Object(R.jsx)("div",{children:Object(R.jsx)("img",{className:"printThisFull",src:e.fileLocation,alt:e.fileName})})})))),[P]),_=i.a.useCallback((()=>w.current),[w.current]),q=i.a.useCallback((()=>Object(R.jsx)(c.a,{className:"printInvoice",variant:"contained",children:"Create Invoice"})),[]);return Object(R.jsx)(h.a,{className:"printThisFull",PaperProps:{sx:{width:"70%"}},open:a,onClose:n,TransitionComponent:t,maxWidth:"lg",children:Object(R.jsx)(u.a,{sx:{p:0},children:Object(R.jsxs)("div",{ref:w,className:"printArea",children:[Object(R.jsxs)(x.a,{container:!0,direction:"column",sx:{display:"inline-flex"},children:[Object(R.jsx)("style",{type:"text/css",media:"print",children:"               @page { size: landscape; }          "}),Object(R.jsx)(x.a,{item:!0,xs:12,sx:{p:3},children:Object(R.jsxs)(x.a,{container:!0,justifyContent:"space-between",children:[Object(R.jsx)(x.a,{item:!0,sx:{flexGrow:1},children:Object(R.jsx)(O.a,{spacing:1,children:Object(R.jsx)(O.a,{children:Object(R.jsx)(m.a,{sx:{textAlign:"left"},variant:"h5",children:"Sunny Freight"})})})}),Object(R.jsx)(x.a,{item:!0,children:Object(R.jsxs)(O.a,{children:[Object(R.jsx)(O.a,{children:Object(R.jsx)(m.a,{variant:"h5",sx:{textAlign:"right"},children:"Invoice"})}),Object(R.jsx)(O.a,{children:Object(R.jsx)(f.a,{label:"Notes",type:"textarea"})})]})})]})}),Object(R.jsx)(p.a,{sx:{borderBottomWidth:"thin",borderColor:g.b}}),Object(R.jsx)(x.a,{xs:12,item:!0,children:Object(R.jsxs)(x.a,{container:!0,justifyContent:"space-between",children:[Object(R.jsx)(x.a,{item:!0,children:Object(R.jsxs)(O.a,{spacing:1,sx:{p:3},children:[Object(R.jsx)(O.a,{children:Object(R.jsx)(m.a,{children:"Bill To:"})}),Object(R.jsx)(O.a,{children:Object(R.jsx)(E,{sx:{fontWeight:700},children:C})})]})}),Object(R.jsx)(x.a,{item:!0,children:Object(R.jsx)(O.a,{justifyContent:"space-between",sx:{height:"100%"},children:Object(R.jsxs)(O.a,{direction:"row",alignItems:"center",spacing:2,p:3,children:[Object(R.jsx)(E,{children:"Load Number: "}),Object(R.jsx)(E,{children:S})]})})})]})}),Object(R.jsx)(p.a,{sx:{borderBottomWidth:"thin",borderColor:g.b}}),Object(R.jsxs)(x.a,{item:!0,sx:{p:2},display:"inherit",direction:"column",children:[Object(R.jsx)(O.a,{sx:{textAlign:"right"},children:Object(R.jsxs)(E,{children:["Total: ",l()||"- -"]})}),Object(R.jsxs)(x.a,{container:!0,alignItems:"end",justifyContent:"space-between",children:[Object(R.jsx)(x.a,{item:!0,xs:12,className:"invoiceServiceWrapperGrid",children:Object(R.jsx)(L,{onChangeService:b,services:d,onAddNewService:j,deleteService:v})}),Object(R.jsx)(x.a,{xs:3,item:!0}),Object(R.jsx)(x.a,{xs:6,item:!0,children:Object(R.jsxs)(O.a,{justifyContent:"center",gap:"10px",className:"stack_Uploaders",children:[Object(R.jsxs)(O.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(R.jsxs)("label",{htmlFor:"rateCon",children:[Object(R.jsx)(m.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Rate Con"}),Object(R.jsx)("input",{type:"file",accept:"pdf",id:"rateCon",style:{display:"none"}})]}),Object(R.jsx)("div",{children:Object(z.b)(!!A.length)})]}),Object(R.jsxs)(O.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(R.jsxs)("label",{htmlFor:"pod",children:[Object(R.jsx)(m.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Proof Of Delivery"}),Object(R.jsx)("input",{type:"file",accept:"pdf",id:"pod",style:{display:"none"}})]}),Object(R.jsx)("div",{children:Object(z.b)(!!D.length)})]}),Object(R.jsxs)(O.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(R.jsxs)("label",{htmlFor:"accessorials",children:[Object(R.jsx)(m.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Accessorials"}),Object(R.jsx)("input",{type:"file",accept:"pdf",id:"accessorials",style:{display:"none"}})]}),Object(R.jsx)("div",{children:Object(z.b)(!!I.length)})]})]})}),Object(R.jsx)(x.a,{xs:3,item:!0,display:"flex",justifyContent:"end",children:Object(R.jsx)(y.a,{content:_,documentTitle:"Invoice",removeAfterPrint:!0,trigger:q})})]})]})]}),Y]})})})};var U=e=>{let{match:{params:{id:t=""}={}}={},history:n}=e;const[a,c]=Object(r.useState)(!1),[s,l]=Object(r.useState)(!1),j=Object(o.e)((e=>e.load.invoices.data))||[],[h,u]=Object(r.useState)([]),p=j.find((e=>e._id===t));Object(r.useEffect)((()=>{c(!0)}),[]);const x=Object(r.useMemo)((()=>i.a.forwardRef((function(e,t){const n=Object(d.useHistory)();return Object(R.jsx)(b.a,{ref:t,...e,onExited:()=>n.goBack()})}))),[]),O=Object(r.useCallback)((()=>"$"+h.reduce(((e,t)=>parseFloat(t.price)+e),0).toFixed(2)),[h]);return Object(R.jsx)("div",{children:Object(R.jsx)(W,{open:a,handleClose:function(e){c(!1)},transition:x,data:p,pdf:s,setPdf:l,services:h,addService:e=>{const{label:t,cost:n}=e;let a={serviceName:t,description:"",quantity:1,price:n,amount:n};u([...h,a])},onChangeService:(e,t)=>{let{name:n,value:a}=t;const c=h[e];c[n]=a;const r=[...h];r[e]=c,u(r)},getTotal:O,deleteService:e=>{const t=h;t.splice(e,1),u([...t])}})})},Y=n(73),_=n.n(Y),q=n(94),H=n(285),J=n(280),$=n(31),G=n(277),K=n(265),V=n(9);const Q={title:"Move Invoice to My Loads",preventBackdropClick:!0},Z=Object(V.a)(x.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{width:"auto"},[t.breakpoints.up("sm")]:{width:300}}}));var X=e=>{const{onCloseUrl:t,getInvoices:n,match:{params:{id:a}={}}={},history:c}=e,[i,s]=Object(r.useState)(),{mutation:o,loading:l}=Object(G.a)("/api/invoice/moveToMyLoads"),d=$.d.map((e=>e.id.equalsIgnoreCase("delivered")?{...e,disabled:!0}:e));return Object(R.jsx)(H.a,{config:Q,children:Object(R.jsxs)(Z,{container:!0,component:"form",spacing:2,onSubmit:e=>{e.preventDefault(),o({id:a,status:i},null,(()=>{n(),c.replace(t)}))},children:[Object(R.jsx)(x.a,{item:!0,children:Object(R.jsx)(m.a,{children:"Select a load status"})}),Object(R.jsx)(x.a,{item:!0,xs:12,children:Object(R.jsx)(J.a,{label:"Status",name:"status",options:d,onChange:e=>{let{value:t}=e;s(t)},value:i,showNone:!0})}),Object(R.jsx)(x.a,{item:!0,xs:12,children:Object(R.jsx)(K.c,{type:"submit",fullWidth:!0,disabled:!i,isLoading:l,loadingText:"Moving...",children:"Move"})})]})})},ee=n(727),te=n.n(ee),ne=n(362),ae=n.n(ne);function ce(e){let{listBarType:t}=e;const n=Object(o.d)(),{path:i}=Object(d.useRouteMatch)(),{role:b}=Object(o.e)((e=>{var t;return null===(t=e.auth)||void 0===t?void 0:t.user}))||{},{data:h=[],page:u,limit:p,loading:x}=Object(o.e)((e=>e.load.invoices)),O=Object(o.e)((e=>e.load.loads));Object(r.useEffect)((()=>(n(Object(s.e)(t)),m(),()=>{n(Object(s.e)(t))})),[]);const m=()=>{n(Object(s.c)())};Object(r.useEffect)((()=>{m()}),[O]);const g={rowCellPadding:"normal",headerCellSx:{pt:1,pb:1},emptyMessage:"No Invoices found",showRefresh:!0,page:u,limit:p,columns:[{id:"loadNumber",label:"Load Number"},{id:"country",label:"Pickup City/State",renderer:e=>{let{row:t}=e;return Object(R.jsxs)(r.Fragment,{children:[t.pickup[0].pickupCity,", ",t.pickup[0].pickupState]})}},{id:"pickupDate",label:"Pickup Date",renderer:e=>{let{row:t}=e,n="";return _()(t.pickUpByDate).isValid()&&(n=_()(t.pickUpByDate).format("M/DD/YYYY")),Object(R.jsx)(r.Fragment,{children:n})}},{id:"deliveryCountry",label:"Delivery City/State",renderer:e=>{let{row:t}=e;return Object(R.jsxs)(r.Fragment,{children:[t.drop[0].dropCity,", ",t.drop[0].dropState]})}},{id:"deliveryDate",label:"Delivery Date",renderer:e=>{let{row:t}=e,n="";return _()(t.deliverBy).isValid()&&(n=_()(t.deliverBy).format("M/DD/YYYY")),Object(R.jsx)(r.Fragment,{children:n})}},{id:"equipment",label:"Equipment",renderer:e=>{let{row:t}=e;const{modesString:n="",standard:a=""}=Object(q.g)(t)||{};return Object(R.jsxs)(r.Fragment,{children:[n," ",a]})}},{id:"weight",label:"Weight",renderer:e=>{let{row:t}=e,{weight:{pounds:n=""}={}}=t||{};return n&&(n+=" lbs"),Object(R.jsx)(r.Fragment,{children:n})}},{id:"company",label:"Company",renderer:e=>{let{row:t}=e;return null===t||void 0===t?void 0:t.brokerage},emptyState:"--"},{id:"rate",label:"Rate",emptyState:"--"},{id:"",label:"Invoice",visible:["driver","admin","superAdmin","ownerOperator"].includes(b),renderer:e=>{let{row:t}=e;return Object(R.jsx)(c.a,{component:j.b,to:i+"/"+t._id,variant:"outlined",color:"primary",startIcon:Object(R.jsx)(ae.a,{}),children:"Create Invoice"})}},{id:"",label:"Move",visible:["driver","admin","superAdmin","ownerOperator"].includes(b),renderer:e=>{let{row:t}=e;return Object(R.jsx)(c.a,{component:j.b,to:i+"/moveToMyLoads/"+t._id,variant:"outlined",color:"primary",startIcon:Object(R.jsx)(te.a,{}),children:"My loads"})}}]};return Object(R.jsx)(a.a,{sx:{mt:3},children:Object(R.jsxs)(r.Fragment,{children:[Object(R.jsx)(l.a,{config:g,data:h,loading:x,onRefetch:m}),Object(R.jsx)(d.Route,{path:i+"/moveToMyLoads/:id",render:e=>Object(R.jsx)(X,{onCloseUrl:i,getInvoices:m,...e})}),Object(R.jsx)(d.Route,{path:i+"/:id",exact:!0,component:U,onCloseUrl:i})]})})}},271:function(e,t,n){"use strict";var a=n(200),c=n(246),r=n(1153),i=n(1154),s=n(490),o=n(293),l=n.n(o),d=n(1152),j=n(1151),b=n(1133),h=n(199),u=n(86),p=n(247),x=n(1150),O=n(300),m=n.n(O),g=n(1149),f=n(264),v=n.n(f),y=n(290),w=n.n(y),C=n(0),S=n.n(C),k=n(13),F=n(1104),N=n(9),I=n(265),D=n(2);const A=Object(N.a)(F.a)((e=>{let{theme:t}=e;return{"& .MuiPaginationItem-root":{[t.breakpoints.down("md")]:{height:"1.8rem",width:"1rem"}}}})),P=Object(N.a)(s.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{justifyContent:"center"},display:"flex",justifyContent:"space-between",flexWrap:"wrap","& .pageSizeSelect":{width:80}}}));var R=e=>{let{data:t=[],onPageChange:n,page:a=0,count:c=0,limit:r=1,onPageSizeChange:i}=e;const[o,l]=Object(C.useState)(0);Object(C.useEffect)((()=>{Array.isArray(t)&&l(t.length)}),[t]);return o<10&&c<10?null:Object(D.jsxs)(P,{direction:"row",alignItems:"center",children:[c>10&&Object(D.jsxs)(u.a,{sx:{color:"#525F7F"},fontSize:12,children:["Showing ",t.length," of ",c," entries"]}),Object(D.jsxs)(s.a,{direction:"row",alignItems:"center",children:[Object(D.jsx)(I.e,{name:"pageSize",label:"",value:r,options:[{id:5,label:5},{id:10,label:10},{id:20,label:20},{id:50,label:50},{id:100,label:100}],className:"pageSizeSelect",onChange:e=>{let{value:t}=e;"function"===typeof i&&i({value:t})}}),Object(D.jsx)(A,{count:Math.ceil(c/r),color:"primary",variant:"contained",page:a+1,size:"medium",onChange:(e,t)=>{n&&n(e,t)}})]})]})},M=n(201);function T(){return Object(D.jsx)(a.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center","& > * + *":{marginLeft:2}},children:Object(D.jsx)(M.a,{})})}var B=n(289),L=n(88);const z=Object(N.a)(g.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:12,padding:"0 8px"}}})),E=Object(N.a)(m.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:14}}}));function W(e){let{columns:t=[],config:n={},role:a}=e;const{headerCellSx:c={},hasDelete:r}=n,i=Object(C.useMemo)((()=>t.map(((e,t)=>{const{label:n="",id:r="",visible:i=!0}=e||{};return(v.a.isFunction(i)?i({column:e,role:a}):i)?Object(D.jsx)(z,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...c},children:n},r||t):null}))),[t,c]);return Object(D.jsxs)(x.a,{children:[i,r&&Object(D.jsx)(z,{padding:"none",sx:{...c}})]})}const U=e=>{let{columns:t,data:n=[],config:a={},handleRowClick:c,handleDelete:r,...i}=e;return(n||[]).map(((e,n)=>{const{dataKey:s=""}=a;return s&&(e=e[s]),(e=>{let{row:t=[],columns:n={},config:a={},handleRowClick:c,rowIndex:r,handleDelete:i,hasDeletePermission:s,...o}=e;const{hasDelete:l=!1,rowCellPadding:d="none",onRowClick:j,rowStyleCb:b}=a,{role:h}=o;let u={};b&&(u=b({row:t})||{});const O=Object(D.jsx)(z,{sx:{},padding:"none",component:"th",scope:"row",children:Object(D.jsx)(p.a,{onClick:i.bind(void 0,t._id,t),disabled:!s,children:Object(D.jsx)(E,{color:"error"})})}),m=n.map(((e,n)=>{const{id:a="",renderer:c,emptyState:i="",valueFormatter:s,visible:o=!0}=e||{};if(!(v.a.isFunction(o)?o({column:e,role:h}):o))return null;let l;return l=s&&v.a.isFunction(s)?s(t[a]):v.a.isFunction(c)?c({row:t,role:h},r)||i:v.a.isObject(t)?v.a.get(t,a,i):t[a]||i,Object(D.jsx)(z,{padding:d||"normal",component:"th",scope:"row",children:l},a+n)}));return Object(D.jsxs)(x.a,{hover:!!j,onClick:e=>{e.preventDefault(),v.a.isFunction(c)&&c(t)},sx:j?{cursor:"pointer",...u}:{...u},children:[m,l&&O]},r)})({row:e,columns:t,config:a,handleRowClick:c,rowIndex:n,handleDelete:r,...i})}))},Y=e=>{let{config:t={},data:n=[],history:o,loading:x=!1,onRefetch:O,isRefetching:m,actions:g}=e;n=n||[];const[f,y]=Object(C.useState)({}),[k,F]=Object(C.useState)({open:!1,config:{}}),{columns:N=[],onRowClick:I,hasOnClickUrl:A=!0,onPageChange:P,page:M,count:z,limit:E,onPageSizeChange:Y,size:_="medium",emptyMessage:q="",onRowClickDataCallback:H,showRefresh:J=!1,onDelete:$,deleteMessage:G,deletePermissions:K=[],containerHeight:V=""}=t,{role:Q=""}=Object(L.d)().user,Z=K.indexOf(Q)>-1||!1,X=S.a.useRef([]),ee=Array.isArray(n)&&n.length,te=Object(C.useMemo)((()=>g&&S.a.isValidElement(g)?g:Object(D.jsx)(D.Fragment,{})),[]),ne=e=>{if(A&&I){const t=I(e);H&&(e=H(e)),o.push(t,e)}else I&&I(e)},ae=(e,t,n)=>{n.stopPropagation();const a={title:()=>Object(D.jsxs)(h.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(D.jsx)(w.a,{color:"error"}),Object(D.jsx)(u.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]}),okText:"Delete",onOk:()=>$(e,ce,{row:t}),content:()=>Object(D.jsx)(b.a,{sx:{color:"#000"},children:v.a.isFunction(G)?G({row:t}):G||"Are you sure you want to delete the record?"})};F({...k,open:!0,config:a})};function ce(){F({...k,open:!1})}const re=Object(C.useMemo)((()=>ee?Object(D.jsxs)(C.Fragment,{children:[Object(D.jsx)(j.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(D.jsx)(W,{columns:N,config:t,role:Q})}),Object(D.jsx)(d.a,{children:Object(D.jsx)(U,{role:Q,columns:N,data:n,config:t,handleRowClick:ne,handleDelete:ae,hasDeletePermission:Z},Date.now())})]}):Object(D.jsx)("tbody",{style:{height:300},children:Object(D.jsx)("tr",{children:Object(D.jsx)("td",{style:{textAlign:"center"},children:Object(D.jsx)("h4",{children:q||"No records found"})})})})),[n,t]);return Object(C.useEffect)((()=>{var e;if(null!==X&&void 0!==X&&null!==(e=X.current)&&void 0!==e&&e.table){const e=X.current.table.offsetHeight;y({...f,height:e>200?e:void 0})}}),[]),Object(D.jsxs)(a.a,{className:"enhanced-table",sx:{height:ee&&!x?V||"95%":"auto"},children:[Object(D.jsxs)(s.a,{alignItems:"flex-end",justifyContent:"flex-end",direction:"row",py:1,gap:.5,children:[te,J&&Object(D.jsx)(p.a,{title:"Refresh",onClick:O,children:Object(D.jsx)(l.a,{className:m?"rotateIcon":void 0})})]}),Object(D.jsx)(r.a,{component:c.a,className:"",sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2,height:ee&&!x?"calc(100% - 80px)":"auto"},children:x?(()=>{const e=window.innerHeight-180,t=(f.height?f.height>e?e:f.height:e)||e;return Object(D.jsx)(h.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(D.jsx)(h.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(D.jsx)(T,{})})})})():Object(D.jsx)(i.a,{ref:e=>X.current.table=e,"aria-label":"caption table",size:_,stickyHeader:!0,children:re})}),!x&&n.length>0&&Object(D.jsx)(R,{data:n,onPageChange:P,page:M,count:z,limit:E,onPageSizeChange:Y}),Object(D.jsx)(B.a,{className:"enhancedTable_dialog",open:k.open,config:k.config,onClose:ce})]})};t.a=Object(k.withRouter)(Object(C.memo)(Y))},286:function(e,t,n){"use strict";var a=n(86),c=(n(0),n(264)),r=n.n(c),i=n(538),s=n(539),o=n(2);const l=e=>{const{label:t="",type:n="text",options:a=[],labelKey:c="label",valueKey:s="id",onChangeSelect:l,showFirstBlank:d=!1,onBlur:j}=e;if(delete(e=r.a.cloneDeep(e)).showFirstBlank,"select"===n.toLowerCase()){Array.isArray(a)&&a.length||console.error("Options are mandatory in array format");const r=(a||[]).map((e=>Object(o.jsx)("option",{value:e[s],children:e[c]},e[s])));return d&&r.unshift(Object(o.jsx)("option",{value:"",children:"Select an option"})),Object(o.jsx)(i.a,{...e,onChange:l,id:t,type:n,children:r})}return Object(o.jsx)(i.a,{id:t,type:n,...e,onBlur:j})};t.a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{label:t="",type:n="text",multiple:c=!1,onChange:r,labelStyle:i={},direction:d="column",formGrpStyle:j={},errorText:b="",onBlur:h}=e;return Object(o.jsxs)(s.a,{style:"row"===d?{display:"flex",alignItems:"center",...j}:{...j},children:[t&&Object(o.jsx)("label",{className:"form-control-label",htmlFor:t,style:{color:"#525F7F",marginRight:8,...i},children:t}),Object(o.jsx)(l,{...e,onChangeSelect:e=>{if("select"===n.toLowerCase()&&c){const{options:t,name:n}=e.target,a=[];for(let e=0,c=t.length;e<c;e++)t[e].selected&&a.push(t[e].value);r&&r(e,a,n)}else r&&r(e)},onBlur:e=>{h&&h(e.target.name,e.target.value)}}),b&&Object(o.jsx)(a.a,{variant:"subtitle2",sx:{color:"red",fontSize:"0.75em"},children:b})]})}},287:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return j})),n.d(t,"g",(function(){return b})),n.d(t,"a",(function(){return h})),n.d(t,"h",(function(){return u})),n.d(t,"b",(function(){return p}));var a=n(22),c=n.n(a),r=n(25),i=n(3),s=n(56);const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return async a=>{try{const{success:c,data:o}=await Object(s.b)({uri:"/api/load/me?page=".concat(e+1,"&limit=").concat(t,"&module=").concat(n)});c?a({type:i.F,payload:{loads:o,page:e,limit:t}}):Object(r.a)(o.message,"error")}catch(c){a(Object(r.b)(c.message,"error"))}}},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return async a=>{a({type:i.L,payload:{data:[],loading:!0}});try{const r="/api/load/invoice_loads?page=".concat(e+1,"&limit=").concat(t,"&search=").concat(n),s=await c.a.get(r),{loads:o,total:l,totalPages:d}=s.data;a({type:i.L,payload:{data:o,page:e,limit:t,search:n,total:l,totalPages:d,loading:!1}})}catch(s){a(Object(r.b)(s.message,"error"))}}},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return async s=>{try{const r="/api/load/me?page=".concat(e+1,"&limit=15&search=").concat(n,"&module=").concat(a),o=await c.a.get(r);s({type:i.gb,payload:{data:o.data,page:e,limit:t,search:n}})}catch(o){s(Object(r.b)(o.message,"error"))}}},j=function(){return async(e,t)=>{e({type:i.eb});const{load:{page:n,rowsPerPage:a}}=t()}},b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:i.hb,payload:e}},h=(e,t)=>async n=>{try{const a={headers:{"Content-Type":"application/json"}},s=await c.a.post("/api/load",e,a);n({type:i.b,payload:s.data}),Object(r.a)("Load Created"),t&&t(200===s.status,s.data)}catch(a){n(Object(r.b)(a.message,"error"))}},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;return async(c,i)=>{try{const l=new FormData;for(let t of Object.keys(e))if(["rateConfirmation","proofDelivery"].indexOf(t)<0){const n=e[t],a=Array.isArray(n);let c=a&&!(null===n)?JSON.stringify(n):n;l.append(t,c)}l.append("bucketFiles",JSON.stringify(n));for(let t of["rateConfirmation","proofDelivery","accessorialsFiles"]){const n=e[t];if(n)for(let e of n)l.append(t,e)}const{success:j,data:b}=await Object(s.c)({uri:"/api/load/modify",body:l});j&&Object(r.a)("Load Updated");const{load:{search:{page:h,limit:u,query:p}}}=i();c(p?d(h,u,p):o(0,5,t)),a(j,b)}catch(l){Object(r.a)(l.message,"error")}}},p=(e,t)=>async n=>{try{const{success:a,data:c}=await Object(s.a)({uri:"/api/load",body:{data:{load_id:e}}});Object(r.a)(c.message,a?"success":"error"),a&&n({type:i.t,payload:e}),t&&t(a,c)}catch(a){Object(r.a)(a.message,"error")}}},547:function(e,t,n){}}]);
//# sourceMappingURL=21.c42d38a1.chunk.js.map