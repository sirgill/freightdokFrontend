{"version":3,"sources":["components/common/AuthContainer.js","views/auth/ForgotPassword.js","hooks/useMutation.js","views/auth/utils.js"],"names":["Container","styled","_Grid","_ref","_objectDestructuringEmpty","backgroundColor","boxShadow","AuthContainer","_ref2","children","_ref2$alertConfig","alertConfig","rest","_objectWithoutProperties","_excluded","_jsxs","_objectSpread","_jsx","item","xs","Alert","config","ChangePassword","form","onChange","loading","errors","_Fragment","Input","type","label","value","otp","name","Password","pass","confirmPass","sx","m","LoadingButton","isLoading","loadingText","_Typography","component","Link","to","LOGIN_LINK","display","ForgotPassword","comp","history","_useState","useState","email","_useState2","_slicedToArray","setForm","_useState3","_useState4","setErrors","_useState5","_useState6","isOtpSent","setIsOtpSent","_useState7","open","message","severity","_useState8","alert","setAlert","_useMutation","useMutation","mutation","_useMutation2","changePasswordMutation","isChangingPassword","_ref3","_defineProperty","className","style","verticalAlignStyle","container","direction","gap","px","py","onSubmit","e","preventDefault","_validatePasswordsPre","validatePasswordsPreLogin","isValid","err","newPass","then","_ref5","success","data","notification","undefined","push","catch","isEmailValid","_ref4","mb","CompanyText","pointer","getRequestCb","fn","requestPut","requestDelete","requestPatch","requestPost","url","callback","arguments","length","showTriggers","setLoading","_asyncToGenerator","_regeneratorRuntime","mark","_callee","body","afterSubmit","asyncApiCall","_args","wrap","_context","prev","next","toLowerCase","abrupt","uri","res","finally","stop","_x","apply","validatePasswords","currentPass"],"mappings":"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","file":"static/js/24.3c5f3732.chunk.js","sourcesContent":["import {styled} from \"@mui/material/styles\";\r\nimport {Grid} from \"@mui/material\";\r\nimport {Alert} from \"../Atoms\";\r\n\r\nconst Container = styled(Grid)(({}) => ({\r\n    backgroundColor: '#F7FAFC',\r\n    boxShadow: '0px 0px 80px rgba(34, 35, 58, 0.2)',\r\n}))\r\n\r\nconst AuthContainer = ({children, alertConfig ={}, ...rest}) => {\r\n    return <Container {...rest}>\r\n        <Grid item xs={12}>\r\n            <Alert config={alertConfig}/>\r\n        </Grid>\r\n        {children}\r\n    </Container>\r\n}\r\n\r\nexport default AuthContainer;","import {isEmailValid, verticalAlignStyle} from \"../../utils/utils\";\r\nimport {Grid, Typography} from \"@mui/material\";\r\nimport {Input, LoadingButton, Password} from \"../../components/Atoms\";\r\nimport {useState} from \"react\";\r\nimport AuthContainer from \"../../components/common/AuthContainer\";\r\nimport CompanyText from \"../../components/Atoms/CompanyText\";\r\nimport useMutation from \"../../hooks/useMutation\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {LOGIN_LINK} from \"../../components/client/routes\";\r\nimport {notification} from \"../../actions/alert\";\r\nimport {validatePasswordsPreLogin} from \"./utils\";\r\n\r\nconst ChangePassword = ({form, onChange, loading, errors}) => {\r\n    return <>\r\n        <Grid item xs={12}>\r\n            <Input type='number' label='OTP' onChange={onChange} value={form.otp} name='otp' errors={errors} />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n            <Password label='New Password' onChange={onChange} value={form.pass} name='pass' errors={errors}/>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n            <Password label='Confirm Password' onChange={onChange} value={form.confirmPass} name='confirmPass'\r\n                      errors={errors}/>\r\n        </Grid>\r\n        <Grid item xs={12} sx={{m: 'auto'}}>\r\n            <LoadingButton isLoading={loading} type='submit' loadingText='Please wait...'>Submit</LoadingButton>\r\n        </Grid>\r\n        <Grid item xs={12} sx={{m: 'auto'}}>\r\n            <Typography component={Link} to={LOGIN_LINK} sx={{display: 'block'}}>Sign In</Typography>\r\n        </Grid>\r\n    </>\r\n}\r\nconst ForgotPassword = ({history}) => {\r\n    const [form, setForm] = useState({pass: '', confirmPass: '', email: '', otp: ''}),\r\n        [errors, setErrors] = useState({pass: '', confirmPass: '', email: '', otp: ''}),\r\n        [isOtpSent, setIsOtpSent] = useState(false),\r\n        [alert, setAlert] = useState({open: false, message: '', severity: 'error'}),\r\n        {mutation, loading} = useMutation('/api/forgotPassword'),\r\n        {mutation: changePasswordMutation, loading: isChangingPassword} = useMutation('/api/forgotPassword');\r\n\r\n    const onChange = ({name, value}) => {\r\n        setForm({...form, [name]: value});\r\n        setErrors({...errors, [name]: ''})\r\n    }\r\n\r\n    const closeAlert = () => {\r\n        setAlert({...alert, open: false});\r\n    }\r\n\r\n    const onSubmit = (e) => {\r\n        closeAlert();\r\n        e.preventDefault();\r\n        if (!isOtpSent) {\r\n            if (!isEmailValid(form.email)) {\r\n                return setErrors({...errors, email: 'Please enter valid Email'})\r\n            }\r\n            mutation({email: form.email}, 'post')\r\n                .then(({success, data}) => {\r\n                    notification(data?.message, success ? undefined : 'error');\r\n                    if(success) {\r\n                        setIsOtpSent(true);\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    notification(err.message, 'error')\r\n                })\r\n        } else {\r\n            const {confirmPass, pass, otp, email} = form;\r\n            const {isValid, err} = validatePasswordsPreLogin({confirmPass, pass});\r\n            if(!isValid){\r\n                return setErrors(err);\r\n            }\r\n            if(confirmPass !== pass) {\r\n                setAlert({...alert, open: true, message: 'Passwords do not match'})\r\n            }\r\n            else {\r\n                changePasswordMutation({confirmPass, email, otp, newPass: form.pass}, 'put')\r\n                    .then(({success, data}) => {\r\n                        debugger\r\n                        notification(data?.message, success ? undefined : 'error');\r\n                        if(success) {\r\n                            history.push(LOGIN_LINK);\r\n                        }\r\n                    })\r\n                    .catch(err => {\r\n                        notification(err.message, 'error')\r\n                    })\r\n            }\r\n        }\r\n    }\r\n\r\n    let comp;\r\n    if (isOtpSent) {\r\n        comp = <ChangePassword form={form} onChange={onChange} loading={isChangingPassword} errors={errors}/>\r\n    } else {\r\n        comp = <>\r\n            <Grid item xs={12}>\r\n                <Input label='Email' onChange={onChange} value={form.email} name='email' errors={errors}/>\r\n            </Grid>\r\n            <Grid item xs={12} sx={{m: 'auto'}}>\r\n                <LoadingButton isLoading={loading} type='submit' loadingText='Please wait...'>Verify</LoadingButton>\r\n            </Grid>\r\n        </>\r\n    }\r\n\r\n    return <div className='auth-wrapper' style={verticalAlignStyle}>\r\n        <AuthContainer container direction='column' gap={2} px={8} py={4} component={'form'} onSubmit={onSubmit} alertConfig={alert}>\r\n            <Grid item sx={{mb: 3}}>\r\n                <CompanyText style={{pointer: 'default'}}/>\r\n            </Grid>\r\n            {comp}\r\n        </AuthContainer>\r\n    </div>\r\n}\r\n\r\nexport default ForgotPassword","import {useState} from \"react\";\r\nimport {requestDelete, requestPatch, requestPost, requestPut} from \"../utils/request\";\r\n\r\nconst getRequestCb = (type) => {\r\n    let fn;\r\n    // eslint-disable-next-line default-case\r\n    switch (type) {\r\n        case 'put' : {\r\n            fn = requestPut\r\n            break;\r\n        }\r\n        case 'delete' : {\r\n            fn = requestDelete\r\n            break;\r\n        }\r\n        case 'patch' : {\r\n            fn = requestPatch\r\n            break;\r\n        }\r\n        default: {\r\n            fn = requestPost;\r\n        }\r\n    }\r\n    return fn;\r\n}\r\n\r\nconst useMutation = (url, callback = null, showTriggers=false) => {\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const mutation = async (body, type = 'post', afterSubmit) => {\r\n        setLoading(true);\r\n        if(!type){\r\n            type = 'post'\r\n        }\r\n        const asyncApiCall = getRequestCb(type.toLowerCase());\r\n        if(asyncApiCall) {\r\n            return asyncApiCall({uri: url, callback, body, showTriggers})\r\n                .then(res => {\r\n                    if(afterSubmit){\r\n                        afterSubmit({...res})\r\n                    }\r\n                    return res\r\n                })\r\n                .catch(err => {\r\n                    return err;\r\n                })\r\n                .finally(() => {\r\n                    setLoading(false);\r\n                });\r\n        }\r\n    }\r\n\r\n    return { mutation, loading }\r\n}\r\n\r\nexport default useMutation;","const validatePasswords = (currentPass, pass, confirmPass) => {\r\n    let isValid = true;\r\n    const err = {}\r\n    if (!currentPass) {\r\n        isValid = false\r\n        err.currentPass = 'Please enter Current Password'\r\n    }\r\n    if (!pass) {\r\n        err.pass = 'Please enter Password'\r\n        isValid= false\r\n    }\r\n    if (!confirmPass) {\r\n        err.confirmPass = 'Please enter Confirm Password'\r\n        isValid= false\r\n    }\r\n    return {isValid, err};\r\n}\r\n\r\nconst validatePasswordsPreLogin = ({pass, confirmPass}) => {\r\n    let isValid = true;\r\n    const err = {}\r\n    if(!pass){\r\n        isValid = false\r\n        err.pass = 'Please enter Password'\r\n    }\r\n    if(!confirmPass){\r\n        err.confirmPass = 'Please enter Confirm Password'\r\n        isValid= false\r\n    }\r\n\r\n    return {isValid, err};\r\n}\r\n\r\nexport {\r\n    validatePasswords,\r\n    validatePasswordsPreLogin\r\n}"],"sourceRoot":""}