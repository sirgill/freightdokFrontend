(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[3],{1116:function(e,t,n){},1137:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return V}));var c=n(9),r=n(1),i=n.n(r),a=n(245),s=n(160),o=n(61),l=n(33),d=n(375),j=n(58),b=n(39),u=(n(20),n(29),n(1110)),x=n(34),O=n(372),h=n(373),p=n(1059),v=n(111),m=n(547),f=n(67),g=n(5),y=n(60),C=n(30),w=n(1123),S=n.n(w),F=(n(560),n(1116),n(950)),k=n(1086),N=n(1071),I=n(1082),A=n(1058),B=n(369),D=n(1125),T=n.n(D),P=n(1124),R=n.n(P),E=n(2),L=[{label:"Detention",cost:"67"},{label:"Loads",cost:"1000"},{label:"Lumper",cost:"786"}],Y=function(e){var t=e.serviceName,n=e.amount,c=e.price,i=e.quantity,a=e.description,s=e.index,o=e.deleteService,l=e.onChangeService,d=function(e){var t=e.target.name,n=e.target.value;l&&l(s,{name:t,value:n})};return Object(E.jsx)(r.Fragment,{children:Object(E.jsxs)("tr",{className:"invoiceServiceRow",children:[Object(E.jsx)("td",{children:t}),Object(E.jsx)("td",{children:Object(E.jsx)(C.a,{name:"description",value:a,onChange:d,className:"serviceInputField",placeholder:"Enter item description"})}),Object(E.jsx)("td",{children:Object(E.jsx)(C.a,{name:"quantity",onChange:function(e){var t=e.target.name,n=parseInt(e.target.value);l(s,{name:t,value:n})},onBlur:function(e){var t=parseInt(e.target.value),c=e.target.name;t<1?l&&(l(s,{name:c,value:1}),l(s,{name:"price",value:parseInt(n)})):l&&(l(s,{name:c,value:t}),l(s,{name:"price",value:parseInt(n)*t}))},className:"serviceInputField",type:"number",value:i})}),Object(E.jsx)("td",{children:Object(E.jsx)(C.a,{name:"price",onChange:d,value:c,className:"serviceInputField"})}),Object(E.jsx)("td",{children:c?"$".concat(parseFloat(c).toFixed(2)):"$0.00"}),Object(E.jsx)("td",{children:Object(E.jsx)(B.a,{onClick:o.bind(null,s),children:Object(E.jsx)(R.a,{color:"error"})})})]})})},M=function(e){var t=e.handleClose,n=e.anchorEl,i=e.onAddNewService,s=Object(r.useState)(L),o=Object(c.a)(s,2),l=o[0],d=o[1],j=function(e){i&&i(e),t()};return Object(E.jsx)(F.b,{id:"jugal",anchorEl:n,open:Boolean(n),onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"left"},children:Object(E.jsxs)(m.a,{sx:{p:2,width:500},children:[Object(E.jsx)(m.a,{children:Object(E.jsx)(C.a,{name:"search",autoFocus:!0,placeholder:"Type on item name",onChange:function(e){var t=e.target.value.toLowerCase();if(t){var n=l.filter((function(e){return e.label.toLowerCase().includes(t)}));d(n)}else d(L)}})}),Object(E.jsx)(m.a,{children:Object(E.jsx)(k.a,{children:l.map((function(e){return Object(E.jsx)(N.a,{onClick:j.bind(null,e),children:Object(E.jsx)(I.a,{disablePadding:!0,secondaryAction:Object(E.jsx)("span",{className:"listButtonPickerCost",children:"$"+e.cost}),children:Object(E.jsx)(A.a,{primary:e.label})})},e.label)}))})}),Object(E.jsx)(m.a,{children:Object(E.jsx)(a.a,{startIcon:Object(E.jsx)(T.a,{}),children:"Create a new Item"})})]})})},W=function(e){var t=e.services,n=e.onAddNewService,s=e.onChangeService,o=e.deleteService,l=i.a.useState(null),d=Object(c.a)(l,2),j=d[0],b=d[1],u=Object(r.useMemo)((function(){return t.map((function(e,t){return Object(E.jsx)(Y,Object(g.a)(Object(g.a)({},e),{},{index:t,onChangeService:s,deleteService:o}))}))}),[t]);return Object(E.jsxs)(i.a.Fragment,{children:[Object(E.jsxs)("table",{className:"invoiceServiceTable",children:[Object(E.jsxs)("tr",{className:"tableHeader",children:[Object(E.jsx)("th",{children:"Services"}),Object(E.jsx)("th",{}),Object(E.jsx)("th",{children:"Quantity"}),Object(E.jsx)("th",{children:"Price"}),Object(E.jsx)("th",{children:"Amount"}),Object(E.jsx)("th",{})]}),u,Object(E.jsx)("tr",{className:"addNewItemRow",children:Object(E.jsx)("td",{className:"addNewItem",onClick:function(e){b(e.currentTarget)},children:Object(E.jsx)(a.a,{sx:{width:135},startIcon:Object(E.jsx)(T.a,{}),"aria-describedby":"jugal",children:"Add new item"})})})]}),Object(E.jsx)(M,{handleClose:function(){b(null)},anchorEl:j,onAddNewService:n})]})},q=n(42),$=function(e){var t=e.name,n=e.sx,c=void 0===n?{}:n,r=e.variant,i=void 0===r?"body1":r,a=e.children;return Object(E.jsx)(f.a,{sx:Object(g.a)({fontWeight:700},c),variant:i,children:a||t})},_=function(e){var t=e.transition,n=e.handleClose,r=e.open,s=e.data,o=(e.pdf,e.setPdf,e.getTotal),l=e.services,d=e.addService,j=e.onChangeService,b=e.deleteService,u=i.a.useRef(null),x=s||{},g=x.brokerage,w=void 0===g?"":g,F=x.loadNumber,k=void 0===F?"":F,N=x.pickup,I=void 0===N?[]:N,A=x.drop,B=void 0===A?[]:A,D=(x.rate,x.accessorials),T=void 0===D?[]:D,P=x.proofDelivery,R=void 0===P?[]:P,L=x.rateConfirmation,Y=void 0===L?[]:L,M=x.bucketFiles,_=B||[],z=(Object(c.a)(_,1)[0].receiverName,Object(c.a)(I,1)[0]);z.pickupAddress,z.pickupCity,z.pickupState,z.pickupZip;console.log(M);var U=i.a.useMemo((function(){return M&&M.map((function(e){return Object(E.jsx)("div",{className:"bucketImageContainer",children:Object(E.jsx)("div",{children:Object(E.jsx)("img",{className:"printThisFull",src:e.fileLocation,alt:e.fileName})})})}))}),[M]),G=i.a.useCallback((function(){return u.current}),[u.current]),H=i.a.useCallback((function(){return Object(E.jsx)(a.a,{className:"printInvoice",variant:"contained",children:"Create Invoice"})}),[]);return Object(E.jsx)(O.a,{class:"printThisFull",PaperProps:{sx:{width:"70%"}},open:r,onClose:n,TransitionComponent:t,maxWidth:"lg",children:Object(E.jsx)(h.a,{sx:{p:0},children:Object(E.jsxs)("div",{ref:u,className:"printArea",children:[Object(E.jsxs)(v.a,{container:!0,direction:"column",sx:{display:"inline-flex"},children:[Object(E.jsx)("style",{type:"text/css",media:"print",children:"               @page { size: landscape; }          "}),Object(E.jsx)(v.a,{item:!0,xs:12,sx:{p:3},children:Object(E.jsxs)(v.a,{container:!0,justifyContent:"space-between",children:[Object(E.jsx)(v.a,{item:!0,sx:{flexGrow:1},children:Object(E.jsx)(m.a,{spacing:1,children:Object(E.jsx)(m.a,{children:Object(E.jsx)(f.a,{sx:{textAlign:"left"},variant:"h5",children:"Sunny Freight"})})})}),Object(E.jsx)(v.a,{item:!0,children:Object(E.jsxs)(m.a,{children:[Object(E.jsx)(m.a,{children:Object(E.jsx)(f.a,{variant:"h5",sx:{textAlign:"right"},children:"Invoice"})}),Object(E.jsx)(m.a,{children:Object(E.jsx)(C.a,{label:"Notes",type:"textarea"})})]})})]})}),Object(E.jsx)(p.a,{sx:{borderBottomWidth:"thin",borderColor:y.b}}),Object(E.jsx)(v.a,{xs:12,item:!0,children:Object(E.jsxs)(v.a,{container:!0,justifyContent:"space-between",children:[Object(E.jsx)(v.a,{item:!0,children:Object(E.jsxs)(m.a,{spacing:1,sx:{p:3},children:[Object(E.jsx)(m.a,{children:Object(E.jsx)(f.a,{children:"Bill To:"})}),Object(E.jsx)(m.a,{children:Object(E.jsx)($,{sx:{fontWeight:700},children:w})})]})}),Object(E.jsx)(v.a,{item:!0,children:Object(E.jsx)(m.a,{justifyContent:"space-between",sx:{height:"100%"},children:Object(E.jsxs)(m.a,{direction:"row",alignItems:"center",spacing:2,p:3,children:[Object(E.jsx)($,{children:"Load Number: "}),Object(E.jsx)($,{children:k})]})})})]})}),Object(E.jsx)(p.a,{sx:{borderBottomWidth:"thin",borderColor:y.b}}),Object(E.jsxs)(v.a,{item:!0,sx:{p:2},display:"inherit",direction:"column",children:[Object(E.jsx)(m.a,{sx:{textAlign:"right"},children:Object(E.jsxs)($,{children:["Total: ",o()||"- -"]})}),Object(E.jsxs)(v.a,{container:!0,alignItems:"end",justifyContent:"space-between",children:[Object(E.jsx)(v.a,{item:!0,xs:12,className:"invoiceServiceWrapperGrid",children:Object(E.jsx)(W,{onChangeService:j,services:l,onAddNewService:d,deleteService:b})}),Object(E.jsx)(v.a,{xs:3,item:!0}),Object(E.jsx)(v.a,{xs:6,item:!0,children:Object(E.jsxs)(m.a,{justifyContent:"center",gap:"10px",className:"stack_Uploaders",children:[Object(E.jsxs)(m.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(E.jsxs)("label",{htmlFor:"rateCon",children:[Object(E.jsx)(f.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px"},children:"Rate Con"}),Object(E.jsx)("input",{type:"file",accept:"pdf",id:"rateCon",style:{display:"none"}})]}),Object(E.jsx)("div",{children:Object(q.c)(!!Y.length)})]}),Object(E.jsxs)(m.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(E.jsxs)("label",{htmlFor:"pod",children:[Object(E.jsx)(f.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px"},children:"Proof Of Delivery"}),Object(E.jsx)("input",{type:"file",accept:"pdf",id:"pod",style:{display:"none"}})]}),Object(E.jsx)("div",{children:Object(q.c)(!!R.length)})]}),Object(E.jsxs)(m.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(E.jsxs)("label",{htmlFor:"accessorials",children:[Object(E.jsx)(f.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px"},children:"Accessorials"}),Object(E.jsx)("input",{type:"file",accept:"pdf",id:"accessorials",style:{display:"none"}})]}),Object(E.jsx)("div",{children:Object(q.c)(!!T.length)})]})]})}),Object(E.jsx)(v.a,{xs:3,item:!0,display:"flex",justifyContent:"end",children:Object(E.jsx)(S.a,{content:G,documentTitle:"Invoice",removeAfterPrint:!0,trigger:H})})]})]})]}),U]})})})},z=function(e){var t=e.match,n=(void 0===t?{}:t).params,a=(void 0===n?{}:n).id,s=void 0===a?"":a,o=(e.history,Object(r.useState)(!1)),d=Object(c.a)(o,2),b=d[0],O=d[1],h=Object(r.useState)(!1),p=Object(c.a)(h,2),v=p[0],m=p[1],f=Object(l.e)((function(e){return e.load.invoices.data}))||[],y=Object(r.useState)([]),C=Object(c.a)(y,2),w=C[0],S=C[1],F=f.find((function(e){return e._id===s}));Object(r.useEffect)((function(){O(!0)}),[]);var k=Object(r.useMemo)((function(){return i.a.forwardRef((function(e,t){var n=Object(j.useHistory)();return Object(E.jsx)(u.a,Object(g.a)(Object(g.a)({ref:t},e),{},{onExited:function(){return n.goBack()}}))}))}),[]),N=Object(r.useCallback)((function(){return"$"+w.reduce((function(e,t){return parseFloat(t.price)+e}),0).toFixed(2)}),[w]);return Object(E.jsx)("div",{children:Object(E.jsx)(_,{open:b,handleClose:function(e){O(!1)},transition:k,data:F,pdf:v,setPdf:m,services:w,addService:function(e){var t=e.label,n=e.cost,c={serviceName:t,description:"",quantity:1,price:n,amount:n};S([].concat(Object(x.a)(w),[c]))},onChangeService:function(e,t){var n=t.name,c=t.value,r=w[e];r[n]=c;var i=Object(x.a)(w);i[e]=r,S(i)},getTotal:N,deleteService:function(e){var t=w;t.splice(e,1),S(Object(x.a)(t))}})})},U=n(96),G=n.n(U),H=n(374),J=Object(s.a)({TableContainer:{borderBottom:"none"},loadSearchbar:{textAlign:"right",paddingBottom:10}});function V(e){e.setSelectedLoad;var t=e.resetSearchField,n=e.listBarType,i=(e.load_selected,J()),s=Object(l.d)(),u=Object(j.useRouteMatch)().path,x=Object(r.useState)(!0),O=Object(c.a)(x,2),h=(O[0],O[1]),p=Object(l.e)((function(e){return e.load.invoices})),v=p.page,m=p.limit,f=(p.total,(Object(l.e)((function(e){var t;return null===(t=e.auth)||void 0===t?void 0:t.user}))||{}).role),g=Object(l.e)((function(e){return e.load.invoices.data})),y=Object(r.useState)(!1),C=Object(c.a)(y,2),w=(C[0],C[1],Object(r.useState)({show:!1,data:{}})),S=Object(c.a)(w,2),F=(S[0],S[1],Object(l.e)((function(e){return e.load.loads}))),k=Object(l.e)((function(e){return e.openBoard.chRobinsonLoads}),l.c),N=(k.loads,k.totalCount);Object(r.useEffect)((function(){return setTimeout((function(){h(!1)}),1e3),t&&t(),s(Object(o.j)(n)),s(Object(o.f)()),function(){t&&t(),s(Object(o.j)(n))}}),[]),Object(r.useEffect)((function(){s(Object(o.f)())}),[F]);var I={rowCellPadding:"inherit",headerCellSx:{pt:1,pb:1},emptyMessage:"No Invoices found",page:v,count:N,limit:m,columns:[{id:"loadNumber",label:"Load Number"},{id:"country",label:"Pickup City/State",renderer:function(e){var t=e.row;return Object(E.jsxs)(r.Fragment,{children:[t.pickup[0].pickupCity,", ",t.pickup[0].pickupState]})}},{id:"pickupDate",label:"Pickup Date",renderer:function(e){var t=e.row,n="";return G()(t.pickUpByDate).isValid()&&(n=G()(t.pickUpByDate).format("M/DD/YYYY")),Object(E.jsx)(r.Fragment,{children:n})}},{id:"deliveryCountry",label:"Delivery City/State",renderer:function(e){var t=e.row;return Object(E.jsxs)(r.Fragment,{children:[t.drop[0].dropCity,", ",t.drop[0].dropState]})}},{id:"deliveryDate",label:"Delivery Date",renderer:function(e){var t=e.row,n="";return G()(t.deliverBy).isValid()&&(n=G()(t.deliverBy).format("M/DD/YYYY")),Object(E.jsx)(r.Fragment,{children:n})}},{id:"equipment",label:"Equipment",renderer:function(e){var t=e.row,n=Object(H.g)(t)||{},c=n.modesString,i=void 0===c?"":c,a=n.standard,s=void 0===a?"":a;return Object(E.jsxs)(r.Fragment,{children:[i," ",s]})}},{id:"weight",label:"Weight",renderer:function(e){var t=(e.row||{}).weight,n=(void 0===t?{}:t).pounds,c=void 0===n?"":n;return c&&(c+=" lbs"),Object(E.jsx)(r.Fragment,{children:c})}},{id:"company",label:"Company",renderer:function(e){var t=e.row;return null===t||void 0===t?void 0:t.brokerage},emptyState:"--"},{id:"rate",label:"Rate",emptyState:"--"},{id:"",label:"Invoice",visible:["driver","admin","superAdmin","ownerOperator"].includes(f),renderer:function(e){var t=e.row;return Object(E.jsx)(a.a,{component:b.b,to:u+"/"+t._id,variant:"outlined",color:"primary",children:"Create Invoice"})}}]};return Object(E.jsx)("div",{className:i.table,children:Object(E.jsxs)(r.Fragment,{children:[Object(E.jsx)(d.a,{config:I,data:g}),Object(E.jsx)(j.Route,{path:u+"/:id",component:z})]})})}}}]);
//# sourceMappingURL=3.d6066828.chunk.js.map