(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[33],{1054:function(e,t,a){"use strict";a.r(t);var n=a(1062),s=a(417),c=a.n(s),r=a(8),i=a(2),o=a(15),j=a(95),l=a(207),b=a(275),u=a(100),O=a(0),d=a(23),m=a(132),f=a(12),x=a(3),h=["children","alertConfig"],p=Object(f.a)(l.a)((function(e){return Object(m.a)(e),{backgroundColor:"#F7FAFC",boxShadow:"0px 0px 80px rgba(34, 35, 58, 0.2)"}})),g=function(e){var t=e.children,a=e.alertConfig,n=void 0===a?{}:a,s=Object(d.a)(e,h);return Object(x.jsxs)(p,Object(i.a)(Object(i.a)({},s),{},{children:[Object(x.jsx)(l.a,{item:!0,xs:12,children:Object(x.jsx)(b.a,{config:n})}),t]}))},v=a(106),P=a(276),C=a(81),w=a(72),y=a(32),S=a(512),k=a(1065),z=a(1066),F=a(1061),L=a(1013),M=a(10),V=void 0,A=function(e){var t=e.length,a=void 0===t?6:t,n=e.onChange,s=e.name,c=e.errors,r=void 0===c?{}:c,i=Object(O.useState)(new Array(a).fill("")),j=Object(o.a)(i,2),b=j[0],u=j[1],d=Object(O.useRef)([]),m=r[s],f=function(e,t){var c=t.target.value,r=Object(M.a)(b);if(r[e]=c.substring(c.length-1),u(r),r.join("").length===a&&n&&n({value:r.join(""),name:s}),r[e]&&e<=a-1&&d.current[+e+1]){var i=d.current[+e+1];i&&i.focus()}else if(!r[e]){if(0===e)return d.current[0].focus();var o=d.current[+e-1];o&&o.focus()}},h=function(e){d.current[e].setSelectionRange(1,1)};return Object(O.useEffect)((function(){d.current[0]&&d.current[0].focus()}),[]),Object(x.jsxs)(k.a,{"aria-autocomplete":"none",children:[Object(x.jsx)(L.a,{error:!!m,sx:{fontSize:14},children:"OTP"}),Object(x.jsx)(l.a,{container:!0,width:"100%",spacing:1,children:b.map((function(e,t){return Object(x.jsx)(l.a,{item:!0,xs:12/a,children:Object(x.jsx)(F.a,{onClick:h.bind(V,t),inputRef:function(e){return d.current[t]=e},value:e,onChange:f.bind(V,t),autoComplete:"false",size:"small",error:!!m,sx:{".MuiInputBase-root":{width:37}}},"".concat(t))})}))}),m&&Object(x.jsx)(z.a,{error:!!m,children:m})]})},E=function(e){var t=e.form,a=e.onChange,n=e.loading,s=e.errors;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.a,{item:!0,xs:12,children:Object(x.jsx)(A,{length:6,onChange:a,name:"otp",errors:s})}),Object(x.jsx)(l.a,{item:!0,xs:12,children:Object(x.jsx)(b.d,{label:"New Password",onChange:a,value:t.pass,name:"pass",errors:s})}),Object(x.jsx)(l.a,{item:!0,xs:12,children:Object(x.jsx)(b.d,{label:"Confirm Password",onChange:a,value:t.confirmPass,name:"confirmPass",errors:s,autoComplete:"false"})}),Object(x.jsx)(l.a,{item:!0,xs:12,sx:{m:"auto"},children:Object(x.jsx)(b.c,{isLoading:n,type:"submit",loadingText:"Please wait...",children:"Submit"})}),Object(x.jsx)(l.a,{item:!0,xs:12,sx:{m:"auto"},children:Object(x.jsx)(j.a,{component:C.b,to:w.c,sx:{display:"block"},children:"Sign In"})})]})};t.default=function(e){var t,a=e.history,s=Object(O.useState)({pass:"",confirmPass:"",email:"",otp:""}),j=Object(o.a)(s,2),d=j[0],m=j[1],f=Object(O.useState)({pass:"",confirmPass:"",email:"",otp:""}),h=Object(o.a)(f,2),p=h[0],C=h[1],k=Object(O.useState)(!1),z=Object(o.a)(k,2),F=z[0],L=z[1],M=Object(O.useState)({open:!1,message:"",severity:"error"}),V=Object(o.a)(M,2),A=V[0],I=V[1],R=Object(P.a)("/api/forgotPassword"),T=R.mutation,H=R.loading,J=Object(P.a)("/api/forgotPassword"),N=J.mutation,_=J.loading,B=function(e){var t=e.name,a=e.value;m(Object(i.a)(Object(i.a)({},d),{},Object(r.a)({},t,a))),C(Object(i.a)(Object(i.a)({},p),{},Object(r.a)({},t,"")))};return t=F?Object(x.jsx)(E,{form:d,onChange:B,loading:_,errors:p}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.a,{item:!0,xs:12,children:Object(x.jsx)(b.b,{label:"Email",onChange:B,value:d.email,name:"email",errors:p,InputProps:{startAdornment:Object(x.jsx)(n.a,{position:"start",children:Object(x.jsx)(c.a,{})})}})}),Object(x.jsx)(l.a,{item:!0,xs:12,sx:{m:"auto"},children:Object(x.jsx)(b.c,{isLoading:H,type:"submit",loadingText:"Please wait...",children:"Verify"})})]}),Object(x.jsx)("div",{className:"auth-wrapper",style:u.j,children:Object(x.jsxs)(g,{container:!0,direction:"column",gap:2,px:8,py:4,component:"form",onSubmit:function(e){if(I(Object(i.a)(Object(i.a)({},A),{},{open:!1})),e.preventDefault(),F){var t=d.confirmPass,n=d.pass,s=d.otp,c=d.email,r=Object(S.b)({confirmPass:t,pass:n,otp:s}),o=r.isValid,j=r.err;if(!o)return C(j);t!==n?I(Object(i.a)(Object(i.a)({},A),{},{open:!0,message:"Passwords do not match"})):N({confirmPass:t,email:c,otp:s,newPass:d.pass},"put").then((function(e){var t=e.success,n=e.data;t?(Object(y.a)(null===n||void 0===n?void 0:n.message),a.push(w.c)):I(Object(i.a)(Object(i.a)({},A),{},{open:!0,message:n.message}))})).catch((function(e){Object(y.a)(e.message,"error")}))}else{if(!Object(u.e)(d.email))return C(Object(i.a)(Object(i.a)({},p),{},{email:"Please enter valid Email"}));T({email:d.email},"post").then((function(e){var t=e.success,a=e.data;Object(y.a)(null===a||void 0===a?void 0:a.message,t?void 0:"error"),t&&L(!0)})).catch((function(e){Object(y.a)(e.message,"error")}))}},alertConfig:A,children:[Object(x.jsx)(l.a,{item:!0,sx:{mb:3},children:Object(x.jsx)(v.a,{style:{pointer:"default"}})}),t]})})}},417:function(e,t,a){"use strict";var n=a(96);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a(99)),c=a(3),r=(0,s.default)((0,c.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"}),"MailOutline");t.default=r}}]);
//# sourceMappingURL=33.7c376d72.chunk.js.map