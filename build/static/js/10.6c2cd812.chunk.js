(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[10],{1121:function(e,t,r){"use strict";r.r(t);var n=r(314),o=r(13),a=r(1),i=r(101),c=r.n(i),d=r(24),u=r(51),s=r(37),l=r(320),p=r(332),b=r(444),f=r(2);t.default=Object(d.b)((function(e){return{load:e.load,driver:e.driver}}),{getLoads:u.g,searchLoads:u.k})((function(e){var t=e.getLoads,r=e.searchLoads,i=e.load,v=i.loads,j=i.loads_pagination,O=i.page,m=i.rowsPerPage,g=i.search,h=e.resetSearchField,k=e.searchText,D=Object(d.d)(),w=Object(s.e)(),C=Object(a.useState)(!0),x=Object(o.a)(C,2),y=x[0],S=x[1],P=Object(a.useState)({open:!1,data:{}}),L=Object(o.a)(P,2),T=L[0],M=L[1],A=j.total,E=(j.currPage,Object(a.useState)([])),N=Object(o.a)(E,2),I=N[0],J=N[1],R=Object(d.e)((function(e){return e})),_=R.auth,q=void 0===_?{}:_,F=q.user,U=void 0===F?{}:F,z=(q.roles,R.driver),B=(void 0===z?{}:z).drivers,G=void 0===B?[]:B,H=Object(d.e)((function(e){return e.load.search})),K=H.query,Q=H.loads,V=H.page,W=H.limit,X=H.total;Object(a.useEffect)((function(){return setTimeout((function(){S(!1)}),1e3),h&&h(),k?r(+O,+W,g,"loads"):t(O),function(){h&&h()}}),[]),Object(a.useEffect)((function(){if(U&&"load planner"===U.role){var e=v.filter((function(e){if(!e.assignedTo)return e}));J(e)}else J(K?Q:v);var r=setInterval((function(){t(O)}),3e3);return function(){clearInterval(r)}}),[v,Q,O]);var Y=function(e,n){n-=1,K?r(n,W,K):t(n,m)},Z=function(e,r){D(Object(u.c)(e,(function(e,n){e&&(setTimeout((function(){return t(O)}),500),r())})))},$=Object(a.useMemo)((function(){return{onRowClick:function(e){return M({open:!0,data:e})},rowCellPadding:"normal",count:K?X:A,page:O,limit:K?V:m,onPageChange:Y,hasDelete:!0,onDelete:Z,deletePermissions:["admin","ownerOperator","superAdmin"],columns:[{id:"loadNumber",label:"Load Number"},{id:"pickup",label:"PickUp City/State",renderer:function(e){var t=e.row,r=(void 0===t?{}:t).pickup,n=void 0===r?[]:r,a=Object(o.a)(n,1)[0],i=a.pickupCity,c=void 0===i?"":i,d=a.pickupState,u=void 0===d?"":d;return"".concat(c,", ").concat(u)}},{id:"pickupDate",label:"Pickup Date",renderer:function(e){var t=e.row,r=(void 0===t?{}:t).pickup,n=void 0===r?[]:r,a=Object(o.a)(n,1)[0].pickupDate,i=void 0===a?"":a;return c()(i).format("MM/DD")}},{id:"dropCity",label:"Drop City/State",renderer:function(e){var t=e.row,r=(void 0===t?{}:t).drop,n=void 0===r?[]:r,a=Object(o.a)(n,1)[0],i=a.dropCity,c=void 0===i?"":i,d=a.dropState,u=void 0===d?"":d;return"".concat(c,", ").concat(u)}},{id:"dropDate",label:"Drop Date",renderer:function(e){var t=e.row,r=(void 0===t?{}:t).drop,n=void 0===r?[]:r,a=Object(o.a)(n,1)[0].dropDate,i=void 0===a?"":a;return c()(i).format("MM/DD")}},{id:"brokerage",label:"Customer",renderer:function(e){var t=e.row,r=(void 0===t?{}:t).brokerage;return void 0===r?"":r}},{id:"rate",label:"Rate",emptyState:"--"},{id:"assignedTo",label:"Assigned To",renderer:function(e){var t=(e.row||{}).user,r=(G.find((function(e){return e.user&&e.user._id===t}))||{}).user,n=(void 0===r?{}:r).name;return void 0===n?"":n}}]}}),[I]);return Object(f.jsxs)("div",{className:w.table,children:[Object(f.jsx)(l.a,{config:$,data:I,loading:y}),Object(f.jsx)(n.a,{sx:{display:"flex",justifyContent:"flex-end"},children:["admin","superAdmin","dispatch"].includes(U.role)&&Object(f.jsx)(b.a,{})}),T.open&&Object(f.jsx)(p.a,{modalEdit:!1,open:T.open,load:T.data,handleClose:function(){M({open:!1,data:{}}),D(Object(u.l)())},deleteLoad:function(e){return D(Object(u.c)(e))}})]})}))}}]);
//# sourceMappingURL=10.6c2cd812.chunk.js.map