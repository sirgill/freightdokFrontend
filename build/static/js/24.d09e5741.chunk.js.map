{"version":3,"sources":["components/auth/signUpWithFMCSA/UserOnboard.js","hooks/useMutation.js"],"names":["UserOnboard","props","_props$match","match","_props$match2$params","params","email","history","_useState","useState","_useState2","_slicedToArray","formData","setFormData","_useState3","_useState4","errors","setErrors","_useMutation","useMutation","loading","mutation","useEffect","requestPost","uri","body","skipTriggers","then","_ref","arguments","length","undefined","success","data","_objectSpread","disabled","notification","message","console","error","onChange","_ref2","name","value","_defineProperty","_onSubmit","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","isValid","otp","password","_formData$firstName","firstName","_formData$lastName","lastName","wrap","_context","prev","next","preventDefault","String","abrupt","trim","afterSubmit","stop","apply","_ref3","push","LOGIN_LINK","_jsx","_Grid","container","className","children","_jsxs","style","verticalAlignStyle","CompanyText","_Box","sx","flex","display","alignItems","spacing","component","onSubmit","_x","item","xs","Input","label","fullWidth","required","trimValue","type","inputProps","max","placeholder","Password","textAlign","_Button","variant","getRequestCb","fn","requestPut","requestDelete","requestPatch","url","callback","showTriggers","setLoading","asyncApiCall","_args","toLowerCase","res","catch","err","finally"],"mappings":"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","file":"static/js/24.d09e5741.chunk.js","sourcesContent":["import { Box, Button, Grid } from \"@mui/material\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { verticalAlignStyle } from \"../../../utils/utils\";\r\nimport CompanyText from \"../../Atoms/CompanyText\";\r\nimport Input from \"../../Atoms/form/Input\";\r\nimport Password from \"../../Atoms/form/Password\";\r\nimport { requestPost } from \"../../../utils/request\";\r\nimport { notification } from \"../../../actions/alert\";\r\nimport { LOGIN_LINK } from \"../../constants\";\r\nimport useMutation from \"../../../hooks/useMutation\";\r\n\r\nconst UserOnboard = (props) => {\r\n    const { match: { params: { email } = {} } = {}, history } = props;\r\n    const [formData, setFormData] = useState({});\r\n    const [errors, setErrors] = useState({}),\r\n        {loading, mutation} = useMutation('/api/onBoarding/register');\r\n\r\n    useEffect(() => {\r\n        requestPost({ uri: '/api/onBoarding/validateOtp', body: { email }, skipTriggers: false })\r\n            .then((res = {}) => {\r\n                const { success, data } = res || {}\r\n                if (!success) {\r\n                    setFormData({ ...formData, disabled: true });\r\n                    if (!data?.success){\r\n                        notification(data?.message || 'Server Error', 'error');\r\n                        console.error('Server Error')\r\n                    }\r\n                }\r\n            });\r\n    }, []);\r\n\r\n    const onChange = ({ name, value }) => {\r\n        setFormData({ ...formData, [name]: value })\r\n        setErrors((errors) => ({ ...errors, [name]: '' }));\r\n    }\r\n\r\n    async function onSubmit(e) {\r\n        e.preventDefault();\r\n        let isValid = true;\r\n        const { otp, password, firstName = '', lastName = ''} = formData;\r\n        if(!firstName){\r\n            isValid = false;\r\n            setErrors(errors => ({...errors, firstName: 'Please Enter First Name'}));\r\n        }\r\n        if (!otp) {\r\n            isValid = false;\r\n            setErrors(errors => ({ ...errors, otp: 'Please enter OTP' }));\r\n        } else if (String(otp).length !== 6) {\r\n            isValid = false;\r\n            setErrors(errors => ({ ...errors, otp: 'OTP should be of six digits' }));\r\n        }\r\n        if (!password) {\r\n            isValid = false;\r\n            setErrors(errors => ({ ...errors, password: 'Please enter Password' }))\r\n        } else if (password.length < 8) {\r\n            isValid = false;\r\n            return setErrors(errors => ({ ...errors, password: 'Password must be 8 letters' }))\r\n        }\r\n        isValid && mutation({ email, password, otp, firstName: firstName.trim(), lastName: lastName.trim() }, null, afterSubmit);\r\n    }\r\n\r\n    const afterSubmit = ({success, data}) => {\r\n        if (success) {\r\n            notification(data.message);\r\n            history.push(LOGIN_LINK);\r\n        }\r\n    }\r\n\r\n    return <Grid container className='login'>\r\n        <div className='auth-wrapper auth-inner' style={verticalAlignStyle}>\r\n            <CompanyText />\r\n            <Box sx={{ flex: 1, display: 'flex', alignItems: 'center' }}>\r\n                <Grid container spacing={2} component='form' onSubmit={onSubmit}>\r\n                    <Grid item xs={12}>\r\n                        <Input name='email' value={email} disabled label='Email' fullWidth />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Input name='firstName' required errors={errors} value={formData['firstName']} label='First Name' fullWidth trimValue onChange={onChange} />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Input name='lastName' value={formData['lastName']} label='Last Name' onChange={onChange} fullWidth />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Input fullWidth name='otp' required errors={errors} type='number' inputProps={{ max: 999999 }} value={formData['otp']} label='OTP' placeholder='Enter OTP' onChange={onChange} />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Password name='password' required errors={errors} value={formData['password']} onChange={onChange} />\r\n                    </Grid>\r\n                    <Grid item textAlign='center' xs={12}>\r\n                        <Button type='submit' variant='contained' disabled={formData['disabled'] || loading}>\r\n                            {loading ? 'Submitting...' : 'Submit'}\r\n                        </Button>\r\n                    </Grid>\r\n                </Grid>\r\n            </Box>\r\n        </div>\r\n    </Grid>\r\n}\r\n\r\nexport default UserOnboard;","import {useState} from \"react\";\r\nimport {requestDelete, requestPatch, requestPost, requestPut} from \"../utils/request\";\r\n\r\nconst getRequestCb = (type) => {\r\n    let fn;\r\n    // eslint-disable-next-line default-case\r\n    switch (type) {\r\n        case 'put' : {\r\n            fn = requestPut\r\n            break;\r\n        }\r\n        case 'delete' : {\r\n            fn = requestDelete\r\n            break;\r\n        }\r\n        case 'patch' : {\r\n            fn = requestPatch\r\n            break;\r\n        }\r\n        default: {\r\n            fn = requestPost;\r\n        }\r\n    }\r\n    return fn;\r\n}\r\n\r\nconst useMutation = (url, callback = null, showTriggers=false) => {\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const mutation = async (body, type = 'post', afterSubmit) => {\r\n        setLoading(true);\r\n        if(!type){\r\n            type = 'post'\r\n        }\r\n        const asyncApiCall = getRequestCb(type.toLowerCase());\r\n        if(asyncApiCall) {\r\n            return asyncApiCall({uri: url, callback, body, showTriggers})\r\n                .then(res => {\r\n                    if(afterSubmit){\r\n                        afterSubmit({...res})\r\n                    }\r\n                    return res.data\r\n                })\r\n                .catch(err => {\r\n                    return err;\r\n                })\r\n                .finally(() => {\r\n                    setLoading(false);\r\n                });\r\n        }\r\n    }\r\n\r\n    return { mutation, loading }\r\n}\r\n\r\nexport default useMutation;"],"sourceRoot":""}