(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[23],{1144:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return oe}));var c=n(201),a=n(526),o=n(749),r=n.n(o),i=n(248),s=n(0),l=n.n(s),d=n(13),j=n(72),b=n(355),h=n.n(b),u=n(367),x=n(575),p=n(683),O=n(1036),m=n(1102),g=n(200),f=n(88),v=n(44),C=n(300),y=n(746),w=n.n(y),S=(n(148),n(585),n(1163)),k=n(1165),N=n(1106),F=n(1141),P=n(1108),T=n(748),I=n.n(T),R=n(747),D=n.n(R),A=n(2);const L=[{label:"Detention",cost:"67"},{label:"Loads",cost:"1000"},{label:"Lumper",cost:"786"}],M=e=>{let{serviceName:t,amount:n,price:c,quantity:a,description:o,index:r,deleteService:l,onChangeService:d}=e;const j=e=>{const t=e.target.name,n=+e.target.value;d&&d(r,{name:t,value:n})};return Object(A.jsx)(s.Fragment,{children:Object(A.jsxs)("tr",{className:"invoiceServiceRow",children:[Object(A.jsx)("td",{children:t}),Object(A.jsx)("td",{children:Object(A.jsx)(C.a,{name:"description",value:o,onChange:j,className:"serviceInputField",placeholder:"Enter item description"})}),Object(A.jsx)("td",{children:Object(A.jsx)(C.a,{name:"quantity",onChange:e=>{const t=e.target.name,n=parseInt(e.target.value);d(r,{name:t,value:n})},onBlur:(e,t)=>{+t<0?d&&(d(r,{name:e,value:1}),d(r,{name:"amount",value:parseInt(c)})):d&&(d(r,{name:e,value:t}),d(r,{name:"amount",value:parseInt(c)*+t}))},className:"serviceInputField",type:"number",value:a})}),Object(A.jsx)("td",{children:Object(A.jsx)(C.a,{name:"price",onChange:j,value:c,onBlur:(e,t)=>{d(r,(t=+t)<0?{name:"amount",value:(t=1)*a}:{name:"amount",value:t*a})},className:"serviceInputField",type:"number"})}),Object(A.jsx)("td",{children:n?"$".concat(parseFloat(n).toFixed(2)):"$0.00"}),Object(A.jsx)("td",{children:Object(A.jsx)(i.a,{onClick:l.bind(null,r),className:"deleteService",children:Object(A.jsx)(D.a,{color:"error"})})})]})})},B=e=>{let{handleClose:t,anchorEl:n,onAddNewService:c}=e;const[o,r]=Object(s.useState)(L),i=e=>{c&&c(e),t()};return Object(A.jsx)(S.b,{id:"jugal",anchorEl:n,open:Boolean(n),onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"left"},children:Object(A.jsxs)(a.a,{sx:{p:2,width:500},children:[Object(A.jsx)(a.a,{children:Object(A.jsx)(C.a,{name:"search",autoFocus:!0,placeholder:"Type on item name",onChange:e=>{const t=e.target.value.toLowerCase();if(t){const e=o.filter((e=>e.label.toLowerCase().includes(t)));r(e)}else r(L)}})}),Object(A.jsx)(a.a,{children:Object(A.jsx)(k.a,{children:o.map((e=>Object(A.jsx)(N.a,{onClick:i.bind(null,e),children:Object(A.jsx)(F.a,{disablePadding:!0,secondaryAction:Object(A.jsx)("span",{className:"listButtonPickerCost",children:"$"+e.cost}),children:Object(A.jsx)(P.a,{primary:e.label})})},e.label)))})}),Object(A.jsx)(a.a,{children:Object(A.jsx)(O.a,{startIcon:Object(A.jsx)(I.a,{}),children:"Create a new Item"})})]})})};var E=e=>{let{services:t,onAddNewService:n,onChangeService:c,deleteService:a}=e;const[o,r]=l.a.useState(null),i=Object(s.useMemo)((()=>t.map(((e,t)=>Object(A.jsx)(M,{...e,index:t,onChangeService:c,deleteService:a},t)))),[t]);return Object(A.jsxs)(l.a.Fragment,{children:[Object(A.jsxs)("table",{className:"invoiceServiceTable",children:[Object(A.jsxs)("tr",{className:"tableHeader",children:[Object(A.jsx)("th",{children:"Services"}),Object(A.jsx)("th",{}),Object(A.jsx)("th",{children:"Quantity"}),Object(A.jsx)("th",{children:"Price"}),Object(A.jsx)("th",{children:"Amount"}),Object(A.jsx)("th",{})]}),i,Object(A.jsx)("tr",{className:"addNewItemRow",children:Object(A.jsx)("td",{className:"addNewItem",onClick:e=>{r(e.currentTarget)},children:Object(A.jsx)(O.a,{sx:{width:135},startIcon:Object(A.jsx)(I.a,{}),children:"Add new item"})})})]}),Object(A.jsx)(B,{handleClose:()=>{r(null)},anchorEl:o,onAddNewService:n})]})},z=n(90),W=n(288),q=n(98),U=n(266),H=n(28),Y=n(256);const K=e=>{let{name:t,sx:n={},variant:c="body1",children:a}=e;return Object(A.jsx)(f.a,{sx:{fontWeight:700,...n},variant:c,children:a||t})},_=l.a.forwardRef(((e,t)=>{const{pdf:n,setNotes:c,brokerage:o,loadNumber:r,getTotal:i,onChangeService:s,services:l,addService:d,deleteService:j,notes:b,rateConfirmation:h,proofDelivery:u,accessorials:x,reactToPrintContent:p,reactToPrintTrigger:O,docFileViewer:y,noticeText:S}=e,{orgName:k}=Object(z.h)().user;return Object(A.jsxs)("div",{ref:t,className:"printArea",children:[Object(A.jsxs)(g.a,{container:!0,direction:"column",sx:{display:"inline-flex"},children:[Object(A.jsx)("style",{type:"text/css",media:"print",children:"               @page { size: portrait; }          "}),Object(A.jsx)(g.a,{item:!0,xs:12,sx:{p:3},children:Object(A.jsxs)(g.a,{container:!0,justifyContent:"space-between",children:[Object(A.jsx)(g.a,{item:!0,sx:{flexGrow:1},children:Object(A.jsx)(a.a,{spacing:1,children:Object(A.jsx)(a.a,{children:Object(A.jsx)(f.a,{sx:{textAlign:"left"},variant:"h5",children:k})})})}),Object(A.jsx)(g.a,{item:!0,children:Object(A.jsxs)(a.a,{children:[Object(A.jsx)(a.a,{children:Object(A.jsx)(f.a,{variant:"h5",sx:{textAlign:"right"},children:"Invoice"})}),Object(A.jsx)(a.a,{className:"notesStack",children:Object(A.jsx)(C.a,{label:"Notes",value:S,readOnly:!0,rows:4,type:"textarea"})})]})})]})}),Object(A.jsx)(m.a,{sx:{borderBottomWidth:"thin",borderColor:v.c}}),Object(A.jsx)(g.a,{xs:12,item:!0,children:Object(A.jsxs)(g.a,{container:!0,justifyContent:"space-between",children:[Object(A.jsx)(g.a,{item:!0,children:Object(A.jsxs)(a.a,{spacing:1,sx:{p:3},children:[Object(A.jsx)(a.a,{children:Object(A.jsx)(f.a,{children:"Bill To:"})}),Object(A.jsx)(a.a,{children:Object(A.jsx)(K,{sx:{fontWeight:700},children:o})})]})}),Object(A.jsx)(g.a,{item:!0,children:Object(A.jsx)(a.a,{justifyContent:"space-between",sx:{height:"100%"},children:Object(A.jsxs)(a.a,{direction:"row",alignItems:"center",spacing:2,p:3,children:[Object(A.jsx)(K,{children:"Load Number: "}),Object(A.jsx)(K,{children:r})]})})})]})}),Object(A.jsx)(m.a,{sx:{borderBottomWidth:"thin",borderColor:v.c}}),Object(A.jsxs)(g.a,{item:!0,sx:{p:2},display:"inherit",direction:"column",children:[Object(A.jsx)(a.a,{sx:{textAlign:"right"},children:Object(A.jsxs)(K,{children:["Total: ",i()||"- -"]})}),Object(A.jsxs)(g.a,{container:!0,alignItems:"end",justifyContent:"space-between",children:[Object(A.jsx)(g.a,{item:!0,xs:12,className:"invoiceServiceWrapperGrid",children:Object(A.jsx)(E,{onChangeService:s,services:l,onAddNewService:d,deleteService:j})}),Object(A.jsx)(g.a,{xs:3,item:!0,children:Object(A.jsxs)(f.a,{className:"notesPrintBlock",children:["Notes: ",b||"N.A"]})}),Object(A.jsx)(g.a,{xs:5,item:!0,children:Object(A.jsxs)(a.a,{justifyContent:"center",gap:"10px",className:"stack_Uploaders",children:[Object(A.jsxs)(a.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(A.jsxs)("label",{htmlFor:"rateCon",children:[Object(A.jsx)(f.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Rate Con"}),Object(A.jsx)("input",{type:"file",accept:"pdf",id:"rateCon",style:{display:"none"}})]}),Object(A.jsx)("div",{children:Object(z.c)(!!h.length)})]}),Object(A.jsxs)(a.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(A.jsxs)("label",{htmlFor:"pod",children:[Object(A.jsx)(f.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Proof Of Delivery"}),Object(A.jsx)("input",{type:"file",accept:"pdf",id:"pod",style:{display:"none"}})]}),Object(A.jsx)("div",{children:Object(z.c)(!!u.length)})]}),Object(A.jsxs)(a.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(A.jsxs)("label",{htmlFor:"accessorials",children:[Object(A.jsx)(f.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Accessorials"}),Object(A.jsx)("input",{type:"file",accept:"pdf",id:"accessorials",style:{display:"none"}})]}),Object(A.jsx)("div",{children:Object(z.c)(!!x.length)})]})]})}),Object(A.jsx)(g.a,{xs:3,item:!0,display:"flex",justifyContent:"end",children:Object(A.jsx)(w.a,{content:p,documentTitle:"Invoice",removeAfterPrint:!0,trigger:O,pageStyle:"portrait",onPrintError:e=>console.error("React to print error",e),onBeforePrint:()=>new Promise((e=>{setTimeout((()=>{console.log("waiting for print"),e("")}),1e3)})),fonts:[{family:"Open Sans",source:""}]})})]})]})]}),y]})})),G=e=>{let{transition:t,handleClose:n,open:a,data:o,pdf:r,getTotal:i,services:d,addService:j,onChangeService:b,deleteService:h,notes:u,setNotes:m,saveServices:g,noticeText:f}=e;const v=l.a.useRef(null),{brokerage:C="",loadNumber:y="",pickup:w=[],drop:S=[],rate:k="",accessorials:N=[],proofDelivery:F=[],rateConfirmation:P=[],bucketFiles:T}=o||{},I=e=>{let{pdfUrl:t,pdfFileName:n}=e;const[a,o]=Object(s.useState)([]);return Object(s.useEffect)((()=>{const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js",e.async=!0,e.onload=async()=>{const e=await fetch("https://cors.freightdok.io/".concat(t)).then((e=>e.headers.get("content-type").equalsIgnoreCase("application/pdf")?e.blob():null));if(e){const t=new FileReader;t.onload=()=>{const e=t.result,n=window["pdfjs-dist/build/pdf"];n.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(n.version,"/pdf.worker.js"),n.getDocument({data:e}).promise.then((e=>{const t=e.numPages,n=[];for(let c=1;c<=t;c++)n.push(e.getPage(c));Promise.all(n).then((e=>{const t=e.map((e=>{const t=e.getViewport({scale:2}),n=document.createElement("canvas"),c=n.getContext("2d");n.height=t.height,n.width=t.width;const a={canvasContext:c,viewport:t};return e.render(a).promise.then((()=>n.toDataURL()))}));Promise.all(t).then((e=>{o(e)}))}))}))},t.readAsArrayBuffer(e)}else o(!1)},document.body.appendChild(e)}),[t]),a?Object(A.jsx)(A.Fragment,{children:Object(A.jsx)("div",{style:{position:"relative",minHeight:"100vh"},children:a.map(((e,t)=>Object(A.jsx)("img",{src:e,alt:"Page ".concat(t+1),style:{width:"100%"}},t)))})}):Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(c.a,{sx:{position:"relative",minHeight:"100vh",display:"flex",justifyContent:"center"},children:Object(A.jsx)("img",{className:"printThisFull",src:t,alt:n,style:{width:"1100px",height:"1200px",objectFit:"contain"}})})})},R=l.a.useMemo((()=>T&&T.map((e=>Object(A.jsx)("div",{className:"bucketImageContainer",children:Object(A.jsx)("div",{children:Object(A.jsx)(I,{pdfUrl:e.fileLocation,pdfFileName:e.fileName})})})))),[T]),D=l.a.useCallback((()=>(g&&g(),v.current)),[v.current,g]),L=l.a.useCallback((()=>Object(A.jsx)(O.a,{className:"printInvoice",variant:"contained",disabled:!d.length,children:"Create Invoice"})),[d]);return Object(A.jsx)(x.a,{className:"printThisFull",PaperProps:{sx:{width:"70%"}},open:a,onClose:n,TransitionComponent:t,maxWidth:"lg",children:Object(A.jsx)(p.a,{sx:{p:0},children:Object(A.jsx)(_,{ref:v,pdf:r,setNotes:m,brokerage:C,loadNumber:y,getTotal:i,onChangeService:b,services:d,addService:j,deleteService:h,notes:u,rateConfirmation:P,proofDelivery:F,accessorials:N,reactToPrintContent:D,docFileViewer:R,reactToPrintTrigger:L,noticeText:f})})})};var V=e=>{let{match:{params:{id:t=""}={}}={}}=e;const[n,c]=Object(s.useState)(!1),[a,o]=Object(s.useState)(!1),[r,i]=Object(s.useState)([]),[j,b]=Object(s.useState)(""),{mutation:h,loading:x}=Object(U.a)("/api/create-invoicev2",null),{data:{data:p={},fpData:O={}}={},loading:m}=Object(W.a)(q.f+"/".concat(t)),{loadNumber:g=null}=p||{},{noticeText:f}=O||{};Object(s.useEffect)((()=>{c(!0)}),[]);const v=Object(s.useMemo)((()=>l.a.forwardRef((function(e,t){const n=Object(d.useHistory)();return Object(A.jsx)(u.a,{ref:t,...e,onExited:()=>n.goBack()})}))),[]),C=Object(s.useCallback)((()=>{const e=r.reduce(((e,t)=>parseFloat(t.amount)+e),0);return Object(z.e)(e.toFixed(2))}),[r]);return m?Object(A.jsx)(Y.c,{}):Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(G,{open:n,handleClose:function(e){c(!1)},transition:v,data:p,pdf:a,services:r,addService:e=>{const{label:t,cost:n}=e;let c={serviceName:t,description:"",quantity:1,price:n,amount:n};i([...r,c])},onChangeService:(e,t)=>{let{name:n,value:c}=t;const a=r[e];a[n]=c;const o=[...r];o[e]=a,i(o)},getTotal:C,deleteService:e=>{const t=r;t.splice(e,1),i([...t])},notes:j,setNotes:b,saveServices:()=>{h({services:r,notes:j,loadNumber:g},"post",(e=>{let{data:t,success:n}=e;n||Object(H.a)(t.message||"Error Saving services","error")}))},noticeText:f})})},$=n(73),J=n.n($),Q=n(275),X=n(494),Z=n.n(X),ee=n(493),te=n(57),ne=n(335),ce=n(276);const ae={title:"Move invoice"};function oe(){const{edit:e=!1,canSendToTriumph:t}=te.a.getUserPermissionsByDashboardId("invoices")||{},{path:n}=Object(d.useRouteMatch)(),{mutation:o,loading:l}=Object(U.a)("/create-be-invoice-pdf",null,!0),{data:b,loading:u,page:x,limit:p,onPageChange:O,onLimitChange:m,refetch:g,isPaginationLoading:f,isRefetching:v}=Object(ne.a)("/api/load/invoice_loads"),[C,y]=Object(s.useState)([]),{loads:w,total:S}=b||{},k={rowCellPadding:"normal",headerCellSx:{pt:1,pb:1},emptyMessage:"No Invoices found",showRefresh:!0,page:x,limit:p,count:S,onPageChange:function(){O(...arguments),N()},onLimitChange:function(){m(...arguments),N()},showCheckbox:!!t,columns:[{id:"loadNumber",label:"Load Number"},{id:"country",label:"Pickup City/State",renderer:e=>{let{row:t}=e;return Object(A.jsxs)(s.Fragment,{children:[t.pickup[0].pickupCity,", ",t.pickup[0].pickupState]})}},{id:"pickupDate",label:"Pickup Date",renderer:e=>{let{row:{pickup:t=[]}={}}=e;const[{pickupDate:n=""}]=t;return J()(n).format("MM/DD/YYYY")}},{id:"deliveryCountry",label:"Delivery City/State",renderer:e=>{let{row:t}=e;return Object(A.jsxs)(s.Fragment,{children:[t.drop[0].dropCity,", ",t.drop[0].dropState]})}},{id:"deliveryDate",label:"Delivery Date",renderer:e=>{let{row:{drop:t=[]}={}}=e;const[{dropDate:n=""}]=t;return J()(n).format("MM/DD/YYYY")}},{id:"assigned",label:"Assigned To",renderer:e=>{let{row:t}=e;const{user:n={}}=({}=t||{}),{name:c="",firstName:a,lastName:o}=n||{};return c||"".concat(a||"--"," ").concat(o||"")}},{id:"accessorials",label:"Accessorials",valueFormatter:e=>(e||[]).join(", ")},{id:"company",label:"Company",renderer:e=>{let{row:t}=e;return null===t||void 0===t?void 0:t.brokerage},emptyState:"--"},{id:"rate",label:"Rate",emptyState:"--",valueFormatter:e=>e?Object(z.e)(e):""},{id:"updatedAt",label:"Updated On",valueFormatter:e=>Object(z.l)(e)},{id:"",label:"Invoice",visible:!!e,renderer:e=>{let{row:t}=e;return Object(A.jsxs)(a.a,{direction:"row",children:[Object(A.jsx)(ce.a,{title:"Create Invoice",placement:"top",children:Object(A.jsx)(i.a,{component:j.b,to:n+"/"+t._id,variant:"outlined",color:"primary",children:Object(A.jsx)(h.a,{})})}),t.invoiceUrl&&Object(A.jsx)(ce.a,{title:"Server Invoice",placement:"top",children:Object(A.jsx)(i.a,{onClick:e=>{e.preventDefault(),window.open(t.invoiceUrl,"_blank")},variant:"outlined",color:"primary",children:Object(A.jsx)(r.a,{sx:{color:"red"}})})})]})}},{id:"",label:"Move",visible:!!e,renderer:e=>{let{row:t}=e;return Object(A.jsx)(i.a,{component:j.b,to:n+"/moveToMyLoads/"+t._id,variant:"outlined",color:"primary",children:Object(A.jsx)(Z.a,{})})}}]},N=()=>y([]),F=Object(A.jsx)(c.a,{children:t&&Object(A.jsx)(Y.e,{variant:"contained",disabled:!C.length,isLoading:l,loadingText:"Please Wait...",onClick:()=>{o({loadIds:C},null,(e=>{let{success:t,data:n}=e;n.data.length&&n.data.forEach(((e,t)=>{setTimeout((()=>{Object(H.a)(e.message,e.invoiceCreated?"success":"error")}),2e3*t)})),t&&(N(),g())}))},children:"Upload on Triumph"})});return Object(A.jsx)(c.a,{sx:{height:"inherit"},className:"dashboardRoot",children:Object(A.jsxs)(s.Fragment,{children:[Object(A.jsx)(Q.a,{config:k,data:w,loading:u,onRefetch:()=>{g(),N()},isRefetching:v,isPaginationLoading:f,onCheckboxChange:(e,t)=>{t.preventDefault();const n=e.loadNumber,c=C.indexOf(n);let a=[...C];c>-1?a=a.toSpliced(c,1):a.push(n),y(a)},checkboxes:C,checkboxKey:"loadNumber",actions:F}),e&&Object(A.jsx)(d.Route,{path:n+"/moveToMyLoads/:id",render:e=>Object(A.jsx)(ee.a,{onCloseUrl:n,getInvoices:g,modalConfig:ae,...e})}),e&&Object(A.jsx)(d.Route,{path:n+"/:id",exact:!0,component:V,onCloseUrl:n})]})})}},266:function(e,t,n){"use strict";var c=n(0),a=n(48),o=n(90);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const[i,s]=Object(c.useState)(!1);return{mutation:async function(c){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post",l=arguments.length>2?arguments[2]:void 0,d=e;r.queryParams&&(d=d+"?"+Object(o.n)(r.queryParams)),s(!0),i||(i="post");const j=(e=>{let t;switch(e){case"put":t=a.e;break;case"delete":t=a.a;break;case"patch":t=a.c;break;default:t=a.d}return t})(i.toLowerCase());if(j)return j({uri:d,callback:t,body:c,showTriggers:n}).then((e=>(l&&l({...e}),e))).catch((e=>e)).finally((()=>{s(!1)}))},loading:i}}},269:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var c=n(367),a=n(236),o=n(0),r=n.n(o),i=n(10),s=n(34),l=n(575),d=n(576),j=n(683),b=n(248),h=n(278),u=n.n(h),x=n(13),p=n(90),O=n(74),m=n(2);const g=Object(i.a)(l.a)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),f=e=>{const{children:t,onClose:n,showClose:c,titleStyles:a,...o}=e;return Object(m.jsxs)(d.a,{sx:{m:0,p:2,textAlign:"center",...a},...o,children:[c?Object(m.jsx)(b.a,{"aria-label":"close",onClick:n,sx:{position:"absolute",left:8,top:12,color:e=>e.palette.grey[500]},children:Object(m.jsx)(u.a,{})}):null,t]})};function v(e){const{config:t={},children:n,closeCallback:i}=e,{title:l="",closeUrl:d="",showClose:b=!0,paperProps:h={},preventBackdropClick:u=!1,titleStyles:v={},maxWidth:C="md"}=t,[y,w]=r.a.useState(!1),S=Object(s.a)(),k=Object(a.a)(S.breakpoints.down("sm")),N=function(e){u&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropClick")||w(!1)};r.a.useEffect((()=>(w(!0),Object(p.a)(window,"closeModal",N),()=>Object(p.m)(window,"closeModal",N))),[]);const F=Object(o.useMemo)((()=>r.a.forwardRef((function(e,t){const n=Object(x.useHistory)();return Object(m.jsx)(c.a,{ref:t,...e,onExited:()=>i?i():d?n.push(d||O.b):n.goBack()})}))),[]);return Object(m.jsxs)(g,{onClose:N,"aria-labelledby":l||"customized-dialog-title",open:y,maxWidth:C,TransitionComponent:F,PaperProps:h,fullScreen:k,children:[l&&Object(m.jsx)(f,{id:l||"customized-dialog-title",onClose:N,showClose:b,titleStyles:v,children:l}),Object(m.jsx)(j.a,{dividers:!0,sx:{borderTop:"none"},children:n})]})}},273:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var c=n(0),a=n(1036),o=n(575),r=n(1043),i=n(683),s=n(576),l=n(237),d=n(2);const j=c.forwardRef((function(e,t){return Object(d.jsx)(l.a,{direction:"up",ref:t,...e})}));function b(e){const{open:t=!1,config:n,onClose:c,preventBackdropClose:l=!1,className:b}=e,{title:h,onOk:u,okText:x="Save",content:p,onCancel:O}=n,m=function(e){l&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropclick")||c()};return Object(d.jsx)("div",{children:Object(d.jsxs)(o.a,{className:b,open:t,TransitionComponent:j,onClose:m,"aria-describedby":"alert-dialog-slide-description",children:["function"===typeof h?h({...n}):Object(d.jsx)(s.a,{sx:{fontWeight:550},children:h}),Object(d.jsx)(i.a,{children:"function"===typeof p?p({config:n}):p}),Object(d.jsxs)(r.a,{children:["function"===typeof O?O({config:n,onClose:c}):Object(d.jsx)(a.a,{variant:"outlined",onClick:m,children:"Cancel"}),"function"===typeof x?x({config:n,onOk:u}):Object(d.jsx)(a.a,{variant:"contained",color:x.equalsIgnoreCase("delete")?"error":"primary",onClick:u,children:x})]})]})})}},275:function(e,t,n){"use strict";var c=n(201),a=n(247),o=n(1175),r=n(1164),i=n(1176),s=n(526),l=n(280),d=n.n(l),j=n(1174),b=n(1173),h=n(1040),u=n(200),x=n(88),p=n(1137),O=n(248),m=n(1172),g=n(1148),f=n(295),v=n.n(f),C=n(1171),y=n(257),w=n.n(y),S=n(287),k=n.n(S),N=n(0),F=n.n(N),P=n(13),T=n(1125),I=n(10),R=n(256),D=n(2);const A=Object(I.a)(T.a)((e=>{let{theme:t}=e;return{"& .MuiPaginationItem-root":{[t.breakpoints.down("md")]:{height:"1.8rem",width:"1rem"}}}})),L=Object(I.a)(s.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{justifyContent:"center"},display:"flex",justifyContent:"space-between",flexWrap:"wrap","& .pageSizeSelect":{width:80}}}));var M=e=>{let{data:t=[],onPageChange:n,page:c=1,count:a=0,limit:o=1,onLimitChange:r,isLoading:i}=e;const[l,d]=Object(N.useState)(0);Object(N.useEffect)((()=>{Array.isArray(t)&&d(t.length)}),[t]);return a<=5?null:Object(D.jsxs)(L,{direction:"row",alignItems:"center",children:[Object(D.jsxs)(x.a,{sx:{color:"#525F7F"},fontSize:12,children:["Showing ",l," of ",a," entries"]}),Object(D.jsxs)(s.a,{direction:"row",alignItems:"center",children:[Object(D.jsx)(R.h,{disabled:i,name:"pageSize",label:"",value:o,options:[{id:5,label:5},{id:10,label:10},{id:20,label:20},{id:50,label:50},{id:100,label:100}],className:"pageSizeSelect",onChange:e=>{let{value:t}=e;"function"===typeof r&&r({value:t})}}),Object(D.jsx)(A,{disabled:i,count:Math.ceil(a/o),color:"primary",variant:"contained",page:c,size:"medium",onChange:(e,t)=>{+c!==+t&&"function"===typeof n&&n(e,+t)}})]})]})},B=n(277),E=n(273),z=n(90),W=n(276);const q=Object(I.a)(C.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:12,padding:"0 8px"}}})),U=Object(I.a)(v.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:14}}}));function H(e){let{columns:t=[],config:n={},role:c,handleRequestSort:a,hasSort:o}=e;const{headerCellSx:r={},hasDelete:i,sortField:s,sortOrder:l,showCheckbox:d}=n,j=Object(N.useMemo)((()=>t.map(((e,t)=>{const{label:n="",id:i="",visible:d=!0,sort:j=!1}=e||{};return(w.a.isFunction(d)?d({column:e,role:c}):d)?Object(D.jsx)(q,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...r},children:o&&j?Object(D.jsx)(g.a,{onClick:e=>a(e,i),active:i===s,direction:l,sx:{...r},children:n}):n},i||t):null}))),[t,r]);return d&&j.unshift(Object(D.jsx)(q,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...r}},"checkbox-header")),Object(D.jsxs)(m.a,{children:[j,i&&Object(D.jsx)(q,{padding:"none",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...r}})]})}const Y=e=>{let{columns:t,data:n=[],config:c={},handleRowClick:a,handleDelete:o,...r}=e;return(n||[]).map(((e,n)=>{const{dataKey:i=""}=c;return i&&(e=e[i]),(e=>{let{row:t=[],columns:n={},config:c={},handleRowClick:a,rowIndex:o,handleDelete:r,hasDeletePermission:i,checkboxKey:s,...l}=e;const{hasDelete:d=!1,rowCellPadding:j="none",onRowClick:b,rowStyleCb:h,showCheckbox:u=!1,rowCellSx:x={}}=c,{role:g,onCheckboxChange:f,checkboxes:v}=l;let C={};h&&(C=h({row:t})||{});const y=Object(D.jsx)(q,{sx:{},padding:"none",component:"th",scope:"row",children:Object(D.jsx)(W.a,{title:"Delete",placement:"top",children:Object(D.jsx)(O.a,{onClick:r.bind(void 0,t._id,t),disabled:!i,children:Object(D.jsx)(U,{color:i?"error":"disabled"})})})}),S=n.map(((e,n)=>{const{id:c="",renderer:a,emptyState:r="--",valueFormatter:i,visible:s=!0,cellPadding:l,isCostCell:d}=e||{};if(!(w.a.isFunction(s)?s({column:e,role:g}):s))return null;let b;return b=d?t[c]?Object(z.e)(t[c]||""):r:i&&w.a.isFunction(i)?i(t[c],t):w.a.isFunction(a)?a({row:t,role:g},o)||r:w.a.get(t,c,r)||r,Object(D.jsx)(q,{padding:l||j||"normal",sx:x,component:"th",scope:"row",children:b},c+n)}));if(u){if(!s)throw new Error("Checkbox key not provided");const e=v.indexOf(t[s])>-1;S.unshift(Object(D.jsx)(q,{onClick:f.bind(void 0,t),sx:x,children:Object(D.jsx)(p.a,{checked:e})},"checkbox-".concat(o)))}return Object(D.jsxs)(m.a,{hover:!!b,onClick:e=>{e.preventDefault(),w.a.isFunction(a)&&a(t)},sx:b?{cursor:"pointer",...C}:{...C},children:[S,d&&y]},o)})({row:e,columns:t,config:c,handleRowClick:a,rowIndex:n,handleDelete:o,...r})}))},K=e=>{let{config:t={},data:n=[],history:l,loading:p=!1,onRefetch:m,isRefetching:g,actions:f,isPaginationLoading:v=!1,...C}=e;n=n||[];const{onCheckboxChange:y,checkboxes:S,checkboxKey:P}=C,[T,I]=Object(N.useState)({}),[R,A]=Object(N.useState)({open:!1,config:{}}),{columns:L=[],columnsBuilder:W,onRowClick:q,hasOnClickUrl:U=!0,onPageChange:K,page:_,count:G,limit:V,onPageSizeChange:$,onLimitChange:J,size:Q="medium",emptyMessage:X="",onRowClickDataCallback:Z,showRefresh:ee=!1,onDelete:te,deleteMessage:ne,deletePermissions:ce=[],containerHeight:ae="",sortField:oe,sortOrder:re="asc",handleSortChange:ie,hasSort:se=!1}=t,{role:le=""}=Object(z.h)().user,de="boolean"===typeof ce?ce:ce.indexOf(le)>-1||!1,je=F.a.useRef([]),be="function"===typeof W?W({data:n,columns:L}):L,he=Array.isArray(n)&&n.length,ue=Object(N.useMemo)((()=>f&&F.a.isValidElement(f)?f:Object(D.jsx)(D.Fragment,{})),[f]),xe=e=>{if(U&&q){const t=q(e);Z&&(e=Z(e)),l.push(t,e)}else q&&q(e)},pe=(e,t)=>{ie&&ie({field:t,order:oe===t&&"asc"===re?"desc":"asc"})},Oe=(e,t,n)=>{n.stopPropagation();const c={title:()=>Object(D.jsxs)(u.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(D.jsx)(k.a,{color:"error"}),Object(D.jsx)(x.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]}),okText:"Delete",onOk:()=>te(e,me,{row:t}),content:()=>Object(D.jsx)(h.a,{sx:{color:"#000"},children:w.a.isFunction(ne)?ne({row:t}):ne||"Are you sure you want to delete the record?"})};A({...R,open:!0,config:c})};function me(){A({...R,open:!1})}const ge=Object(N.useMemo)((()=>he?Object(D.jsxs)(N.Fragment,{children:[Object(D.jsx)(b.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(D.jsx)(H,{columns:be,config:t,role:le,handleRequestSort:pe,hasSort:se})}),Object(D.jsx)(j.a,{children:Object(D.jsx)(Y,{role:le,columns:be,data:n,config:t,checkboxes:S,checkboxKey:P,handleRowClick:xe,handleDelete:Oe,onCheckboxChange:y,hasDeletePermission:de})})]}):Object(D.jsx)("tbody",{style:{height:300},children:Object(D.jsx)("tr",{children:Object(D.jsx)("td",{style:{textAlign:"center"},children:Object(D.jsx)("h4",{children:X||"No records found"})})})})),[n,t,S]);return Object(N.useEffect)((()=>{var e;if(null!==je&&void 0!==je&&null!==(e=je.current)&&void 0!==e&&e.table){const e=je.current.table.offsetHeight;I({...T,height:e>200?e:void 0})}}),[]),Object(N.useEffect)((()=>{var e;(v||g)&&null!==(e=je.current)&&void 0!==e&&e.tableContainer&&je.current.tableContainer.scrollTo(0,0)}),[v,g]),Object(D.jsxs)(c.a,{className:"enhanced-table",sx:{height:he&&!p?ae||"95%":"auto"},children:[Object(D.jsxs)(s.a,{alignItems:"flex-end",justifyContent:"flex-end",direction:"row",py:1,gap:.5,children:[ue,ee&&Object(D.jsx)(O.a,{title:"Refresh",onClick:m,children:Object(D.jsx)(d.a,{className:g?"rotateIcon":void 0})})]}),Object(D.jsxs)(o.a,{component:a.a,className:"tableContainer",ref:e=>je.current.tableContainer=e,sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2,height:he&&!p?"calc(100% - 80px)":"auto",position:"relative"},children:[p?(()=>{const e=window.innerHeight-180,t=(T.height?T.height>e?e:T.height:e)||e;return Object(D.jsx)(u.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(D.jsx)(u.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(D.jsx)(B.a,{})})})})():Object(D.jsx)(i.a,{ref:e=>je.current.table=e,"aria-label":"caption table",size:Q,stickyHeader:!0,children:ge}),Object(D.jsx)(r.a,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,position:"absolute"},open:v||g||!1,children:Object(D.jsx)(B.a,{sx:{color:"inherit"}})})]}),!p&&n.length>0&&Object(D.jsx)(M,{data:n,onPageChange:K,page:_,count:G,limit:V,onLimitChange:J||$,isLoading:g||v}),Object(D.jsx)(E.a,{className:"enhancedTable_dialog",open:R.open,config:R.config,onClose:me})]})};t.a=Object(P.withRouter)(Object(N.memo)(K))},288:function(e,t,n){"use strict";var c=n(0),a=n(48),o=n(90);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,i]=Object(c.useState)(void 0),[s,l]=Object(c.useState)(!1),[d,j]=Object(c.useState)(null),[b,h]=Object(c.useState)(!1);function u(){let c=e;n.queryParams&&(c="".concat(c,"?").concat(Object(o.n)(n.queryParams))),Object(a.b)({uri:c,callback:t,showTriggers:!1}).then((e=>{e.data&&i(e.data)})).finally((()=>{l(!1),h(!1)}))}return Object(c.useEffect)((()=>{l(!0),j(null),u()}),[e]),{data:r,loading:s,error:d,refetch:function(){h(!0),u()},isRefetching:b}}},300:function(e,t,n){"use strict";var c=n(88),a=(n(0),n(257)),o=n.n(a),r=n(736),i=n(737),s=n(2);const l=e=>{const{label:t="",type:n="text",options:c=[],labelKey:a="label",valueKey:i="id",onChangeSelect:l,showFirstBlank:d=!1,onBlur:j}=e;if(delete(e=o.a.cloneDeep(e)).showFirstBlank,"select"===n.toLowerCase()){Array.isArray(c)&&c.length||console.error("Options are mandatory in array format");const o=(c||[]).map((e=>Object(s.jsx)("option",{value:e[i],children:e[a]},e[i])));return d&&o.unshift(Object(s.jsx)("option",{value:"",children:"Select an option"})),Object(s.jsx)(r.a,{...e,onChange:l,id:t,type:n,children:o})}return Object(s.jsx)(r.a,{id:t,type:n,...e,onBlur:j})};t.a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{label:t="",type:n="text",multiple:a=!1,onChange:o,labelStyle:r={},direction:d="column",formGrpStyle:j={},errorText:b="",onBlur:h}=e;return Object(s.jsxs)(i.a,{style:"row"===d?{display:"flex",alignItems:"center",...j}:{...j},children:[t&&Object(s.jsx)("label",{className:"form-control-label",htmlFor:t,style:{color:"#525F7F",marginRight:8,...r},children:t}),Object(s.jsx)(l,{...e,onChangeSelect:e=>{if("select"===n.toLowerCase()&&a){const{options:t,name:n}=e.target,c=[];for(let e=0,a=t.length;e<a;e++)t[e].selected&&c.push(t[e].value);o&&o(e,c,n)}else o&&o(e)},onBlur:e=>{h&&h(e.target.name,e.target.value)}}),b&&Object(s.jsx)(c.a,{variant:"subtitle2",sx:{color:"red",fontSize:"0.75em"},children:b})]})}},335:function(e,t,n){"use strict";var c=n(0),a=n(257),o=n.n(a),r=n(48);t.a=(e,t)=>{const{order:n="asc",orderBy:a,debounceTime:i=500}=t||{},[s,l]=Object(c.useState)([]),[d,j]=Object(c.useState)(!1),[b,h]=Object(c.useState)(1),[u,x]=Object(c.useState)(100),[p,O]=Object(c.useState)(""),[m,g]=Object(c.useState)(!1),[f,v]=Object(c.useState)(!1),[C,y]=Object(c.useState)(!1),[w,S]=Object(c.useState)(a),[k,N]=Object(c.useState)(n),F=Object(c.useRef)(!0);Object(c.useEffect)((()=>{P()}),[e,b,u,w,k]),Object(c.useEffect)((()=>{j(!0)}),[]),Object(c.useEffect)((()=>{const e=o.a.debounce((()=>{F.current||(v(!0),P())}),i);return e(),e.cancel}),[p,i]);const P=Object(c.useCallback)((async()=>{Object(r.b)({uri:"".concat(e,"?page=").concat(b,"&search=").concat(p,"&limit=").concat(u,"&sortField=").concat(w,"&sortOrder=").concat(k)}).then((e=>{const{data:t}=e;l(t)})).catch((e=>{console.error(e.message)})).finally((()=>{j(!1),g(!1),v(!1),y(!1),F.current&&(F.current=!1)}))}),[e,b,u,p,w,k]),T=Object(c.useCallback)(((e,t)=>{g(!0),h(t)}),[]),I=Object(c.useCallback)((e=>{let{value:t}=e;O(t),h(1)}),[]),R=Object(c.useCallback)((e=>{let{value:t}=e;g(!0),h(1),x(t)}),[]),D=Object(c.useCallback)((e=>{let{field:t,order:n}=e;S(t),N(n),g(!0),h(1)}),[]);return{data:s,loading:d,page:b,limit:u,onPageChange:T,handleSearch:I,refetch:()=>{h(1),y(!0),P()},onLimitChange:R,searchQuery:p,isPaginationLoading:m,isSearching:f,isRefetching:C,sortField:w,sortOrder:k,handleSortChange:D}}},493:function(e,t,n){"use strict";var c=n(88),a=n(200),o=n(269),r=n(294),i=n(35),s=n(0),l=n(266),d=n(256),j=n(10),b=n(2);const h={title:"Move Invoice to My Loads",preventBackdropClick:!0},u=Object(j.a)(a.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{width:"auto"},[t.breakpoints.up("sm")]:{width:300}}}));t.a=e=>{const{onCloseUrl:t,getInvoices:n,refetch:j,getLoadStatuses:x,modalConfig:p,match:{params:{id:O}={}}={},history:m}=e,[g,f]=Object(s.useState)(),{mutation:v,loading:C}=Object(l.a)("/api/invoice/moveToMyLoads"),y=x?x(i.d):i.d.map((e=>e.id.equalsIgnoreCase("delivered")?{...e,disabled:!0}:e));return Object(b.jsx)(o.a,{config:p||h,children:Object(b.jsxs)(u,{container:!0,component:"form",spacing:2,onSubmit:e=>{e.preventDefault(),v({id:O,status:g},null,(()=>{n&&n(),j&&j(),m.replace(t)}))},children:[Object(b.jsx)(a.a,{item:!0,children:Object(b.jsx)(c.a,{children:"Select a load status"})}),Object(b.jsx)(a.a,{item:!0,xs:12,children:Object(b.jsx)(r.a,{label:"Status",name:"status",options:y,onChange:e=>{let{value:t}=e;f(t)},value:g,showNone:!0})}),Object(b.jsx)(a.a,{item:!0,xs:12,children:Object(b.jsx)(d.e,{type:"submit",fullWidth:!0,disabled:!g,isLoading:C,loadingText:"Moving...",children:"Move"})})]})})}},585:function(e,t,n){}}]);
//# sourceMappingURL=23.99d0c0ec.chunk.js.map