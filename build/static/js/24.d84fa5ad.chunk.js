(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[24],{1055:function(e,t,n){"use strict";n.r(t);var a=n(3),i=n(247),o=n(13),r=n(0),c=n.n(r),l=n(22),s=n(333),d=n(34),j=n.n(d),u=n(45),b=n(5),h=n(1028),O=n(88),f=n.n(O),x=n(69),m=n(85),p=n(1065),v=n(1064),g=n(23),w=n(20),C=n(342),y=n(395),N=n(397),k=n(1),S={firstName:"",lastName:"",phone:""},R=function(e){var t=e.history,n=e.match,i=(void 0===n?{}:n).params,l=(void 0===i?{}:i).id,s=void 0===l?"":l,d=e.onCloseUrl,j=c.a.useState(S),u=Object(o.a)(j,2),O=u[0],R=u[1],D=Object(r.useState)(S),P=Object(o.a)(D,2),F=P[0],A=P[1],I=Object(C.a)("/api/ownerOperator"),W=I.mutation,z=I.loading,E=Object(y.a)("/api/ownerOperator/"+s),M=E.loading,U=(E.data||{}).data,L=function(e){var t=e.name,n=e.value;R(Object(a.a)(Object(a.a)({},O),{},Object(b.a)({},t,n)))};Object(r.useEffect)((function(){U&&R(U)}),[U]);var T=function(e){var t=e.name;e.value&&A(Object(a.a)(Object(a.a)({},F),{},Object(b.a)({},t,"")))},_=function(e){var t=e.success,n=(e.data||{}).message;t?(Object(w.i)("refreshOwnerOp"),Object(g.a)(n||"Owner operator created"),q()):Object(g.a)(n,"error")},q=function(){t.push(d)};return Object(k.jsxs)(v.a,{fullWidth:!1,maxWidth:"md",open:!0,onClose:q,"aria-labelledby":"form-dialog-title",PaperProps:{sx:{width:400}},children:[Object(k.jsxs)(h.a,{id:"form-dialog-title",sx:{color:x.b,textAlign:"center",fontWeight:400,letterSpacing:1},children:[s?"Edit":"Add"," Owner Operator"]}),Object(k.jsx)(p.a,{children:Object(k.jsxs)(m.a,{container:!0,component:"form",noValidate:!0,direction:"column",rowSpacing:3,p:1,children:[Object(k.jsx)(m.a,{item:!0,xs:12,children:Object(k.jsx)("div",{children:Object(k.jsx)(N.a,{name:"firstName",label:"First Name",onChange:L,value:O.firstName||"",errors:F,onBlur:T,fullWidth:!0,disabled:M||z,required:!0})})}),Object(k.jsx)(m.a,{item:!0,xs:12,children:Object(k.jsx)(N.a,{name:"lastName",label:"Last Name",onChange:L,value:O.lastName||"",errors:F,onBlur:T,fullWidth:!0,disabled:M||z,required:!0})}),Object(k.jsx)(m.a,{item:!0,xs:12,children:Object(k.jsx)(N.a,{name:"phone",label:"Phone Number",onChange:L,value:O.phone||"",onBlur:T,errors:F,fullWidth:!0,disabled:M||z,required:!0})}),Object(k.jsx)(m.a,{item:!0,xs:12,children:Object(k.jsx)(N.b,{fullWidth:!0,type:"submit",onClick:function(e){e.preventDefault();var t=Object(a.a)({},O),n=function(e){var t=e.firstName,n=e.lastName,a=e.phone,i={};return t||(i.firstName="Please provide the First Name"),n||(i.lastName="Please provide the Last Name"),a||(i.phone="Please provide the Phone Number"),i}(t);f.a.isEmpty(n)?W(t,null,_):A(Object(a.a)({},n))},isLoading:M||z,loadingText:"Updating...",children:"Update"})})]})})]})};t.default=function(){var e=Object(l.useRouteMatch)().path,t=Object(r.useState)([]),n=Object(o.a)(t,2),c=n[0],d=n[1],b=Object(r.useState)(!1),h=Object(o.a)(b,2),O=h[0],f=h[1],x=Object(l.useHistory)();function m(){f(!0),j.a.get(Object(u.b)()+"/api/ownerOperator").then((function(e){var t=e.data,n=(void 0===t?{}:t).data;d(void 0===n?[]:n),f(!1)})).catch((function(e){console.log(e.message),f(!1)}))}Object(r.useEffect)((function(){return m(),Object(w.a)(window,"refreshOwnerOp",m),function(){return Object(w.g)(window,"refreshOwnerOp",m)}}),[]);var p=function(e,t){t.stopPropagation(),j.a.delete(Object(u.b)()+"/api/ownerOperator/"+e).then((function(e){var t=e.data,n=void 0===t?{}:t;Object(g.a)(n.message),m()})).catch((function(e){return console.log(e.message)}))},v={rowCellPadding:"inherit",emptyMessage:"No Owner Operator Found",columns:[{id:"firstName",label:"First Name"},{id:"lastName",label:"Last Name"},{id:"role",label:"Role",renderer:function(){return Object(k.jsx)(r.Fragment,{children:"Owner Operator"})}},{id:"update",renderer:function(t){var n=t.row,a=t.role;return Object(k.jsxs)(r.Fragment,{children:[Object(k.jsx)(i.a,{variant:"contained",onClick:function(t){t.stopPropagation(),x.push(e+"/edit/".concat(n._id))},sx:{mr:1},children:"Update"}),Object(k.jsx)(i.a,{variant:"contained",color:"error",onClick:p.bind(undefined,n._id),disabled:["ownerOperator","dispatch"].includes(a),children:"Delete"})]})}}]};return Object(k.jsxs)("div",{children:[Object(k.jsx)(s.a,{config:v,data:c,loading:O}),Object(k.jsx)(l.Route,{path:e+"/add",render:function(t){return Object(k.jsx)(R,Object(a.a)(Object(a.a)({},t),{},{onCloseUrl:e}))}}),Object(k.jsx)(l.Route,{path:e+"/edit/:id",render:function(t){return Object(k.jsx)(R,Object(a.a)(Object(a.a)({},t),{},{onCloseUrl:e}))}})]})}},333:function(e,t,n){"use strict";var a=n(314),i=n(1075),o=n(1076),r=n(184),c=n(344),l=n.n(c),s=n(1074),d=n(1073),j=n(1059),u=n(85),b=n(30),h=n(13),O=n(315),f=n(29),x=n(1072),m=n(3),p=n(357),v=n.n(p),g=n(5),w=n(1071),C=n(88),y=n.n(C),N=n(338),k=n.n(N),S=n(0),R=n.n(S),D=n(22),P=n(1041),F=n(1),A=function(e){var t=e.data,n=void 0===t?[]:t,a=e.onPageChange,i=e.page,o=void 0===i?0:i,c=e.count,l=void 0===c?0:c,s=e.limit,d=void 0===s?1:s,j=Object(S.useState)(0),u=Object(h.a)(j,2),O=u[0],f=u[1];Object(S.useEffect)((function(){Array.isArray(n)&&f(n.length)}),[n]);return O<10&&l<10?null:Object(F.jsxs)(r.a,{direction:"row",sx:{display:"flex",justifyContent:"space-between",p:3},alignItems:"center",children:[l>10&&Object(F.jsxs)(b.a,{sx:{color:"#525F7F"},fontSize:13,children:["Showing ",n.length," of ",l," entries"]}),n.length!==l&&Object(F.jsx)(P.a,{count:Math.ceil(l/d),color:"primary",variant:"contained",page:o+1,size:"large",onChange:function(e,t){a&&a(e,t)}})]})},I=n(185),W=n(250);function z(){return Object(F.jsx)(I.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center","& > * + *":{marginLeft:2}},children:Object(F.jsx)(W.a,{})})}var E=n(337),M=n(7),U=n(20),L=["row","columns","config","handleRowClick","rowIndex","handleDelete","hasDeletePermission"],T=["columns","data","config","handleRowClick","handleDelete"],_=Object(M.a)(w.a)((function(e){var t=e.theme;return Object(g.a)({},t.breakpoints.down("xs"),{fontSize:12,padding:"0 8px"})})),q=Object(M.a)(v.a)((function(e){var t=e.theme;return Object(g.a)({},t.breakpoints.down("xs"),{fontSize:14})}));function B(e){var t=e.columns,n=void 0===t?[]:t,a=e.config,i=void 0===a?{}:a,o=i.headerCellSx,r=void 0===o?{}:o,c=i.hasDelete,l=Object(S.useMemo)((function(){return n.map((function(e,t){var n=e||{},a=n.label,i=void 0===a?"":a,o=n.id,c=void 0===o?"":o,l=n.visible,s=void 0===l||l;return(y.a.isFunction(s)?s({column:e}):s)?Object(F.jsx)(_,{padding:"normal",sx:Object(m.a)({color:"#000",fontWeight:800},r),children:i},c||t):null}))}),[n,r]);return Object(F.jsxs)(x.a,{children:[l,c&&Object(F.jsx)(_,{padding:"none",sx:{headerCellSx:r}})]})}var H=function(e){var t=e.columns,n=e.data,a=void 0===n?[]:n,i=e.config,o=void 0===i?{}:i,r=e.handleRowClick,c=e.handleDelete,l=Object(f.a)(e,T);return(a||[]).map((function(e,n){var a=o.dataKey,i=void 0===a?"":a;return i&&(e=e[i]),function(e){var t=e.row,n=void 0===t?[]:t,a=e.columns,i=void 0===a?{}:a,o=e.config,r=void 0===o?{}:o,c=e.handleRowClick,l=e.rowIndex,s=e.handleDelete,d=e.hasDeletePermission,j=Object(f.a)(e,L),u=r.hasDelete,b=void 0!==u&&u,h=r.rowCellPadding,p=void 0===h?"none":h,v=r.onRowClick,g=void 0===v?void 0:v,w=r.rowStyleCb,C=j.role,N={};w&&(N=w({row:n})||{});var k=Object(F.jsx)(_,{sx:{},padding:"none",component:"th",scope:"row",children:Object(F.jsx)(O.a,{onClick:s.bind(void 0,n._id,n),disabled:!d,children:Object(F.jsx)(q,{color:"error"})})}),S=i.map((function(e,t){var a,i=e||{},o=i.id,r=void 0===o?"":o,c=i.renderer,s=i.emptyState,d=void 0===s?"":s,j=i.valueFormatter,u=i.visible,b=void 0===u||u;return(y.a.isFunction(b)?b({column:e}):b)?(a=j&&y.a.isFunction(j)?j(n[r]):y.a.isFunction(c)?c({row:n,role:C},l)||d:n[r]||d,Object(F.jsx)(_,{padding:p||"normal",component:"th",scope:"row",children:a},r+t)):null}));return Object(F.jsxs)(x.a,{hover:!!g,onClick:function(e){e.preventDefault(),y.a.isFunction(c)&&c(n)},sx:g?Object(m.a)({cursor:"pointer"},N):{},children:[S,b&&k]},l)}(Object(m.a)({row:e,columns:t,config:o,handleRowClick:r,rowIndex:n,handleDelete:c},l))}))},J=function(e){var t=e.config,n=void 0===t?{}:t,c=e.data,f=void 0===c?[]:c,x=e.history,p=e.loading,v=void 0!==p&&p,g=e.onRefetch,w=e.isRefetching;f=f||[];var C=Object(S.useState)({}),y=Object(h.a)(C,2),N=y[0],D=y[1],P=Object(S.useState)({open:!1,config:{}}),I=Object(h.a)(P,2),W=I[0],M=I[1],L=n.columns,T=void 0===L?[]:L,_=n.onRowClick,q=n.hasOnClickUrl,J=void 0===q||q,K=n.onPageChange,V=n.page,G=n.count,Q=n.limit,X=n.size,Y=void 0===X?"medium":X,Z=n.emptyMessage,$=void 0===Z?"":Z,ee=n.onRowClickDataCallback,te=n.showRefresh,ne=void 0!==te&&te,ae=n.onDelete,ie=n.deleteMessage,oe=n.deletePermissions,re=void 0===oe?[]:oe,ce=Object(U.d)().user.role,le=void 0===ce?"":ce,se=re.indexOf(le)>-1||!1,de=R.a.useRef([]),je=function(e){if(J&&_){var t=_(e);ee&&(e=ee(e)),x.push(t,e)}else _&&_(e)},ue=function(e,t,n){n.stopPropagation();var a={title:function(){return Object(F.jsxs)(u.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(F.jsx)(k.a,{color:"error"}),Object(F.jsx)(b.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]})},okText:"Delete",onOk:function(){return ae(e,be)},content:function(){return Object(F.jsx)(j.a,{sx:{color:"#000"},children:ie||"Are you sure you want to delete the record?"})}};M(Object(m.a)(Object(m.a)({},W),{},{open:!0,config:a}))};function be(){M(Object(m.a)(Object(m.a)({},W),{},{open:!1}))}var he=Object(S.useMemo)((function(){return Array.isArray(f)&&f.length?Object(F.jsxs)(S.Fragment,{children:[Object(F.jsx)(d.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(F.jsx)(B,{columns:T,config:n})}),Object(F.jsx)(s.a,{children:Object(F.jsx)(H,{role:le,columns:T,data:f,config:n,handleRowClick:je,handleDelete:ue,hasDeletePermission:se},Date.now())})]}):Object(F.jsx)("tbody",{style:{height:300},children:Object(F.jsx)("tr",{children:Object(F.jsx)("td",{style:{textAlign:"center"},children:Object(F.jsx)("h4",{children:$||"No records found"})})})})}),[f,n]);return Object(S.useEffect)((function(){var e;if(null!==de&&void 0!==de&&null!==(e=de.current)&&void 0!==e&&e.table){var t=de.current.table.offsetHeight;D(Object(m.a)(Object(m.a)({},N),{},{height:t>200?t:void 0}))}}),[]),Object(F.jsxs)("div",{children:[ne&&Object(F.jsx)(r.a,{alignItems:"flex-end",children:Object(F.jsx)(O.a,{title:"Refresh",onClick:g,children:Object(F.jsx)(l.a,{className:w?"rotateIcon":void 0})})}),Object(F.jsxs)(i.a,{component:a.a,className:"",sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2},children:[v?function(){var e=window.innerHeight-180,t=(N.height?N.height>e?e:N.height:e)||e;return Object(F.jsx)(u.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(F.jsx)(u.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(F.jsx)(z,{})})})}():Object(F.jsx)(o.a,{ref:function(e){return de.current.table=e},"aria-label":"caption table",size:Y,children:he}),!v&&f.length>0&&Object(F.jsx)(A,{data:f,onPageChange:K,page:V,count:G,limit:Q})]}),Object(F.jsx)(E.a,{className:"enhancedTable_dialog",open:W.open,config:W.config,onClose:be})]})};t.a=Object(D.withRouter)(Object(S.memo)(J))},395:function(e,t,n){"use strict";var a=n(13),i=n(0),o=n(55);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(i.useState)(null),r=Object(a.a)(n,2),c=r[0],l=r[1],s=Object(i.useState)(!1),d=Object(a.a)(s,2),j=d[0],u=d[1],b=Object(i.useState)(null),h=Object(a.a)(b,2),O=h[0],f=h[1],x=Object(i.useState)(!1),m=Object(a.a)(x,2),p=m[0],v=m[1];function g(){Object(o.b)({uri:e,callback:t,showTriggers:!1}).then((function(e){e.data&&l(e.data)})).finally((function(){u(!1),v(!1)}))}return Object(i.useEffect)((function(){u(!0),l(null),f(null),g()}),[e]),{data:c,loading:j,error:O,refetch:function(){v(!0),g()},isRefetching:p}}}}]);
//# sourceMappingURL=24.d84fa5ad.chunk.js.map