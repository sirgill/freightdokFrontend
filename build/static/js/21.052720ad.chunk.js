(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[21],{1119:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return oe}));var c=n(198),a=n(503),o=n(716),r=n.n(o),i=n(245),s=n(0),l=n.n(s),d=n(13),j=n(72),b=n(376),h=n.n(b),u=n(368),x=n(546),p=n(649),O=n(998),g=n(1074),m=n(197),f=n(87),v=n(44),C=n(287),y=n(713),w=n.n(y),S=(n(145),n(553),n(1139)),k=n(1141),N=n(1078),F=n(1116),P=n(1080),I=n(715),D=n.n(I),R=n(714),T=n.n(R),A=n(2);const L=[{label:"Detention",cost:"67"},{label:"Loads",cost:"1000"},{label:"Lumper",cost:"786"}],M=e=>{let{serviceName:t,amount:n,price:c,quantity:a,description:o,index:r,deleteService:l,onChangeService:d}=e;const j=e=>{const t=e.target.name,n=e.target.value;d&&d(r,{name:t,value:n})};return Object(A.jsx)(s.Fragment,{children:Object(A.jsxs)("tr",{className:"invoiceServiceRow",children:[Object(A.jsx)("td",{children:t}),Object(A.jsx)("td",{children:Object(A.jsx)(C.a,{name:"description",value:o,onChange:j,className:"serviceInputField",placeholder:"Enter item description"})}),Object(A.jsx)("td",{children:Object(A.jsx)(C.a,{name:"quantity",onChange:e=>{const t=e.target.name,n=parseInt(e.target.value);d(r,{name:t,value:n})},onBlur:(e,t)=>{+t<0?d&&(d(r,{name:e,value:1}),d(r,{name:"amount",value:parseInt(c)})):d&&(d(r,{name:e,value:t}),d(r,{name:"amount",value:parseInt(c)*+t}))},className:"serviceInputField",type:"number",value:a})}),Object(A.jsx)("td",{children:Object(A.jsx)(C.a,{name:"price",onChange:j,value:c,className:"serviceInputField"})}),Object(A.jsx)("td",{children:n?"$".concat(parseFloat(n).toFixed(2)):"$0.00"}),Object(A.jsx)("td",{children:Object(A.jsx)(i.a,{onClick:l.bind(null,r),className:"deleteService",children:Object(A.jsx)(T.a,{color:"error"})})})]})})},B=e=>{let{handleClose:t,anchorEl:n,onAddNewService:c}=e;const[o,r]=Object(s.useState)(L),i=e=>{c&&c(e),t()};return Object(A.jsx)(S.b,{id:"jugal",anchorEl:n,open:Boolean(n),onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"left"},children:Object(A.jsxs)(a.a,{sx:{p:2,width:500},children:[Object(A.jsx)(a.a,{children:Object(A.jsx)(C.a,{name:"search",autoFocus:!0,placeholder:"Type on item name",onChange:e=>{const t=e.target.value.toLowerCase();if(t){const e=o.filter((e=>e.label.toLowerCase().includes(t)));r(e)}else r(L)}})}),Object(A.jsx)(a.a,{children:Object(A.jsx)(k.a,{children:o.map((e=>Object(A.jsx)(N.a,{onClick:i.bind(null,e),children:Object(A.jsx)(F.a,{disablePadding:!0,secondaryAction:Object(A.jsx)("span",{className:"listButtonPickerCost",children:"$"+e.cost}),children:Object(A.jsx)(P.a,{primary:e.label})})},e.label)))})}),Object(A.jsx)(a.a,{children:Object(A.jsx)(O.a,{startIcon:Object(A.jsx)(D.a,{}),children:"Create a new Item"})})]})})};var E=e=>{let{services:t,onAddNewService:n,onChangeService:c,deleteService:a}=e;const[o,r]=l.a.useState(null),i=Object(s.useMemo)((()=>t.map(((e,t)=>Object(A.jsx)(M,{...e,index:t,onChangeService:c,deleteService:a},t)))),[t]);return Object(A.jsxs)(l.a.Fragment,{children:[Object(A.jsxs)("table",{className:"invoiceServiceTable",children:[Object(A.jsxs)("tr",{className:"tableHeader",children:[Object(A.jsx)("th",{children:"Services"}),Object(A.jsx)("th",{}),Object(A.jsx)("th",{children:"Quantity"}),Object(A.jsx)("th",{children:"Price"}),Object(A.jsx)("th",{children:"Amount"}),Object(A.jsx)("th",{})]}),i,Object(A.jsx)("tr",{className:"addNewItemRow",children:Object(A.jsx)("td",{className:"addNewItem",onClick:e=>{r(e.currentTarget)},children:Object(A.jsx)(O.a,{sx:{width:135},startIcon:Object(A.jsx)(D.a,{}),children:"Add new item"})})})]}),Object(A.jsx)(B,{handleClose:()=>{r(null)},anchorEl:o,onAddNewService:n})]})},z=n(89),U=n(288),W=n(104),q=n(266);const H=e=>{let{name:t,sx:n={},variant:c="body1",children:a}=e;return Object(A.jsx)(f.a,{sx:{fontWeight:700,...n},variant:c,children:a||t})},Y=l.a.forwardRef(((e,t)=>{const{pdf:n,setNotes:c,brokerage:o,loadNumber:r,getTotal:i,onChangeService:s,services:l,addService:d,deleteService:j,notes:b,rateConfirmation:h,proofDelivery:u,accessorials:x,reactToPrintContent:p,reactToPrintTrigger:O,docFileViewer:y}=e,{orgName:S}=Object(z.f)().user;return Object(A.jsxs)("div",{ref:t,className:"printArea",children:[Object(A.jsxs)(m.a,{container:!0,direction:"column",sx:{display:"inline-flex"},children:[Object(A.jsx)("style",{type:"text/css",media:"print",children:"               @page { size: portrait; }          "}),Object(A.jsx)(m.a,{item:!0,xs:12,sx:{p:3},children:Object(A.jsxs)(m.a,{container:!0,justifyContent:"space-between",children:[Object(A.jsx)(m.a,{item:!0,sx:{flexGrow:1},children:Object(A.jsx)(a.a,{spacing:1,children:Object(A.jsx)(a.a,{children:Object(A.jsx)(f.a,{sx:{textAlign:"left"},variant:"h5",children:S})})})}),Object(A.jsx)(m.a,{item:!0,children:Object(A.jsxs)(a.a,{children:[Object(A.jsx)(a.a,{children:Object(A.jsx)(f.a,{variant:"h5",sx:{textAlign:"right"},children:"Invoice"})}),Object(A.jsx)(a.a,{className:"notesStack",children:Object(A.jsx)(C.a,{label:"Notes",type:"textarea",onChange:e=>c(e.target.value)})})]})})]})}),Object(A.jsx)(g.a,{sx:{borderBottomWidth:"thin",borderColor:v.b}}),Object(A.jsx)(m.a,{xs:12,item:!0,children:Object(A.jsxs)(m.a,{container:!0,justifyContent:"space-between",children:[Object(A.jsx)(m.a,{item:!0,children:Object(A.jsxs)(a.a,{spacing:1,sx:{p:3},children:[Object(A.jsx)(a.a,{children:Object(A.jsx)(f.a,{children:"Bill To:"})}),Object(A.jsx)(a.a,{children:Object(A.jsx)(H,{sx:{fontWeight:700},children:o})})]})}),Object(A.jsx)(m.a,{item:!0,children:Object(A.jsx)(a.a,{justifyContent:"space-between",sx:{height:"100%"},children:Object(A.jsxs)(a.a,{direction:"row",alignItems:"center",spacing:2,p:3,children:[Object(A.jsx)(H,{children:"Load Number: "}),Object(A.jsx)(H,{children:r})]})})})]})}),Object(A.jsx)(g.a,{sx:{borderBottomWidth:"thin",borderColor:v.b}}),Object(A.jsxs)(m.a,{item:!0,sx:{p:2},display:"inherit",direction:"column",children:[Object(A.jsx)(a.a,{sx:{textAlign:"right"},children:Object(A.jsxs)(H,{children:["Total: ",i()||"- -"]})}),Object(A.jsxs)(m.a,{container:!0,alignItems:"end",justifyContent:"space-between",children:[Object(A.jsx)(m.a,{item:!0,xs:12,className:"invoiceServiceWrapperGrid",children:Object(A.jsx)(E,{onChangeService:s,services:l,onAddNewService:d,deleteService:j})}),Object(A.jsx)(m.a,{xs:3,item:!0,children:Object(A.jsxs)(f.a,{className:"notesPrintBlock",children:["Notes: ",b||"N.A"]})}),Object(A.jsx)(m.a,{xs:5,item:!0,children:Object(A.jsxs)(a.a,{justifyContent:"center",gap:"10px",className:"stack_Uploaders",children:[Object(A.jsxs)(a.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(A.jsxs)("label",{htmlFor:"rateCon",children:[Object(A.jsx)(f.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Rate Con"}),Object(A.jsx)("input",{type:"file",accept:"pdf",id:"rateCon",style:{display:"none"}})]}),Object(A.jsx)("div",{children:Object(z.b)(!!h.length)})]}),Object(A.jsxs)(a.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(A.jsxs)("label",{htmlFor:"pod",children:[Object(A.jsx)(f.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Proof Of Delivery"}),Object(A.jsx)("input",{type:"file",accept:"pdf",id:"pod",style:{display:"none"}})]}),Object(A.jsx)("div",{children:Object(z.b)(!!u.length)})]}),Object(A.jsxs)(a.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(A.jsxs)("label",{htmlFor:"accessorials",children:[Object(A.jsx)(f.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Accessorials"}),Object(A.jsx)("input",{type:"file",accept:"pdf",id:"accessorials",style:{display:"none"}})]}),Object(A.jsx)("div",{children:Object(z.b)(!!x.length)})]})]})}),Object(A.jsx)(m.a,{xs:3,item:!0,display:"flex",justifyContent:"end",children:Object(A.jsx)(w.a,{content:p,documentTitle:"Invoice",removeAfterPrint:!0,trigger:O,pageStyle:"portrait",onPrintError:e=>console.error("React to print error",e),onBeforePrint:()=>new Promise((e=>{setTimeout((()=>{console.log("waiting for print"),e("")}),1e3)})),fonts:[{family:"Open Sans",source:""}]})})]})]})]}),y]})})),K=e=>{let{transition:t,handleClose:n,open:a,data:o,pdf:r,getTotal:i,services:d,addService:j,onChangeService:b,deleteService:h,notes:u,setNotes:g,saveServices:m}=e;const f=l.a.useRef(null),{brokerage:v="",loadNumber:C="",pickup:y=[],drop:w=[],rate:S="",accessorials:k=[],proofDelivery:N=[],rateConfirmation:F=[],bucketFiles:P}=o||{},I=e=>{let{pdfUrl:t,pdfFileName:n}=e;const[a,o]=Object(s.useState)([]);return Object(s.useEffect)((()=>{const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js",e.async=!0,e.onload=async()=>{const e=await fetch("https://cors.freightdok.io/".concat(t)).then((e=>e.headers.get("content-type").equalsIgnoreCase("application/pdf")?e.blob():null));if(e){const t=new FileReader;t.onload=()=>{const e=t.result,n=window["pdfjs-dist/build/pdf"];n.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(n.version,"/pdf.worker.js"),n.getDocument({data:e}).promise.then((e=>{const t=e.numPages,n=[];for(let c=1;c<=t;c++)n.push(e.getPage(c));Promise.all(n).then((e=>{const t=e.map((e=>{const t=e.getViewport({scale:2}),n=document.createElement("canvas"),c=n.getContext("2d");n.height=t.height,n.width=t.width;const a={canvasContext:c,viewport:t};return e.render(a).promise.then((()=>n.toDataURL()))}));Promise.all(t).then((e=>{o(e)}))}))}))},t.readAsArrayBuffer(e)}else o(!1)},document.body.appendChild(e)}),[t]),a?Object(A.jsx)(A.Fragment,{children:Object(A.jsx)("div",{style:{position:"relative",minHeight:"100vh"},children:a.map(((e,t)=>Object(A.jsx)("img",{src:e,alt:"Page ".concat(t+1),style:{width:"100%"}},t)))})}):Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(c.a,{sx:{position:"relative",minHeight:"100vh",display:"flex",justifyContent:"center"},children:Object(A.jsx)("img",{className:"printThisFull",src:t,alt:n,style:{width:"1100px",height:"1200px",objectFit:"contain"}})})})},D=l.a.useMemo((()=>P&&P.map((e=>Object(A.jsx)("div",{className:"bucketImageContainer",children:Object(A.jsx)("div",{children:Object(A.jsx)(I,{pdfUrl:e.fileLocation,pdfFileName:e.fileName})})})))),[P]),R=l.a.useCallback((()=>(m&&m(),f.current)),[f.current,m]),T=l.a.useCallback((()=>Object(A.jsx)(O.a,{className:"printInvoice",variant:"contained",disabled:!d.length,children:"Create Invoice"})),[d]);return Object(A.jsx)(x.a,{className:"printThisFull",PaperProps:{sx:{width:"70%"}},open:a,onClose:n,TransitionComponent:t,maxWidth:"lg",children:Object(A.jsx)(p.a,{sx:{p:0},children:Object(A.jsx)(Y,{ref:f,pdf:r,setNotes:g,brokerage:v,loadNumber:C,getTotal:i,onChangeService:b,services:d,addService:j,deleteService:h,notes:u,rateConfirmation:F,proofDelivery:N,accessorials:k,reactToPrintContent:R,docFileViewer:D,reactToPrintTrigger:T})})})};var _=e=>{let{match:{params:{id:t=""}={}}={}}=e;const[n,c]=Object(s.useState)(!1),[a,o]=Object(s.useState)(!1),[r,i]=Object(s.useState)([]),[j,b]=Object(s.useState)(""),{mutation:h,loading:x}=Object(q.a)("/api/create-invoicev2",null),{data:{data:p={}}={}}=Object(U.a)(W.b+"/".concat(t)),{loadNumber:O=null}=p||{};Object(s.useEffect)((()=>{c(!0)}),[]);const g=Object(s.useMemo)((()=>l.a.forwardRef((function(e,t){const n=Object(d.useHistory)();return Object(A.jsx)(u.a,{ref:t,...e,onExited:()=>n.goBack()})}))),[]),m=Object(s.useCallback)((()=>{const e=r.reduce(((e,t)=>parseFloat(t.amount)+e),0);return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.toFixed(2))}),[r]);return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(K,{open:n,handleClose:function(e){c(!1)},transition:g,data:p,pdf:a,services:r,addService:e=>{const{label:t,cost:n}=e;let c={serviceName:t,description:"",quantity:1,price:n,amount:n};i([...r,c])},onChangeService:(e,t)=>{let{name:n,value:c}=t;const a=r[e];a[n]=c;const o=[...r];o[e]=a,i(o)},getTotal:m,deleteService:e=>{const t=r;t.splice(e,1),i([...t])},notes:j,setNotes:b,saveServices:()=>{h({services:r,notes:j,loadNumber:O},"post",(e=>{let{data:t,success:n}=e}))}})})},G=n(73),V=n.n(G),$=n(275),J=n(471),Q=n.n(J),X=n(464),Z=n(65),ee=n(326),te=n(271),ne=n(258),ce=n(27);const ae={title:"Move invoice"};function oe(){const{edit:e=!1}=Z.a.getUserPermissionsByDashboardId("invoices")||{},{path:t}=Object(d.useRouteMatch)(),{mutation:n,loading:o}=Object(q.a)("/create-be-invoice-pdf",null,!0),{data:l,loading:b,page:u,limit:x,onPageChange:p,onLimitChange:O,refetch:g,isPaginationLoading:m,isRefetching:f}=Object(ee.a)("/api/load/invoice_loads"),[v,C]=Object(s.useState)([]),{loads:y,total:w}=l||{},S={rowCellPadding:"normal",headerCellSx:{pt:1,pb:1},emptyMessage:"No Invoices found",showRefresh:!0,page:u,limit:x,count:w,onPageChange:function(){p(...arguments),k()},onLimitChange:function(){O(...arguments),k()},showCheckbox:!0,columns:[{id:"loadNumber",label:"Load Number"},{id:"country",label:"Pickup City/State",renderer:e=>{let{row:t}=e;return Object(A.jsxs)(s.Fragment,{children:[t.pickup[0].pickupCity,", ",t.pickup[0].pickupState]})}},{id:"pickupDate",label:"Pickup Date",renderer:e=>{let{row:{pickup:t=[]}={}}=e;const[{pickupDate:n=""}]=t;return V()(n).format("MM/DD/YYYY")}},{id:"deliveryCountry",label:"Delivery City/State",renderer:e=>{let{row:t}=e;return Object(A.jsxs)(s.Fragment,{children:[t.drop[0].dropCity,", ",t.drop[0].dropState]})}},{id:"deliveryDate",label:"Delivery Date",renderer:e=>{let{row:{drop:t=[]}={}}=e;const[{dropDate:n=""}]=t;return V()(n).format("MM/DD/YYYY")}},{id:"assigned",label:"Assigned To",renderer:e=>{let{row:t}=e;const{user:n={}}=({}=t||{}),{name:c="",firstName:a,lastName:o}=n||{};return c||"".concat(a||"--"," ").concat(o||"")}},{id:"accessorials",label:"Accessorials",valueFormatter:e=>(e||[]).join(", ")},{id:"company",label:"Company",renderer:e=>{let{row:t}=e;return null===t||void 0===t?void 0:t.brokerage},emptyState:"--"},{id:"rate",label:"Rate",emptyState:"--",valueFormatter:e=>e?Object(z.d)(e):""},{id:"updatedAt",label:"Updated On",valueFormatter:e=>new Date(e).toLocaleString()},{id:"",label:"Invoice",visible:!!e,renderer:e=>{let{row:n}=e;return Object(A.jsxs)(a.a,{direction:"row",children:[Object(A.jsx)(te.a,{title:"Create Invoice",placement:"top",children:Object(A.jsx)(i.a,{component:j.b,to:t+"/"+n._id,variant:"outlined",color:"primary",children:Object(A.jsx)(h.a,{})})}),n.invoiceUrl&&Object(A.jsx)(te.a,{title:"Server Invoice",placement:"top",children:Object(A.jsx)(i.a,{onClick:e=>{e.preventDefault(),window.open(n.invoiceUrl,"_blank")},variant:"outlined",color:"primary",children:Object(A.jsx)(r.a,{sx:{color:"red"}})})})]})}},{id:"",label:"Move",visible:!!e,renderer:e=>{let{row:n}=e;return Object(A.jsx)(i.a,{component:j.b,to:t+"/moveToMyLoads/"+n._id,variant:"outlined",color:"primary",children:Object(A.jsx)(Q.a,{})})}}]},k=()=>C([]),N=Object(A.jsx)(c.a,{children:Object(A.jsx)(ne.d,{variant:"contained",disabled:!v.length,isLoading:o,loadingText:"Please Wait...",onClick:()=>{n({loadIds:v},null,(e=>{let{success:t,data:n}=e;n.data.length&&n.data.forEach(((e,t)=>{setTimeout((()=>{Object(ce.a)(e.message,e.invoiceCreated?"success":"error")}),2e3*t)})),t&&(k(),g())}))},children:"Upload on Triumph"})});return Object(A.jsx)(c.a,{sx:{height:"inherit"},children:Object(A.jsxs)(s.Fragment,{children:[Object(A.jsx)($.a,{config:S,data:y,loading:b,onRefetch:()=>{g(),k()},isRefetching:f,isPaginationLoading:m,onCheckboxChange:(e,t)=>{t.preventDefault();const n=e.loadNumber,c=v.indexOf(n);let a=[...v];c>-1?a=a.toSpliced(c,1):a.push(n),C(a)},checkboxes:v,checkboxKey:"loadNumber",actions:N}),e&&Object(A.jsx)(d.Route,{path:t+"/moveToMyLoads/:id",render:e=>Object(A.jsx)(X.a,{onCloseUrl:t,getInvoices:g,modalConfig:ae,...e})}),e&&Object(A.jsx)(d.Route,{path:t+"/:id",exact:!0,component:_,onCloseUrl:t})]})})}},266:function(e,t,n){"use strict";var c=n(0),a=n(48),o=n(89);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const[i,s]=Object(c.useState)(!1);return{mutation:async function(c){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post",l=arguments.length>2?arguments[2]:void 0,d=e;r.queryParams&&(d=d+"?"+Object(o.j)(r.queryParams)),s(!0),i||(i="post");const j=(e=>{let t;switch(e){case"put":t=a.e;break;case"delete":t=a.a;break;case"patch":t=a.c;break;default:t=a.d}return t})(i.toLowerCase());if(j)return j({uri:d,callback:t,body:c,showTriggers:n}).then((e=>(l&&l({...e}),e))).catch((e=>e)).finally((()=>{s(!1)}))},loading:i}}},267:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var c=n(368),a=n(233),o=n(0),r=n.n(o),i=n(9),s=n(32),l=n(546),d=n(547),j=n(649),b=n(245),h=n(272),u=n.n(h),x=n(13),p=n(89),O=n(74),g=n(2);const m=Object(i.a)(l.a)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),f=e=>{const{children:t,onClose:n,showClose:c,titleStyles:a,...o}=e;return Object(g.jsxs)(d.a,{sx:{m:0,p:2,textAlign:"center",...a},...o,children:[c?Object(g.jsx)(b.a,{"aria-label":"close",onClick:n,sx:{position:"absolute",left:8,top:12,color:e=>e.palette.grey[500]},children:Object(g.jsx)(u.a,{})}):null,t]})};function v(e){const{config:t={},children:n,closeCallback:i}=e,{title:l="",closeUrl:d="",showClose:b=!0,paperProps:h={},preventBackdropClick:u=!1,titleStyles:v={}}=t,[C,y]=r.a.useState(!1),w=Object(s.a)(),S=Object(a.a)(w.breakpoints.down("sm")),k=function(e){u&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropClick")||y(!1)};r.a.useEffect((()=>(y(!0),Object(p.a)(window,"closeModal",k),()=>Object(p.i)(window,"closeModal",k))),[]);const N=Object(o.useMemo)((()=>r.a.forwardRef((function(e,t){const n=Object(x.useHistory)();return Object(g.jsx)(c.a,{ref:t,...e,onExited:()=>i?i():d?n.push(d||O.a):n.goBack()})}))),[]);return Object(g.jsxs)(m,{onClose:k,"aria-labelledby":l||"customized-dialog-title",open:C,maxWidth:"lg",TransitionComponent:N,PaperProps:h,fullScreen:S,children:[l&&Object(g.jsx)(f,{id:l||"customized-dialog-title",onClose:k,showClose:b,titleStyles:v,children:l}),Object(g.jsx)(j.a,{dividers:!0,sx:{borderTop:"none"},children:n})]})}},269:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var c=n(0),a=n(998),o=n(546),r=n(1002),i=n(649),s=n(547),l=n(234),d=n(2);const j=c.forwardRef((function(e,t){return Object(d.jsx)(l.a,{direction:"up",ref:t,...e})}));function b(e){const{open:t=!1,config:n,onClose:c,preventBackdropClose:l=!1,className:b}=e,{title:h,onOk:u,okText:x="Save",content:p,onCancel:O}=n,g=function(e){l&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropclick")||c()};return Object(d.jsx)("div",{children:Object(d.jsxs)(o.a,{className:b,open:t,TransitionComponent:j,onClose:g,"aria-describedby":"alert-dialog-slide-description",children:["function"===typeof h?h({...n}):Object(d.jsx)(s.a,{sx:{fontWeight:550},children:h}),Object(d.jsx)(i.a,{children:"function"===typeof p?p({config:n}):p}),Object(d.jsxs)(r.a,{children:["function"===typeof O?O({config:n,onClose:c}):Object(d.jsx)(a.a,{variant:"outlined",onClick:g,children:"Cancel"}),"function"===typeof x?x({config:n,onOk:u}):Object(d.jsx)(a.a,{variant:"contained",color:x.equalsIgnoreCase("delete")?"error":"primary",onClick:u,children:x})]})]})})}},275:function(e,t,n){"use strict";var c=n(198),a=n(244),o=n(1151),r=n(1140),i=n(1152),s=n(503),l=n(296),d=n.n(l),j=n(1150),b=n(1149),h=n(999),u=n(197),x=n(87),p=n(1111),O=n(245),g=n(1148),m=n(1122),f=n(304),v=n.n(f),C=n(1147),y=n(256),w=n.n(y),S=n(284),k=n.n(S),N=n(0),F=n.n(N),P=n(13),I=n(1101),D=n(9),R=n(258),T=n(2);const A=Object(D.a)(I.a)((e=>{let{theme:t}=e;return{"& .MuiPaginationItem-root":{[t.breakpoints.down("md")]:{height:"1.8rem",width:"1rem"}}}})),L=Object(D.a)(s.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{justifyContent:"center"},display:"flex",justifyContent:"space-between",flexWrap:"wrap","& .pageSizeSelect":{width:80}}}));var M=e=>{let{data:t=[],onPageChange:n,page:c=1,count:a=0,limit:o=1,onLimitChange:r,isLoading:i}=e;const[l,d]=Object(N.useState)(0);Object(N.useEffect)((()=>{Array.isArray(t)&&d(t.length)}),[t]);return a<=5?null:Object(T.jsxs)(L,{direction:"row",alignItems:"center",children:[Object(T.jsxs)(x.a,{sx:{color:"#525F7F"},fontSize:12,children:["Showing ",l," of ",a," entries"]}),Object(T.jsxs)(s.a,{direction:"row",alignItems:"center",children:[Object(T.jsx)(R.f,{disabled:i,name:"pageSize",label:"",value:o,options:[{id:5,label:5},{id:10,label:10},{id:20,label:20},{id:50,label:50},{id:100,label:100}],className:"pageSizeSelect",onChange:e=>{let{value:t}=e;"function"===typeof r&&r({value:t})}}),Object(T.jsx)(A,{disabled:i,count:Math.ceil(a/o),color:"primary",variant:"contained",page:c,size:"medium",onChange:(e,t)=>{+c!==+t&&"function"===typeof n&&n(e,+t)}})]})]})},B=n(279),E=n(269),z=n(89),U=n(271);const W=Object(D.a)(C.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:12,padding:"0 8px"}}})),q=Object(D.a)(v.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:14}}}));function H(e){let{columns:t=[],config:n={},role:c,handleRequestSort:a,hasSort:o}=e;const{headerCellSx:r={},hasDelete:i,sortField:s,sortOrder:l,showCheckbox:d}=n,j=Object(N.useMemo)((()=>t.map(((e,t)=>{const{label:n="",id:i="",visible:d=!0,sort:j=!1}=e||{};return(w.a.isFunction(d)?d({column:e,role:c}):d)?Object(T.jsx)(W,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...r},children:o&&j?Object(T.jsx)(m.a,{onClick:e=>a(e,i),active:i===s,direction:l,sx:{...r},children:n}):n},i||t):null}))),[t,r]);return d&&j.unshift(Object(T.jsx)(W,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...r}})),Object(T.jsxs)(g.a,{children:[j,i&&Object(T.jsx)(W,{padding:"none",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...r}})]})}const Y=e=>{let{columns:t,data:n=[],config:c={},handleRowClick:a,handleDelete:o,...r}=e;return(n||[]).map(((e,n)=>{const{dataKey:i=""}=c;return i&&(e=e[i]),(e=>{let{row:t=[],columns:n={},config:c={},handleRowClick:a,rowIndex:o,handleDelete:r,hasDeletePermission:i,checkboxKey:s,...l}=e;const{hasDelete:d=!1,rowCellPadding:j="none",onRowClick:b,rowStyleCb:h,showCheckbox:u=!1}=c,{role:x,onCheckboxChange:m,checkboxes:f}=l;let v={};h&&(v=h({row:t})||{});const C=Object(T.jsx)(W,{sx:{},padding:"none",component:"th",scope:"row",children:Object(T.jsx)(U.a,{title:"Delete",placement:"top",children:Object(T.jsx)(O.a,{onClick:r.bind(void 0,t._id,t),disabled:!i,children:Object(T.jsx)(q,{color:"error"})})})}),y=n.map(((e,n)=>{const{id:c="",renderer:a,emptyState:r="--",valueFormatter:i,visible:s=!0,cellPadding:l}=e||{};if(!(w.a.isFunction(s)?s({column:e,role:x}):s))return null;let d;return d=i&&w.a.isFunction(i)?i(t[c]):w.a.isFunction(a)?a({row:t,role:x},o)||r:w.a.get(t,c,r)||r,Object(T.jsx)(W,{padding:l||j||"normal",component:"th",scope:"row",children:d},c+n)}));if(u){if(!s)throw new Error("Checkbox key not provided");const e=f.indexOf(t[s])>-1;y.unshift(Object(T.jsx)(W,{onClick:m.bind(void 0,t),children:Object(T.jsx)(p.a,{checked:e})}))}return Object(T.jsxs)(g.a,{hover:!!b,onClick:e=>{e.preventDefault(),w.a.isFunction(a)&&a(t)},sx:b?{cursor:"pointer",...v}:{...v},children:[y,d&&C]},o)})({row:e,columns:t,config:c,handleRowClick:a,rowIndex:n,handleDelete:o,...r})}))},K=e=>{let{config:t={},data:n=[],history:l,loading:p=!1,onRefetch:g,isRefetching:m,actions:f,isPaginationLoading:v=!1,...C}=e;n=n||[];const{onCheckboxChange:y,checkboxes:S,checkboxKey:P}=C,[I,D]=Object(N.useState)({}),[R,A]=Object(N.useState)({open:!1,config:{}}),{columns:L=[],onRowClick:U,hasOnClickUrl:W=!0,onPageChange:q,page:K,count:_,limit:G,onPageSizeChange:V,onLimitChange:$,size:J="medium",emptyMessage:Q="",onRowClickDataCallback:X,showRefresh:Z=!1,onDelete:ee,deleteMessage:te,deletePermissions:ne=[],containerHeight:ce="",sortField:ae,sortOrder:oe="asc",handleSortChange:re,hasSort:ie=!1}=t,{role:se=""}=Object(z.f)().user,le="boolean"===typeof ne?ne:ne.indexOf(se)>-1||!1,de=F.a.useRef([]),je=Array.isArray(n)&&n.length,be=Object(N.useMemo)((()=>f&&F.a.isValidElement(f)?f:Object(T.jsx)(T.Fragment,{})),[f]),he=e=>{if(W&&U){const t=U(e);X&&(e=X(e)),l.push(t,e)}else U&&U(e)},ue=(e,t)=>{re&&re({field:t,order:ae===t&&"asc"===oe?"desc":"asc"})},xe=(e,t,n)=>{n.stopPropagation();const c={title:()=>Object(T.jsxs)(u.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(T.jsx)(k.a,{color:"error"}),Object(T.jsx)(x.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]}),okText:"Delete",onOk:()=>ee(e,pe,{row:t}),content:()=>Object(T.jsx)(h.a,{sx:{color:"#000"},children:w.a.isFunction(te)?te({row:t}):te||"Are you sure you want to delete the record?"})};A({...R,open:!0,config:c})};function pe(){A({...R,open:!1})}const Oe=Object(N.useMemo)((()=>je?Object(T.jsxs)(N.Fragment,{children:[Object(T.jsx)(b.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(T.jsx)(H,{columns:L,config:t,role:se,handleRequestSort:ue,hasSort:ie})}),Object(T.jsx)(j.a,{children:Object(T.jsx)(Y,{role:se,columns:L,data:n,config:t,checkboxes:S,checkboxKey:P,handleRowClick:he,handleDelete:xe,onCheckboxChange:y,hasDeletePermission:le})})]}):Object(T.jsx)("tbody",{style:{height:300},children:Object(T.jsx)("tr",{children:Object(T.jsx)("td",{style:{textAlign:"center"},children:Object(T.jsx)("h4",{children:Q||"No records found"})})})})),[n,t,S]);return Object(N.useEffect)((()=>{var e;if(null!==de&&void 0!==de&&null!==(e=de.current)&&void 0!==e&&e.table){const e=de.current.table.offsetHeight;D({...I,height:e>200?e:void 0})}}),[]),Object(N.useEffect)((()=>{var e;(v||m)&&null!==(e=de.current)&&void 0!==e&&e.tableContainer&&de.current.tableContainer.scrollTo(0,0)}),[v,m]),Object(T.jsxs)(c.a,{className:"enhanced-table",sx:{height:je&&!p?ce||"95%":"auto"},children:[Object(T.jsxs)(s.a,{alignItems:"flex-end",justifyContent:"flex-end",direction:"row",py:1,gap:.5,children:[be,Z&&Object(T.jsx)(O.a,{title:"Refresh",onClick:g,children:Object(T.jsx)(d.a,{className:m?"rotateIcon":void 0})})]}),Object(T.jsxs)(o.a,{component:a.a,className:"",ref:e=>de.current.tableContainer=e,sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2,height:je&&!p?"calc(100% - 80px)":"auto",position:"relative"},children:[p?(()=>{const e=window.innerHeight-180,t=(I.height?I.height>e?e:I.height:e)||e;return Object(T.jsx)(u.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(T.jsx)(u.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(T.jsx)(B.a,{})})})})():Object(T.jsx)(i.a,{ref:e=>de.current.table=e,"aria-label":"caption table",size:J,stickyHeader:!0,children:Oe}),Object(T.jsx)(r.a,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,position:"absolute"},open:v||m||!1,children:Object(T.jsx)(B.a,{sx:{color:"inherit"}})})]}),!p&&n.length>0&&Object(T.jsx)(M,{data:n,onPageChange:q,page:K,count:_,limit:G,onLimitChange:$||V,isLoading:m||v}),Object(T.jsx)(E.a,{className:"enhancedTable_dialog",open:R.open,config:R.config,onClose:pe})]})};t.a=Object(P.withRouter)(Object(N.memo)(K))},287:function(e,t,n){"use strict";var c=n(87),a=(n(0),n(256)),o=n.n(a),r=n(703),i=n(704),s=n(2);const l=e=>{const{label:t="",type:n="text",options:c=[],labelKey:a="label",valueKey:i="id",onChangeSelect:l,showFirstBlank:d=!1,onBlur:j}=e;if(delete(e=o.a.cloneDeep(e)).showFirstBlank,"select"===n.toLowerCase()){Array.isArray(c)&&c.length||console.error("Options are mandatory in array format");const o=(c||[]).map((e=>Object(s.jsx)("option",{value:e[i],children:e[a]},e[i])));return d&&o.unshift(Object(s.jsx)("option",{value:"",children:"Select an option"})),Object(s.jsx)(r.a,{...e,onChange:l,id:t,type:n,children:o})}return Object(s.jsx)(r.a,{id:t,type:n,...e,onBlur:j})};t.a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{label:t="",type:n="text",multiple:a=!1,onChange:o,labelStyle:r={},direction:d="column",formGrpStyle:j={},errorText:b="",onBlur:h}=e;return Object(s.jsxs)(i.a,{style:"row"===d?{display:"flex",alignItems:"center",...j}:{...j},children:[t&&Object(s.jsx)("label",{className:"form-control-label",htmlFor:t,style:{color:"#525F7F",marginRight:8,...r},children:t}),Object(s.jsx)(l,{...e,onChangeSelect:e=>{if("select"===n.toLowerCase()&&a){const{options:t,name:n}=e.target,c=[];for(let e=0,a=t.length;e<a;e++)t[e].selected&&c.push(t[e].value);o&&o(e,c,n)}else o&&o(e)},onBlur:e=>{h&&h(e.target.name,e.target.value)}}),b&&Object(s.jsx)(c.a,{variant:"subtitle2",sx:{color:"red",fontSize:"0.75em"},children:b})]})}},288:function(e,t,n){"use strict";var c=n(0),a=n(48),o=n(89);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,i]=Object(c.useState)(void 0),[s,l]=Object(c.useState)(!1),[d,j]=Object(c.useState)(null),[b,h]=Object(c.useState)(!1);function u(){let c=e;n.queryParams&&(c="".concat(c,"?").concat(Object(o.j)(n.queryParams))),Object(a.b)({uri:c,callback:t,showTriggers:!1}).then((e=>{e.data&&i(e.data)})).finally((()=>{l(!1),h(!1)}))}return Object(c.useEffect)((()=>{l(!0),j(null),u()}),[e]),{data:r,loading:s,error:d,refetch:function(){h(!0),u()},isRefetching:b}}},326:function(e,t,n){"use strict";var c=n(0),a=n(256),o=n.n(a),r=n(48);t.a=(e,t)=>{const{order:n="asc",orderBy:a,debounceTime:i=500}=t||{},[s,l]=Object(c.useState)([]),[d,j]=Object(c.useState)(!1),[b,h]=Object(c.useState)(1),[u,x]=Object(c.useState)(100),[p,O]=Object(c.useState)(""),[g,m]=Object(c.useState)(!1),[f,v]=Object(c.useState)(!1),[C,y]=Object(c.useState)(!1),[w,S]=Object(c.useState)(a),[k,N]=Object(c.useState)(n),F=Object(c.useRef)(!0);Object(c.useEffect)((()=>{P()}),[e,b,u,w,k]),Object(c.useEffect)((()=>{j(!0)}),[]),Object(c.useEffect)((()=>{const e=o.a.debounce((()=>{F.current||(v(!0),P())}),i);return e(),e.cancel}),[p,i]);const P=Object(c.useCallback)((async()=>{Object(r.b)({uri:"".concat(e,"?page=").concat(b,"&search=").concat(p,"&limit=").concat(u,"&sortField=").concat(w,"&sortOrder=").concat(k)}).then((e=>{const{data:t}=e;l(t)})).catch((e=>{console.error(e.message)})).finally((()=>{j(!1),m(!1),v(!1),y(!1),F.current&&(F.current=!1)}))}),[e,b,u,p,w,k]),I=Object(c.useCallback)(((e,t)=>{m(!0),h(t)}),[]),D=Object(c.useCallback)((e=>{let{value:t}=e;O(t),h(1)}),[]),R=Object(c.useCallback)((e=>{let{value:t}=e;m(!0),h(1),x(t)}),[]),T=Object(c.useCallback)((e=>{let{field:t,order:n}=e;S(t),N(n),m(!0),h(1)}),[]);return{data:s,loading:d,page:b,limit:u,onPageChange:I,handleSearch:D,refetch:()=>{h(1),y(!0),P()},onLimitChange:R,searchQuery:p,isPaginationLoading:g,isSearching:f,isRefetching:C,sortField:w,sortOrder:k,handleSortChange:T}}},464:function(e,t,n){"use strict";var c=n(87),a=n(197),o=n(267),r=n(286),i=n(33),s=n(0),l=n(266),d=n(258),j=n(9),b=n(2);const h={title:"Move Invoice to My Loads",preventBackdropClick:!0},u=Object(j.a)(a.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{width:"auto"},[t.breakpoints.up("sm")]:{width:300}}}));t.a=e=>{const{onCloseUrl:t,getInvoices:n,refetch:j,getLoadStatuses:x,modalConfig:p,match:{params:{id:O}={}}={},history:g}=e,[m,f]=Object(s.useState)(),{mutation:v,loading:C}=Object(l.a)("/api/invoice/moveToMyLoads"),y=x?x(i.d):i.d.map((e=>e.id.equalsIgnoreCase("delivered")?{...e,disabled:!0}:e));return Object(b.jsx)(o.a,{config:p||h,children:Object(b.jsxs)(u,{container:!0,component:"form",spacing:2,onSubmit:e=>{e.preventDefault(),v({id:O,status:m},null,(()=>{n&&n(),j&&j(),g.replace(t)}))},children:[Object(b.jsx)(a.a,{item:!0,children:Object(b.jsx)(c.a,{children:"Select a load status"})}),Object(b.jsx)(a.a,{item:!0,xs:12,children:Object(b.jsx)(r.a,{label:"Status",name:"status",options:y,onChange:e=>{let{value:t}=e;f(t)},value:m,showNone:!0})}),Object(b.jsx)(a.a,{item:!0,xs:12,children:Object(b.jsx)(d.d,{type:"submit",fullWidth:!0,disabled:!m,isLoading:C,loadingText:"Moving...",children:"Move"})})]})})}},553:function(e,t,n){}}]);
//# sourceMappingURL=21.052720ad.chunk.js.map