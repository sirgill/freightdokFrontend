(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{1015:function(e,t,n){"use strict";var r=n(1111),a=n(4),o=n(979),i=(n(1),n(2));t.a=function(e){var t=e.config,n=e.classname,c=void 0===n?"":n,s=e.inStyles,d=void 0===s?{}:s,u=t.open,l=t.message,f=void 0===l?"":l,b=t.severity,v=void 0===b?"":b,j=t.onClose,p=void 0===j?void 0:j,m=t.variant,O={severity:v||void 0,variant:void 0===m?"outlined":m};return"function"===typeof p&&(O.onClose=p),Object(i.jsx)(r.a,{in:u,sx:d,children:Object(i.jsx)(o.a,Object(a.a)(Object(a.a)({className:"alertbase "+c},O),{},{children:f}))})}},1036:function(e,t,n){"use strict";var r=n(13),a=n(1),o=n(50);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(a.useState)(null),i=Object(r.a)(n,2),c=i[0],s=i[1],d=Object(a.useState)(!1),u=Object(r.a)(d,2),l=u[0],f=u[1],b=Object(a.useState)(null),v=Object(r.a)(b,2),j=v[0],p=v[1];function m(){Object(o.b)({uri:e,callback:t,showTriggers:!1}).then((function(e){e.data&&s(e.data)})).finally((function(){return f(!1)}))}return Object(a.useEffect)((function(){f(!0),s(null),p(null),m()}),[e]),{data:c,loading:l,error:j,refetch:m}}},1111:function(e,t,n){"use strict";var r=n(5),a=n(8),o=n(3),i=n(1),c=n(6),s=n(189),d=n(190),u=n(11),l=n(19),f=n(327),b=n(99),v=n(44),j=n(39),p=n(120),m=n(108);function O(e){return Object(m.a)("MuiCollapse",e)}Object(p.a)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);var h=n(2),g=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],x=Object(u.a)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})((function(e){var t=e.theme,n=e.ownerState;return Object(o.a)({height:0,overflow:"hidden",transition:t.transitions.create("height")},"horizontal"===n.orientation&&{height:"auto",width:0,transition:t.transitions.create("width")},"entered"===n.state&&Object(o.a)({height:"auto",overflow:"visible"},"horizontal"===n.orientation&&{width:"auto"}),"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&{visibility:"hidden"})})),y=Object(u.a)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:function(e,t){return t.wrapper}})((function(e){var t=e.ownerState;return Object(o.a)({display:"flex",width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),w=Object(u.a)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:function(e,t){return t.wrapperInner}})((function(e){var t=e.ownerState;return Object(o.a)({width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),C=i.forwardRef((function(e,t){var n=Object(l.a)({props:e,name:"MuiCollapse"}),u=n.addEndListener,p=n.children,m=n.className,C=n.collapsedSize,S=void 0===C?"0px":C,D=n.component,N=n.easing,E=n.in,R=n.onEnter,I=n.onEntered,_=n.onEntering,F=n.onExit,k=n.onExited,L=n.onExiting,Y=n.orientation,z=void 0===Y?"vertical":Y,T=n.style,A=n.timeout,M=void 0===A?f.b.standard:A,q=n.TransitionComponent,B=void 0===q?s.a:q,U=Object(a.a)(n,g),H=Object(o.a)({},n,{orientation:z,collapsedSize:S}),P=function(e){var t=e.orientation,n=e.classes,r={root:["root","".concat(t)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(t)],wrapperInner:["wrapperInner","".concat(t)]};return Object(d.a)(r,O,n)}(H),W=Object(v.a)(),$=i.useRef(),J=i.useRef(null),G=i.useRef(),V="number"===typeof S?"".concat(S,"px"):S,K="horizontal"===z,Q=K?"width":"height";i.useEffect((function(){return function(){clearTimeout($.current)}}),[]);var X=i.useRef(null),Z=Object(j.a)(t,X),ee=function(e){return function(t){if(e){var n=X.current;void 0===t?e(n):e(n,t)}}},te=function(){return J.current?J.current[K?"clientWidth":"clientHeight"]:0},ne=ee((function(e,t){J.current&&K&&(J.current.style.position="absolute"),e.style[Q]=V,R&&R(e,t)})),re=ee((function(e,t){var n=te();J.current&&K&&(J.current.style.position="");var r=Object(b.a)({style:T,timeout:M,easing:N},{mode:"enter"}),a=r.duration,o=r.easing;if("auto"===M){var i=W.transitions.getAutoHeightDuration(n);e.style.transitionDuration="".concat(i,"ms"),G.current=i}else e.style.transitionDuration="string"===typeof a?a:"".concat(a,"ms");e.style[Q]="".concat(n,"px"),e.style.transitionTimingFunction=o,_&&_(e,t)})),ae=ee((function(e,t){e.style[Q]="auto",I&&I(e,t)})),oe=ee((function(e){e.style[Q]="".concat(te(),"px"),F&&F(e)})),ie=ee(k),ce=ee((function(e){var t=te(),n=Object(b.a)({style:T,timeout:M,easing:N},{mode:"exit"}),r=n.duration,a=n.easing;if("auto"===M){var o=W.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(o,"ms"),G.current=o}else e.style.transitionDuration="string"===typeof r?r:"".concat(r,"ms");e.style[Q]=V,e.style.transitionTimingFunction=a,L&&L(e)}));return Object(h.jsx)(B,Object(o.a)({in:E,onEnter:ne,onEntered:ae,onEntering:re,onExit:oe,onExited:ie,onExiting:ce,addEndListener:function(e){"auto"===M&&($.current=setTimeout(e,G.current||0)),u&&u(X.current,e)},nodeRef:X,timeout:"auto"===M?null:M},U,{children:function(e,t){return Object(h.jsx)(x,Object(o.a)({as:D,className:Object(c.a)(P.root,m,{entered:P.entered,exited:!E&&"0px"===V&&P.hidden}[e]),style:Object(o.a)(Object(r.a)({},K?"minWidth":"minHeight",V),T),ownerState:Object(o.a)({},H,{state:e}),ref:Z},t,{children:Object(h.jsx)(y,{ownerState:Object(o.a)({},H,{state:e}),className:P.wrapper,ref:J,children:Object(h.jsx)(w,{ownerState:Object(o.a)({},H,{state:e}),className:P.wrapperInner,children:p})})}))}}))}));C.muiSupportAuto=!0;t.a=C},1128:function(e,t,n){"use strict";n.r(t);var r=n(216),a=n(4),o=n(13),i=n(1),c=n(320),s=n(47),d=n(101),u=n.n(d),l=n(100),f=n(484),b=n(56),v=n(486),j=n(1013),p=n(482),m=n(23),O=n(1053),h=n.n(O),g=n(1052),x=n.n(g),y=function(e){var t=e||{},n=t.bidAmount,r=void 0===n?"":n,a=t.offerStatus,o=t.vendorName,i=t.event_data,c=void 0===i?{}:i,s=c.counter_offer,d=void 0===s?{}:s,u=d.expired_at,l=void 0===u?"":u,f=d.id,b=c.offer,v=(void 0===b?{}:b).external_id,j=r.includes(",")?r.split(","):r;return{amount:Array.isArray(j)?j[j.length-1]:j,offerStatus:a,vendorName:o,external_id:v,expired_at:l,counterOfferId:f}},w=n(18),C=n(22),S=n(50),D=n(75),N=function(){var e=Object(C.a)(Object(w.a)().mark((function e(t,n){var r,a;return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(S.d)({uri:Object(D.d)()+"/newTrulCounterOffer",body:t});case 3:r=e.sent,a=r.data,n&&n(a),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(C.a)(Object(w.a)().mark((function e(t){return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(S.c)({uri:Object(D.d)()+"/newtrulUpdateOfferStatus",body:t});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(C.a)(Object(w.a)().mark((function e(t){return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(S.d)({uri:Object(D.d)()+"/newTrulFinalOffer",body:t});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),I=n(319),_=n(21),F=n(1024),k=n(206),L=n(35),Y=n(1015),z=n(2),T=void 0,A=function(e){var t=e.value,n=e.name,r=e.handleChange,a=Object(i.useState)(t),c=Object(o.a)(a,2),s=c[0],d=c[1];return Object(i.useEffect)((function(){r&&r({name:n,value:s})}),[s,n,r]),Object(z.jsxs)(i.Fragment,{children:[Object(z.jsx)(v.a,{onClick:function(){s>0&&d(s-1)},disabled:s<=0,children:Object(z.jsx)(x.a,{})}),Object(z.jsx)("div",{className:"dollarInput",children:Object(z.jsx)(m.a,{name:"bidAmount",label:"Amount ($)",onChange:function(e){var t=e.target.value;d(t)},type:"number",value:s,className:""})}),Object(z.jsx)(v.a,{onClick:function(){d(parseInt(s)+1)},children:Object(z.jsx)(h.a,{})})]})},M=["final_offer_created","accepted"],q=function(e){var t=e.location,n=(void 0===t?{}:t).state,a=void 0===n?{}:n,c=e.history,s=e.onCloseUrl,d=e.onRefresh,u=a.loadNumber,v=void 0===u?"":u,m=a.vendorName,O=void 0===m?"":m,h=Object(i.useState)("0.00"),g=Object(o.a)(h,2),x=g[0],w=g[1],C=Object(k.a)("/api/bid/deleteBidByLoadNumber/"+v,V).mutation,S=Object(i.useState)({amount:0}),D=Object(o.a)(S,2),q=D[0],B=D[1],U=(null===a||void 0===a?void 0:a.offerStatus)||"",H=M.some((function(e){return e.equalsIgnoreCase(U)}))||!1,P=U.equalsIgnoreCase("COUNTER_OFFER_CREATED"),W=O.equalsIgnoreCase("c.h. robinson"),$=!!q.offerStatus,J=W&&U.equalsIgnoreCase("notconsidered");Object(i.useEffect)((function(){if(O.equalsIgnoreCase("new trul")){var e=y(a);w(e.amount),B(e)}else if(W){var t=function(e){var t=e||{},n=t.bidAmount,r=void 0===n?"":n,a=t.offerStatus,o=t.vendorName,i=t.event_data;return{amount:r,offerStatus:a,vendorName:o,event_data:void 0===i?{}:i}}(a);B(t),w(t.amount)}}),[a,O]);var G=function(e){e.error?Object(_.a)(e.message,"error"):c.goBack()};console.log(q);function V(e,t){e?(G({}),Object(_.a)("Bid success for Load number",v)):Object(_.a)(t.message,"error")}console.log(a);var K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={offerId:q.counterOfferId,mcNumber:I.c,carrierMail:I.a,status:e};if(H){if(O.equalsIgnoreCase("c.h. robinson")){if("reject"===e)return C({},"delete");var n=(new Date).toDateString(),r=(new Date).toTimeString(),o=a.loadDetail.availableLoadCosts[0]||{},i=o.type,u=o.code,l=o.description,f=o.units,b=o.currencyCode,j={carrierCode:I.h.carrierCode,loadNumber:Number(v),emptyDateTime:new Date(n+" "+r).toISOString(),availableLoadCosts:[{type:i,code:u,description:l,units:f,currencyCode:b,sourceCostPerUnit:Number(x)}],emptyLocation:{city:"Greenwood",state:"IN",country:"NA",zip:"46143"},rateConfirmation:{email:Object(L.e)().user.email,name:Object(L.e)().user.name}};return Object(F.b)(v,j,V)}R(t).then((function(e){"error"===e.data.status&&Object(_.a)(e.data.message,"error")})).catch((function(e){return console.log(e)}))}else E(t).then((function(e){"error"===e.data.status?Object(_.a)(e.data.message,"error"):e.data.status.equalsIgnoreCase("success")&&(d&&d(),c.push(s))})).catch((function(e){return console.log(e)}))};return Object(z.jsx)(j.a,{children:Object(z.jsx)(l.a,{sx:{px:3},justifyContent:"center",display:"flex",children:Object(z.jsxs)("form",{onSubmit:function(){},style:{textAlign:"center"},className:"form_bidding",children:[Object(z.jsx)(b.a,{sx:{fontSize:32},children:O||"C.H Robinson"}),Object(z.jsxs)(b.a,{sx:{fontSize:32},children:["Load Number: ",v]}),H&&Object(z.jsx)(b.a,{fontSize:18,sx:{my:3},children:"Final Offer: $".concat(q.amount)}),P&&Object(z.jsx)(b.a,{fontSize:18,children:"Offer: $".concat(q.amount)}),Object(z.jsxs)(f.a,{gap:2,direction:"row",justifyContent:"center",my:2,children:[Object(z.jsx)(r.a,{variant:"contained",color:"success",sx:{px:5},onClick:K.bind(T,"accept"),disabled:!$,children:"Accept"}),Object(z.jsx)(r.a,{variant:"contained",color:"error",sx:{px:5},onClick:K.bind(T,"reject"),disabled:!$,children:J?"Delete":"Reject"})]}),W&&!$?Object(z.jsx)(Y.a,{config:{open:!0,message:"We are waiting for the response on this bid.",severity:"info"}}):null,!H&&!W&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(b.a,{children:"OR"}),Object(z.jsx)(f.a,{direction:"row",sx:{py:2},alignItems:"end",gap:"10px",justifyContent:"center",children:Object(z.jsx)(A,{value:x,handleChange:function(e){var t=e.value;w(t)}})}),Object(z.jsx)(r.a,{variant:"contained",color:"primary",sx:{px:2,py:.5,fontSize:14},onClick:function(){if(O.equalsIgnoreCase("new trul")){var e={offerId:q.counterOfferId,external_id:Object(p.a)(),offer_amount:x,expired_at:q.expired_at,mcNumber:I.c,carrierMail:I.a};q.offerStatus.equalsIgnoreCase("COUNTER_OFFER_CREATED")&&N(e,G)}},children:P?"Submit Counter":"Submit Bid"})]})]})})})},B=Object(i.memo)(q,(function(){return!0})),U=n(1054),H=n(1036);t.default=function(){var e=Object(s.useRouteMatch)().path,t=Object(s.useHistory)(),n=Object(H.a)("/api/bid/biddings"),d=n.data,l=void 0===d?{}:d,f=n.loading,b=n.refetch,v=l||{},j=v.data,p=void 0===j?[]:j,m=v.totalCount,O=void 0===m?0:m;Object(i.useEffect)((function(){var e=setInterval((function(){b()}),5e3);return function(){return clearInterval(e)}}),[]);var h={rowCellPadding:"normal",emptyMessage:"No Bids Found",showRefresh:!0,onRowClick:function(t){var n=t.loadNumber,r=(t.id,t.vendorName);return"new trul"===(void 0===r?"":r).toLowerCase()?"".concat(e,"/newtrul/").concat(n):"".concat(e,"/").concat(n)},onRowClickDataCallback:function(e){return e.loadDetail||{}},count:O,rowStyleCb:function(e){var t=e.row,n=t.bidLevel,r=t.status;return 2===n?{borderLeft:"5px solid #ffeaa7"}:1===n?{borderLeft:r?"5px solid #00b894":"5px solid #e74c3c"}:void 0},columns:[{id:"loadNumber",label:"Load Number"},{id:"pickup",label:"Pickup City/State",renderer:function(e){var t,n,r,a,c=e.row,s=c.loadDetail,d=void 0===s?{}:s;if("c.h. robinson"===(null===(t=c.vendorName)||void 0===t?void 0:t.toLowerCase()))return"".concat(null===d||void 0===d||null===(r=d.origin)||void 0===r?void 0:r.city,", ").concat(null===d||void 0===d||null===(a=d.origin)||void 0===a?void 0:a.stateCode);var u=(null===c||void 0===c||null===(n=c.loadDetail)||void 0===n?void 0:n.stops)||[],l=Object(o.a)(u,2),f=(l[0],(l[1]||{}).geo||{}),b=f.city,v=void 0===b?"":b,j=f.state,p=void 0===j?"":j;return v||p?Object(z.jsxs)(i.Fragment,{children:[v,", ",p]}):"--"}},{id:"",label:"PickUp Date",renderer:function(e){var t,n,r=e.row,a=(null===r||void 0===r||null===(t=r.loadDetail)||void 0===t?void 0:t.stops)||[{}],c=Object(o.a)(a,2),s=(c[0],c[1]);if("C.H. Robinson"===r.vendorName)return u()(r.loadDetail.pickUpByDate).format("M/DD/YYYY");if(s){var d=(s||{}).early_datetime,l=void 0===d?"":d;return l?u()(l).format("M/DD/YYYY"):"--"}var f=(s||{}).early_datetime,b=void 0===f?"":f;return n=b?u()(b).format("M/DD/YYYY"):"--",Object(z.jsx)(i.Fragment,{children:n})}},{id:"",label:"Delivery City / State",renderer:function(e){var t,n,r,a=e.row,c=void 0===a?{}:a,s=c.loadDetail,d=void 0===s?{}:s;if("c.h. robinson"===(null===(t=c.vendorName)||void 0===t?void 0:t.toLowerCase()))return"".concat(null===d||void 0===d||null===(n=d.destination)||void 0===n?void 0:n.city,", ").concat(null===d||void 0===d||null===(r=d.destination)||void 0===r?void 0:r.stateCode);var u=d.stops||[],l=(Object(o.a)(u,1)[0]||{}).geo||{},f=l.city,b=void 0===f?"":f,v=l.state,j=void 0===v?"":v;return b||j?Object(z.jsxs)(i.Fragment,{children:[b,", ",j]}):"--"}},{id:"deliveryDate",label:"Delivery Date",renderer:function(e){var t,n,r,a=e.row;if(null!==(t=a.loadDetail)&&void 0!==t&&t.deliverBy)return u()(null===(r=a.loadDetail)||void 0===r?void 0:r.deliverBy).format("M/DD/YYYY");var i=(null===a||void 0===a||null===(n=a.loadDetail)||void 0===n?void 0:n.stops)||[],c=Object(o.a)(i,2),s=c[0],d=(c[1],(s||{}).early_datetime);return d?u()(d).format("M/DD/YYYY"):"--"}},{id:"equipment",label:"Equipment",renderer:function(e){var t=e.row,n=t.loadDetail||{},r=n.equipment,a=n.vendorName;if("chrobinson"===(void 0===a?"":a).toLowerCase()){var o=Object(I.g)(t.loadDetail||{}),c=o.modesString,s=void 0===c?"":c,d=o.standard,u=void 0===d?"":d;return Object(z.jsxs)(i.Fragment,{children:[s," ",u]})}return"string"===typeof r?Object(z.jsx)(i.Fragment,{children:r}):"--"}},{id:"",label:"Weight",renderer:function(e){var t=e.row,n=(t.loadDetail||{}).weight;if("number"===typeof n)return Object(z.jsxs)(i.Fragment,{children:[n," lbs"]});if(null!==n&&void 0!==n&&n.pounds){var r=(t.loadDetail||{}).weight,a=(void 0===r?{}:r).pounds,o=void 0===a?"":a;return o&&(o+=" lbs"),o}return"--"}},{id:"vendorName",label:"Company",renderer:function(e){var t=e.row,n=t.loadDetail,r=(void 0===n?{}:n).client,a=void 0===r?{}:r;return a.client_name?a.client_name:t.vendorName||""}},{id:"status",label:"Bid Status",renderer:function(e){var t,n=e.row,r=(y(n)||{}).offerStatus,a=(void 0===r?"":r).toLowerCase().includes("rejected");return"C.H. Robinson"===n.vendorName&&n.offerStatus?n.offerStatus:Object(z.jsx)(i.Fragment,{children:n.status?"Accepted":a?"Rejected":(t=n.bidLevel,2===t?"Counter":1===t?"Pending":"Final Offer")})}},{id:"Bidding",label:"Bid",renderer:function(n){var o=n.row,c=(o||{}).vendorName,s=void 0===c?"":c,d=e+"/bid/".concat(o.loadNumber),u=(y(o)||{}).offerStatus,l=void 0===u?"":u,f=(l.equalsIgnoreCase("COUNTER_OFFER_CREATED"),l.equalsIgnoreCase("final_offer_created"),l.toLowerCase().includes("rejected"));return s.toLowerCase(),Object(z.jsx)(i.Fragment,{children:!f&&Object(z.jsx)(r.a,{variant:"contained",color:"primary",onClick:function(e){e.stopPropagation(),t.push(d,Object(a.a)({},o))},children:"View"})})}}]};return Object(z.jsxs)("div",{children:[Object(z.jsx)(c.a,{config:h,data:p,loading:f,onRefetch:b}),Object(z.jsxs)(s.Switch,{children:[Object(z.jsx)(s.Route,{path:e+"/bid/:loadNumber",render:function(t){return Object(z.jsx)(B,Object(a.a)(Object(a.a)({},t),{},{onCloseUrl:e,onRefresh:b}))}}),Object(z.jsx)(s.Route,{path:e+"/newtrul/:loadId",render:function(e){return Object(z.jsx)(U.a,Object(a.a)(Object(a.a)({},e),{},{callDetail:!1}))}})]})]})}}}]);
//# sourceMappingURL=6.f9565278.chunk.js.map