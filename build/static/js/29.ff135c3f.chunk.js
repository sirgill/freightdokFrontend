(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[29],{1129:function(e,t,n){"use strict";n.r(t);var a=n(1007),r=n(0),o=n.n(r),i=n(13),c=n(272),s=n(22),l=n.n(s),d=n(28),j=n(1079),h=n(265),b=n.n(h),u=n(44),O=n(200),m=n(1146),g=n(1078),p=n(27),x=n(89),f=n(276),w=n(315),C=n(266),y=n(2);const v={firstName:"",lastName:"",phone:""};var S=e=>{const{history:t,match:{params:{id:n=""}={}}={},onCloseUrl:a}=e,[i,c]=o.a.useState(v),[s,l]=Object(r.useState)(v),{mutation:d,loading:h}=Object(f.a)("/api/ownerOperator"),{loading:S,data:N}=Object(w.a)("/api/ownerOperator/"+n),{data:k}=N||{},P=e=>{let{name:t,value:n}=e;c({...i,[t]:n})};Object(r.useEffect)((()=>{k&&c(k)}),[k]);const R=e=>{let{name:t,value:n}=e;n&&l({...s,[t]:""})},D=e=>{let{success:t,data:n}=e;const{message:a}=n||{};t?(Object(x.j)("refreshOwnerOp"),Object(p.a)(a||"Owner operator created"),F()):Object(p.a)(a,"error")},F=()=>{t.push(a)};return Object(y.jsxs)(g.a,{fullWidth:!1,maxWidth:"md",open:!0,onClose:F,"aria-labelledby":"form-dialog-title",PaperProps:{sx:{width:400}},children:[Object(y.jsxs)(j.a,{id:"form-dialog-title",sx:{color:u.b,textAlign:"center",fontWeight:400,letterSpacing:1},children:[n?"Edit":"Add"," Owner Operator"]}),Object(y.jsx)(m.a,{children:Object(y.jsxs)(O.a,{container:!0,component:"form",noValidate:!0,direction:"column",rowSpacing:3,p:1,children:[Object(y.jsx)(O.a,{item:!0,xs:12,children:Object(y.jsx)("div",{children:Object(y.jsx)(C.b,{name:"firstName",label:"First Name",onChange:P,value:i.firstName||"",errors:s,onBlur:R,fullWidth:!0,disabled:S||h,required:!0})})}),Object(y.jsx)(O.a,{item:!0,xs:12,children:Object(y.jsx)(C.b,{name:"lastName",label:"Last Name",onChange:P,value:i.lastName||"",errors:s,onBlur:R,fullWidth:!0,disabled:S||h,required:!0})}),Object(y.jsx)(O.a,{item:!0,xs:12,children:Object(y.jsx)(C.b,{name:"phone",label:"Phone Number",onChange:P,value:i.phone||"",onBlur:R,errors:s,fullWidth:!0,disabled:S||h,required:!0})}),Object(y.jsx)(O.a,{item:!0,xs:12,children:Object(y.jsx)(C.c,{fullWidth:!0,type:"submit",onClick:e=>{e.preventDefault();const t={...i},n=(e=>{let{firstName:t,lastName:n,phone:a}=e,r={};return t||(r.firstName="Please provide the First Name"),n||(r.lastName="Please provide the Last Name"),a||(r.phone="Please provide the Phone Number"),r})(t);b.a.isEmpty(n)?d(t,null,D):l({...n})},isLoading:h||S,loadingText:h?"Updating...":S?"Please wait...":null,children:"Update"})})]})})]})},N=n(285),k=n(65);t.default=()=>{const{path:e}=Object(i.useRouteMatch)(),{edit:t,delete:n}=k.a.getUserPermissionsByDashboardId("ownerOperator"),[o,s]=Object(r.useState)([]),[j,h]=Object(r.useState)(!1),b=Object(i.useHistory)();function u(){h(!0),l.a.get(Object(d.b)()+"/api/ownerOperator").then((e=>{const{data:{data:t=[]}={}}=e;s(t),h(!1)})).catch((e=>{console.log(e.message),h(!1)}))}Object(r.useEffect)((()=>(u(),Object(x.a)(window,"refreshOwnerOp",u),()=>Object(x.g)(window,"refreshOwnerOp",u))),[]);const O=e=>{let{success:t}=e;t&&u()},m={rowCellPadding:"inherit",emptyMessage:"No Owner Operator Found",columns:[{id:"firstName",label:"First Name",emptyState:"--"},{id:"lastName",label:"Last Name",emptyState:"--"},{id:"role",label:"Role",renderer:()=>Object(y.jsx)(r.Fragment,{children:"Owner Operator"})},{id:"email",label:"Email"},{id:"update",renderer:o=>{let{row:i}=o;return Object(y.jsxs)(r.Fragment,{children:[Object(y.jsx)(a.a,{variant:"contained",onClick:t=>{t.stopPropagation(),b.push(e+"/edit/".concat(i._id))},sx:{mr:1},disabled:!t,children:"Update"}),Object(y.jsx)(a.a,{variant:"contained",color:"error",onClick:Object(N.c)({uri:"/api/ownerOperator/"+i._id,message:"Are you sure you want to delete this Owner Operator?",afterSuccessCb:O}),disabled:!n,children:"Delete"})]})}}]};return Object(y.jsxs)("div",{children:[Object(y.jsx)(c.a,{config:m,data:o,loading:j}),Object(y.jsx)(i.Route,{path:e+"/add",render:t=>Object(y.jsx)(S,{...t,onCloseUrl:e})}),Object(y.jsx)(i.Route,{path:e+"/edit/:id",render:t=>Object(y.jsx)(S,{...t,onCloseUrl:e})})]})}},272:function(e,t,n){"use strict";var a=n(201),r=n(247),o=n(1153),i=n(1154),c=n(491),s=n(294),l=n.n(s),d=n(1152),j=n(1151),h=n(1133),b=n(200),u=n(87),O=n(248),m=n(1150),g=n(301),p=n.n(g),x=n(1149),f=n(265),w=n.n(f),C=n(291),y=n.n(C),v=n(0),S=n.n(v),N=n(13),k=n(1104),P=n(9),R=n(266),D=n(2);const F=Object(P.a)(k.a)((e=>{let{theme:t}=e;return{"& .MuiPaginationItem-root":{[t.breakpoints.down("md")]:{height:"1.8rem",width:"1rem"}}}})),z=Object(P.a)(c.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{justifyContent:"center"},display:"flex",justifyContent:"space-between",flexWrap:"wrap","& .pageSizeSelect":{width:80}}}));var I=e=>{let{data:t=[],onPageChange:n,page:a=0,count:r=0,limit:o=1,onPageSizeChange:i}=e;const[s,l]=Object(v.useState)(0);Object(v.useEffect)((()=>{Array.isArray(t)&&l(t.length)}),[t]);return s<10&&r<10?null:Object(D.jsxs)(z,{direction:"row",alignItems:"center",children:[r>10&&Object(D.jsxs)(u.a,{sx:{color:"#525F7F"},fontSize:12,children:["Showing ",t.length," of ",r," entries"]}),Object(D.jsxs)(c.a,{direction:"row",alignItems:"center",children:[Object(D.jsx)(R.e,{name:"pageSize",label:"",value:o,options:[{id:5,label:5},{id:10,label:10},{id:20,label:20},{id:50,label:50},{id:100,label:100}],className:"pageSizeSelect",onChange:e=>{let{value:t}=e;"function"===typeof i&&i({value:t})}}),Object(D.jsx)(F,{count:Math.ceil(r/o),color:"primary",variant:"contained",page:a+1,size:"medium",onChange:(e,t)=>{n&&n(e,t)}})]})]})},A=n(202);function W(){return Object(D.jsx)(a.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center","& > * + *":{marginLeft:2}},children:Object(D.jsx)(A.a,{})})}var E=n(290),M=n(89);const U=Object(P.a)(x.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:12,padding:"0 8px"}}})),q=Object(P.a)(p.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:14}}}));function H(e){let{columns:t=[],config:n={},role:a}=e;const{headerCellSx:r={},hasDelete:o}=n,i=Object(v.useMemo)((()=>t.map(((e,t)=>{const{label:n="",id:o="",visible:i=!0}=e||{};return(w.a.isFunction(i)?i({column:e,role:a}):i)?Object(D.jsx)(U,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...r},children:n},o||t):null}))),[t,r]);return Object(D.jsxs)(m.a,{children:[i,o&&Object(D.jsx)(U,{padding:"none",sx:{...r}})]})}const L=e=>{let{columns:t,data:n=[],config:a={},handleRowClick:r,handleDelete:o,...i}=e;return(n||[]).map(((e,n)=>{const{dataKey:c=""}=a;return c&&(e=e[c]),(e=>{let{row:t=[],columns:n={},config:a={},handleRowClick:r,rowIndex:o,handleDelete:i,hasDeletePermission:c,...s}=e;const{hasDelete:l=!1,rowCellPadding:d="none",onRowClick:j,rowStyleCb:h}=a,{role:b}=s;let u={};h&&(u=h({row:t})||{});const g=Object(D.jsx)(U,{sx:{},padding:"none",component:"th",scope:"row",children:Object(D.jsx)(O.a,{onClick:i.bind(void 0,t._id,t),disabled:!c,children:Object(D.jsx)(q,{color:"error"})})}),p=n.map(((e,n)=>{const{id:a="",renderer:r,emptyState:i="--",valueFormatter:c,visible:s=!0}=e||{};if(!(w.a.isFunction(s)?s({column:e,role:b}):s))return null;let l;return l=c&&w.a.isFunction(c)?c(t[a]):w.a.isFunction(r)?r({row:t,role:b},o)||i:w.a.get(t,a,i)||i,Object(D.jsx)(U,{padding:d||"normal",component:"th",scope:"row",children:l},a+n)}));return Object(D.jsxs)(m.a,{hover:!!j,onClick:e=>{e.preventDefault(),w.a.isFunction(r)&&r(t)},sx:j?{cursor:"pointer",...u}:{...u},children:[p,l&&g]},o)})({row:e,columns:t,config:a,handleRowClick:r,rowIndex:n,handleDelete:o,...i})}))},T=e=>{let{config:t={},data:n=[],history:s,loading:m=!1,onRefetch:g,isRefetching:p,actions:x}=e;n=n||[];const[f,C]=Object(v.useState)({}),[N,k]=Object(v.useState)({open:!1,config:{}}),{columns:P=[],onRowClick:R,hasOnClickUrl:F=!0,onPageChange:z,page:A,count:U,limit:q,onPageSizeChange:T,size:B="medium",emptyMessage:_="",onRowClickDataCallback:J,showRefresh:V=!1,onDelete:K,deleteMessage:G,deletePermissions:Q=[],containerHeight:X=""}=t,{role:Y=""}=Object(M.d)().user,Z="boolean"===typeof Q?Q:Q.indexOf(Y)>-1||!1,$=S.a.useRef([]),ee=Array.isArray(n)&&n.length,te=Object(v.useMemo)((()=>x&&S.a.isValidElement(x)?x:Object(D.jsx)(D.Fragment,{})),[]),ne=e=>{if(F&&R){const t=R(e);J&&(e=J(e)),s.push(t,e)}else R&&R(e)},ae=(e,t,n)=>{n.stopPropagation();const a={title:()=>Object(D.jsxs)(b.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(D.jsx)(y.a,{color:"error"}),Object(D.jsx)(u.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]}),okText:"Delete",onOk:()=>K(e,re,{row:t}),content:()=>Object(D.jsx)(h.a,{sx:{color:"#000"},children:w.a.isFunction(G)?G({row:t}):G||"Are you sure you want to delete the record?"})};k({...N,open:!0,config:a})};function re(){k({...N,open:!1})}const oe=Object(v.useMemo)((()=>ee?Object(D.jsxs)(v.Fragment,{children:[Object(D.jsx)(j.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(D.jsx)(H,{columns:P,config:t,role:Y})}),Object(D.jsx)(d.a,{children:Object(D.jsx)(L,{role:Y,columns:P,data:n,config:t,handleRowClick:ne,handleDelete:ae,hasDeletePermission:Z},Date.now())})]}):Object(D.jsx)("tbody",{style:{height:300},children:Object(D.jsx)("tr",{children:Object(D.jsx)("td",{style:{textAlign:"center"},children:Object(D.jsx)("h4",{children:_||"No records found"})})})})),[n,t]);return Object(v.useEffect)((()=>{var e;if(null!==$&&void 0!==$&&null!==(e=$.current)&&void 0!==e&&e.table){const e=$.current.table.offsetHeight;C({...f,height:e>200?e:void 0})}}),[]),Object(D.jsxs)(a.a,{className:"enhanced-table",sx:{height:ee&&!m?X||"95%":"auto"},children:[Object(D.jsxs)(c.a,{alignItems:"flex-end",justifyContent:"flex-end",direction:"row",py:1,gap:.5,children:[te,V&&Object(D.jsx)(O.a,{title:"Refresh",onClick:g,children:Object(D.jsx)(l.a,{className:p?"rotateIcon":void 0})})]}),Object(D.jsx)(o.a,{component:r.a,className:"",sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2,height:ee&&!m?"calc(100% - 80px)":"auto"},children:m?(()=>{const e=window.innerHeight-180,t=(f.height?f.height>e?e:f.height:e)||e;return Object(D.jsx)(b.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(D.jsx)(b.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(D.jsx)(W,{})})})})():Object(D.jsx)(i.a,{ref:e=>$.current.table=e,"aria-label":"caption table",size:B,stickyHeader:!0,children:oe})}),!m&&n.length>0&&Object(D.jsx)(I,{data:n,onPageChange:z,page:A,count:U,limit:q,onPageSizeChange:T}),Object(D.jsx)(E.a,{className:"enhancedTable_dialog",open:N.open,config:N.config,onClose:re})]})};t.a=Object(N.withRouter)(Object(v.memo)(T))},315:function(e,t,n){"use strict";var a=n(0),r=n(56),o=n(89);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[i,c]=Object(a.useState)(void 0),[s,l]=Object(a.useState)(!1),[d,j]=Object(a.useState)(null),[h,b]=Object(a.useState)(!1);function u(){let a=e;n.queryParams&&(a="".concat(a,"?").concat(Object(o.h)(n.queryParams))),Object(r.b)({uri:a,callback:t,showTriggers:!1}).then((e=>{e.data&&c(e.data)})).finally((()=>{l(!1),b(!1)}))}return Object(a.useEffect)((()=>{l(!0),c(null),j(null),u()}),[e]),{data:i,loading:s,error:d,refetch:function(){b(!0),u()},isRefetching:h}}}}]);
//# sourceMappingURL=29.ff135c3f.chunk.js.map