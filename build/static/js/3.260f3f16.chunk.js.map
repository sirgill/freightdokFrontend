{"version":3,"sources":["components/Atoms/table/Pagination.jsx","components/layout/Spinner.js","components/Atoms/table/Table.jsx","actions/load.js"],"names":["StyledPagination","styled","Pagination","_ref","theme","_defineProperty","breakpoints","down","height","width","StyledStack","Stack","_ref2","_ref3","justifyContent","TablePagination","_ref4","_ref4$data","data","onPageChange","_ref4$page","page","_ref4$count","count","_ref4$limit","limit","_useState","useState","_useState2","_slicedToArray","length","setLength","useEffect","Array","isArray","_jsxs","direction","alignItems","children","Typography","sx","color","fontSize","_jsx","Math","ceil","variant","size","onChange","e","pgNum","CircularIndeterminate","_Box","display","marginLeft","CircularProgress","Cell","_TableCell","padding","DeleteIcon","_Delete","Headers","_ref5","_ref5$columns","columns","_ref5$config","config","_config$headerCellSx","headerCellSx","hasDelete","headers","useMemo","map","column","index","_ref6","_ref6$label","label","_ref6$id","id","_ref6$visible","visible","_","isFunction","_objectSpread","bgcolor","fontWeight","_TableRow","TableData","_ref9","_ref9$data","_ref9$config","handleRowClick","handleDelete","rest","_objectWithoutProperties","_excluded2","row","_config$dataKey","dataKey","_ref7","_ref7$row","_ref7$columns","_ref7$config","rowIndex","hasDeletePermission","_excluded","_config$hasDelete","_config$rowCellPaddin","rowCellPadding","_config$onRowClick","onRowClick","undefined","rowStyleCb","role","rowStyle","deleteCell","component","scope","_IconButton","onClick","bind","_id","disabled","cell","i","_ref8","_ref8$id","renderer","_ref8$emptyState","emptyState","valueFormatter","_ref8$visible","isObject","get","hover","preventDefault","cursor","getTableCell","EnhancedTable","_ref10","_ref10$config","_ref10$data","history","_ref10$loading","loading","onRefetch","isRefetching","tableState","setTableState","_useState3","open","_useState4","dialog","setDialog","_config$columns","_config$hasOnClickUrl","hasOnClickUrl","_config$size","_config$emptyMessage","emptyMessage","onRowClickDataCallback","_config$showRefresh","showRefresh","onDelete","deleteMessage","_config$deletePermiss","deletePermissions","_config$containerHeig","containerHeight","_getUserDetail$user$r","getUserDetail","user","indexOf","ref","React","useRef","url","push","stopPropagation","title","_Grid","container","p","gap","ErrorOutlineIcon","_Typography","okText","onOk","onDialogClose","content","_DialogContentText","getTableContent","Fragment","_TableHead","className","backgroundColor","borderTop","_TableBody","Date","now","style","textAlign","_ref$current","current","table","calculatedHeight","offsetHeight","_Stack","_Refresh","_TableContainer","_Paper","boxShadow","mb","innerHeight","window","item","position","Spinner","getLoader","_Table","el","stickyHeader","Dialog","onClose","withRouter","memo","getLoads","arguments","module","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","_yield$requestGet","success","wrap","_context","prev","next","requestGet","uri","concat","sent","type","GET_LOADS","payload","loads","notification","message","t0","setAlert","stop","_x","apply","getInvoiceLoads","search","_callee2","response","_response$data","total","totalPages","_context2","INVOICE_LOAD_FETCHED","axios","_x2","searchLoads","_callee6","res","_context6","RETURNED_SEARCHED_LOADS","_x6","resetLoadsSearch","_callee7","getState","_getState","_getState$load","_context7","RESET_SEARCHED_LOADS","load","rowsPerPage","_x7","_x8","selectLoad","input","SELECT_LOAD","addLoad","formData","callback","_callee9","_context9","post","ADD_LOAD","status","_x10","updateLoad","bucketFiles","_callee10","form","_i","_Object$keys","key","_data","isNull","dataToSend","_i2","_arr","_key","files","_iterator2","_step2","file","_yield$requestPatch","_getState2","_getState2$load$searc","query","_context10","FormData","Object","keys","JSON","stringify","append","_createForOfIteratorHelper","s","n","done","value","err","f","requestPatch","body","_x11","_x12","deleteLoad","load_id","_ref13","_callee13","_yield$requestDelete","_context13","requestDelete","DELETE_LOAD","_x15"],"mappings":"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","file":"static/js/3.260f3f16.chunk.js","sourcesContent":["import Pagination from \"@mui/material/Pagination\"\r\nimport Stack from \"@mui/material/Stack\"\r\nimport Typography from \"@mui/material/Typography\"\r\nimport React, {useEffect, useState} from \"react\"\r\nimport styled from \"@mui/material/styles/styled\";\r\n\r\nconst StyledPagination = styled(Pagination)(({theme}) => ({\r\n    \"& .MuiPaginationItem-root\": {\r\n        [theme.breakpoints.down(\"md\")]: {\r\n            height: \"1.8rem\",\r\n            width: \"1rem\"\r\n        }\r\n    }\r\n}));\r\n\r\nconst StyledStack = styled(Stack)(({theme}) => ({\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n        justifyContent: 'center'\r\n    },\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    flexWrap: 'wrap'\r\n}))\r\n\r\nconst TablePagination = ({data = [], onPageChange, page = 0, count = 0, limit = 1}) => {\r\n    const [length, setLength] = useState(0);\r\n\r\n    useEffect(() => {\r\n        if (Array.isArray(data)) {\r\n            setLength(data.length);\r\n        }\r\n    }, [data]);\r\n\r\n    const onChange = (e, pgNum) => {\r\n        if (onPageChange) {\r\n            onPageChange(e, pgNum)\r\n        }\r\n    }\r\n\r\n    if (length < 10 && count < 10) {\r\n        return null;\r\n    }\r\n    return (\r\n        <StyledStack direction='row' alignItems={'center'}>\r\n            {count > 10 &&\r\n            <Typography sx={{color: '#525F7F'}} fontSize={12}>Showing {data.length} of {count} entries</Typography>}\r\n            {data.length !== count && <StyledPagination\r\n                count={Math.ceil(count / limit)}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                page={page + 1}\r\n                size=\"medium\"\r\n                onChange={onChange}\r\n            />}\r\n        </StyledStack>\r\n    )\r\n}\r\n\r\nexport default TablePagination\r\n","import React from 'react';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport {Box} from \"@mui/material\";\r\n\r\n\r\nexport default function CircularIndeterminate() {\r\n  return (\r\n    <Box sx={{\r\n      height: '100%',\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      '& > * + *': {\r\n        marginLeft: 2,\r\n      },\r\n    }}>\r\n      <CircularProgress />\r\n    </Box>\r\n  );\r\n}\r\n","import {\r\n    Box,\r\n    DialogContentText,\r\n    Grid,\r\n    IconButton,\r\n    Paper,\r\n    Stack,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableContainer,\r\n    TableHead,\r\n    TableRow, Typography\r\n} from '@mui/material';\r\nimport _ from 'lodash';\r\nimport ErrorOutlineIcon from '@mui/icons-material/ErrorOutline';\r\nimport React, {Fragment, memo, useEffect, useMemo, useState} from 'react';\r\nimport {withRouter} from 'react-router-dom';\r\nimport TablePagination from './Pagination';\r\nimport Spinner from \"../../layout/Spinner\";\r\nimport {Delete, Refresh} from \"@mui/icons-material\";\r\nimport Dialog from \"../Dialog\";\r\nimport {styled} from \"@mui/material/styles\";\r\nimport {getUserDetail} from \"../../../utils/utils\";\r\n\r\nconst Cell = styled(TableCell)(({theme}) => ({\r\n    [theme.breakpoints.down('xs')]: {\r\n        fontSize: 12,\r\n        padding: '0 8px',\r\n    }\r\n}))\r\nconst DeleteIcon = styled(Delete)(({theme}) => ({\r\n    [theme.breakpoints.down('xs')]: {\r\n        fontSize: 14,\r\n    }\r\n}))\r\n\r\nfunction Headers({columns = [], config = {}}) {\r\n    const {headerCellSx = {}, hasDelete} = config;\r\n    const headers = useMemo(() => {\r\n        return columns.map((column, index) => {\r\n            const {label = '', id = '', visible = true} = column || {};\r\n            // eslint-disable-next-line array-callback-return\r\n            const isVisible = _.isFunction(visible) ? visible({column}) : visible;\r\n            if (!isVisible) {\r\n                return null;\r\n            }\r\n            return (\r\n                <Cell padding={'normal'} sx={{color: '#000', bgcolor: '#fafafa', fontWeight: 800, ...headerCellSx}}\r\n                      key={id || index}>{label}</Cell>\r\n            )\r\n        })\r\n    }, [columns, headerCellSx])\r\n    return <TableRow>\r\n        {headers}\r\n        {hasDelete && <Cell padding={'none'} sx={{...headerCellSx}}/>}\r\n    </TableRow>;\r\n}\r\n\r\nconst getTableCell = ({\r\n                          row = [],\r\n                          columns = {},\r\n                          config = {},\r\n                          handleRowClick,\r\n                          rowIndex,\r\n                          handleDelete,\r\n                          hasDeletePermission,\r\n                          ...rest\r\n                      }) => {\r\n    const {\r\n        hasDelete = false,\r\n        rowCellPadding = 'none',\r\n        onRowClick = undefined,\r\n        rowStyleCb\r\n    } = config;\r\n    const {role} = rest;\r\n    let rowStyle = {}\r\n    if (rowStyleCb) {\r\n        rowStyle = rowStyleCb({row}) || {};\r\n    }\r\n    const rowClickHandler = (e) => {\r\n            e.preventDefault();\r\n            if (_.isFunction(handleRowClick)) handleRowClick(row)\r\n        },\r\n        deleteCell = <Cell sx={{}} padding={'none'} component=\"th\" scope=\"row\">\r\n            <IconButton onClick={handleDelete.bind(this, row._id, row)} disabled={!hasDeletePermission}>\r\n                <DeleteIcon color={'error'}/>\r\n            </IconButton>\r\n        </Cell>;\r\n\r\n    const cell = columns.map((column, i) => {\r\n        const {id = '', renderer, emptyState = '', valueFormatter, visible = true} = column || {};\r\n        const isVisible = _.isFunction(visible) ? visible({column}) : visible;\r\n        if (!isVisible) {\r\n            return null;\r\n        }\r\n        let cell;\r\n        if (valueFormatter && _.isFunction(valueFormatter)) {\r\n            cell = valueFormatter(row[id]);\r\n        } else if (_.isFunction(renderer)) {\r\n            cell = renderer({row, role}, rowIndex) || emptyState;\r\n        } else {\r\n            cell = _.isObject(row) ? _.get(row, id, emptyState) : (row[id] || emptyState);\r\n        }\r\n        return <Cell key={id + i} padding={rowCellPadding || 'normal'} component=\"th\" scope=\"row\">\r\n            {cell}\r\n        </Cell>\r\n    });\r\n\r\n    return <TableRow key={rowIndex} hover={!!onRowClick} onClick={rowClickHandler}\r\n                     sx={!!onRowClick ? {cursor: 'pointer', ...rowStyle} : {...rowStyle}}>\r\n        {cell}\r\n        {hasDelete && deleteCell}\r\n    </TableRow>;\r\n}\r\n\r\nconst TableData = ({columns, data = [], config = {}, handleRowClick, handleDelete, ...rest}) => {\r\n\r\n    return (data || []).map((row, index) => {\r\n        const {dataKey = ''} = config;\r\n        if (dataKey) {\r\n            row = row[dataKey];\r\n        }\r\n        return getTableCell({row, columns, config, handleRowClick, rowIndex: index, handleDelete, ...rest})\r\n    })\r\n}\r\n\r\n\r\nconst EnhancedTable = ({config = {}, data = [], history, loading = false, onRefetch, isRefetching}) => {\r\n    data = data || [];\r\n    const [tableState, setTableState] = useState({}),\r\n        [dialog, setDialog] = useState({open: false, config: {}}),\r\n        {\r\n            columns = [],\r\n            onRowClick,\r\n            hasOnClickUrl = true,\r\n            onPageChange,\r\n            page,\r\n            count,\r\n            limit,\r\n            size = 'medium',\r\n            emptyMessage = '',\r\n            onRowClickDataCallback,\r\n            showRefresh = false,\r\n            onDelete,\r\n            deleteMessage,\r\n            deletePermissions = [],\r\n            containerHeight='',\r\n        } = config,\r\n        {role = ''} = getUserDetail().user,\r\n        hasDeletePermission = deletePermissions.indexOf(role) > -1 || false,\r\n        ref = React.useRef([]);\r\n    const length = Array.isArray(data) && data.length;\r\n\r\n    const handleRowClick = (row) => {\r\n        if (hasOnClickUrl && onRowClick) {\r\n            const url = onRowClick(row);\r\n            if (onRowClickDataCallback) {\r\n                row = onRowClickDataCallback(row)\r\n            }\r\n            history.push(url, row);\r\n        } else if (onRowClick) {\r\n            onRowClick(row)\r\n        }\r\n    }\r\n\r\n    const handleDelete = (id, row, e) => {\r\n        e.stopPropagation();\r\n        const config = {\r\n            title: () => <Grid container alignItems='center' sx={{p: '16px 24px'}} gap={1}>\r\n                <ErrorOutlineIcon color='error'/>\r\n                <Typography sx={{fontSize: '1.25rem', fontWeight: 550}} color='error'>Delete</Typography>\r\n            </Grid>,\r\n            okText: 'Delete',\r\n            onOk: () => onDelete(id, onDialogClose),\r\n            content: () => <DialogContentText\r\n                sx={{color: '#000'}}>{deleteMessage || 'Are you sure you want to delete the record?'}</DialogContentText>\r\n        }\r\n        setDialog({...dialog, open: true, config});\r\n    }\r\n\r\n    function onDialogClose() {\r\n        setDialog({...dialog, open: false})\r\n    }\r\n\r\n    const getLoader = () => {\r\n        const innerHeight = window.innerHeight - 180,\r\n            height = (tableState.height ? tableState.height > innerHeight ? innerHeight : tableState.height : innerHeight) || innerHeight;\r\n        return <Grid container alignItems={'center'} justifyContent='center' sx={{height}}>\r\n            <Grid item alignItems='center' sx={{position: 'relative'}}>\r\n                <Spinner/>\r\n            </Grid>\r\n        </Grid>\r\n    }\r\n    const getTableContent = useMemo(() => {\r\n        if (!length) {\r\n            return (<tbody style={{height: 300}}>\r\n            <tr>\r\n                <td style={{textAlign: 'center'}}><h4>{emptyMessage || 'No records found'}</h4></td>\r\n            </tr>\r\n            </tbody>)\r\n        }\r\n        return <Fragment>\r\n            <TableHead className={''} sx={{backgroundColor: '#fafafa', borderTop: '1px solid rgba(224, 224, 224, 1)'}}>\r\n                <Headers columns={columns} config={config}/>\r\n            </TableHead>\r\n            <TableBody>\r\n                <TableData\r\n                    role={role}\r\n                    key={Date.now()}\r\n                    columns={columns}\r\n                    data={data}\r\n                    config={config}\r\n                    handleRowClick={handleRowClick}\r\n                    handleDelete={handleDelete}\r\n                    hasDeletePermission={hasDeletePermission}\r\n                />\r\n            </TableBody>\r\n        </Fragment>\r\n    }, [data, config])\r\n\r\n    useEffect(() => {\r\n        if (ref?.current?.table) {\r\n            const calculatedHeight = ref.current.table.offsetHeight;\r\n            setTableState({...tableState, height: calculatedHeight > 200 ? calculatedHeight : undefined})\r\n        }\r\n    }, [])\r\n\r\n    return <Box className='enhanced-table' sx={{height: length && !loading ? (containerHeight || '95%') : 'auto'}}>\r\n        {showRefresh && <Stack alignItems='flex-end'>\r\n            <IconButton title='Refresh' onClick={onRefetch}>\r\n                <Refresh className={(isRefetching) ? 'rotateIcon' : undefined}/>\r\n            </IconButton>\r\n        </Stack>}\r\n        <TableContainer\r\n            component={Paper}\r\n            className={''}\r\n            sx={{boxShadow: '0px 0px 32px #8898AA26', mb: 2, height: length && !loading ? 'calc(100% - 64px)' : 'auto'}}\r\n        >\r\n            {loading\r\n                ? getLoader()\r\n                : <Table ref={el => ref.current['table'] = el} aria-label=\"caption table\" size={size} stickyHeader>\r\n                    {getTableContent}\r\n                </Table>}\r\n        </TableContainer>\r\n        {!loading && data.length > 0 &&\r\n            <TablePagination data={data} onPageChange={onPageChange} page={page} count={count} limit={limit}/>}\r\n        <Dialog className='enhancedTable_dialog' open={dialog.open} config={dialog.config} onClose={onDialogClose}/>\r\n    </Box>;\r\n};\r\n\r\nexport default withRouter(memo(EnhancedTable));\r\n","import axios from \"axios\";\r\nimport { notification, setAlert } from \"./alert\";\r\nimport {\r\n  GET_LOADS,\r\n  GET_LOAD,\r\n  LOAD_ERROR,\r\n  ADD_LOAD,\r\n  PATCH_PICKUP,\r\n  PICKUP_ERROR,\r\n  PATCH_DROP,\r\n  DROP_ERROR,\r\n  DELETE_LOAD,\r\n  DELETE_LOAD_ERROR,\r\n  UPDATE_LOAD,\r\n  UPDATE_LOAD_ERROR,\r\n  LOAD_DOC_DELETE,\r\n  LOAD_DOC_UPLOAD,\r\n  RETURNED_SEARCHED_LOADS,\r\n  RESET_SEARCHED_LOADS,\r\n  INVOICE_CREATED,\r\n  SELECT_LOAD,\r\n  INVOICE_LOAD_FETCHED,\r\n  MERGE_LOAD_DOCS,\r\n  RESET_INVOICE_GENERATED,\r\n} from \"./types\";\r\nimport {requestDelete, requestGet, requestPatch} from \"../utils/request\";\r\n\r\n// import { proxy } from \"../../package.json\";\r\n\r\nexport const SERVER_ADDRESS = \"https://api.freightdok.io\";\r\n// Get current users loads\r\nexport const getLoads =\r\n  (page = 0, limit = 15, module = \"\") =>\r\n  async (dispatch) => {\r\n    try {\r\n      const {success, data} = await requestGet({uri:`/api/load/me?page=${\r\n            page + 1\r\n        }&limit=${limit}&module=${module}` });\r\n      if(success){\r\n        dispatch({\r\n          type: GET_LOADS,\r\n          payload: { loads: data, page, limit },\r\n        });\r\n      } else {\r\n          notification(data.message, 'error');\r\n      }\r\n    } catch (err) {\r\n      dispatch(setAlert(err.message, \"error\"));\r\n    }\r\n  };\r\n\r\nexport const getInvoiceLoads =\r\n  (page = 0, limit = 5, search = \"\") =>\r\n  async (dispatch) => {\r\n    dispatch({\r\n      type: INVOICE_LOAD_FETCHED,\r\n      payload: { data: [], loading: true },\r\n    });\r\n\r\n    try {\r\n      const url = `/api/load/invoice_loads?page=${\r\n        page + 1\r\n      }&limit=${limit}&search=${search}`;\r\n      const response = await axios.get(url);\r\n      const { loads, total, totalPages } = response.data;\r\n      dispatch({\r\n        type: INVOICE_LOAD_FETCHED,\r\n        payload: { data: loads, page, limit, search, total, totalPages, loading: false },\r\n      });\r\n    } catch (err) {\r\n      dispatch(setAlert(err.message, \"error\"));\r\n    }\r\n  };\r\n\r\nexport const deleteLoadDocument =\r\n  (load_id, doc_type, doc_name) => async (dispatch) => {\r\n    try {\r\n      const url = `/api/load/remove/doc/${load_id}/${doc_type}/${doc_name}`;\r\n      await axios.delete(url);\r\n      dispatch({\r\n        type: LOAD_DOC_DELETE,\r\n        payload: { load_id, doc_type },\r\n      });\r\n    } catch (err) {\r\n      dispatch(setAlert(err.message, \"error\"));\r\n    }\r\n  };\r\n\r\nexport const uploadLoadDocument =\r\n  (load_id, doc_type, documents) => async (dispatch) => {\r\n    try {\r\n      const url = `/api/load/upload/load/${load_id}/${doc_type}`;\r\n      const form = new FormData();\r\n      for (let doc of documents) form.append(doc_type, doc);\r\n      const response = await axios.patch(url, form);\r\n      const { file_data } = response.data;\r\n      dispatch({\r\n        type: LOAD_DOC_UPLOAD,\r\n        payload: { file_data, load_id, doc_type },\r\n      });\r\n    } catch (err) {\r\n      dispatch(setAlert(err.message, \"error\"));\r\n    }\r\n  };\r\n\r\nexport const generateInvoice = (load_id, data) => async (dispatch) => {\r\n  try {\r\n    await axios.post(\"/api/invoice\", {\r\n      load_id,\r\n      ...data,\r\n    });\r\n    dispatch({\r\n      type: INVOICE_CREATED,\r\n      payload: { load_id },\r\n    });\r\n  } catch (err) {\r\n    dispatch(setAlert(err.message, \"error\"));\r\n  }\r\n};\r\n\r\nexport const searchLoads = (page = 0, limit = 15, search = \"\", module = \"\") => async (dispatch) => {\r\n    try {\r\n      const url = `/api/load/me?page=${\r\n        page + 1\r\n      }&limit=15&search=${search}&module=${module}`;\r\n      const res = await axios.get(url);\r\n      dispatch({\r\n        type: RETURNED_SEARCHED_LOADS,\r\n        payload: { data: res.data, page, limit, search },\r\n      });\r\n    } catch (err) {\r\n      dispatch(setAlert(err.message, \"error\"));\r\n    }\r\n  };\r\n\r\nexport const resetLoadsSearch =\r\n  (listBarType = \"\") =>\r\n  async (dispatch, getState) => {\r\n    dispatch({ type: RESET_SEARCHED_LOADS });\r\n    const {\r\n      load: { page, rowsPerPage },\r\n    } = getState();\r\n    // dispatch(getLoads(+page, +rowsPerPage, listBarType));\r\n  };\r\n\r\nexport const selectLoad = (input = null) => ({\r\n  type: SELECT_LOAD,\r\n  payload: input,\r\n});\r\n\r\n// Get post\r\nexport const getLoad = (id) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(`/loads/${id}`);\r\n\r\n    dispatch({\r\n      type: GET_LOAD,\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {\r\n    dispatch(setAlert(err.message, \"error\"));\r\n  }\r\n};\r\n\r\n//add load\r\nexport const addLoad = (formData, callback) => async (dispatch) => {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n    const res = await axios.post(\"/api/load\", formData, config);\r\n\r\n    dispatch({\r\n      type: ADD_LOAD,\r\n      payload: res.data,\r\n    });\r\n\r\n    notification(\"Load Created\")\r\n    if(callback){\r\n      callback(res.status === 200, res.data)\r\n    }\r\n  } catch (err) {\r\n    dispatch(setAlert(err.message, \"error\"));\r\n  }\r\n};\r\n\r\nexport const updateLoad = (formData, module = \"\", bucketFiles = {}, callback) => async (dispatch, getState) => {\r\n    try {\r\n      const form = new FormData();\r\n      for (let key of Object.keys(formData)) {\r\n        if ([\"rateConfirmation\", \"proofDelivery\"].indexOf(key) < 0) {\r\n          const data = formData[key];\r\n          const isArray = Array.isArray(data);\r\n          const isNull = data === null;\r\n          let dataToSend = isArray && !isNull ? JSON.stringify(data) : data;\r\n          form.append(key, dataToSend);\r\n        }\r\n      }\r\n      form.append('bucketFiles', JSON.stringify(bucketFiles))\r\n      for (let key of [\"rateConfirmation\", \"proofDelivery\"]) {\r\n        const files = formData[key];\r\n        if (files) for (let file of files) form.append(key, file);\r\n      }\r\n\r\n      const {success, data} = await requestPatch({uri: \"/api/load/modify\", body: form})\r\n      if(success){\r\n        notification('Load Updated')\r\n      }\r\n      const {\r\n        load: {\r\n          search: { page, limit, query },\r\n        },\r\n      } = getState();\r\n      if (!query) dispatch(getLoads(0, 5, module));\r\n      else dispatch(searchLoads(page, limit, query));\r\n      callback(success, data)\r\n    } catch (err) {\r\n      notification(err.message, \"error\");\r\n    }\r\n  };\r\n\r\nexport const downloadDocuments = (file_name) => {\r\n  axios({\r\n    url: \"/api/load/download/\" + file_name,\r\n    method: \"GET\",\r\n    responseType: \"blob\",\r\n  }).then((res) => {\r\n    const parts = res.config.url.split(\"/\");\r\n    const name = parts[parts.length - 1];\r\n    const url = window.URL.createObjectURL(new Blob([res.data]));\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.setAttribute(\"download\", name);\r\n    document.body.appendChild(link);\r\n    link.click();\r\n  });\r\n};\r\n\r\n//add pickup\r\n\r\n//patch pickup\r\nexport const patchPickup = (load_id, pickup) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.patch(\r\n      `/api/load/pickup?load_id=${load_id}`,\r\n      pickup\r\n    );\r\n    dispatch({\r\n      type: PATCH_PICKUP,\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {\r\n    dispatch(setAlert(err.message, \"error\"));\r\n  }\r\n};\r\n\r\n//patch drop\r\nexport const patchDrop = (load_id, drop) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.patch(`/api/load/drop?load_id=${load_id}`, drop);\r\n    dispatch({\r\n      type: PATCH_DROP,\r\n      payload: res.date,\r\n    });\r\n  } catch (err) {\r\n    dispatch(setAlert(err.message, \"error\"));\r\n  }\r\n};\r\n\r\n// Delete a load\r\nexport const deleteLoad = (load_id, callback) => async (dispatch) => {\r\n  try {\r\n    const {success, data} = await requestDelete({uri: '/api/load', body: { data: { load_id: load_id } }})\r\n    notification(data.message, success ? 'success' : 'error');\r\n    if(success){\r\n      dispatch({\r\n        type: DELETE_LOAD,\r\n        payload: load_id,\r\n      });\r\n    }\r\n    callback && callback(success, data)\r\n  } catch (err) {\r\n    notification(err.message, 'error')\r\n  }\r\n};\r\n\r\nexport const mergeDocuments = (data, headers) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.post(`/api/load/invoice/merge_docs`, data, headers);\r\n    console.log(\"Response :\", res);\r\n    dispatch({\r\n      type: MERGE_LOAD_DOCS,\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {\r\n    dispatch(setAlert(err.message, \"error\"));\r\n  }\r\n};\r\n\r\nexport const resetInvoiceGenerated = () => async (dispatch) => {\r\n  try {\r\n    dispatch({\r\n      type: RESET_INVOICE_GENERATED,\r\n      payload: null,\r\n    });\r\n  } catch (err) {\r\n    dispatch(setAlert(err.message, \"error\"));\r\n  }\r\n};\r\n"],"sourceRoot":""}