{"version":3,"sources":["views/ownerOperator/FormModal.js","views/ownerOperator/OwnerOperator.js"],"names":["validateForm","_ref","firstName","lastName","phoneNumber","errors","formTemplate","FormModal","props","history","_props$match","match","_props$match2$params","params","_props$match2$params3","id","onCloseUrl","_useState","useState","_useState2","_slicedToArray","users","setUsers","_React$useState","React","_React$useState2","form","setForm","_useState3","_useState4","setErrors","_useMutation","useMutation","mutation","loading","updateForm","e","_e$target","target","_e$target2","name","value","_objectSpread","_defineProperty","ownerops","useMemo","filter","user","role","toLowerCase","useEffect","axios","get","getBaseUrl","then","res","_res$data","data","_res$data2$data","catch","err","notification","message","_","isEmpty","concat","r","console","log","onBlur","onSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","body","_yield$mutation","success","wrap","_context","prev","next","preventDefault","sent","handleClose","setTimeout","triggerCustomEvent","stop","_x","apply","arguments","push","_jsxs","Dialog","fullWidth","maxWidth","open","onClose","PaperProps","sx","width","children","DialogTitle","color","blue","textAlign","fontWeight","letterSpacing","_jsx","DialogContent","className","InputField","label","onChange","errorText","type","showFirstBlank","options","map","driver","_id","email","Grid","container","spacing","style","marginTop","item","xs","_Button","variant","onClick","disabled","checkObjProperties","OwnerOperator","path","useRouteMatch","row","setRow","setLoading","useHistory","fetchOwnerOp","_r$data","_r$data2$data","addEvent","window","removeEvent","onDelete","stopPropagation","delete","_ref$data","tableConfig","rowCellPadding","emptyMessage","columns","renderer","Fragment","mr","bind","EnhancedTable","config","component","Link","to","position","right","Route","render"],"mappings":"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","file":"static/js/13.a2925247.chunk.js","sourcesContent":["import DialogTitle from \"@mui/material/DialogTitle\";\r\nimport _ from 'lodash';\r\nimport {blue} from \"../../components/layout/ui/Theme\";\r\nimport DialogContent from \"@mui/material/DialogContent\";\r\nimport InputField from \"../../components/Atoms/form/InputField\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport React, {useEffect, useMemo, useState} from \"react\";\r\nimport axios from \"axios\";\r\nimport {getBaseUrl} from \"../../config\";\r\nimport {notification} from \"../../actions/alert\";\r\nimport {checkObjProperties, triggerCustomEvent} from \"../../utils/utils\";\r\nimport {Button} from \"@mui/material\";\r\nimport useMutation from \"../../hooks/useMutation\";\r\n\r\nconst validateForm = ({firstName, lastName, phoneNumber}) => {\r\n    let errors = {}\r\n    if (!firstName) {\r\n        errors.firstName = 'Please provide the First Name'\r\n    }\r\n    if (!lastName) {\r\n        errors.lastName = 'Please provide the Last Name'\r\n        // return [false, 'Please provide the Last Name', 'lastName']\r\n    }\r\n    if (!phoneNumber) {\r\n        errors.phoneNumber = 'Please provide the Phone Number'\r\n    }\r\n    return errors\r\n}\r\nconst formTemplate = {\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    phoneNumber: \"\",\r\n}\r\n\r\n\r\nconst FormModal = (props) => {\r\n    const {history, match: {params: {id = ''} = {}} = {}, onCloseUrl} = props;\r\n    const [users, setUsers] = useState([])\r\n    const [form, setForm] = React.useState(formTemplate);\r\n    const [errors, setErrors] = useState(formTemplate);\r\n    const {mutation, loading} = useMutation(\"/api/ownerOperator\")\r\n    const updateForm = (e) => {\r\n        const {target: {name, value} = {}} = e\r\n        setForm({...form, [name]: value});\r\n    }\r\n    const ownerops = useMemo(() => {\r\n        return (users || []).filter(user => user.role.toLowerCase() === 'owneroperator')\r\n    }, [users]);\r\n\r\n    useEffect(() => {\r\n        if (id) {\r\n            axios.get(getBaseUrl() + \"/api/ownerOperator/\" + id)\r\n                .then(res => {\r\n                    const {data: {data = {}} = {}} = res;\r\n                    if (data) {\r\n                        setForm(data);\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    notification(err.message)\r\n                })\r\n        }\r\n        if (_.isEmpty(ownerops)) {\r\n            axios.get(`/api/users?page=${0}&limit=${0}`)\r\n                .then(r => {\r\n                    setUsers(r.data.users)\r\n                })\r\n                .catch(e => {\r\n                    console.log(e.message);\r\n                    notification(e.message, 'error')\r\n                })\r\n        }\r\n    }, [id, ownerops])\r\n\r\n    const onBlur = (name, value) => {\r\n        if (value) {\r\n            setErrors({...errors, [name]: ''});\r\n        }\r\n    }\r\n\r\n    const onSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const body = {...form};\r\n        const errors = validateForm(body);\r\n        if (_.isEmpty(errors)) {\r\n            const {success, data} = await mutation(body);\r\n            const {message} = data || {};\r\n            if (success) {\r\n                notification(message || 'Owner operator created');\r\n                handleClose();\r\n                setTimeout(() => {\r\n                    triggerCustomEvent('refreshOwnerOp');\r\n                }, 500)\r\n            } else {\r\n                notification(message, 'error');\r\n            }\r\n        } else {\r\n            setErrors({...errors})\r\n        }\r\n    };\r\n\r\n    const handleClose = () => {\r\n        history.push(onCloseUrl);\r\n    }\r\n    return (\r\n        <Dialog\r\n            fullWidth={false}\r\n            maxWidth={\"md\"}\r\n            open={true}\r\n            onClose={handleClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n            PaperProps={{\r\n                sx: {\r\n                    width: 400\r\n                }\r\n            }}\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\" sx={{\r\n                color: blue,\r\n                textAlign: 'center',\r\n                fontWeight: 400,\r\n                letterSpacing: 1\r\n            }}>\r\n                {id ? \"Edit\" : 'Add'} Owner Operator\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <div className=\"\">\r\n                    <form className={''}>\r\n\r\n                        <div>\r\n                            <InputField\r\n                                name={\"firstName\"}\r\n                                label={\"First Name\"}\r\n                                onChange={updateForm}\r\n                                value={form.firstName || ''}\r\n                                errorText={errors['firstName']}\r\n                                onBlur={onBlur}\r\n                            />\r\n                            <InputField\r\n                                name={\"lastName\"}\r\n                                label={\"Last Name\"}\r\n                                onChange={updateForm}\r\n                                value={form.lastName || ''}\r\n                                errorText={errors['lastName']}\r\n                                onBlur={onBlur}\r\n                            />\r\n                            <InputField\r\n                                name={\"phoneNumber\"}\r\n                                label={\"Phone Number\"}\r\n                                onChange={updateForm}\r\n                                value={form.phoneNumber || ''}\r\n                                onBlur={onBlur}\r\n                                errorText={errors['phoneNumber']}\r\n                            />\r\n                            {!id && <InputField\r\n                                value={form.user}\r\n                                name=\"user\"\r\n                                onChange={updateForm}\r\n                                label='Select Owner Operator'\r\n                                type={'select'}\r\n                                showFirstBlank={true}\r\n                                options={ownerops.map(driver => ({id: driver._id, label: driver.email}))}\r\n                            />}\r\n                        </div>\r\n\r\n                        <Grid container spacing={1} style={{marginTop: \"20px\"}}>\r\n                            <Grid item xs={3}/>\r\n                            <Grid item xs={6}>\r\n                                <Button\r\n                                    className=\"\"\r\n                                    type=\"submit\"\r\n                                    variant={'contained'}\r\n                                    onClick={onSubmit}\r\n                                    style={{width: '100%'}}\r\n                                    disabled={!checkObjProperties(form) || loading}\r\n                                >\r\n                                    Save\r\n                                </Button>\r\n                            </Grid>\r\n                            <Grid item xs={3}/>\r\n                        </Grid>\r\n\r\n                    </form>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default FormModal","import React, {Fragment, useEffect, useState} from \"react\";\r\nimport {Button} from \"@mui/material\";\r\nimport {Link, Route, useHistory, useRouteMatch} from \"react-router-dom\";\r\nimport EnhancedTable from \"../../components/Atoms/table/Table\";\r\nimport axios from \"axios\";\r\nimport {getBaseUrl} from \"../../config\";\r\nimport FormModal from \"./FormModal\";\r\nimport {notification} from \"../../actions/alert\";\r\nimport {addEvent, removeEvent} from \"../../utils/utils\";\r\n\r\n\r\nconst OwnerOperator = () => {\r\n  const { path } = useRouteMatch(),\r\n      [row, setRow] = useState([]),\r\n      [loading, setLoading] = useState(false),\r\n    history = useHistory();\r\n\r\n  function fetchOwnerOp() {\r\n      setLoading(true);\r\n      axios.get(getBaseUrl() + '/api/ownerOperator').then(r => {\r\n          const {data: {data = []} = {}} = r;\r\n          setRow(data);\r\n          setLoading(false);\r\n      })\r\n          .catch(err => {\r\n              console.log(err.message)\r\n              setLoading(false);\r\n          })\r\n  }\r\n\r\n  useEffect(() => {\r\n      fetchOwnerOp();\r\n      addEvent(window, 'refreshOwnerOp', fetchOwnerOp)\r\n\r\n      return () => removeEvent(window, 'refreshOwnerOp', fetchOwnerOp)\r\n  }, [])\r\n\r\n    const onDelete = (id, e) => {\r\n      e.stopPropagation();\r\n      axios.delete(getBaseUrl() + \"/api/ownerOperator/\"+id)\r\n          .then(({data = {}}) => {\r\n              notification(data.message)\r\n              fetchOwnerOp()\r\n          })\r\n        .catch(err => console.log(err.message))\r\n    }\r\n\r\n  const tableConfig = {\r\n    rowCellPadding: \"inherit\",\r\n    emptyMessage: \"No Owner Operator Found\",\r\n    columns: [\r\n      {\r\n        id: \"firstName\",\r\n        label: \"First Name\",\r\n      },\r\n      {\r\n        id: \"lastName\",\r\n        label: \"Last Name\",\r\n      },\r\n      {\r\n        id: \"role\",\r\n        label: \"Role\",\r\n        renderer: () => {\r\n          return <Fragment>Owner Operator</Fragment>;\r\n        },\r\n      },\r\n\r\n      {\r\n        id: \"update\",\r\n        renderer: ({ row }) => {\r\n          return (\r\n            <Fragment>\r\n              <Button\r\n                variant=\"contained\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  history.push(path + `/ownerOp/edit/${row._id}`);\r\n                }}\r\n                sx={{mr: 1}}\r\n              >\r\n                Update\r\n              </Button>\r\n              <Button\r\n                  variant=\"contained\"\r\n                  color={'error'}\r\n                  onClick={onDelete.bind(this, row._id)}\r\n              >\r\n                Delete\r\n              </Button>\r\n            </Fragment>\r\n          );\r\n        },\r\n      },\r\n    ],\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <EnhancedTable\r\n        config={tableConfig}\r\n        data={row}\r\n        loading={loading}\r\n      />\r\n        <Button\r\n            variant='contained'\r\n            component={Link}\r\n            to={path + '/ownerOp/add'}\r\n            className={'addNewOwnerOp'}\r\n            sx={{position: 'absolute', right: 10}}\r\n        >\r\n            Add Owner Operator\r\n        </Button>\r\n      <Route path={path + \"/ownerOp/add\"} render={(props) => <FormModal {...props} onCloseUrl={path} />} />\r\n      <Route path={path + \"/ownerOp/edit/:id\"} render={(props) => <FormModal {...props} onCloseUrl={path} />} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OwnerOperator;\r\n"],"sourceRoot":""}