(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[34],{1037:function(e,t,n){"use strict";n.r(t);var a=n(247),i=n(1095),o=n(0),c=n.n(o),l=n(13),s=n(1129),r=n(1177),d=n(201),b=n(88),j=n(409),h=n(275),x=n(257),u=n.n(x),g=n(90),f=n(2);const O={rowCellPadding:"normal",columns:[{id:"loadNumber",label:"Loads #"},{id:"pickup",label:"Pickup",valueFormatter:e=>u.a.get(e,"[0].pickupCity","")+", "+u.a.get(e,"[0].pickupState","")},{id:"drop",label:"Delivery",valueFormatter:e=>u.a.get(e,"[0].dropCity","")+", "+u.a.get(e,"[0].dropState","")},{id:"miles",label:"Miles"},{id:"rate",label:"Rate",isCostCell:!0},{id:"$/mile",label:"$/Mile"},{id:"updatedAt",label:"Last Updated On",valueFormatter:g.l}]};var p=e=>{let{data:t,loading:n,isRefetching:a,presentableDateRange:i}=e;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(d.a,{children:Object(f.jsxs)(j.a,{title:"Recent Loads",titleSx:{fontSize:16},sx:{border:"none"},children:[Object(f.jsxs)(b.a,{align:"right",fontWeight:"bold",children:["Performance metrics (",i,")"]}),Object(f.jsx)(d.a,{sx:{background:"#fff",".enhanced-table":{".tableContainer":{boxShadow:"none",border:"1px solid #e5e5e5",height:400}}},children:Object(f.jsx)(h.a,{loading:n,data:t,config:O,isRefetching:a})}),Object(f.jsxs)(b.a,{color:"text.secondary",children:["Total: ",null===t||void 0===t?void 0:t.length]})]})})})},m=n(33),v=n(1039),w=n(1038),C=n(253),k=n(496),S=n(3);const y={rowCellPadding:"normal",headerCellSx:{fontWeight:"none",color:"#606060",backgroundColor:"none",border:"none",py:0},rowCellSx:{border:"none",fontWeight:"bold"},columns:[{id:"revenue",label:"Revenue"},{id:"loadCount",label:"Loads"},{id:"miles",label:"Miles"},{id:"averageRate",label:"Avg Rate"},{id:"rateMile",label:"Rate/Mile"}]};function R(){return Object(f.jsxs)(d.a,{sx:{my:1,width:"100%"},children:[Object(f.jsx)(v.a,{width:"100%",animation:"wave"}),Object(f.jsx)(v.a,{width:"100%",animation:"wave"})]})}function D(e){let{dateRange:t,data:n,loading:a}=e;return Object(f.jsxs)(d.a,{sx:{width:"100%",border:"1px solid #e5e5e5",borderRadius:".5rem",px:2,pt:1},children:[Object(f.jsx)(b.a,{fontWeight:"bold",sx:{px:.5},children:t}),Object(f.jsx)(d.a,{sx:{".enhanced-table":{".tableContainer":{boxShadow:"none",mb:0}}},children:a?Object(f.jsx)(R,{}):Object(f.jsx)(h.a,{config:y,data:n})})]})}const F=e=>{let{fetchHistoricalTabData:t}=e;const{loading:n,data:a=[],error:i}=Object(m.e)((e=>e.businessIntelligence.historicalPerformance));Object(o.useEffect)((()=>{a.length||t()}),[a]);const c=a.map((e=>{const{data:t,dateRange:{startDate:n,endDate:a}={}}=e;return Object(f.jsx)(D,{dateRange:Object(g.f)(n,a),data:[t]})}))||[],l=Array.from({length:3},(()=>Object(f.jsx)(R,{})));return Object(f.jsxs)(j.a,{title:"Historical Performance",titleSx:{fontSize:16,mb:2},sx:{border:"none"},children:[Object(f.jsx)(C.a,{config:i,inStyles:{m:"auto",mb:1,width:"fit-content"},onClose:k.a.bind(null,S.r)}),Object(f.jsx)(w.a,{spacing:1,container:!0,gap:1,sx:{overflow:"auto",height:"100%",width:"100%"},children:n?l:c})]})};var I=Object(o.memo)(F);function P(e){let{loading:t,value:n,expenseName:a,isExpense:i,isNetExpense:o,containerSx:c={}}=e;return Object(f.jsxs)(w.a,{container:!0,sx:{borderTop:o?"1px solid #e3e3e3":"none",mt:o?2:0,...c},children:[Object(f.jsx)(w.a,{flex:1,p:2,children:t?Object(f.jsx)(v.a,{animation:"wave",sx:{width:"100%",mr:2}}):Object(f.jsx)(b.a,{variant:"body1",fontWeight:o?"bold":"normal",children:a})}),Object(f.jsx)(w.a,{p:2,children:t?Object(f.jsx)(v.a,{animation:"wave",sx:{width:"100%",mr:2}}):Object(f.jsx)(b.a,{sx:{fontWeight:"bold",fontSize:"1.2rem"},color:o?"success":i?"error":"inherit",children:n||"--"})})]})}var N=e=>{let{presentableDateRange:t,getFinancialsTabData:n}=e;const{loading:a,data:i={},error:c}=Object(m.e)((e=>e.businessIntelligence.financials)),{efsAdvances:l,revenue:s,lease:r="--",net:b,leaseCost:h}=i;return Object(o.useEffect)((()=>{n()}),[]),Object(f.jsx)(d.a,{children:Object(f.jsx)(j.a,{title:t,variant:"elevation",titleSx:{mb:2},children:Object(f.jsxs)(d.a,{p:1,children:[Object(f.jsx)(C.a,{config:c,inStyles:{m:"auto",mb:1,width:"fit-content"},onClose:k.a.bind(null,S.o)}),Object(f.jsx)(P,{loading:a,expenseName:"Total Revenue",value:s,containerSx:{bgcolor:"#f9fafb"}}),Object(f.jsx)(P,{loading:a,expenseName:"Dispatch Fee (".concat(r,"%)"),isExpense:!0,value:h}),Object(f.jsx)(P,{loading:a,expenseName:"EFS Advances",isExpense:!0,value:l,containerSx:{bgcolor:"#f9fafb"}}),Object(f.jsx)(P,{loading:a,expenseName:"Net Settlement",isNetExpense:!0,value:b})]})})})};function T(e){const{children:t,value:n,index:a,...o}=e;return Object(f.jsx)(d.a,{role:"tabpanel",hidden:n!==a,id:"tabpanel-".concat(a),"aria-labelledby":"tab-".concat(a),...o,children:n===a&&Object(f.jsx)(i.a,{in:!0,timeout:500,children:Object(f.jsx)(d.a,{sx:{p:1},children:t})})})}function z(e){return{id:"tab-".concat(e),"aria-controls":"tabpanel-".concat(e)}}t.default=e=>{let{dateRange:t,fetchHistoricalTabData:n,getFinancialsTabData:b}=e;const j=function(){const{search:e}=Object(l.useLocation)();return c.a.useMemo((()=>new URLSearchParams(e)),[e])}().get("tab"),{financialTab:h,historicalTab:x,overviewTab:O}=Object(m.e)((e=>u.a.get(e,"auth.userPermissions.permissions.businessIntelligence",{}))),[v,w]=Object(o.useState)(j||"overview"),C=Object(l.useHistory)(),k=Object(m.e)((e=>u.a.get(e,"businessIntelligence.businessIntelligenceData.data",{}))),S=Object(m.e)((e=>u.a.get(e,"businessIntelligence.loading",!0))),y=Object(m.e)((e=>u.a.get(e,"businessIntelligence.isRefetching",!1))),{overview:R}=k,{startDate:D,endDate:F}=t,P=Object(g.f)(D,F);return Object(o.useEffect)((()=>{const e=new URLSearchParams;v?e.append("tab",v):e.delete("tab"),C.replace({search:e.toString()})}),[v,C]),Object(f.jsx)(i.a,{in:!0,timeout:1e3,children:Object(f.jsx)(a.a,{elevation:0,width:"fit-content",sx:{boxShadow:"0px 0px 32px #63636326",borderRadius:5},children:Object(f.jsxs)(d.a,{sx:{width:"100%",height:"inherit"},children:[Object(f.jsx)(d.a,{sx:{},children:Object(f.jsxs)(s.a,{value:v,onChange:(e,t)=>{w(t)},"aria-label":"basic tabs example",children:[O&&Object(f.jsx)(r.a,{label:"Overview",...z(0),value:"overview"}),x&&Object(f.jsx)(r.a,{label:"Historical",...z(1),value:"historical"}),h&&Object(f.jsx)(r.a,{label:"Financial",...z(2),value:"financial"})]})}),Object(f.jsx)(T,{value:v,index:"overview",children:Object(f.jsx)(p,{data:R,loading:S,isRefetching:y,presentableDateRange:P})}),Object(f.jsx)(T,{value:v,index:"historical",children:Object(f.jsx)(I,{fetchHistoricalTabData:n})}),Object(f.jsx)(T,{value:v,index:"financial",children:Object(f.jsx)(N,{presentableDateRange:P,getFinancialsTabData:b})})]})})})}},273:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(0),i=n(1036),o=n(577),c=n(1043),l=n(684),s=n(578),r=n(237),d=n(2);const b=a.forwardRef((function(e,t){return Object(d.jsx)(r.a,{direction:"up",ref:t,...e})}));function j(e){const{open:t=!1,config:n,onClose:a,preventBackdropClose:r=!1,className:j}=e,{title:h,onOk:x,okText:u="Save",content:g,onCancel:f}=n,O=function(e){r&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropclick")||a()};return Object(d.jsx)("div",{children:Object(d.jsxs)(o.a,{className:j,open:t,TransitionComponent:b,onClose:O,"aria-describedby":"alert-dialog-slide-description",children:["function"===typeof h?h({...n}):Object(d.jsx)(s.a,{sx:{fontWeight:550},children:h}),Object(d.jsx)(l.a,{children:"function"===typeof g?g({config:n}):g}),Object(d.jsxs)(c.a,{children:["function"===typeof f?f({config:n,onClose:a}):Object(d.jsx)(i.a,{variant:"outlined",onClick:O,children:"Cancel"}),"function"===typeof u?u({config:n,onOk:x}):Object(d.jsx)(i.a,{variant:"contained",color:u.equalsIgnoreCase("delete")?"error":"primary",onClick:x,children:u})]})]})})}},275:function(e,t,n){"use strict";var a=n(201),i=n(247),o=n(1175),c=n(1164),l=n(1176),s=n(527),r=n(280),d=n.n(r),b=n(1174),j=n(1173),h=n(1040),x=n(200),u=n(88),g=n(1137),f=n(248),O=n(1172),p=n(1148),m=n(295),v=n.n(m),w=n(1171),C=n(257),k=n.n(C),S=n(287),y=n.n(S),R=n(0),D=n.n(R),F=n(13),I=n(1125),P=n(10),N=n(253),T=n(2);const z=Object(P.a)(I.a)((e=>{let{theme:t}=e;return{"& .MuiPaginationItem-root":{[t.breakpoints.down("md")]:{height:"1.8rem",width:"1rem"}}}})),E=Object(P.a)(s.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{justifyContent:"center"},display:"flex",justifyContent:"space-between",flexWrap:"wrap","& .pageSizeSelect":{width:80}}}));var A=e=>{let{data:t=[],onPageChange:n,page:a=1,count:i=0,limit:o=1,onLimitChange:c,isLoading:l}=e;const[r,d]=Object(R.useState)(0);Object(R.useEffect)((()=>{Array.isArray(t)&&d(t.length)}),[t]);return i<=5?null:Object(T.jsxs)(E,{direction:"row",alignItems:"center",children:[Object(T.jsxs)(u.a,{sx:{color:"#525F7F"},fontSize:12,children:["Showing ",r," of ",i," entries"]}),Object(T.jsxs)(s.a,{direction:"row",alignItems:"center",children:[Object(T.jsx)(N.h,{disabled:l,name:"pageSize",label:"",value:o,options:[{id:5,label:5},{id:10,label:10},{id:20,label:20},{id:50,label:50},{id:100,label:100}],className:"pageSizeSelect",onChange:e=>{let{value:t}=e;"function"===typeof c&&c({value:t})}}),Object(T.jsx)(z,{disabled:l,count:Math.ceil(i/o),color:"primary",variant:"contained",page:a,size:"medium",onChange:(e,t)=>{+a!==+t&&"function"===typeof n&&n(e,+t)}})]})]})},L=n(277),M=n(273),W=n(90),H=n(276);const q=Object(P.a)(w.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:12,padding:"0 8px"}}})),K=Object(P.a)(v.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:14}}}));function U(e){let{columns:t=[],config:n={},role:a,handleRequestSort:i,hasSort:o}=e;const{headerCellSx:c={},hasDelete:l,sortField:s,sortOrder:r,showCheckbox:d}=n,b=Object(R.useMemo)((()=>t.map(((e,t)=>{const{label:n="",id:l="",visible:d=!0,sort:b=!1}=e||{};return(k.a.isFunction(d)?d({column:e,role:a}):d)?Object(T.jsx)(q,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...c},children:o&&b?Object(T.jsx)(p.a,{onClick:e=>i(e,l),active:l===s,direction:r,sx:{...c},children:n}):n},l||t):null}))),[t,c]);return d&&b.unshift(Object(T.jsx)(q,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...c}},"checkbox-header")),Object(T.jsxs)(O.a,{children:[b,l&&Object(T.jsx)(q,{padding:"none",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...c}})]})}const B=e=>{let{columns:t,data:n=[],config:a={},handleRowClick:i,handleDelete:o,...c}=e;return(n||[]).map(((e,n)=>{const{dataKey:l=""}=a;return l&&(e=e[l]),(e=>{let{row:t=[],columns:n={},config:a={},handleRowClick:i,rowIndex:o,handleDelete:c,hasDeletePermission:l,checkboxKey:s,...r}=e;const{hasDelete:d=!1,rowCellPadding:b="none",onRowClick:j,rowStyleCb:h,showCheckbox:x=!1,rowCellSx:u={}}=a,{role:p,onCheckboxChange:m,checkboxes:v}=r;let w={};h&&(w=h({row:t})||{});const C=Object(T.jsx)(q,{sx:{},padding:"none",component:"th",scope:"row",children:Object(T.jsx)(H.a,{title:"Delete",placement:"top",children:Object(T.jsx)(f.a,{onClick:c.bind(void 0,t._id,t),disabled:!l,children:Object(T.jsx)(K,{color:l?"error":"disabled"})})})}),S=n.map(((e,n)=>{const{id:a="",renderer:i,emptyState:c="--",valueFormatter:l,visible:s=!0,cellPadding:r,isCostCell:d}=e||{};if(!(k.a.isFunction(s)?s({column:e,role:p}):s))return null;let j;return j=d?t[a]?Object(W.e)(t[a]||""):c:l&&k.a.isFunction(l)?l(t[a],t):k.a.isFunction(i)?i({row:t,role:p},o)||c:k.a.get(t,a,c)||c,Object(T.jsx)(q,{padding:r||b||"normal",sx:u,component:"th",scope:"row",children:j},a+n)}));if(x){if(!s)throw new Error("Checkbox key not provided");const e=v.indexOf(t[s])>-1;S.unshift(Object(T.jsx)(q,{onClick:m.bind(void 0,t),sx:u,children:Object(T.jsx)(g.a,{checked:e})},"checkbox-".concat(o)))}return Object(T.jsxs)(O.a,{hover:!!j,onClick:e=>{e.preventDefault(),k.a.isFunction(i)&&i(t)},sx:j?{cursor:"pointer",...w}:{...w},children:[S,d&&C]},o)})({row:e,columns:t,config:a,handleRowClick:i,rowIndex:n,handleDelete:o,...c})}))},J=e=>{let{config:t={},data:n=[],history:r,loading:g=!1,onRefetch:O,isRefetching:p,actions:m,isPaginationLoading:v=!1,...w}=e;n=n||[];const{onCheckboxChange:C,checkboxes:S,checkboxKey:F}=w,[I,P]=Object(R.useState)({}),[N,z]=Object(R.useState)({open:!1,config:{}}),{columns:E=[],columnsBuilder:H,onRowClick:q,hasOnClickUrl:K=!0,onPageChange:J,page:$,count:_,limit:V,onPageSizeChange:G,onLimitChange:Q,size:X="medium",emptyMessage:Y="",onRowClickDataCallback:Z,showRefresh:ee=!1,onDelete:te,deleteMessage:ne,deletePermissions:ae=[],containerHeight:ie="",sortField:oe,sortOrder:ce="asc",handleSortChange:le,hasSort:se=!1}=t,{role:re=""}=Object(W.h)().user,de="boolean"===typeof ae?ae:ae.indexOf(re)>-1||!1,be=D.a.useRef([]),je="function"===typeof H?H({data:n,columns:E}):E,he=Array.isArray(n)&&n.length,xe=Object(R.useMemo)((()=>m&&D.a.isValidElement(m)?m:Object(T.jsx)(T.Fragment,{})),[m]),ue=e=>{if(K&&q){const t=q(e);Z&&(e=Z(e)),r.push(t,e)}else q&&q(e)},ge=(e,t)=>{le&&le({field:t,order:oe===t&&"asc"===ce?"desc":"asc"})},fe=(e,t,n)=>{n.stopPropagation();const a={title:()=>Object(T.jsxs)(x.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(T.jsx)(y.a,{color:"error"}),Object(T.jsx)(u.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]}),okText:"Delete",onOk:()=>te(e,Oe,{row:t}),content:()=>Object(T.jsx)(h.a,{sx:{color:"#000"},children:k.a.isFunction(ne)?ne({row:t}):ne||"Are you sure you want to delete the record?"})};z({...N,open:!0,config:a})};function Oe(){z({...N,open:!1})}const pe=Object(R.useMemo)((()=>he?Object(T.jsxs)(R.Fragment,{children:[Object(T.jsx)(j.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(T.jsx)(U,{columns:je,config:t,role:re,handleRequestSort:ge,hasSort:se})}),Object(T.jsx)(b.a,{children:Object(T.jsx)(B,{role:re,columns:je,data:n,config:t,checkboxes:S,checkboxKey:F,handleRowClick:ue,handleDelete:fe,onCheckboxChange:C,hasDeletePermission:de})})]}):Object(T.jsx)("tbody",{style:{height:300},children:Object(T.jsx)("tr",{children:Object(T.jsx)("td",{style:{textAlign:"center"},children:Object(T.jsx)("h4",{children:Y||"No records found"})})})})),[n,t,S]);return Object(R.useEffect)((()=>{var e;if(null!==be&&void 0!==be&&null!==(e=be.current)&&void 0!==e&&e.table){const e=be.current.table.offsetHeight;P({...I,height:e>200?e:void 0})}}),[]),Object(R.useEffect)((()=>{var e;(v||p)&&null!==(e=be.current)&&void 0!==e&&e.tableContainer&&be.current.tableContainer.scrollTo(0,0)}),[v,p]),Object(T.jsxs)(a.a,{className:"enhanced-table",sx:{height:he&&!g?ie||"95%":"auto"},children:[Object(T.jsxs)(s.a,{alignItems:"flex-end",justifyContent:"flex-end",direction:"row",py:1,gap:.5,children:[xe,ee&&Object(T.jsx)(f.a,{title:"Refresh",onClick:O,children:Object(T.jsx)(d.a,{className:p?"rotateIcon":void 0})})]}),Object(T.jsxs)(o.a,{component:i.a,className:"tableContainer",ref:e=>be.current.tableContainer=e,sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2,height:he&&!g?"calc(100% - 80px)":"auto",position:"relative"},children:[g?(()=>{const e=window.innerHeight-180,t=(I.height?I.height>e?e:I.height:e)||e;return Object(T.jsx)(x.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(T.jsx)(x.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(T.jsx)(L.a,{})})})})():Object(T.jsx)(l.a,{ref:e=>be.current.table=e,"aria-label":"caption table",size:X,stickyHeader:!0,children:pe}),Object(T.jsx)(c.a,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,position:"absolute"},open:v||p||!1,children:Object(T.jsx)(L.a,{sx:{color:"inherit"}})})]}),!g&&n.length>0&&Object(T.jsx)(A,{data:n,onPageChange:J,page:$,count:_,limit:V,onLimitChange:Q||G,isLoading:p||v}),Object(T.jsx)(M.a,{className:"enhancedTable_dialog",open:N.open,config:N.config,onClose:Oe})]})};t.a=Object(F.withRouter)(Object(R.memo)(J))},409:function(e,t,n){"use strict";var a=n(88),i=n(247),o=n(10),c=n(11),l=n.n(c),s=n(2);const r=Object(o.a)(i.a)((e=>{let{}=e;return{padding:"8px 16px"}})),d=e=>{let{title:t,children:n,sx:i={},titleSx:o={},variant:c="outlined"}=e;return Object(s.jsxs)(r,{elevation:0,variant:c,sx:i,children:[Object(s.jsx)(a.a,{variant:"h6",fontWeight:600,sx:o,children:t}),n]})};t.a=d,d.proptype={title:l.a.string.isRequired,children:l.a.element.isRequired,placement:l.a.oneOf(["right","left","bottom","top"]),sx:l.a.object,titleSx:l.a.object,variant:l.a.oneOf(["outlined","elevation"])}}}]);
//# sourceMappingURL=34.c88ee1fe.chunk.js.map