(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[24],{1055:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(247),o=n(14),i=n(0),c=n.n(i),s=n(22),l=n(32),d=n(331),j=n(33),u=n.n(j),b=n(45),O=n(21),h=n(39),f=n(5),m=n(1027),p=n(88),x=n.n(p),v=n(68),g=n(1065),w=n(121),C=n(85),N=n(1064),y=n(23),k=n(20),S=n(340),D=n(1),P=function(e){var t=e.firstName,n=e.lastName,a=e.phoneNumber,r={};return t||(r.firstName="Please provide the First Name"),n||(r.lastName="Please provide the Last Name"),a||(r.phoneNumber="Please provide the Phone Number"),r},R={firstName:"",lastName:"",phoneNumber:""},F=function(e){var t=e.history,n=e.match,s=(void 0===n?{}:n).params,l=(void 0===s?{}:s).id,d=void 0===l?"":l,j=e.onCloseUrl,p=Object(i.useState)([]),F=Object(o.a)(p,2),A=F[0],I=F[1],M=c.a.useState(R),T=Object(o.a)(M,2),z=T[0],E=T[1],L=Object(i.useState)(R),U=Object(o.a)(L,2),W=U[0],_=U[1],B=Object(S.a)("/api/ownerOperator"),H=B.mutation,J=B.loading,K=function(e){var t=e.target,n=void 0===t?{}:t,r=n.name,o=n.value;E(Object(a.a)(Object(a.a)({},z),{},Object(f.a)({},r,o)))},q=Object(i.useMemo)((function(){return(A||[]).filter((function(e){return"owneroperator"===e.role.toLowerCase()}))}),[A]);Object(i.useEffect)((function(){d&&u.a.get(Object(b.b)()+"/api/ownerOperator/"+d).then((function(e){var t=e.data,n=(void 0===t?{}:t).data,a=void 0===n?{}:n;a&&E(a)})).catch((function(e){Object(y.a)(e.message)})),x.a.isEmpty(q)&&u.a.get("/api/users?page=".concat(0,"&limit=",0)).then((function(e){I(e.data.users)})).catch((function(e){console.log(e.message),Object(y.a)(e.message,"error")}))}),[d,q]);var G=function(e,t){t&&_(Object(a.a)(Object(a.a)({},W),{},Object(f.a)({},e,"")))},Q=function(){var e=Object(h.a)(Object(O.a)().mark((function e(t){var n,r,o,i,c,s;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=Object(a.a)({},z),r=P(n),!x.a.isEmpty(r)){e.next=13;break}return e.next=6,H(n);case 6:o=e.sent,i=o.success,c=o.data,s=(c||{}).message,i?(Object(y.a)(s||"Owner operator created"),V(),setTimeout((function(){Object(k.j)("refreshOwnerOp")}),500)):Object(y.a)(s,"error"),e.next=14;break;case 13:_(Object(a.a)({},r));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){t.push(j)};return Object(D.jsxs)(N.a,{fullWidth:!1,maxWidth:"md",open:!0,onClose:V,"aria-labelledby":"form-dialog-title",PaperProps:{sx:{width:400}},children:[Object(D.jsxs)(m.a,{id:"form-dialog-title",sx:{color:v.b,textAlign:"center",fontWeight:400,letterSpacing:1},children:[d?"Edit":"Add"," Owner Operator"]}),Object(D.jsx)(g.a,{children:Object(D.jsx)("div",{className:"",children:Object(D.jsxs)("form",{className:"",children:[Object(D.jsxs)("div",{children:[Object(D.jsx)(w.a,{name:"firstName",label:"First Name",onChange:K,value:z.firstName||"",errorText:W.firstName,onBlur:G}),Object(D.jsx)(w.a,{name:"lastName",label:"Last Name",onChange:K,value:z.lastName||"",errorText:W.lastName,onBlur:G}),Object(D.jsx)(w.a,{name:"phoneNumber",label:"Phone Number",onChange:K,value:z.phoneNumber||"",onBlur:G,errorText:W.phoneNumber}),!d&&Object(D.jsx)(w.a,{value:z.user,name:"user",onChange:K,label:"Select Owner Operator",type:"select",showFirstBlank:!0,options:q.map((function(e){return{id:e._id,label:e.email}}))})]}),Object(D.jsxs)(C.a,{container:!0,spacing:1,style:{marginTop:"20px"},children:[Object(D.jsx)(C.a,{item:!0,xs:3}),Object(D.jsx)(C.a,{item:!0,xs:6,children:Object(D.jsx)(r.a,{className:"",type:"submit",variant:"contained",onClick:Q,style:{width:"100%"},disabled:!Object(k.b)(z)||J,children:"Save"})}),Object(D.jsx)(C.a,{item:!0,xs:3})]})]})})})]})};t.default=function(){var e=Object(s.useRouteMatch)().path,t=Object(i.useState)([]),n=Object(o.a)(t,2),c=n[0],j=n[1],O=Object(i.useState)(!1),h=Object(o.a)(O,2),f=h[0],m=h[1],p=Object(s.useHistory)();function x(){m(!0),u.a.get(Object(b.b)()+"/api/ownerOperator").then((function(e){var t=e.data,n=(void 0===t?{}:t).data;j(void 0===n?[]:n),m(!1)})).catch((function(e){console.log(e.message),m(!1)}))}Object(i.useEffect)((function(){return x(),Object(k.a)(window,"refreshOwnerOp",x),function(){return Object(k.h)(window,"refreshOwnerOp",x)}}),[]);var v=function(e,t){t.stopPropagation(),u.a.delete(Object(b.b)()+"/api/ownerOperator/"+e).then((function(e){var t=e.data,n=void 0===t?{}:t;Object(y.a)(n.message),x()})).catch((function(e){return console.log(e.message)}))},g={rowCellPadding:"inherit",emptyMessage:"No Owner Operator Found",columns:[{id:"firstName",label:"First Name"},{id:"lastName",label:"Last Name"},{id:"role",label:"Role",renderer:function(){return Object(D.jsx)(i.Fragment,{children:"Owner Operator"})}},{id:"update",renderer:function(t){var n=t.row,a=t.role;return Object(D.jsxs)(i.Fragment,{children:[Object(D.jsx)(r.a,{variant:"contained",onClick:function(t){t.stopPropagation(),p.push(e+"/edit/".concat(n._id))},sx:{mr:1},children:"Update"}),Object(D.jsx)(r.a,{variant:"contained",color:"error",onClick:v.bind(undefined,n._id),disabled:["ownerOperator","dispatch"].includes(a),children:"Delete"})]})}}]};return Object(D.jsxs)("div",{children:[Object(D.jsx)(d.a,{config:g,data:c,loading:f}),Object(D.jsx)(r.a,{variant:"contained",component:l.b,to:e+"/add",className:"addNewOwnerOp",sx:{position:"absolute",right:10},children:"Add Owner Operator"}),Object(D.jsx)(s.Route,{path:e+"/add",render:function(t){return Object(D.jsx)(F,Object(a.a)(Object(a.a)({},t),{},{onCloseUrl:e}))}}),Object(D.jsx)(s.Route,{path:e+"/edit/:id",render:function(t){return Object(D.jsx)(F,Object(a.a)(Object(a.a)({},t),{},{onCloseUrl:e}))}})]})}},331:function(e,t,n){"use strict";var a=n(312),r=n(1075),o=n(1076),i=n(184),c=n(342),s=n.n(c),l=n(1074),d=n(1073),j=n(1059),u=n(85),b=n(30),O=n(14),h=n(313),f=n(29),m=n(1072),p=n(3),x=n(355),v=n.n(x),g=n(5),w=n(1071),C=n(88),N=n.n(C),y=n(336),k=n.n(y),S=n(0),D=n.n(S),P=n(22),R=n(1041),F=n(1),A=function(e){var t=e.data,n=void 0===t?[]:t,a=e.onPageChange,r=e.page,o=void 0===r?0:r,c=e.count,s=void 0===c?0:c,l=e.limit,d=void 0===l?1:l,j=Object(S.useState)(0),u=Object(O.a)(j,2),h=u[0],f=u[1];Object(S.useEffect)((function(){Array.isArray(n)&&f(n.length)}),[n]);return h<10&&s<10?null:Object(F.jsxs)(i.a,{direction:"row",sx:{display:"flex",justifyContent:"space-between",p:3},alignItems:"center",children:[s>10&&Object(F.jsxs)(b.a,{sx:{color:"#525F7F"},fontSize:13,children:["Showing ",n.length," of ",s," entries"]}),n.length!==s&&Object(F.jsx)(R.a,{count:Math.ceil(s/d),color:"primary",variant:"contained",page:o+1,size:"large",onChange:function(e,t){a&&a(e,t)}})]})},I=n(185),M=n(250);function T(){return Object(F.jsx)(I.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center","& > * + *":{marginLeft:2}},children:Object(F.jsx)(M.a,{})})}var z=n(335),E=n(7),L=n(20),U=["row","columns","config","handleRowClick","rowIndex","handleDelete","hasDeletePermission"],W=["columns","data","config","handleRowClick","handleDelete"],_=Object(E.a)(w.a)((function(e){var t=e.theme;return Object(g.a)({},t.breakpoints.down("xs"),{fontSize:12,padding:"0 8px"})})),B=Object(E.a)(v.a)((function(e){var t=e.theme;return Object(g.a)({},t.breakpoints.down("xs"),{fontSize:14})}));function H(e){var t=e.columns,n=void 0===t?[]:t,a=e.config,r=void 0===a?{}:a,o=r.headerCellSx,i=void 0===o?{}:o,c=r.hasDelete,s=Object(S.useMemo)((function(){return n.map((function(e,t){var n=e||{},a=n.label,r=void 0===a?"":a,o=n.id,c=void 0===o?"":o,s=n.visible,l=void 0===s||s;return(N.a.isFunction(l)?l({column:e}):l)?Object(F.jsx)(_,{padding:"normal",sx:Object(p.a)({color:"#000",fontWeight:800},i),children:r},c||t):null}))}),[n,i]);return Object(F.jsxs)(m.a,{children:[s,c&&Object(F.jsx)(_,{padding:"none",sx:{headerCellSx:i}})]})}var J=function(e){var t=e.columns,n=e.data,a=void 0===n?[]:n,r=e.config,o=void 0===r?{}:r,i=e.handleRowClick,c=e.handleDelete,s=Object(f.a)(e,W);return(a||[]).map((function(e,n){var a=o.dataKey,r=void 0===a?"":a;return r&&(e=e[r]),function(e){var t=e.row,n=void 0===t?[]:t,a=e.columns,r=void 0===a?{}:a,o=e.config,i=void 0===o?{}:o,c=e.handleRowClick,s=e.rowIndex,l=e.handleDelete,d=e.hasDeletePermission,j=Object(f.a)(e,U),u=i.hasDelete,b=void 0!==u&&u,O=i.rowCellPadding,x=void 0===O?"none":O,v=i.onRowClick,g=void 0===v?void 0:v,w=i.rowStyleCb,C=j.role,y={};w&&(y=w({row:n})||{});var k=Object(F.jsx)(_,{sx:{},padding:"none",component:"th",scope:"row",children:Object(F.jsx)(h.a,{onClick:l.bind(void 0,n._id,n),disabled:!d,children:Object(F.jsx)(B,{color:"error"})})}),S=r.map((function(e,t){var a,r=e||{},o=r.id,i=void 0===o?"":o,c=r.renderer,l=r.emptyState,d=void 0===l?"":l,j=r.valueFormatter,u=r.visible,b=void 0===u||u;return(N.a.isFunction(b)?b({column:e}):b)?(a=j&&N.a.isFunction(j)?j(n[i]):N.a.isFunction(c)?c({row:n,role:C},s)||d:n[i]||d,Object(F.jsx)(_,{padding:x||"normal",component:"th",scope:"row",children:a},i+t)):null}));return Object(F.jsxs)(m.a,{hover:!!g,onClick:function(e){e.preventDefault(),N.a.isFunction(c)&&c(n)},sx:g?Object(p.a)({cursor:"pointer"},y):{},children:[S,b&&k]},s)}(Object(p.a)({row:e,columns:t,config:o,handleRowClick:i,rowIndex:n,handleDelete:c},s))}))},K=function(e){var t=e.config,n=void 0===t?{}:t,c=e.data,f=void 0===c?[]:c,m=e.history,x=e.loading,v=void 0!==x&&x,g=e.onRefetch,w=e.isRefetching;f=f||[];var C=Object(S.useState)({}),N=Object(O.a)(C,2),y=N[0],P=N[1],R=Object(S.useState)({open:!1,config:{}}),I=Object(O.a)(R,2),M=I[0],E=I[1],U=n.columns,W=void 0===U?[]:U,_=n.onRowClick,B=n.hasOnClickUrl,K=void 0===B||B,q=n.onPageChange,G=n.page,Q=n.count,V=n.limit,X=n.size,Y=void 0===X?"medium":X,Z=n.emptyMessage,$=void 0===Z?"":Z,ee=n.onRowClickDataCallback,te=n.showRefresh,ne=void 0!==te&&te,ae=n.onDelete,re=n.deleteMessage,oe=n.deletePermissions,ie=void 0===oe?[]:oe,ce=Object(L.e)().user.role,se=void 0===ce?"":ce,le=ie.indexOf(se)>-1||!1,de=D.a.useRef([]),je=function(e){if(K&&_){var t=_(e);ee&&(e=ee(e)),m.push(t,e)}else _&&_(e)},ue=function(e,t,n){n.stopPropagation();var a={title:function(){return Object(F.jsxs)(u.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(F.jsx)(k.a,{color:"error"}),Object(F.jsx)(b.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]})},okText:"Delete",onOk:function(){return ae(e,be)},content:function(){return Object(F.jsx)(j.a,{sx:{color:"#000"},children:re||"Are you sure you want to delete the record?"})}};E(Object(p.a)(Object(p.a)({},M),{},{open:!0,config:a}))};function be(){E(Object(p.a)(Object(p.a)({},M),{},{open:!1}))}var Oe=Object(S.useMemo)((function(){return Array.isArray(f)&&f.length?Object(F.jsxs)(S.Fragment,{children:[Object(F.jsx)(d.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(F.jsx)(H,{columns:W,config:n})}),Object(F.jsx)(l.a,{children:Object(F.jsx)(J,{role:se,columns:W,data:f,config:n,handleRowClick:je,handleDelete:ue,hasDeletePermission:le},Date.now())})]}):Object(F.jsx)("tbody",{style:{height:300},children:Object(F.jsx)("tr",{children:Object(F.jsx)("td",{style:{textAlign:"center"},children:Object(F.jsx)("h4",{children:$||"No records found"})})})})}),[f,n]);return Object(S.useEffect)((function(){var e;if(null!==de&&void 0!==de&&null!==(e=de.current)&&void 0!==e&&e.table){var t=de.current.table.offsetHeight;P(Object(p.a)(Object(p.a)({},y),{},{height:t>200?t:void 0}))}}),[]),Object(F.jsxs)("div",{children:[ne&&Object(F.jsx)(i.a,{alignItems:"flex-end",children:Object(F.jsx)(h.a,{title:"Refresh",onClick:g,children:Object(F.jsx)(s.a,{className:w?"rotateIcon":void 0})})}),Object(F.jsxs)(r.a,{component:a.a,className:"",sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2},children:[v?function(){var e=window.innerHeight-180,t=(y.height?y.height>e?e:y.height:e)||e;return Object(F.jsx)(u.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(F.jsx)(u.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(F.jsx)(T,{})})})}():Object(F.jsx)(o.a,{ref:function(e){return de.current.table=e},"aria-label":"caption table",size:Y,children:Oe}),!v&&f.length>0&&Object(F.jsx)(A,{data:f,onPageChange:q,page:G,count:Q,limit:V})]}),Object(F.jsx)(z.a,{className:"enhancedTable_dialog",open:M.open,config:M.config,onClose:be})]})};t.a=Object(P.withRouter)(Object(S.memo)(K))}}]);
//# sourceMappingURL=24.c1cd204e.chunk.js.map