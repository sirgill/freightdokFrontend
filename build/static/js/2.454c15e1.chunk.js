(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[2],{1063:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var a=n(1067),i=n(1024),r=n(11),c=n(5),o=n(17),l=n(1),s=n(58),d=n.n(s),u=n(8),b=n(50),j=n(354),f=n(348),O=n(355),m=n(351),p=n(360),h=n.n(p),g=n(57),x=n(41),v=n(133),y=n(2),C=["children","onClose","showClose"],w=Object(u.a)(j.a)((function(e){var t=e.theme;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),I=function(e){var t=e.children,n=e.onClose,a=e.showClose,i=Object(o.a)(e,C);return Object(y.jsxs)(f.a,Object(c.a)(Object(c.a)({sx:{m:0,p:2,textAlign:"center"}},i),{},{children:[a?Object(y.jsx)(m.a,{"aria-label":"close",onClick:n,sx:{position:"absolute",left:8,top:8,color:function(e){return e.palette.grey[500]}},children:Object(y.jsx)(h.a,{})}):null,t]}))};function E(e){var t=e.config,n=void 0===t?{}:t,o=e.children,s=n.title,u=void 0===s?"":s,j=n.closeUrl,f=void 0===j?"":j,m=(n.okButtonText,n.showClose),p=void 0===m||m,h=n.onOk,C=(void 0===h&&d.a.noop(),n.paperProps),E=void 0===C?{}:C,S=n.maxWidth,P=void 0===S?"xl":S,k=n.preventBackdropClick,L=void 0!==k&&k,W=l.useState(!1),U=Object(r.a)(W,2),R=U[0],D=U[1],M=Object(b.a)(),H=Object(i.a)(M.breakpoints.down("xs")),A=function(e){L&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropClick")||D(!1)};l.useEffect((function(){return D(!0),Object(x.a)(window,"closeModal",A),function(){return Object(x.h)(window,"closeModal",A)}}),[]);var N=Object(l.useMemo)((function(){return l.forwardRef((function(e,t){var n=Object(g.useHistory)();return Object(y.jsx)(a.a,Object(c.a)(Object(c.a)({ref:t},e),{},{onExited:function(){return f?n.push(f||v.a):n.goBack()}}))}))}),[]);return Object(y.jsxs)(w,{onClose:A,"aria-labelledby":"customized-dialog-title",open:R,maxWidth:P,TransitionComponent:N,PaperProps:E,fullScreen:H,children:[u&&Object(y.jsx)(I,{id:"customized-dialog-title",onClose:A,showClose:p,children:u}),Object(y.jsx)(O.a,{dividers:!0,sx:{borderTop:"none"},children:o})]})}},1065:function(e,t,n){"use strict";var a=n(11),i=n(1),r=n(59);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(i.useState)(null),c=Object(a.a)(n,2),o=c[0],l=c[1],s=Object(i.useState)(!1),d=Object(a.a)(s,2),u=d[0],b=d[1],j=Object(i.useState)(null),f=Object(a.a)(j,2),O=f[0],m=f[1],p=Object(i.useState)(!1),h=Object(a.a)(p,2),g=h[0],x=h[1];function v(){Object(r.b)({uri:e,callback:t,showTriggers:!1}).then((function(e){e.data&&l(e.data)})).finally((function(){b(!1),x(!1)}))}return Object(i.useEffect)((function(){b(!0),l(null),m(null),v()}),[e]),{data:o,loading:u,error:O,refetch:function(){x(!0),v()},isRefetching:g}}},1067:function(e,t,n){"use strict";var a=n(3),i=n(7),r=n(1),c=n(230),o=n(50),l=n(90),s=n(42),d=n(2),u=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],b={entering:{transform:"none"},entered:{transform:"none"}},j=r.forwardRef((function(e,t){var n=Object(o.a)(),j={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},f=e.addEndListener,O=e.appear,m=void 0===O||O,p=e.children,h=e.easing,g=e.in,x=e.onEnter,v=e.onEntered,y=e.onEntering,C=e.onExit,w=e.onExited,I=e.onExiting,E=e.style,S=e.timeout,P=void 0===S?j:S,k=e.TransitionComponent,L=void 0===k?c.a:k,W=Object(i.a)(e,u),U=r.useRef(null),R=Object(s.a)(U,p.ref,t),D=function(e){return function(t){if(e){var n=U.current;void 0===t?e(n):e(n,t)}}},M=D(y),H=D((function(e,t){Object(l.b)(e);var a=Object(l.a)({style:E,timeout:P,easing:h},{mode:"enter"});e.style.webkitTransition=n.transitions.create("transform",a),e.style.transition=n.transitions.create("transform",a),x&&x(e,t)})),A=D(v),N=D(I),T=D((function(e){var t=Object(l.a)({style:E,timeout:P,easing:h},{mode:"exit"});e.style.webkitTransition=n.transitions.create("transform",t),e.style.transition=n.transitions.create("transform",t),C&&C(e)})),F=D(w);return Object(d.jsx)(L,Object(a.a)({appear:m,in:g,nodeRef:U,onEnter:H,onEntered:A,onEntering:M,onExit:T,onExited:F,onExiting:N,addEndListener:function(e){f&&f(U.current,e)},timeout:P},W,{children:function(e,t){return r.cloneElement(p,Object(a.a)({style:Object(a.a)({transform:"scale(0)",visibility:"exited"!==e||g?void 0:"hidden"},b[e],E,p.props.style),ref:R},t))}}))}));t.a=j},1078:function(e,t,n){"use strict";var a=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(76)),r=n(2),c=(0,i.default)((0,r.jsx)("path",{d:"M2 12.5C2 9.46 4.46 7 7.5 7H18c2.21 0 4 1.79 4 4s-1.79 4-4 4H9.5C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10H17v2H9.41c-.55 0-.55 1 0 1H18c1.1 0 2-.9 2-2s-.9-2-2-2H7.5C5.57 9 4 10.57 4 12.5S5.57 16 7.5 16H17v2H7.5C4.46 18 2 15.54 2 12.5z"}),"Attachment");t.default=c},1098:function(e,t,n){"use strict";n.r(t);var a=n(350),i=n(233),r=n(528),c=(n(351),n(1)),o=n(357),l=n(35),s=n(19),d=n(30),u=n(59),b=n(15),j=function(){return function(){var e=Object(d.a)(Object(s.a)().mark((function e(t){var n,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:b.m,payload:{loading:!0,data:{}}}),e.prev=1,e.next=4,Object(u.b)({uri:"/api/carrierProfile"});case 4:n=e.sent,a=n.data,t({type:b.m,payload:{loading:!1,data:a.data}}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t({type:b.m,payload:{loading:!1,data:{}}});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},f=n(57),O=n(45),m=n(41),p=n(65),h=n(349),g=n(183),x=n(4),v=n(5),y=n(11),C=n(1063),w=n(530),I=n(26),E=n(2),S=function(e){var t=e.onCloseUrl,n=Object(c.useState)({}),o=Object(y.a)(n,2),b=o[0],O=o[1],C=Object(f.useHistory)(),S=Object(c.useState)(!1),P=Object(y.a)(S,2),k=P[0],L=P[1],W=(Object(m.e)().user||{}).id,U=Object(l.d)();Object(c.useEffect)((function(){var e=function(){var e=Object(d.a)(Object(s.a)().mark((function e(){var t,n,a,i,r,c,o,l,d,b;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)({uri:"/api/fmcsa/"+W});case 2:t=e.sent,n=t.success,a=t.data,n&&(i=a.data,c=(r=void 0===i?{}:i).autoLiabilityInsurance,o=r.generalLiabilityInsurance,l=r.cargoLiabilityInsurance,d=r.email,b=r.phone,O({autoLiabilityInsurance:c?c.url:"",generalLiabilityInsurance:o?o.url:"",cargoLiabilityInsurance:l?l.url:"",email:d,phone:b}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var R=function(e){var t=e.target,n=t.name,a=t.files;O((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},n,a||null))}))},D=function(e){var t=e.target,n=t.name,a=t.value;O(Object(v.a)(Object(v.a)({},b),{},Object(x.a)({},n,a)))};return Object(E.jsx)(a.a,{component:"form",noValidate:!0,sx:{minWidth:400},onSubmit:function(e){L(!0),e.preventDefault();for(var n=new FormData,a=0,i=Object.keys(b);a<i.length;a++){var r=i[a];if(["generalLiabilityInsurance","autoLiabilityInsurance","cargoLiabilityInsurance"].indexOf(r)<0){var c=b[r],o=Array.isArray(c)&&!(null===c)?JSON.stringify(c):c;n.append(r,o)}}for(var l=0,s=["generalLiabilityInsurance","autoLiabilityInsurance","cargoLiabilityInsurance"];l<s.length;l++){var d=s[l],f=b[d];if(f){var O,m=Object(g.a)(f);try{for(m.s();!(O=m.n()).done;){var p=O.value;n.append(d,p)}}catch(h){m.e(h)}finally{m.f()}}}Object(u.d)({uri:"/api/fmcsa",body:n}).then((function(e){Object(I.a)(e.data.message),U(j()),C.push(t)})).catch((function(e){console.log(e),Object(I.a)(e.message,"error")})).finally((function(){return L(!1)}))},children:Object(E.jsxs)(r.a,{spacing:3,children:[Object(E.jsx)(h.a,{type:"email",label:"Email",fullWidth:!0,onChange:D,value:b.email||"",name:"email"}),Object(E.jsx)(h.a,{type:"email",label:"Phone Number",fullWidth:!0,value:b.phone||"",onChange:D,name:"phone"}),Object(E.jsxs)(r.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(E.jsx)(p.a,{children:"General Liability Insurance"}),Object(E.jsxs)("label",{htmlFor:"contained-button-file1",children:[Object(E.jsx)("input",{style:{display:"none"},type:"file",accept:"application/pdf,application/msword,application/vnd.ms-excel",name:"generalLiabilityInsurance",onChange:R,id:"contained-button-file1"}),Object(E.jsx)(i.a,{variant:"contained",component:"span",children:"Attach"})]})]}),Object(E.jsxs)(r.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(E.jsx)(p.a,{children:"Auto Liability Insurance"}),Object(E.jsxs)("label",{htmlFor:"contained-button-file2",children:[Object(E.jsx)("input",{style:{display:"none"},type:"file",accept:"application/pdf,application/msword,application/vnd.ms-excel",name:"autoLiabilityInsurance",onChange:R,id:"contained-button-file2"}),Object(E.jsx)(i.a,{variant:"contained",component:"span",children:"Attach"})]})]}),Object(E.jsxs)(r.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(E.jsx)(p.a,{children:"Cargo Liability Insurance"}),Object(E.jsxs)("label",{htmlFor:"contained-button-file3",children:[Object(E.jsx)("input",{style:{display:"none"},type:"file",accept:"application/pdf,application/msword,application/vnd.ms-excel",name:"cargoLiabilityInsurance",onChange:R,id:"contained-button-file3"}),Object(E.jsx)(i.a,{variant:"contained",component:"span",children:"Attach"})]})]}),Object(E.jsx)(w.a,{loading:k,loadingIndicator:"Updating...",type:"submit",variant:"contained",children:"Update"})]})})},P=function(e){var t=e.onCloseUrl,n={title:"Update Carrier Profile",closeUrl:t,paperProps:{sx:{width:"auto"}}};return Object(E.jsx)(C.a,{config:n,children:Object(E.jsx)(S,{onCloseUrl:t})})},k=n(64),L=(n(363),n(1078),n(62)),W=function(e){var t=e.path,n=e._dbData,a=e.list,r=e.refetch;return{rowCellPadding:"normal",showRefresh:!1,columns:[{id:"integrationName",label:"Integrations"},{id:"code",label:"Key/Code",renderer:function(e){var t=e.row;return t.code||t.clientSecret?"******":"--"}},{id:"email",label:"Email"},{id:"mc",label:"MC#"},{renderer:function(e,c){var o=e.row;return Object(E.jsx)(i.a,{component:O.b,to:{pathname:t+L.g,state:{row:o,rowIndex:c,_dbData:n,list:a,refetch:r}},variant:"contained",children:"Update"})}}]}},U={rowCellPadding:"normal",showRefresh:!0,columns:[{id:"companyName",label:"Company Name"},{id:"ein",label:"EIN#"},{id:"dotNumber",label:"DOT#"},{id:"operatingStatus",label:"Operating Status",renderer:function(e){var t=e.row,n=(void 0===t?{}:t).operatingStatus;return Object(m.c)("Y"===n)}}]},R={title:"Update Integration Details",preventBackdropClick:!0},D=n(103),M=n(132),H=n(393),A=n(222),N=Object(c.memo)((function(e){var t=e.onChange,n=e.form,a=e.onSubmit,i=e.errors,r=e.loading,c=n.password,o=n.email;return Object(E.jsxs)(D.a,{container:!0,spacing:3,direction:"column",sx:{minWidth:350},component:"form",onSubmit:a,noValidate:!0,children:[Object(E.jsx)(D.a,{item:!0,children:Object(E.jsx)(p.a,{fontWeight:600,color:k.a,children:"Please verify your credentials."})}),Object(E.jsx)(D.a,{item:!0,children:Object(E.jsx)(A.a,{label:"Email",fullWidth:!0,type:"email",value:o,name:"email",onChange:t,errors:i})}),Object(E.jsx)(D.a,{item:!0,children:Object(E.jsx)(A.b,{label:"Password",fullWidth:!0,value:c,name:"password",onChange:t,errors:i})}),Object(E.jsx)(D.a,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:Object(E.jsx)(w.a,{type:"submit",variant:"contained",color:"primary",loading:r,children:r?"Please wait...":"Verify"})})]})})),T=function(e){var t=e.location.state,n=void 0===t?{}:t,a=n.row,i=(n.rowIndex,n.list,a.integrationName.equalsIgnoreCase("chrobinson")),r=Object(c.useState)({email:"",mc:"",code:""}),o=Object(y.a)(r,2),l=o[0],s=o[1],d=Object(c.useState)(!1),u=Object(y.a)(d,2),b=u[0],j=u[1],f=Object(c.useState)({email:"",password:""}),O=Object(y.a)(f,2),p=O[0],h=O[1],g=Object(c.useState)({}),S=Object(y.a)(g,2),P=S[0],k=S[1],L=Object(M.a)(H.a,null,!0),W=L.loading,U=L.mutation,T=Object(M.a)("/api/carrierProfile/secret-manager?update=true",null,!0),F=T.loading,_=T.mutation,B=function(e){var t=e.name,n=e.value;s(Object(v.a)(Object(v.a)({},l),{},Object(x.a)({},t,n))),k(Object(v.a)(Object(v.a)({},P),{},Object(x.a)({},t,"")))};return b?Object(E.jsx)(C.a,{config:R,children:Object(E.jsx)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault();var t=l.email,n=(l.mc,l.code);if(!Object(m.f)(t)||!t)return k(Object(v.a)(Object(v.a)({},P),{},{email:"Invalid Email"}));var r={mc:l.mc,email:l.email};if(n&&Object.assign(r,{code:n}),i){var c=l.clientId,o=l.clientSecret;Object.assign(r,{clientId:c,clientSecret:o})}_(Object(x.a)({},a.integrationName,Object(v.a)({},r))).then((function(e){if(!e.success)return Object(I.a)(e.message,"error");Object(m.j)("fetchCarrierProfile"),Object(m.j)("closeModal")}))},children:Object(E.jsxs)(D.a,{container:!0,spacing:3,direction:"column",sx:{minWidth:350},children:[i&&Object(E.jsx)(D.a,{item:!0,children:Object(E.jsx)(A.a,{fullWidth:!0,label:"Client ID",name:"clientId",onChange:B,value:l.clientId||""})}),i&&Object(E.jsx)(D.a,{item:!0,children:Object(E.jsx)(A.a,{fullWidth:!0,label:"Client Secret",name:"clientSecret",onChange:B,value:l.clientSecret||"",multiline:!0,rows:3})}),!i&&Object(E.jsx)(D.a,{item:!0,children:Object(E.jsx)(A.a,{fullWidth:!0,label:"Code",name:"code",onChange:B,value:l.code||"",multiline:!0,rows:5})}),Object(E.jsx)(D.a,{item:!0,children:Object(E.jsx)(A.a,{fullWidth:!0,label:"Email",onChange:B,name:"email",value:l.email||""})}),Object(E.jsx)(D.a,{item:!0,children:Object(E.jsx)(A.a,{fullWidth:!0,label:"MC#",name:"mc",onChange:B,value:l.mc||""})}),Object(E.jsx)(D.a,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:Object(E.jsx)(w.a,{type:"submit",variant:"contained",color:"primary",loading:F,children:F?"Updating...":"Update"})})]})})}):Object(E.jsx)(C.a,{config:R,children:Object(E.jsx)(N,{onChange:function(e){var t=e.name,n=e.value;h(Object(v.a)(Object(v.a)({},p),{},Object(x.a)({},t,n))),k(Object(v.a)(Object(v.a)({},P),{},Object(x.a)({},t,"")))},form:p,onSubmit:function(e){e.preventDefault();var t=p.email,n=p.password;t||k(Object(v.a)(Object(v.a)({},P),{},{email:"Please enter Email"})),n?Object(m.f)(t)?U(p,null).then((function(e){e.token&&(j(!0),s(a))})):k(Object(v.a)(Object(v.a)({},P),{},{email:"Invalid Email"})):k(Object(v.a)(Object(v.a)({},P),{},{email:"Please enter Password"}))},errors:P,loading:W})})},F=n(1065);t.default=Object(f.withRouter)((function(e){var t=e.match,n=(void 0===t?{}:t).path,r=Object(f.useRouteMatch)(n+"/updateCarrierProfile"),s=Object(m.e)().user||{},d=s.role,u=void 0===d?"admin":d,b=s.orgId,p=void 0===b?"":b,h=Object(l.e)((function(e){return e.carrierProfile})),g=h.data,x=h.loading,v=Object(l.d)(),y=Object(F.a)("/api/carrierProfile/secret-manager?orgId="+p),C=y.data,w=void 0===C?{}:C,I=y.loading,S=y.refetch,k=y.isRefetching,R=w||{},D=R.data,M=R._dbData;Object(c.useEffect)((function(){return v(j()),Object(m.a)(window,"fetchCarrierProfile",S),function(){return Object(m.h)(window,"fetchCarrierProfile",S)}}),[]);return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(o.a,{data:g,loading:x,config:U,onRefetch:S,isRefetching:k}),r&&Object(E.jsx)(P,{onCloseUrl:n}),"admin"!==u&&Object(E.jsx)(a.a,{sx:{display:"flex",justifyContent:"flex-end"},children:Object(E.jsx)(i.a,{variant:"contained",component:O.b,to:n+"/updateCarrierProfile",children:"Update Profile"})}),Object(E.jsx)(a.a,{sx:{mt:4},children:Object(E.jsx)(o.a,{data:D,loading:I,config:W({path:n,data:M,list:D})})}),Object(E.jsx)(f.Route,{component:T,path:n+L.g})]})}))}}]);
//# sourceMappingURL=2.454c15e1.chunk.js.map