{"version":3,"sources":["hooks/useMutation.js","views/ownerOperator/FormModal.js","views/ownerOperator/OwnerOperator.js"],"names":["getRequestCb","type","fn","requestPut","requestDelete","requestPatch","requestPost","useMutation","url","callback","arguments","length","undefined","_useState","useState","_useState2","_slicedToArray","loading","setLoading","mutation","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","body","asyncApiCall","_args","wrap","_context","prev","next","toLowerCase","abrupt","uri","then","res","data","catch","err","finally","stop","_x","apply","validateForm","firstName","lastName","phoneNumber","errors","formTemplate","email","FormModal","props","history","_props$match","match","_props$match2$params","params","_props$match2$params3","id","users","setUsers","_React$useState","React","_React$useState2","form","setForm","_useState3","_useState4","setErrors","_useMutation","updateForm","e","_e$target","target","_e$target2","name","value","_objectSpread","_defineProperty","ownerops","useMemo","filter","user","role","useEffect","axios","get","getBaseUrl","_res$data","_res$data2$data","notification","message","_","isEmpty","concat","r","console","log","onBlur","onSubmit","_ref2","_yield$mutation","success","preventDefault","sent","handleClose","setTimeout","triggerCustomEvent","push","_jsxs","Dialog","fullWidth","maxWidth","open","onClose","PaperProps","sx","width","children","DialogTitle","color","blue","textAlign","fontWeight","letterSpacing","_jsx","DialogContent","className","InputField","label","onChange","errorText","showFirstBlank","options","map","driver","_id","Grid","container","spacing","style","marginTop","item","xs","_Button","variant","onClick","disabled","checkObjProperties","OwnerOperator","path","useRouteMatch","row","setRow","useHistory","fetchOwnerOp","_r$data","_r$data2$data","addEvent","window","removeEvent","onDelete","stopPropagation","delete","_ref$data","tableConfig","rowCellPadding","emptyMessage","columns","renderer","Fragment","_ref3","mr","bind","EnhancedTable","config","component","Link","to","position","right","Route"],"mappings":"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","file":"static/js/12.fc366484.chunk.js","sourcesContent":["import {useState} from \"react\";\r\nimport {requestDelete, requestPatch, requestPost, requestPut} from \"../utils/request\";\r\n\r\nconst getRequestCb = (type) => {\r\n    let fn;\r\n    // eslint-disable-next-line default-case\r\n    switch (type) {\r\n        case 'put' : {\r\n            fn = requestPut\r\n            break;\r\n        }\r\n        case 'delete' : {\r\n            fn = requestDelete\r\n            break;\r\n        }\r\n        case 'patch' : {\r\n            fn = requestPatch\r\n            break;\r\n        }\r\n        default: {\r\n            fn = requestPost;\r\n        }\r\n    }\r\n    return fn;\r\n}\r\n\r\nconst useMutation = (url, callback = null) => {\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const mutation = async (body, type = 'post') => {\r\n        setLoading(true);\r\n        const asyncApiCall = getRequestCb(type.toLowerCase());\r\n        if(asyncApiCall) {\r\n            return asyncApiCall({uri: url, callback, body})\r\n                .then(res => res.data)\r\n                .catch(err => {\r\n                    return err;\r\n                })\r\n                .finally(() => {\r\n                    setLoading(false);\r\n                });\r\n        }\r\n    }\r\n\r\n    return { mutation, loading }\r\n}\r\n\r\nexport default useMutation;","import DialogTitle from \"@mui/material/DialogTitle\";\r\nimport _ from 'lodash';\r\nimport {blue} from \"../../components/layout/ui/Theme\";\r\nimport DialogContent from \"@mui/material/DialogContent\";\r\nimport InputField from \"../../components/Atoms/form/InputField\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport React, {useEffect, useMemo, useState} from \"react\";\r\nimport axios from \"axios\";\r\nimport {getBaseUrl} from \"../../config\";\r\nimport {notification} from \"../../actions/alert\";\r\nimport {checkObjProperties, triggerCustomEvent} from \"../../utils/utils\";\r\nimport {Button} from \"@mui/material\";\r\nimport useMutation from \"../../hooks/useMutation\";\r\n\r\nconst validateForm = ({firstName, lastName, phoneNumber}) => {\r\n    let errors = {}\r\n    if (!firstName) {\r\n        errors.firstName = 'Please provide the First Name'\r\n    }\r\n    if (!lastName) {\r\n        errors.lastName = 'Please provide the Last Name'\r\n        // return [false, 'Please provide the Last Name', 'lastName']\r\n    }\r\n    if (!phoneNumber) {\r\n        errors.phoneNumber = 'Please provide the Phone Number'\r\n    }\r\n    return errors\r\n}\r\nconst formTemplate = {\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    phoneNumber: \"\",\r\n    email: ''\r\n}\r\n\r\n\r\nconst FormModal = (props) => {\r\n    const {history, match: {params: {id = ''} = {}} = {}} = props;\r\n    const [users, setUsers] = useState([])\r\n    const [form, setForm] = React.useState(formTemplate);\r\n    const [errors, setErrors] = useState(formTemplate);\r\n    const {mutation, loading} = useMutation(\"/api/ownerOperator\")\r\n    const updateForm = (e) => {\r\n        const {target: {name, value} = {}} = e\r\n        setForm({...form, [name]: value});\r\n    }\r\n    const ownerops = useMemo(() => {\r\n        return (users || []).filter(user => user.role.toLowerCase() === 'owneroperator')\r\n    }, [users]);\r\n\r\n    useEffect(() => {\r\n        if (id) {\r\n            axios.get(getBaseUrl() + \"/api/ownerOperator/\" + id)\r\n                .then(res => {\r\n                    const {data: {data = {}} = {}} = res;\r\n                    if (data) {\r\n                        setForm(data);\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    notification(err.message)\r\n                })\r\n        }\r\n        if (_.isEmpty(ownerops)) {\r\n            axios.get(`/api/users?page=${0}&limit=${0}`)\r\n                .then(r => {\r\n                    setUsers(r.data.users)\r\n                })\r\n                .catch(e => {\r\n                    console.log(e.message);\r\n                    notification(e.message, 'error')\r\n                })\r\n        }\r\n    }, [id, ownerops])\r\n\r\n    const onBlur = (name, value) => {\r\n        if (value) {\r\n            setErrors({...errors, [name]: ''});\r\n        }\r\n    }\r\n\r\n    const onSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const body = {...form};\r\n        const errors = validateForm(body);\r\n        if (_.isEmpty(errors)) {\r\n            const {success, data} = await mutation(body);\r\n            const {message} = data || {};\r\n            if (success) {\r\n                notification(message);\r\n                handleClose();\r\n                setTimeout(() => {\r\n                    triggerCustomEvent('refreshOwnerOp');\r\n                }, 500)\r\n            } else {\r\n                notification(message, 'error');\r\n            }\r\n        } else {\r\n            setErrors({...errors})\r\n        }\r\n    };\r\n\r\n    const handleClose = () => {\r\n        history.push('/dashboard');\r\n    }\r\n    return (\r\n        <Dialog\r\n            fullWidth={false}\r\n            maxWidth={\"md\"}\r\n            open={true}\r\n            onClose={handleClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n            PaperProps={{\r\n                sx: {\r\n                    width: 400\r\n                }\r\n            }}\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\" sx={{\r\n                color: blue,\r\n                textAlign: 'center',\r\n                fontWeight: 400,\r\n                letterSpacing: 1\r\n            }}>\r\n                {id ? \"Edit\" : 'Add'} Owner Operator\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <div className=\"\">\r\n                    <form className={''}>\r\n\r\n                        <div>\r\n                            <InputField\r\n                                name={\"firstName\"}\r\n                                label={\"First Name\"}\r\n                                onChange={updateForm}\r\n                                value={form.firstName || ''}\r\n                                errorText={errors['firstName']}\r\n                                onBlur={onBlur}\r\n                            />\r\n                            <InputField\r\n                                name={\"lastName\"}\r\n                                label={\"Last Name\"}\r\n                                onChange={updateForm}\r\n                                value={form.lastName || ''}\r\n                                errorText={errors['lastName']}\r\n                                onBlur={onBlur}\r\n                            />\r\n                            <InputField\r\n                                name={\"phoneNumber\"}\r\n                                label={\"Phone Number\"}\r\n                                onChange={updateForm}\r\n                                value={form.phoneNumber || ''}\r\n                                onBlur={onBlur}\r\n                                errorText={errors['phoneNumber']}\r\n                            />\r\n                            <InputField\r\n                                name={\"email\"}\r\n                                label={\"Email\"}\r\n                                onChange={updateForm}\r\n                                value={form.email || ''}\r\n                                onBlur={onBlur}\r\n                                errorText={errors['email']}\r\n                                type={'email'}\r\n                            />\r\n                            {!id && <InputField\r\n                                value={form.user}\r\n                                name=\"user\"\r\n                                onChange={updateForm}\r\n                                label='Select Onwer Operator'\r\n                                type={'select'}\r\n                                showFirstBlank={true}\r\n                                options={ownerops.map(driver => ({id: driver._id, label: driver.email}))}\r\n                            />}\r\n                        </div>\r\n\r\n                        <Grid container spacing={1} style={{marginTop: \"20px\"}}>\r\n                            <Grid item xs={3}></Grid>\r\n                            <Grid item xs={6}>\r\n                                <Button\r\n                                    className=\"\"\r\n                                    type=\"submit\"\r\n                                    variant={'contained'}\r\n                                    onClick={onSubmit}\r\n                                    style={{width: '100%'}}\r\n                                    disabled={!checkObjProperties(form) || loading}\r\n                                >\r\n                                    Save\r\n                                </Button>\r\n                            </Grid>\r\n                            <Grid item xs={3}></Grid>\r\n                        </Grid>\r\n\r\n                    </form>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default FormModal","import React, {Fragment, useEffect, useState} from \"react\";\r\nimport {Button} from \"@mui/material\";\r\nimport {Link, Route, useHistory, useRouteMatch} from \"react-router-dom\";\r\nimport EnhancedTable from \"../../components/Atoms/table/Table\";\r\nimport axios from \"axios\";\r\nimport {getBaseUrl} from \"../../config\";\r\nimport FormModal from \"./FormModal\";\r\nimport {notification} from \"../../actions/alert\";\r\nimport {addEvent, removeEvent} from \"../../utils/utils\";\r\n\r\n\r\nconst OwnerOperator = () => {\r\n  const { path } = useRouteMatch(),\r\n      [row, setRow] = useState([]),\r\n      [loading, setLoading] = useState(false),\r\n    history = useHistory();\r\n\r\n  function fetchOwnerOp() {\r\n      setLoading(true);\r\n      axios.get(getBaseUrl() + '/api/ownerOperator').then(r => {\r\n          const {data: {data = []} = {}} = r;\r\n          setRow(data);\r\n          setLoading(false);\r\n      })\r\n          .catch(err => {\r\n              console.log(err.message)\r\n              setLoading(false);\r\n          })\r\n  }\r\n\r\n  useEffect(() => {\r\n      fetchOwnerOp();\r\n      addEvent(window, 'refreshOwnerOp', fetchOwnerOp)\r\n\r\n      return () => removeEvent(window, 'refreshOwnerOp', fetchOwnerOp)\r\n  }, [])\r\n\r\n    const onDelete = (id, e) => {\r\n      e.stopPropagation();\r\n      axios.delete(getBaseUrl() + \"/api/ownerOperator/\"+id)\r\n          .then(({data = {}}) => {\r\n              notification(data.message)\r\n              fetchOwnerOp()\r\n          })\r\n        .catch(err => console.log(err.message))\r\n    }\r\n\r\n  const tableConfig = {\r\n    rowCellPadding: \"inherit\",\r\n    emptyMessage: \"No Owner Operator Found\",\r\n    columns: [\r\n      {\r\n        id: \"firstName\",\r\n        label: \"First Name\",\r\n      },\r\n      {\r\n        id: \"lastName\",\r\n        label: \"Last Name\",\r\n      },\r\n      {\r\n        id: \"role\",\r\n        label: \"Role\",\r\n        renderer: ({ row }) => {\r\n          return <Fragment>Owner Operator</Fragment>;\r\n        },\r\n      },\r\n\r\n      {\r\n        id: \"update\",\r\n        renderer: ({ row }) => {\r\n          return (\r\n            <Fragment>\r\n              <Button\r\n                variant=\"contained\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  history.push(path + `/ownerOp/edit/${row._id}`);\r\n                }}\r\n                sx={{mr: 1}}\r\n              >\r\n                Update\r\n              </Button>\r\n              <Button\r\n                  variant=\"contained\"\r\n                  color={'error'}\r\n                  onClick={onDelete.bind(this, row._id)}\r\n              >\r\n                Delete\r\n              </Button>\r\n            </Fragment>\r\n          );\r\n        },\r\n      },\r\n    ],\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <EnhancedTable\r\n        config={tableConfig}\r\n        data={row}\r\n        loading={loading}\r\n      />\r\n        <Button\r\n            variant='contained'\r\n            component={Link}\r\n            to={path + '/ownerOp/add'}\r\n            className={'addNewOwnerOp'}\r\n            sx={{position: 'absolute', right: 10}}\r\n        >\r\n            Add Owner Operator\r\n        </Button>\r\n      <Route path={path + \"/ownerOp/add\"} component={FormModal} />\r\n      <Route path={path + \"/ownerOp/edit/:id\"} component={FormModal} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OwnerOperator;\r\n"],"sourceRoot":""}