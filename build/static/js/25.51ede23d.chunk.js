(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[25],{1149:function(e,t,n){"use strict";n.r(t);var a=n(225),i=n(0),o=n(315),c=n(46),r=n(51),l=n(3),s=n(110);const{orgId:d}=Object(s.f)().user,b=()=>async e=>{e({type:l.m,payload:{loading:!0,data:{}}});try{const{data:t}=await Object(r.b)({uri:"/api/organizations?orgId="+d});e({type:l.m,payload:{loading:!1,data:t.data}})}catch(t){console.log(t),e({type:l.m,payload:{loading:!1,data:{}}})}};var u=n(11),j=n(547),h=n(1042),g=n(109),f=n(1169),m=n(308),p=n(4),O=n(1),x=n(8),y=n(128),C=n(271),v=n(10),w=n(275),I=n(488),S=n(227),k=n(106),P=n(215),L=n(272);function E(e){return Object(P.a)("MuiLoadingButton",e)}var R=Object(L.a)("MuiLoadingButton",["root","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]),D=n(2);const M=["children","disabled","id","loading","loadingIndicator","loadingPosition","variant"],W=Object(v.a)(h.a,{shouldForwardProp:e=>(e=>"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e&&"classes"!==e)(e)||"classes"===e,name:"MuiLoadingButton",slot:"Root",overridesResolver:(e,t)=>[t.root,t.startIconLoadingStart&&{["& .".concat(R.startIconLoadingStart)]:t.startIconLoadingStart},t.endIconLoadingEnd&&{["& .".concat(R.endIconLoadingEnd)]:t.endIconLoadingEnd}]})((e=>{let{ownerState:t,theme:n}=e;return Object(O.a)({["& .".concat(R.startIconLoadingStart,", & .").concat(R.endIconLoadingEnd)]:{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0}},"center"===t.loadingPosition&&{transition:n.transitions.create(["background-color","box-shadow","border-color"],{duration:n.transitions.duration.short}),["&.".concat(R.loading)]:{color:"transparent"}},"start"===t.loadingPosition&&t.fullWidth&&{["& .".concat(R.startIconLoadingStart,", & .").concat(R.endIconLoadingEnd)]:{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0,marginRight:-8}},"end"===t.loadingPosition&&t.fullWidth&&{["& .".concat(R.startIconLoadingStart,", & .").concat(R.endIconLoadingEnd)]:{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0,marginLeft:-8}})})),F=Object(v.a)("span",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.loadingIndicator,t["loadingIndicator".concat(Object(x.a)(n.loadingPosition))]]}})((e=>{let{theme:t,ownerState:n}=e;return Object(O.a)({position:"absolute",visibility:"visible",display:"flex"},"start"===n.loadingPosition&&("outlined"===n.variant||"contained"===n.variant)&&{left:"small"===n.size?10:14},"start"===n.loadingPosition&&"text"===n.variant&&{left:6},"center"===n.loadingPosition&&{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled},"end"===n.loadingPosition&&("outlined"===n.variant||"contained"===n.variant)&&{right:"small"===n.size?10:14},"end"===n.loadingPosition&&"text"===n.variant&&{right:6},"start"===n.loadingPosition&&n.fullWidth&&{position:"relative",left:-10},"end"===n.loadingPosition&&n.fullWidth&&{position:"relative",right:-10})}));var z=i.forwardRef((function(e,t){const n=i.useContext(I.a),a=Object(k.a)(n,e),o=Object(w.a)({props:a,name:"MuiLoadingButton"}),{children:c,disabled:r=!1,id:l,loading:s=!1,loadingIndicator:d,loadingPosition:b="center",variant:u="text"}=o,j=Object(p.a)(o,M),h=Object(y.a)(l),g=null!=d?d:Object(D.jsx)(S.a,{"aria-labelledby":h,color:"inherit",size:16}),f=Object(O.a)({},o,{disabled:r,loading:s,loadingIndicator:g,loadingPosition:b,variant:u}),m=(e=>{const{loading:t,loadingPosition:n,classes:a}=e,i={root:["root",t&&"loading"],startIcon:[t&&"startIconLoading".concat(Object(x.a)(n))],endIcon:[t&&"endIconLoading".concat(Object(x.a)(n))],loadingIndicator:["loadingIndicator",t&&"loadingIndicator".concat(Object(x.a)(n))]},o=Object(C.a)(i,E,a);return Object(O.a)({},a,o)})(f),v=s?Object(D.jsx)(F,{className:m.loadingIndicator,ownerState:f,children:g}):null;return Object(D.jsxs)(W,Object(O.a)({disabled:r||s,id:h,ref:t},j,{variant:u,classes:m,ownerState:f,children:["end"===f.loadingPosition?c:v,"end"===f.loadingPosition?v:c]}))})),N=n(26);const T=e=>{let{onCloseUrl:t}=e;const[n,o]=Object(i.useState)({}),l=Object(u.useHistory)(),[d,m]=Object(i.useState)(!1),{id:p}=Object(s.f)().user||{},O=Object(c.d)();Object(i.useEffect)((()=>{(async()=>{const{success:e,data:t}=await Object(r.b)({uri:"/api/fmcsa/"+p});if(e){const{data:{autoLiabilityInsurance:e,generalLiabilityInsurance:n,cargoLiabilityInsurance:a,email:i,phone:c}={}}=t;o({autoLiabilityInsurance:e?e.url:"",generalLiabilityInsurance:n?n.url:"",cargoLiabilityInsurance:a?a.url:"",email:i,phone:c})}})()}),[p]);const x=e=>{let{target:{name:t,files:n}}=e;o((e=>({...e,[t]:n||null})))},y=e=>{let{target:{name:t,value:a}}=e;o({...n,[t]:a})};return Object(D.jsx)(a.a,{component:"form",noValidate:!0,sx:{minWidth:400},onSubmit:e=>{m(!0),e.preventDefault();const a=new FormData;for(let t of Object.keys(n))if(["generalLiabilityInsurance","autoLiabilityInsurance","cargoLiabilityInsurance"].indexOf(t)<0){const e=n[t];let i=Array.isArray(e)&&!(null===e)?JSON.stringify(e):e;a.append(t,i)}for(let t of["generalLiabilityInsurance","autoLiabilityInsurance","cargoLiabilityInsurance"]){const e=n[t];if(e)for(let n of e)a.append(t,n)}Object(r.d)({uri:"/api/fmcsa",body:a}).then((e=>{Object(N.a)(e.data.message),O(b()),l.push(t)})).catch((e=>{console.log(e),Object(N.a)(e.message,"error")})).finally((()=>m(!1)))},children:Object(D.jsxs)(j.a,{spacing:3,children:[Object(D.jsx)(f.a,{type:"email",label:"Email",fullWidth:!0,onChange:y,value:n.email||"",name:"email"}),Object(D.jsx)(f.a,{type:"email",label:"Phone Number",fullWidth:!0,value:n.phone||"",onChange:y,name:"phone"}),Object(D.jsxs)(j.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(D.jsx)(g.a,{children:"General Liability Insurance"}),Object(D.jsxs)("label",{htmlFor:"contained-button-file1",children:[Object(D.jsx)("input",{style:{display:"none"},type:"file",accept:"application/pdf,application/msword,application/vnd.ms-excel",name:"generalLiabilityInsurance",onChange:x,id:"contained-button-file1"}),Object(D.jsx)(h.a,{variant:"contained",component:"span",children:"Attach"})]})]}),Object(D.jsxs)(j.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(D.jsx)(g.a,{children:"Auto Liability Insurance"}),Object(D.jsxs)("label",{htmlFor:"contained-button-file2",children:[Object(D.jsx)("input",{style:{display:"none"},type:"file",accept:"application/pdf,application/msword,application/vnd.ms-excel",name:"autoLiabilityInsurance",onChange:x,id:"contained-button-file2"}),Object(D.jsx)(h.a,{variant:"contained",component:"span",children:"Attach"})]})]}),Object(D.jsxs)(j.a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(D.jsx)(g.a,{children:"Cargo Liability Insurance"}),Object(D.jsxs)("label",{htmlFor:"contained-button-file3",children:[Object(D.jsx)("input",{style:{display:"none"},type:"file",accept:"application/pdf,application/msword,application/vnd.ms-excel",name:"cargoLiabilityInsurance",onChange:x,id:"contained-button-file3"}),Object(D.jsx)(h.a,{variant:"contained",component:"span",children:"Attach"})]})]}),Object(D.jsx)(z,{loading:d,loadingIndicator:"Updating...",type:"submit",variant:"contained",children:"Update"})]})})};var A=e=>{let{onCloseUrl:t}=e;const n={title:"Update Carrier Profile",closeUrl:t,paperProps:{sx:{width:"auto"}}};return Object(D.jsx)(m.a,{config:n,children:Object(D.jsx)(T,{onCloseUrl:t})})},U=n(84),q=n(33),B=n(70);const H={chRobinson:"C.H. Robinson",newtrul:"New Trul"},{edit:_}=B.a.getUserPermissionsByDashboardId("carrierProfile"),K=e=>{let{path:t,_dbData:n,list:a,refetch:i}=e;return{rowCellPadding:"normal",showRefresh:!1,columns:[{id:"integrationName",label:"Integrations",valueFormatter:e=>H[e]||e},{id:"code",label:"Key/Code",renderer:e=>{let{row:t}=e;return t.code||t.clientSecret?"******":"--"}},{id:"email",label:"Email"},{id:"mc",label:"MC#"},{renderer:(e,o)=>{let{row:c}=e;return Object(D.jsx)(h.a,{disabled:!_,component:U.b,to:{pathname:t+q.i,state:{row:c,rowIndex:o,_dbData:n,list:a,refetch:i}},variant:"contained",children:"Update"})}}]}},V={containerHeight:"auto",rowCellPadding:"normal",showRefresh:!0,columns:[{id:"name",label:"Company Name"},{id:"otherOrgMetaData.carrier.ein",label:"EIN#"},{id:"otherOrgMetaData.carrier.dotNumber",label:"DOT#",emptyState:"--"},{id:"operatingStatus",label:"Operating Status",renderer:e=>{let{row:t={}}=e;const{otherOrgMetaData:{carrier:{allowedToOperate:n}={}}={}}=t;return Object(s.b)("Y"===n)}}]},J={title:"Update Integration Details",preventBackdropClick:!0,titleStyles:{}};var G=n(226),Y=n(307),Q=n(125),X=n(47),Z=n(299);const $=Object(i.memo)((e=>{let{onChange:t,form:n,onSubmit:a,errors:i,loading:o}=e;const{password:c,email:r}=n;return Object(D.jsxs)(G.a,{container:!0,spacing:3,direction:"column",sx:{minWidth:350},component:"form",onSubmit:a,noValidate:!0,children:[Object(D.jsx)(G.a,{item:!0,children:Object(D.jsx)(g.a,{fontWeight:600,color:X.a,children:"Please verify your credentials."})}),Object(D.jsx)(G.a,{item:!0,children:Object(D.jsx)(Z.c,{readOnly:!0,label:"Email",fullWidth:!0,type:"email",value:r,name:"email",onChange:t,errors:i})}),Object(D.jsx)(G.a,{item:!0,children:Object(D.jsx)(Z.e,{label:"Password",fullWidth:!0,value:c,name:"password",onChange:t,errors:i})}),Object(D.jsx)(G.a,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:Object(D.jsx)(z,{type:"submit",variant:"contained",color:"primary",loading:o,children:o?"Please wait...":"Verify"})})]})}));var ee=e=>{const{state:{row:t}={}}=e.location,n=t.integrationName.equalsIgnoreCase("chrobinson"),a=H[t.integrationName],[o,c]=Object(i.useState)({email:"",mc:"",code:""}),[r,l]=Object(i.useState)(!1),[d,b]=Object(i.useState)({email:Object(s.f)().user.email,password:""}),[u,j]=Object(i.useState)({}),{loading:h,mutation:f}=Object(Y.a)(Q.a,null,!0),{loading:p,mutation:O}=Object(Y.a)(Q.c,null,!0,{queryParams:{update:!0}}),x=e=>{let{name:t,value:n}=e;b({...d,[t]:n}),j({...u,[t]:""})},y=e=>{e.preventDefault();const{email:n,password:a}=d;n||j({...u,email:"Please enter Email"}),a?Object(s.g)(n)?f(d,null).then((e=>{e.success&&(l(!0),c(t))})):j({...u,email:"Invalid Email"}):j({...u,password:"Please enter Password"})},C=e=>{let{name:t,value:n}=e;c({...o,[t]:n}),j({...u,[t]:""})};return r?Object(D.jsxs)(m.a,{config:J,children:[Object(D.jsx)(g.a,{align:"center",variant:"h6",fontWeight:550,mb:1,children:a}),Object(D.jsx)(Z.a,{config:{open:!0,message:"Data changes will reflect after an hour of saving.",severity:"info"},inStyles:{mb:2}}),Object(D.jsx)("form",{noValidate:!0,onSubmit:e=>{e.preventDefault();const{email:a,code:i}=o;if(!Object(s.g)(a)||!a)return j({...u,email:"Invalid Email"});{const e={mc:o.mc,email:o.email};if(i&&Object.assign(e,{code:i}),n){const{clientId:t,clientSecret:n,tCode:a}=o;Object.assign(e,{clientId:t,clientSecret:n,tCode:a})}O({[t.integrationName]:{...e}}).then((e=>{if(!e.success)return Object(N.a)(e.message,"error");Object(N.a)("Updated Successfully"),Object(s.l)("fetchCarrierProfile"),Object(s.l)("closeModal")}))}},children:Object(D.jsxs)(G.a,{container:!0,spacing:3,direction:"column",sx:{minWidth:350},children:[n&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(G.a,{item:!0,children:Object(D.jsx)(Z.c,{fullWidth:!0,label:"Client ID",name:"clientId",onChange:C,value:o.clientId||""})}),Object(D.jsx)(G.a,{item:!0,children:Object(D.jsx)(Z.c,{fullWidth:!0,label:"Client Secret",name:"clientSecret",onChange:C,value:o.clientSecret||"",multiline:!0,rows:3})}),Object(D.jsx)(G.a,{item:!0,children:Object(D.jsx)(Z.c,{fullWidth:!0,label:"TCode",name:"tCode",onChange:C,value:o.tCode||""})})]}),!n&&Object(D.jsx)(G.a,{item:!0,children:Object(D.jsx)(Z.c,{fullWidth:!0,label:"Code",name:"code",onChange:C,value:o.code||"",multiline:!0,rows:5})}),Object(D.jsx)(G.a,{item:!0,children:Object(D.jsx)(Z.c,{fullWidth:!0,label:"Email",onChange:C,name:"email",value:o.email||""})}),Object(D.jsx)(G.a,{item:!0,children:Object(D.jsx)(Z.c,{fullWidth:!0,label:"MC#",name:"mc",onChange:C,value:o.mc||""})}),Object(D.jsx)(G.a,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:Object(D.jsx)(z,{type:"submit",variant:"contained",color:"primary",loading:p,children:p?"Updating...":"Update"})})]})})]}):Object(D.jsx)(m.a,{config:J,children:Object(D.jsx)($,{onChange:x,form:d,onSubmit:y,errors:u,loading:h})})},te=n(327);t.default=Object(u.withRouter)((e=>{let{match:t={}}=e;const{path:n}=t,r=Object(u.useRouteMatch)(n+"/updateCarrierProfile"),{data:l,loading:d}=Object(c.e)((e=>e.carrierProfile)),j=Object(c.d)(),{data:h={},loading:g,refetch:f,isRefetching:m}=Object(te.a)(Q.c,null,{queryParams:{orgId:Object(s.f)().user.orgId}}),{data:p,_dbData:O}=h||{};return Object(i.useEffect)((()=>(j(b()),Object(s.a)(window,"fetchCarrierProfile",f),()=>Object(s.i)(window,"fetchCarrierProfile",f))),[j]),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(o.a,{data:l,loading:d,config:V,onRefetch:f,isRefetching:m}),r&&Object(D.jsx)(A,{onCloseUrl:n}),Object(D.jsx)(a.a,{sx:{mt:4},children:Object(D.jsx)(o.a,{data:p,loading:g,config:K({path:n,data:O,list:p})})}),Object(D.jsx)(u.Route,{component:ee,path:n+q.i})]})}))},307:function(e,t,n){"use strict";var a=n(0),i=n(51),o=n(110);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const[r,l]=Object(a.useState)(!1);return{mutation:async function(a){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post",s=arguments.length>2?arguments[2]:void 0,d=e;c.queryParams&&(d=d+"?"+Object(o.j)(c.queryParams)),l(!0),r||(r="post");const b=(e=>{let t;switch(e){case"put":t=i.e;break;case"delete":t=i.a;break;case"patch":t=i.c;break;default:t=i.d}return t})(r.toLowerCase());if(b)return b({uri:d,callback:t,body:a,showTriggers:n}).then((e=>(s&&s({...e}),e))).catch((e=>e)).finally((()=>{l(!1)}))},loading:r}}},308:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(405),i=n(276),o=n(0),c=n.n(o),r=n(10),l=n(32),s=n(589),d=n(590),b=n(688),u=n(286),j=n(313),h=n.n(j),g=n(11),f=n(110),m=n(86),p=n(2);const O=Object(r.a)(s.a)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),x=e=>{const{children:t,onClose:n,showClose:a,titleStyles:i,...o}=e;return Object(p.jsxs)(d.a,{sx:{m:0,p:2,textAlign:"center",...i},...o,children:[a?Object(p.jsx)(u.a,{"aria-label":"close",onClick:n,sx:{position:"absolute",left:8,top:12,color:e=>e.palette.grey[500]},children:Object(p.jsx)(h.a,{})}):null,t]})};function y(e){const{config:t={},children:n,closeCallback:r}=e,{title:s="",closeUrl:d="",showClose:u=!0,paperProps:j={},preventBackdropClick:h=!1,titleStyles:y={}}=t,[C,v]=c.a.useState(!1),w=Object(l.a)(),I=Object(i.a)(w.breakpoints.down("sm")),S=function(e){h&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropClick")||v(!1)};c.a.useEffect((()=>(v(!0),Object(f.a)(window,"closeModal",S),()=>Object(f.i)(window,"closeModal",S))),[]);const k=Object(o.useMemo)((()=>c.a.forwardRef((function(e,t){const n=Object(g.useHistory)();return Object(p.jsx)(a.a,{ref:t,...e,onExited:()=>r?r():d?n.push(d||m.a):n.goBack()})}))),[]);return Object(p.jsxs)(O,{onClose:S,"aria-labelledby":s||"customized-dialog-title",open:C,maxWidth:"lg",TransitionComponent:k,PaperProps:j,fullScreen:I,children:[s&&Object(p.jsx)(x,{id:s||"customized-dialog-title",onClose:S,showClose:u,titleStyles:y,children:s}),Object(p.jsx)(b.a,{dividers:!0,sx:{borderTop:"none"},children:n})]})}},310:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),i=n(1042),o=n(589),c=n(1046),r=n(688),l=n(590),s=n(277),d=n(2);const b=a.forwardRef((function(e,t){return Object(d.jsx)(s.a,{direction:"up",ref:t,...e})}));function u(e){const{open:t=!1,config:n,onClose:a,preventBackdropClose:s=!1,className:u}=e,{title:j,onOk:h,okText:g="Save",content:f,onCancel:m}=n,p=function(e){s&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropclick")||a()};return Object(d.jsx)("div",{children:Object(d.jsxs)(o.a,{className:u,open:t,TransitionComponent:b,onClose:p,"aria-describedby":"alert-dialog-slide-description",children:["function"===typeof j?j({...n}):Object(d.jsx)(l.a,{sx:{fontWeight:550},children:j}),Object(d.jsx)(r.a,{children:"function"===typeof f?f({config:n}):f}),Object(d.jsxs)(c.a,{children:["function"===typeof m?m({config:n,onClose:a}):Object(d.jsx)(i.a,{variant:"outlined",onClick:p,children:"Cancel"}),"function"===typeof g?g({config:n,onOk:h}):Object(d.jsx)(i.a,{variant:"contained",color:g.equalsIgnoreCase("delete")?"error":"primary",onClick:h,children:g})]})]})})}},313:function(e,t,n){"use strict";var a=n(68);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(111)),o=n(2);t.default=(0,i.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},315:function(e,t,n){"use strict";var a=n(225),i=n(285),o=n(1194),c=n(1183),r=n(1195),l=n(547),s=n(335),d=n.n(s),b=n(1193),u=n(1192),j=n(1043),h=n(226),g=n(109),f=n(1154),m=n(286),p=n(1191),O=n(1165),x=n(343),y=n.n(x),C=n(1190),v=n(297),w=n.n(v),I=n(323),S=n.n(I),k=n(0),P=n.n(k),L=n(11),E=n(1145),R=n(10),D=n(299),M=n(2);const W=Object(R.a)(E.a)((e=>{let{theme:t}=e;return{"& .MuiPaginationItem-root":{[t.breakpoints.down("md")]:{height:"1.8rem",width:"1rem"}}}})),F=Object(R.a)(l.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{justifyContent:"center"},display:"flex",justifyContent:"space-between",flexWrap:"wrap","& .pageSizeSelect":{width:80}}}));var z=e=>{let{data:t=[],onPageChange:n,page:a=1,count:i=0,limit:o=1,onLimitChange:c,isLoading:r}=e;const[s,d]=Object(k.useState)(0);Object(k.useEffect)((()=>{Array.isArray(t)&&d(t.length)}),[t]);return i<=5?null:Object(M.jsxs)(F,{direction:"row",alignItems:"center",children:[Object(M.jsxs)(g.a,{sx:{color:"#525F7F"},fontSize:12,children:["Showing ",s," of ",i," entries"]}),Object(M.jsxs)(l.a,{direction:"row",alignItems:"center",children:[Object(M.jsx)(D.f,{disabled:r,name:"pageSize",label:"",value:o,options:[{id:5,label:5},{id:10,label:10},{id:20,label:20},{id:50,label:50},{id:100,label:100}],className:"pageSizeSelect",onChange:e=>{let{value:t}=e;"function"===typeof c&&c({value:t})}}),Object(M.jsx)(W,{disabled:r,count:Math.ceil(i/o),color:"primary",variant:"contained",page:a,size:"medium",onChange:(e,t)=>{+a!==+t&&"function"===typeof n&&n(e,+t)}})]})]})},N=n(318),T=n(310),A=n(110),U=n(312);const q=Object(R.a)(C.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:12,padding:"0 8px"}}})),B=Object(R.a)(y.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:14}}}));function H(e){let{columns:t=[],config:n={},role:a,handleRequestSort:i,hasSort:o}=e;const{headerCellSx:c={},hasDelete:r,sortField:l,sortOrder:s,showCheckbox:d}=n,b=Object(k.useMemo)((()=>t.map(((e,t)=>{const{label:n="",id:r="",visible:d=!0,sort:b=!1}=e||{};return(w.a.isFunction(d)?d({column:e,role:a}):d)?Object(M.jsx)(q,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...c},children:o&&b?Object(M.jsx)(O.a,{onClick:e=>i(e,r),active:r===l,direction:s,sx:{...c},children:n}):n},r||t):null}))),[t,c]);return d&&b.unshift(Object(M.jsx)(q,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...c}})),Object(M.jsxs)(p.a,{children:[b,r&&Object(M.jsx)(q,{padding:"none",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...c}})]})}const _=e=>{let{columns:t,data:n=[],config:a={},handleRowClick:i,handleDelete:o,...c}=e;return(n||[]).map(((e,n)=>{const{dataKey:r=""}=a;return r&&(e=e[r]),(e=>{let{row:t=[],columns:n={},config:a={},handleRowClick:i,rowIndex:o,handleDelete:c,hasDeletePermission:r,checkboxKey:l,...s}=e;const{hasDelete:d=!1,rowCellPadding:b="none",onRowClick:u,rowStyleCb:j,showCheckbox:h=!1}=a,{role:g,onCheckboxChange:O,checkboxes:x}=s;let y={};j&&(y=j({row:t})||{});const C=Object(M.jsx)(q,{sx:{},padding:"none",component:"th",scope:"row",children:Object(M.jsx)(U.a,{title:"Delete",placement:"top",children:Object(M.jsx)(m.a,{onClick:c.bind(void 0,t._id,t),disabled:!r,children:Object(M.jsx)(B,{color:"error"})})})}),v=n.map(((e,n)=>{const{id:a="",renderer:i,emptyState:c="--",valueFormatter:r,visible:l=!0,cellPadding:s}=e||{};if(!(w.a.isFunction(l)?l({column:e,role:g}):l))return null;let d;return d=r&&w.a.isFunction(r)?r(t[a]):w.a.isFunction(i)?i({row:t,role:g},o)||c:w.a.get(t,a,c)||c,Object(M.jsx)(q,{padding:s||b||"normal",component:"th",scope:"row",children:d},a+n)}));if(h){if(!l)throw new Error("Checkbox key not provided");const e=x.indexOf(t[l])>-1;v.unshift(Object(M.jsx)(q,{onClick:O.bind(void 0,t),children:Object(M.jsx)(f.a,{checked:e})}))}return Object(M.jsxs)(p.a,{hover:!!u,onClick:e=>{e.preventDefault(),w.a.isFunction(i)&&i(t)},sx:u?{cursor:"pointer",...y}:{...y},children:[v,d&&C]},o)})({row:e,columns:t,config:a,handleRowClick:i,rowIndex:n,handleDelete:o,...c})}))},K=e=>{let{config:t={},data:n=[],history:s,loading:f=!1,onRefetch:p,isRefetching:O,actions:x,isPaginationLoading:y=!1,...C}=e;n=n||[];const{onCheckboxChange:v,checkboxes:I,checkboxKey:L}=C,[E,R]=Object(k.useState)({}),[D,W]=Object(k.useState)({open:!1,config:{}}),{columns:F=[],onRowClick:U,hasOnClickUrl:q=!0,onPageChange:B,page:K,count:V,limit:J,onPageSizeChange:G,onLimitChange:Y,size:Q="medium",emptyMessage:X="",onRowClickDataCallback:Z,showRefresh:$=!1,onDelete:ee,deleteMessage:te,deletePermissions:ne=[],containerHeight:ae="",sortField:ie,sortOrder:oe="asc",handleSortChange:ce,hasSort:re=!1}=t,{role:le=""}=Object(A.f)().user,se="boolean"===typeof ne?ne:ne.indexOf(le)>-1||!1,de=P.a.useRef([]),be=Array.isArray(n)&&n.length,ue=Object(k.useMemo)((()=>x&&P.a.isValidElement(x)?x:Object(M.jsx)(M.Fragment,{})),[x]),je=e=>{if(q&&U){const t=U(e);Z&&(e=Z(e)),s.push(t,e)}else U&&U(e)},he=(e,t)=>{ce&&ce({field:t,order:ie===t&&"asc"===oe?"desc":"asc"})},ge=(e,t,n)=>{n.stopPropagation();const a={title:()=>Object(M.jsxs)(h.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(M.jsx)(S.a,{color:"error"}),Object(M.jsx)(g.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]}),okText:"Delete",onOk:()=>ee(e,fe,{row:t}),content:()=>Object(M.jsx)(j.a,{sx:{color:"#000"},children:w.a.isFunction(te)?te({row:t}):te||"Are you sure you want to delete the record?"})};W({...D,open:!0,config:a})};function fe(){W({...D,open:!1})}const me=Object(k.useMemo)((()=>be?Object(M.jsxs)(k.Fragment,{children:[Object(M.jsx)(u.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(M.jsx)(H,{columns:F,config:t,role:le,handleRequestSort:he,hasSort:re})}),Object(M.jsx)(b.a,{children:Object(M.jsx)(_,{role:le,columns:F,data:n,config:t,checkboxes:I,checkboxKey:L,handleRowClick:je,handleDelete:ge,onCheckboxChange:v,hasDeletePermission:se})})]}):Object(M.jsx)("tbody",{style:{height:300},children:Object(M.jsx)("tr",{children:Object(M.jsx)("td",{style:{textAlign:"center"},children:Object(M.jsx)("h4",{children:X||"No records found"})})})})),[n,t,I]);return Object(k.useEffect)((()=>{var e;if(null!==de&&void 0!==de&&null!==(e=de.current)&&void 0!==e&&e.table){const e=de.current.table.offsetHeight;R({...E,height:e>200?e:void 0})}}),[]),Object(k.useEffect)((()=>{var e;(y||O)&&null!==(e=de.current)&&void 0!==e&&e.tableContainer&&de.current.tableContainer.scrollTo(0,0)}),[y,O]),Object(M.jsxs)(a.a,{className:"enhanced-table",sx:{height:be&&!f?ae||"95%":"auto"},children:[Object(M.jsxs)(l.a,{alignItems:"flex-end",justifyContent:"flex-end",direction:"row",py:1,gap:.5,children:[ue,$&&Object(M.jsx)(m.a,{title:"Refresh",onClick:p,children:Object(M.jsx)(d.a,{className:O?"rotateIcon":void 0})})]}),Object(M.jsxs)(o.a,{component:i.a,className:"",ref:e=>de.current.tableContainer=e,sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2,height:be&&!f?"calc(100% - 80px)":"auto",position:"relative"},children:[f?(()=>{const e=window.innerHeight-180,t=(E.height?E.height>e?e:E.height:e)||e;return Object(M.jsx)(h.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(M.jsx)(h.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(M.jsx)(N.a,{})})})})():Object(M.jsx)(r.a,{ref:e=>de.current.table=e,"aria-label":"caption table",size:Q,stickyHeader:!0,children:me}),Object(M.jsx)(c.a,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,position:"absolute"},open:y||O||!1,children:Object(M.jsx)(N.a,{sx:{color:"inherit"}})})]}),!f&&n.length>0&&Object(M.jsx)(z,{data:n,onPageChange:B,page:K,count:V,limit:J,onLimitChange:Y||G,isLoading:O||y}),Object(M.jsx)(T.a,{className:"enhancedTable_dialog",open:D.open,config:D.config,onClose:fe})]})};t.a=Object(L.withRouter)(Object(k.memo)(K))},327:function(e,t,n){"use strict";var a=n(0),i=n(51),o=n(110);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[c,r]=Object(a.useState)(void 0),[l,s]=Object(a.useState)(!1),[d,b]=Object(a.useState)(null),[u,j]=Object(a.useState)(!1);function h(){let a=e;n.queryParams&&(a="".concat(a,"?").concat(Object(o.j)(n.queryParams))),Object(i.b)({uri:a,callback:t,showTriggers:!1}).then((e=>{e.data&&r(e.data)})).finally((()=>{s(!1),j(!1)}))}return Object(a.useEffect)((()=>{s(!0),b(null),h()}),[e]),{data:c,loading:l,error:d,refetch:function(){j(!0),h()},isRefetching:u}}},405:function(e,t,n){"use strict";var a=n(1),i=n(4),o=n(0),c=n(158),r=n(32),l=n(41),s=n(31),d=n(2);const b=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],u={entering:{transform:"none"},entered:{transform:"none"}},j=o.forwardRef((function(e,t){const n=Object(r.a)(),j={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:h,appear:g=!0,children:f,easing:m,in:p,onEnter:O,onEntered:x,onEntering:y,onExit:C,onExited:v,onExiting:w,style:I,timeout:S=j,TransitionComponent:k=c.a}=e,P=Object(i.a)(e,b),L=o.useRef(null),E=Object(s.a)(L,f.ref,t),R=e=>t=>{if(e){const n=L.current;void 0===t?e(n):e(n,t)}},D=R(y),M=R(((e,t)=>{Object(l.b)(e);const a=Object(l.a)({style:I,timeout:S,easing:m},{mode:"enter"});e.style.webkitTransition=n.transitions.create("transform",a),e.style.transition=n.transitions.create("transform",a),O&&O(e,t)})),W=R(x),F=R(w),z=R((e=>{const t=Object(l.a)({style:I,timeout:S,easing:m},{mode:"exit"});e.style.webkitTransition=n.transitions.create("transform",t),e.style.transition=n.transitions.create("transform",t),C&&C(e)})),N=R(v);return Object(d.jsx)(k,Object(a.a)({appear:g,in:p,nodeRef:L,onEnter:M,onEntered:W,onEntering:D,onExit:z,onExited:N,onExiting:F,addEndListener:e=>{h&&h(L.current,e)},timeout:S},P,{children:(e,t)=>o.cloneElement(f,Object(a.a)({style:Object(a.a)({transform:"scale(0)",visibility:"exited"!==e||p?void 0:"hidden"},u[e],I,f.props.style),ref:E},t))}))}));t.a=j}}]);
//# sourceMappingURL=25.51ede23d.chunk.js.map