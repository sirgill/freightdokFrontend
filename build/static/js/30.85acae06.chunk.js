(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[30],{1128:function(e,t,n){"use strict";n.r(t);var a=n(1006),r=n(0),o=n.n(r),c=n(13),s=n(270),i=n(22),l=n.n(i),d=n(28),j=n(1078),h=n(261),b=n.n(h),u=n(44),O=n(199),m=n(1145),p=n(1077),x=n(25),g=n(88),f=n(277),w=n(362),C=n(274),v=n(2);const y={firstName:"",lastName:"",phone:""};var N=e=>{const{history:t,match:{params:{id:n=""}={}}={},onCloseUrl:a}=e,[c,s]=o.a.useState(y),[i,l]=Object(r.useState)(y),{mutation:d,loading:h}=Object(f.a)("/api/ownerOperator"),{loading:N,data:k}=Object(w.a)("/api/ownerOperator/"+n),{data:S}=k||{},P=e=>{let{name:t,value:n}=e;s({...c,[t]:n})};Object(r.useEffect)((()=>{S&&s(S)}),[S]);const R=e=>{let{name:t,value:n}=e;n&&l({...i,[t]:""})},D=e=>{let{success:t,data:n}=e;const{message:a}=n||{};t?(Object(g.i)("refreshOwnerOp"),Object(x.a)(a||"Owner operator created"),F()):Object(x.a)(a,"error")},F=()=>{t.push(a)};return Object(v.jsxs)(p.a,{fullWidth:!1,maxWidth:"md",open:!0,onClose:F,"aria-labelledby":"form-dialog-title",PaperProps:{sx:{width:400}},children:[Object(v.jsxs)(j.a,{id:"form-dialog-title",sx:{color:u.b,textAlign:"center",fontWeight:400,letterSpacing:1},children:[n?"Edit":"Add"," Owner Operator"]}),Object(v.jsx)(m.a,{children:Object(v.jsxs)(O.a,{container:!0,component:"form",noValidate:!0,direction:"column",rowSpacing:3,p:1,children:[Object(v.jsx)(O.a,{item:!0,xs:12,children:Object(v.jsx)("div",{children:Object(v.jsx)(C.b,{name:"firstName",label:"First Name",onChange:P,value:c.firstName||"",errors:i,onBlur:R,fullWidth:!0,disabled:N||h,required:!0})})}),Object(v.jsx)(O.a,{item:!0,xs:12,children:Object(v.jsx)(C.b,{name:"lastName",label:"Last Name",onChange:P,value:c.lastName||"",errors:i,onBlur:R,fullWidth:!0,disabled:N||h,required:!0})}),Object(v.jsx)(O.a,{item:!0,xs:12,children:Object(v.jsx)(C.b,{name:"phone",label:"Phone Number",onChange:P,value:c.phone||"",onBlur:R,errors:i,fullWidth:!0,disabled:N||h,required:!0})}),Object(v.jsx)(O.a,{item:!0,xs:12,children:Object(v.jsx)(C.c,{fullWidth:!0,type:"submit",onClick:e=>{e.preventDefault();const t={...c},n=(e=>{let{firstName:t,lastName:n,phone:a}=e,r={};return t||(r.firstName="Please provide the First Name"),n||(r.lastName="Please provide the Last Name"),a||(r.phone="Please provide the Phone Number"),r})(t);b.a.isEmpty(n)?d(t,null,D):l({...n})},isLoading:h||N,loadingText:h?"Updating...":N?"Please wait...":null,children:"Update"})})]})})]})},k=n(286);t.default=()=>{const{path:e}=Object(c.useRouteMatch)(),[t,n]=Object(r.useState)([]),[o,i]=Object(r.useState)(!1),j=Object(c.useHistory)();function h(){i(!0),l.a.get(Object(d.b)()+"/api/ownerOperator").then((e=>{const{data:{data:t=[]}={}}=e;n(t),i(!1)})).catch((e=>{console.log(e.message),i(!1)}))}Object(r.useEffect)((()=>(h(),Object(g.a)(window,"refreshOwnerOp",h),()=>Object(g.g)(window,"refreshOwnerOp",h))),[]);const b=e=>{let{success:t}=e;t&&h()},u={rowCellPadding:"inherit",emptyMessage:"No Owner Operator Found",columns:[{id:"firstName",label:"First Name",emptyState:"--"},{id:"lastName",label:"Last Name",emptyState:"--"},{id:"role",label:"Role",renderer:()=>Object(v.jsx)(r.Fragment,{children:"Owner Operator"})},{id:"update",renderer:t=>{let{row:n,role:o}=t;return Object(v.jsxs)(r.Fragment,{children:[Object(v.jsx)(a.a,{variant:"contained",onClick:t=>{t.stopPropagation(),j.push(e+"/edit/".concat(n._id))},sx:{mr:1},children:"Update"}),Object(v.jsx)(a.a,{variant:"contained",color:"error",onClick:Object(k.c)({uri:"/api/ownerOperator/"+n._id,message:"Are you sure you want to delete this Owner Operator?",afterSuccessCb:b}),disabled:["ownerOperator","dispatch"].includes(o),children:"Delete"})]})}}]};return Object(v.jsxs)("div",{children:[Object(v.jsx)(s.a,{config:u,data:t,loading:o}),Object(v.jsx)(c.Route,{path:e+"/add",render:t=>Object(v.jsx)(N,{...t,onCloseUrl:e})}),Object(v.jsx)(c.Route,{path:e+"/edit/:id",render:t=>Object(v.jsx)(N,{...t,onCloseUrl:e})})]})}},270:function(e,t,n){"use strict";var a=n(200),r=n(246),o=n(1152),c=n(1153),s=n(491),i=n(292),l=n.n(i),d=n(1151),j=n(1150),h=n(1132),b=n(199),u=n(86),O=n(247),m=n(1149),p=n(295),x=n.n(p),g=n(1148),f=n(261),w=n.n(f),C=n(281),v=n.n(C),y=n(0),N=n.n(y),k=n(13),S=n(1103),P=n(9),R=n(2);const D=Object(P.a)(S.a)((e=>{let{theme:t}=e;return{"& .MuiPaginationItem-root":{[t.breakpoints.down("md")]:{height:"1.8rem",width:"1rem"}}}})),F=Object(P.a)(s.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{justifyContent:"center"},display:"flex",justifyContent:"space-between",flexWrap:"wrap"}}));var A=e=>{let{data:t=[],onPageChange:n,page:a=0,count:r=0,limit:o=1}=e;const[c,s]=Object(y.useState)(0);Object(y.useEffect)((()=>{Array.isArray(t)&&s(t.length)}),[t]);return c<10&&r<10?null:Object(R.jsxs)(F,{direction:"row",alignItems:"center",children:[r>10&&Object(R.jsxs)(u.a,{sx:{color:"#525F7F"},fontSize:12,children:["Showing ",t.length," of ",r," entries"]}),t.length!==r&&Object(R.jsx)(D,{count:Math.ceil(r/o),color:"primary",variant:"contained",page:a+1,size:"medium",onChange:(e,t)=>{n&&n(e,t)}})]})},I=n(201);function W(){return Object(R.jsx)(a.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center","& > * + *":{marginLeft:2}},children:Object(R.jsx)(I.a,{})})}var M=n(287),z=n(88);const E=Object(P.a)(g.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:12,padding:"0 8px"}}})),U=Object(P.a)(x.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:14}}}));function H(e){let{columns:t=[],config:n={},role:a}=e;const{headerCellSx:r={},hasDelete:o}=n,c=Object(y.useMemo)((()=>t.map(((e,t)=>{const{label:n="",id:o="",visible:c=!0}=e||{};return(w.a.isFunction(c)?c({column:e,role:a}):c)?Object(R.jsx)(E,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...r},children:n},o||t):null}))),[t,r]);return Object(R.jsxs)(m.a,{children:[c,o&&Object(R.jsx)(E,{padding:"none",sx:{...r}})]})}const L=e=>{let{columns:t,data:n=[],config:a={},handleRowClick:r,handleDelete:o,...c}=e;return(n||[]).map(((e,n)=>{const{dataKey:s=""}=a;return s&&(e=e[s]),(e=>{let{row:t=[],columns:n={},config:a={},handleRowClick:r,rowIndex:o,handleDelete:c,hasDeletePermission:s,...i}=e;const{hasDelete:l=!1,rowCellPadding:d="none",onRowClick:j,rowStyleCb:h}=a,{role:b}=i;let u={};h&&(u=h({row:t})||{});const p=Object(R.jsx)(E,{sx:{},padding:"none",component:"th",scope:"row",children:Object(R.jsx)(O.a,{onClick:c.bind(void 0,t._id,t),disabled:!s,children:Object(R.jsx)(U,{color:"error"})})}),x=n.map(((e,n)=>{const{id:a="",renderer:r,emptyState:c="",valueFormatter:s,visible:i=!0}=e||{};if(!(w.a.isFunction(i)?i({column:e,role:b}):i))return null;let l;return l=s&&w.a.isFunction(s)?s(t[a]):w.a.isFunction(r)?r({row:t,role:b},o)||c:w.a.isObject(t)?w.a.get(t,a,c):t[a]||c,Object(R.jsx)(E,{padding:d||"normal",component:"th",scope:"row",children:l},a+n)}));return Object(R.jsxs)(m.a,{hover:!!j,onClick:e=>{e.preventDefault(),w.a.isFunction(r)&&r(t)},sx:j?{cursor:"pointer",...u}:{...u},children:[x,l&&p]},o)})({row:e,columns:t,config:a,handleRowClick:r,rowIndex:n,handleDelete:o,...c})}))},T=e=>{let{config:t={},data:n=[],history:i,loading:m=!1,onRefetch:p,isRefetching:x}=e;n=n||[];const[g,f]=Object(y.useState)({}),[w,C]=Object(y.useState)({open:!1,config:{}}),{columns:k=[],onRowClick:S,hasOnClickUrl:P=!0,onPageChange:D,page:F,count:I,limit:E,size:U="medium",emptyMessage:T="",onRowClickDataCallback:_,showRefresh:q=!1,onDelete:B,deleteMessage:J,deletePermissions:K=[],containerHeight:V=""}=t,{role:G=""}=Object(z.d)().user,Q=K.indexOf(G)>-1||!1,X=N.a.useRef([]),Y=Array.isArray(n)&&n.length,Z=e=>{if(P&&S){const t=S(e);_&&(e=_(e)),i.push(t,e)}else S&&S(e)},$=(e,t,n)=>{n.stopPropagation();const a={title:()=>Object(R.jsxs)(b.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(R.jsx)(v.a,{color:"error"}),Object(R.jsx)(u.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]}),okText:"Delete",onOk:()=>B(e,ee),content:()=>Object(R.jsx)(h.a,{sx:{color:"#000"},children:J||"Are you sure you want to delete the record?"})};C({...w,open:!0,config:a})};function ee(){C({...w,open:!1})}const te=Object(y.useMemo)((()=>Y?Object(R.jsxs)(y.Fragment,{children:[Object(R.jsx)(j.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(R.jsx)(H,{columns:k,config:t,role:G})}),Object(R.jsx)(d.a,{children:Object(R.jsx)(L,{role:G,columns:k,data:n,config:t,handleRowClick:Z,handleDelete:$,hasDeletePermission:Q},Date.now())})]}):Object(R.jsx)("tbody",{style:{height:300},children:Object(R.jsx)("tr",{children:Object(R.jsx)("td",{style:{textAlign:"center"},children:Object(R.jsx)("h4",{children:T||"No records found"})})})})),[n,t]);return Object(y.useEffect)((()=>{var e;if(null!==X&&void 0!==X&&null!==(e=X.current)&&void 0!==e&&e.table){const e=X.current.table.offsetHeight;f({...g,height:e>200?e:void 0})}}),[]),Object(R.jsxs)(a.a,{className:"enhanced-table",sx:{height:Y&&!m?V||"95%":"auto"},children:[q&&Object(R.jsx)(s.a,{alignItems:"flex-end",children:Object(R.jsx)(O.a,{title:"Refresh",onClick:p,children:Object(R.jsx)(l.a,{className:x?"rotateIcon":void 0})})}),Object(R.jsx)(o.a,{component:r.a,className:"",sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2,height:Y&&!m?"calc(100% - 64px)":"auto"},children:m?(()=>{const e=window.innerHeight-180,t=(g.height?g.height>e?e:g.height:e)||e;return Object(R.jsx)(b.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(R.jsx)(b.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(R.jsx)(W,{})})})})():Object(R.jsx)(c.a,{ref:e=>X.current.table=e,"aria-label":"caption table",size:U,stickyHeader:!0,children:te})}),!m&&n.length>0&&Object(R.jsx)(A,{data:n,onPageChange:D,page:F,count:I,limit:E}),Object(R.jsx)(M.a,{className:"enhancedTable_dialog",open:w.open,config:w.config,onClose:ee})]})};t.a=Object(k.withRouter)(Object(y.memo)(T))},362:function(e,t,n){"use strict";var a=n(0),r=n(56);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const[n,o]=Object(a.useState)(null),[c,s]=Object(a.useState)(!1),[i,l]=Object(a.useState)(null),[d,j]=Object(a.useState)(!1);function h(){Object(r.b)({uri:e,callback:t,showTriggers:!1}).then((e=>{e.data&&o(e.data)})).finally((()=>{s(!1),j(!1)}))}return Object(a.useEffect)((()=>{s(!0),o(null),l(null),h()}),[e]),{data:n,loading:c,error:i,refetch:function(){j(!0),h()},isRefetching:d}}}}]);
//# sourceMappingURL=30.85acae06.chunk.js.map