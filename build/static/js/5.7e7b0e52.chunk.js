(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[5],{1108:function(e,t,n){"use strict";var r=n(9),a=n(1),o=n(60);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(a.useState)(null),i=Object(r.a)(n,2),c=i[0],d=i[1],u=Object(a.useState)(!1),l=Object(r.a)(u,2),s=l[0],f=l[1],b=Object(a.useState)(null),v=Object(r.a)(b,2),j=v[0],O=v[1];function m(){Object(o.b)({uri:e,callback:t,showTriggers:!1}).then((function(e){e.data&&d(e.data)})).finally((function(){return f(!1)}))}return Object(a.useEffect)((function(){f(!0),d(null),O(null),m()}),[e]),{data:c,loading:s,error:j,refetch:m}}},1136:function(e,t,n){"use strict";n.r(t);var r=n(245),a=n(5),o=n(9),i=n(1),c=n(375),d=n(58),u=n(96),l=n.n(u),s=n(111),f=n(547),b=n(67),v=n(369),j=n(1106),O=n(546),m=n(30),p=n(1112),h=n.n(p),x=n(1111),g=n.n(x),C=function(e){var t=e||{},n=t.bidAmount,r=void 0===n?"":n,a=t.offerStatus,o=t.vendorName,i=t.event_data,c=void 0===i?{}:i,d=c.counter_offer,u=void 0===d?{}:d,l=u.expired_at,s=void 0===l?"":l,f=u.id,b=c.offer,v=(void 0===b?{}:b).external_id,j=r.includes(",")?r.split(","):r;return{amount:Array.isArray(j)?j[j.length-1]:j,offerStatus:a,vendorName:o,external_id:v,expired_at:s,counterOfferId:f}},y=n(20),w=n(29),D=n(60),N=n(85),S=function(){var e=Object(w.a)(Object(y.a)().mark((function e(t,n){var r,a;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(D.d)({uri:Object(N.d)()+"/newTrulCounterOffer",body:t});case 3:r=e.sent,a=r.data,n&&n(a),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(w.a)(Object(y.a)().mark((function e(t){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(D.c)({uri:Object(N.d)()+"/newtrulUpdateOfferStatus",body:t});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(w.a)(Object(y.a)().mark((function e(t){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(D.d)({uri:Object(N.d)()+"/newTrulFinalOffer",body:t});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),R=n(374),k=n(27),F=n(1107),Y=n(168),L=n(42),E=n(383),q=n(2),A=void 0,B=function(e){var t=e.value,n=e.name,r=e.handleChange,a=Object(i.useState)(t),c=Object(o.a)(a,2),d=c[0],u=c[1];return Object(i.useEffect)((function(){r&&r({name:n,value:d})}),[d,n,r]),Object(q.jsxs)(i.Fragment,{children:[Object(q.jsx)(v.a,{onClick:function(){d>0&&u(d-1)},disabled:d<=0,children:Object(q.jsx)(g.a,{})}),Object(q.jsx)("div",{className:"dollarInput",children:Object(q.jsx)(m.a,{name:"bidAmount",label:"Amount ($)",onChange:function(e){var t=e.target.value;u(t)},type:"number",value:d,className:""})}),Object(q.jsx)(v.a,{onClick:function(){u(parseInt(d)+1)},children:Object(q.jsx)(h.a,{})})]})},T=["final_offer_created","accepted"],M=function(e){var t=e.location,n=(void 0===t?{}:t).state,a=void 0===n?{}:n,c=e.history,d=e.onCloseUrl,u=e.onRefresh,l=a.loadNumber,v=void 0===l?"":l,m=a.vendorName,p=void 0===m?"":m,h=Object(i.useState)("0.00"),x=Object(o.a)(h,2),g=x[0],y=x[1],w=Object(Y.a)("/api/bid/deleteBidByLoadNumber/"+v,V).mutation,D=Object(i.useState)({amount:0}),N=Object(o.a)(D,2),M=N[0],U=N[1],z=(null===a||void 0===a?void 0:a.offerStatus)||"",P=T.some((function(e){return e.equalsIgnoreCase(z)}))||!1,H=z.equalsIgnoreCase("COUNTER_OFFER_CREATED"),$=p.equalsIgnoreCase("c.h. robinson"),J=!!M.offerStatus,W=$&&z.equalsIgnoreCase("notconsidered");Object(i.useEffect)((function(){if(p.equalsIgnoreCase("new trul")){var e=C(a);y(e.amount),U(e)}else if($){var t=function(e){var t=e||{},n=t.bidAmount,r=void 0===n?"":n,a=t.offerStatus,o=t.vendorName,i=t.event_data;return{amount:r,offerStatus:a,vendorName:o,event_data:void 0===i?{}:i}}(a);U(t),y(t.amount)}}),[a,p]);var G=function(e){e.error?Object(k.a)(e.message,"error"):c.goBack()};function V(e,t){e?(G({}),Object(k.a)("Bid success for Load number",v)):Object(k.a)(t.message,"error")}var K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={offerId:M.counterOfferId,mcNumber:R.c,carrierMail:R.a,status:e};if(P){if(p.equalsIgnoreCase("c.h. robinson")){if("reject"===e)return w({},"delete");var n=(new Date).toDateString(),r=(new Date).toTimeString(),o=a.loadDetail.availableLoadCosts[0]||{},i=o.type,l=o.code,s=o.description,f=o.units,b=o.currencyCode,j={carrierCode:R.h.carrierCode,loadNumber:Number(v),emptyDateTime:new Date(n+" "+r).toISOString(),availableLoadCosts:[{type:i,code:l,description:s,units:f,currencyCode:b,sourceCostPerUnit:Number(g)}],emptyLocation:{city:"Greenwood",state:"IN",country:"NA",zip:"46143"},rateConfirmation:{email:Object(L.e)().user.email,name:Object(L.e)().user.name}};return Object(F.b)(v,j,V)}I(t).then((function(e){"error"===e.data.status&&Object(k.a)(e.data.message,"error")})).catch((function(e){return console.log(e)}))}else _(t).then((function(e){"error"===e.data.status?Object(k.a)(e.data.message,"error"):e.data.status.equalsIgnoreCase("success")&&(u&&u(),c.push(d))})).catch((function(e){return console.log(e)}))};return Object(q.jsx)(j.a,{children:Object(q.jsx)(s.a,{sx:{px:3},justifyContent:"center",display:"flex",children:Object(q.jsxs)("form",{onSubmit:function(){},style:{textAlign:"center"},className:"form_bidding",children:[Object(q.jsx)(b.a,{sx:{fontSize:32},children:p||"C.H Robinson"}),Object(q.jsxs)(b.a,{sx:{fontSize:32},children:["Load Number: ",v]}),P&&Object(q.jsx)(b.a,{fontSize:18,sx:{my:3},children:"Final Offer: $".concat(M.amount)}),H&&Object(q.jsx)(b.a,{fontSize:18,children:"Offer: $".concat(M.amount)}),Object(q.jsxs)(f.a,{gap:2,direction:"row",justifyContent:"center",my:2,children:[Object(q.jsx)(r.a,{variant:"contained",color:"success",sx:{px:5},onClick:K.bind(A,"accept"),disabled:!J,children:"Accept"}),Object(q.jsx)(r.a,{variant:"contained",color:"error",sx:{px:5},onClick:K.bind(A,"reject"),disabled:!J,children:W?"Delete":"Reject"})]}),$&&!J?Object(q.jsx)(E.a,{config:{open:!0,message:"We are waiting for the response on this bid.",severity:"info"}}):null,!P&&!$&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(b.a,{children:"OR"}),Object(q.jsx)(f.a,{direction:"row",sx:{py:2},alignItems:"end",gap:"10px",justifyContent:"center",children:Object(q.jsx)(B,{value:g,handleChange:function(e){var t=e.value;y(t)}})}),Object(q.jsx)(r.a,{variant:"contained",color:"primary",sx:{px:2,py:.5,fontSize:14},onClick:function(){if(p.equalsIgnoreCase("new trul")){var e={offerId:M.counterOfferId,external_id:Object(O.a)(),offer_amount:g,expired_at:M.expired_at,mcNumber:R.c,carrierMail:R.a};M.offerStatus.equalsIgnoreCase("COUNTER_OFFER_CREATED")&&S(e,G)}},children:H?"Submit Counter":"Submit Bid"})]})]})})})},U=Object(i.memo)(M,(function(){return!0})),z=n(1113),P=n(1108);t.default=function(){var e=Object(d.useRouteMatch)().path,t=Object(d.useHistory)(),n=Object(P.a)("/api/bid/biddings"),u=n.data,s=void 0===u?{}:u,f=n.loading,b=n.refetch,v=s||{},j=v.data,O=void 0===j?[]:j,m=v.totalCount,p=void 0===m?0:m;Object(i.useEffect)((function(){var e=setInterval((function(){b()}),5e3);return function(){return clearInterval(e)}}),[]);var h={rowCellPadding:"normal",emptyMessage:"No Bids Found",showRefresh:!0,onRowClick:function(t){var n=t.loadNumber,r=(t.id,t.vendorName);return"new trul"===(void 0===r?"":r).toLowerCase()?"".concat(e,"/newtrul/").concat(n):"".concat(e,"/").concat(n)},onRowClickDataCallback:function(e){return e.loadDetail||{}},count:p,rowStyleCb:function(e){var t=e.row,n=t.bidLevel,r=t.status;return 2===n?{borderLeft:"5px solid #ffeaa7"}:1===n?{borderLeft:r?"5px solid #00b894":"5px solid #e74c3c"}:void 0},columns:[{id:"loadNumber",label:"Load Number"},{id:"pickup",label:"Pickup City/State",renderer:function(e){var t,n,r,a,c=e.row,d=c.loadDetail,u=void 0===d?{}:d;if("c.h. robinson"===(null===(t=c.vendorName)||void 0===t?void 0:t.toLowerCase()))return"".concat(null===u||void 0===u||null===(r=u.origin)||void 0===r?void 0:r.city,", ").concat(null===u||void 0===u||null===(a=u.origin)||void 0===a?void 0:a.stateCode);var l=(null===c||void 0===c||null===(n=c.loadDetail)||void 0===n?void 0:n.stops)||[],s=Object(o.a)(l,2),f=(s[0],(s[1]||{}).geo||{}),b=f.city,v=void 0===b?"":b,j=f.state,O=void 0===j?"":j;return v||O?Object(q.jsxs)(i.Fragment,{children:[v,", ",O]}):"--"}},{id:"",label:"PickUp Date",renderer:function(e){var t,n,r=e.row,a=(null===r||void 0===r||null===(t=r.loadDetail)||void 0===t?void 0:t.stops)||[{}],c=Object(o.a)(a,2),d=(c[0],c[1]);if("C.H. Robinson"===r.vendorName)return l()(r.loadDetail.pickUpByDate).format("M/DD/YYYY");if(d){var u=(d||{}).early_datetime,s=void 0===u?"":u;return s?l()(s).format("M/DD/YYYY"):"--"}var f=(d||{}).early_datetime,b=void 0===f?"":f;return n=b?l()(b).format("M/DD/YYYY"):"--",Object(q.jsx)(i.Fragment,{children:n})}},{id:"",label:"Delivery City / State",renderer:function(e){var t,n,r,a=e.row,c=void 0===a?{}:a,d=c.loadDetail,u=void 0===d?{}:d;if("c.h. robinson"===(null===(t=c.vendorName)||void 0===t?void 0:t.toLowerCase()))return"".concat(null===u||void 0===u||null===(n=u.destination)||void 0===n?void 0:n.city,", ").concat(null===u||void 0===u||null===(r=u.destination)||void 0===r?void 0:r.stateCode);var l=u.stops||[],s=(Object(o.a)(l,1)[0]||{}).geo||{},f=s.city,b=void 0===f?"":f,v=s.state,j=void 0===v?"":v;return b||j?Object(q.jsxs)(i.Fragment,{children:[b,", ",j]}):"--"}},{id:"deliveryDate",label:"Delivery Date",renderer:function(e){var t,n,r,a=e.row;if(null!==(t=a.loadDetail)&&void 0!==t&&t.deliverBy)return l()(null===(r=a.loadDetail)||void 0===r?void 0:r.deliverBy).format("M/DD/YYYY");var i=(null===a||void 0===a||null===(n=a.loadDetail)||void 0===n?void 0:n.stops)||[],c=Object(o.a)(i,2),d=c[0],u=(c[1],(d||{}).early_datetime);return u?l()(u).format("M/DD/YYYY"):"--"}},{id:"equipment",label:"Equipment",renderer:function(e){var t=e.row,n=t.loadDetail||{},r=n.equipment,a=n.vendorName;if("chrobinson"===(void 0===a?"":a).toLowerCase()){var o=Object(R.g)(t.loadDetail||{}),c=o.modesString,d=void 0===c?"":c,u=o.standard,l=void 0===u?"":u;return Object(q.jsxs)(i.Fragment,{children:[d," ",l]})}return"string"===typeof r?Object(q.jsx)(i.Fragment,{children:r}):"--"}},{id:"",label:"Weight",renderer:function(e){var t=e.row,n=(t.loadDetail||{}).weight;if("number"===typeof n)return Object(q.jsxs)(i.Fragment,{children:[n," lbs"]});if(null!==n&&void 0!==n&&n.pounds){var r=(t.loadDetail||{}).weight,a=(void 0===r?{}:r).pounds,o=void 0===a?"":a;return o&&(o+=" lbs"),o}return"--"}},{id:"vendorName",label:"Company",renderer:function(e){var t=e.row,n=t.loadDetail,r=(void 0===n?{}:n).client,a=void 0===r?{}:r;return a.client_name?a.client_name:t.vendorName||""}},{id:"status",label:"Bid Status",renderer:function(e){var t,n=e.row,r=(C(n)||{}).offerStatus,a=(void 0===r?"":r).toLowerCase().includes("rejected");return"C.H. Robinson"===n.vendorName&&n.offerStatus?n.offerStatus:Object(q.jsx)(i.Fragment,{children:n.status?"Accepted":a?"Rejected":(t=n.bidLevel,2===t?"Counter":1===t?"Pending":"Final Offer")})}},{id:"Bidding",label:"Bid",renderer:function(n){var o=n.row,c=(o||{}).vendorName,d=void 0===c?"":c,u=e+"/bid/".concat(o.loadNumber),l=(C(o)||{}).offerStatus,s=void 0===l?"":l,f=(s.equalsIgnoreCase("COUNTER_OFFER_CREATED"),s.equalsIgnoreCase("final_offer_created"),s.toLowerCase().includes("rejected"));return d.toLowerCase(),Object(q.jsx)(i.Fragment,{children:!f&&Object(q.jsx)(r.a,{variant:"contained",color:"primary",onClick:function(e){e.stopPropagation(),t.push(u,Object(a.a)({},o))},children:"View"})})}}]};return Object(q.jsxs)("div",{children:[Object(q.jsx)(c.a,{config:h,data:O,loading:f,onRefetch:b}),Object(q.jsxs)(d.Switch,{children:[Object(q.jsx)(d.Route,{path:e+"/bid/:loadNumber",render:function(t){return Object(q.jsx)(U,Object(a.a)(Object(a.a)({},t),{},{onCloseUrl:e,onRefresh:b}))}}),Object(q.jsx)(d.Route,{path:e+"/newtrul/:loadId",render:function(e){return Object(q.jsx)(z.a,Object(a.a)(Object(a.a)({},e),{},{callDetail:!1}))}})]})]})}}}]);
//# sourceMappingURL=5.7e7b0e52.chunk.js.map