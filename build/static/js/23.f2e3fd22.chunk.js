(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[23],{1072:function(e,t,n){"use strict";n.r(t);var a=n(4),o=n(355),i=n(14),r=n(0),c=n.n(r),l=n(34),s=n(446),d=n(48),u=n.n(d),j=n(56),b=n(3),O=n(1050),h=n(119),f=n.n(h),m=n(93),p=n(98),x=n(1082),g=n(1081),v=n(35),w=n(30),C=n(448),y=n(499),k=n(194),N=n(1),S={firstName:"",lastName:"",phone:""},P=function(e){var t=e.history,n=e.match,o=(void 0===n?{}:n).params,l=(void 0===o?{}:o).id,s=void 0===l?"":l,d=e.onCloseUrl,u=c.a.useState(S),j=Object(i.a)(u,2),h=j[0],P=j[1],R=Object(r.useState)(S),D=Object(i.a)(R,2),F=D[0],A=D[1],I=Object(C.a)("/api/ownerOperator"),W=I.mutation,M=I.loading,z=Object(y.a)("/api/ownerOperator/"+s),E=z.loading,U=(z.data||{}).data,H=function(e){var t=e.name,n=e.value;P(Object(a.a)(Object(a.a)({},h),{},Object(b.a)({},t,n)))};Object(r.useEffect)((function(){U&&P(U)}),[U]);var L=function(e){var t=e.name;e.value&&A(Object(a.a)(Object(a.a)({},F),{},Object(b.a)({},t,"")))},T=function(e){var t=e.success,n=(e.data||{}).message;t?(Object(w.i)("refreshOwnerOp"),Object(v.a)(n||"Owner operator created"),_()):Object(v.a)(n,"error")},_=function(){t.push(d)};return Object(N.jsxs)(g.a,{fullWidth:!1,maxWidth:"md",open:!0,onClose:_,"aria-labelledby":"form-dialog-title",PaperProps:{sx:{width:400}},children:[Object(N.jsxs)(O.a,{id:"form-dialog-title",sx:{color:m.b,textAlign:"center",fontWeight:400,letterSpacing:1},children:[s?"Edit":"Add"," Owner Operator"]}),Object(N.jsx)(x.a,{children:Object(N.jsxs)(p.a,{container:!0,component:"form",noValidate:!0,direction:"column",rowSpacing:3,p:1,children:[Object(N.jsx)(p.a,{item:!0,xs:12,children:Object(N.jsx)("div",{children:Object(N.jsx)(k.b,{name:"firstName",label:"First Name",onChange:H,value:h.firstName||"",errors:F,onBlur:L,fullWidth:!0,disabled:E||M,required:!0})})}),Object(N.jsx)(p.a,{item:!0,xs:12,children:Object(N.jsx)(k.b,{name:"lastName",label:"Last Name",onChange:H,value:h.lastName||"",errors:F,onBlur:L,fullWidth:!0,disabled:E||M,required:!0})}),Object(N.jsx)(p.a,{item:!0,xs:12,children:Object(N.jsx)(k.b,{name:"phone",label:"Phone Number",onChange:H,value:h.phone||"",onBlur:L,errors:F,fullWidth:!0,disabled:E||M,required:!0})}),Object(N.jsx)(p.a,{item:!0,xs:12,children:Object(N.jsx)(k.c,{fullWidth:!0,type:"submit",onClick:function(e){e.preventDefault();var t=Object(a.a)({},h),n=function(e){var t=e.firstName,n=e.lastName,a=e.phone,o={};return t||(o.firstName="Please provide the First Name"),n||(o.lastName="Please provide the Last Name"),a||(o.phone="Please provide the Phone Number"),o}(t);f.a.isEmpty(n)?W(t,null,T):A(Object(a.a)({},n))},isLoading:M||E,loadingText:M?"Updating...":E?"Please wait...":null,children:"Update"})})]})})]})},R=n(199);t.default=function(){var e=Object(l.useRouteMatch)().path,t=Object(r.useState)([]),n=Object(i.a)(t,2),c=n[0],d=n[1],b=Object(r.useState)(!1),O=Object(i.a)(b,2),h=O[0],f=O[1],m=Object(l.useHistory)();function p(){f(!0),u.a.get(Object(j.b)()+"/api/ownerOperator").then((function(e){var t=e.data,n=(void 0===t?{}:t).data;d(void 0===n?[]:n),f(!1)})).catch((function(e){console.log(e.message),f(!1)}))}Object(r.useEffect)((function(){return p(),Object(w.a)(window,"refreshOwnerOp",p),function(){return Object(w.g)(window,"refreshOwnerOp",p)}}),[]);var x=function(e){e.success&&p()},g={rowCellPadding:"inherit",emptyMessage:"No Owner Operator Found",columns:[{id:"firstName",label:"First Name",emptyState:"--"},{id:"lastName",label:"Last Name",emptyState:"--"},{id:"role",label:"Role",renderer:function(){return Object(N.jsx)(r.Fragment,{children:"Owner Operator"})}},{id:"update",renderer:function(t){var n=t.row,a=t.role;return Object(N.jsxs)(r.Fragment,{children:[Object(N.jsx)(o.a,{variant:"contained",onClick:function(t){t.stopPropagation(),m.push(e+"/edit/".concat(n._id))},sx:{mr:1},children:"Update"}),Object(N.jsx)(o.a,{variant:"contained",color:"error",onClick:Object(R.c)({uri:"/api/ownerOperator/"+n._id,message:"Are you sure you want to delete this Owner Operator?",afterSuccessCb:x}),disabled:["ownerOperator","dispatch"].includes(a),children:"Delete"})]})}}]};return Object(N.jsxs)("div",{children:[Object(N.jsx)(s.a,{config:g,data:c,loading:h}),Object(N.jsx)(l.Route,{path:e+"/add",render:function(t){return Object(N.jsx)(P,Object(a.a)(Object(a.a)({},t),{},{onCloseUrl:e}))}}),Object(N.jsx)(l.Route,{path:e+"/edit/:id",render:function(t){return Object(N.jsx)(P,Object(a.a)(Object(a.a)({},t),{},{onCloseUrl:e}))}})]})}},446:function(e,t,n){"use strict";var a=n(188),o=n(431),i=n(1088),r=n(1089),c=n(259),l=n(457),s=n.n(l),d=n(1087),u=n(1086),j=n(1076),b=n(98),O=n(43),h=n(14),f=n(260),m=n(28),p=n(1085),x=n(4),g=n(470),v=n.n(g),w=n(3),C=n(1084),y=n(119),k=n.n(y),N=n(453),S=n.n(N),P=n(0),R=n.n(P),D=n(34),F=n(1059),A=n(7),I=n(1),W=Object(A.a)(F.a)((function(e){var t=e.theme;return{"& .MuiPaginationItem-root":Object(w.a)({},t.breakpoints.down("md"),{height:"1.8rem",width:"1rem"})}})),M=Object(A.a)(c.a)((function(e){var t,n=e.theme;return t={},Object(w.a)(t,n.breakpoints.down("sm"),{justifyContent:"center"}),Object(w.a)(t,"display","flex"),Object(w.a)(t,"justifyContent","space-between"),Object(w.a)(t,"flexWrap","wrap"),t})),z=function(e){var t=e.data,n=void 0===t?[]:t,a=e.onPageChange,o=e.page,i=void 0===o?0:o,r=e.count,c=void 0===r?0:r,l=e.limit,s=void 0===l?1:l,d=Object(P.useState)(0),u=Object(h.a)(d,2),j=u[0],b=u[1];Object(P.useEffect)((function(){Array.isArray(n)&&b(n.length)}),[n]);return j<10&&c<10?null:Object(I.jsxs)(M,{direction:"row",alignItems:"center",children:[c>10&&Object(I.jsxs)(O.a,{sx:{color:"#525F7F"},fontSize:12,children:["Showing ",n.length," of ",c," entries"]}),n.length!==c&&Object(I.jsx)(W,{count:Math.ceil(c/s),color:"primary",variant:"contained",page:i+1,size:"medium",onChange:function(e,t){a&&a(e,t)}})]})},E=n(357);function U(){return Object(I.jsx)(a.a,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center","& > * + *":{marginLeft:2}},children:Object(I.jsx)(E.a,{})})}var H=n(452),L=n(30),T=["row","columns","config","handleRowClick","rowIndex","handleDelete","hasDeletePermission"],_=["columns","data","config","handleRowClick","handleDelete"],q=Object(A.a)(C.a)((function(e){var t=e.theme;return Object(w.a)({},t.breakpoints.down("xs"),{fontSize:12,padding:"0 8px"})})),B=Object(A.a)(v.a)((function(e){var t=e.theme;return Object(w.a)({},t.breakpoints.down("xs"),{fontSize:14})}));function J(e){var t=e.columns,n=void 0===t?[]:t,a=e.config,o=void 0===a?{}:a,i=e.role,r=o.headerCellSx,c=void 0===r?{}:r,l=o.hasDelete,s=Object(P.useMemo)((function(){return n.map((function(e,t){var n=e||{},a=n.label,o=void 0===a?"":a,r=n.id,l=void 0===r?"":r,s=n.visible,d=void 0===s||s;return(k.a.isFunction(d)?d({column:e,role:i}):d)?Object(I.jsx)(q,{padding:"normal",sx:Object(x.a)({color:"#000",bgcolor:"#fafafa",fontWeight:800},c),children:o},l||t):null}))}),[n,c]);return Object(I.jsxs)(p.a,{children:[s,l&&Object(I.jsx)(q,{padding:"none",sx:Object(x.a)({},c)})]})}var K=function(e){var t=e.columns,n=e.data,a=void 0===n?[]:n,o=e.config,i=void 0===o?{}:o,r=e.handleRowClick,c=e.handleDelete,l=Object(m.a)(e,_);return(a||[]).map((function(e,n){var a=i.dataKey,o=void 0===a?"":a;return o&&(e=e[o]),function(e){var t=e.row,n=void 0===t?[]:t,a=e.columns,o=void 0===a?{}:a,i=e.config,r=void 0===i?{}:i,c=e.handleRowClick,l=e.rowIndex,s=e.handleDelete,d=e.hasDeletePermission,u=Object(m.a)(e,T),j=r.hasDelete,b=void 0!==j&&j,O=r.rowCellPadding,h=void 0===O?"none":O,g=r.onRowClick,v=void 0===g?void 0:g,w=r.rowStyleCb,C=u.role,y={};w&&(y=w({row:n})||{});var N=Object(I.jsx)(q,{sx:{},padding:"none",component:"th",scope:"row",children:Object(I.jsx)(f.a,{onClick:s.bind(void 0,n._id,n),disabled:!d,children:Object(I.jsx)(B,{color:"error"})})}),S=o.map((function(e,t){var a,o=e||{},i=o.id,r=void 0===i?"":i,c=o.renderer,s=o.emptyState,d=void 0===s?"":s,u=o.valueFormatter,j=o.visible,b=void 0===j||j;return(k.a.isFunction(b)?b({column:e,role:C}):b)?(a=u&&k.a.isFunction(u)?u(n[r]):k.a.isFunction(c)?c({row:n,role:C},l)||d:k.a.isObject(n)?k.a.get(n,r,d):n[r]||d,Object(I.jsx)(q,{padding:h||"normal",component:"th",scope:"row",children:a},r+t)):null}));return Object(I.jsxs)(p.a,{hover:!!v,onClick:function(e){e.preventDefault(),k.a.isFunction(c)&&c(n)},sx:v?Object(x.a)({cursor:"pointer"},y):Object(x.a)({},y),children:[S,b&&N]},l)}(Object(x.a)({row:e,columns:t,config:i,handleRowClick:r,rowIndex:n,handleDelete:c},l))}))},V=function(e){var t=e.config,n=void 0===t?{}:t,l=e.data,m=void 0===l?[]:l,p=e.history,g=e.loading,v=void 0!==g&&g,w=e.onRefetch,C=e.isRefetching;m=m||[];var y=Object(P.useState)({}),k=Object(h.a)(y,2),N=k[0],D=k[1],F=Object(P.useState)({open:!1,config:{}}),A=Object(h.a)(F,2),W=A[0],M=A[1],E=n.columns,T=void 0===E?[]:E,_=n.onRowClick,q=n.hasOnClickUrl,B=void 0===q||q,V=n.onPageChange,G=n.page,Q=n.count,X=n.limit,Y=n.size,Z=void 0===Y?"medium":Y,$=n.emptyMessage,ee=void 0===$?"":$,te=n.onRowClickDataCallback,ne=n.showRefresh,ae=void 0!==ne&&ne,oe=n.onDelete,ie=n.deleteMessage,re=n.deletePermissions,ce=void 0===re?[]:re,le=n.containerHeight,se=void 0===le?"":le,de=Object(L.d)().user.role,ue=void 0===de?"":de,je=ce.indexOf(ue)>-1||!1,be=R.a.useRef([]),Oe=Array.isArray(m)&&m.length,he=function(e){if(B&&_){var t=_(e);te&&(e=te(e)),p.push(t,e)}else _&&_(e)},fe=function(e,t,n){n.stopPropagation();var a={title:function(){return Object(I.jsxs)(b.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(I.jsx)(S.a,{color:"error"}),Object(I.jsx)(O.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]})},okText:"Delete",onOk:function(){return oe(e,me)},content:function(){return Object(I.jsx)(j.a,{sx:{color:"#000"},children:ie||"Are you sure you want to delete the record?"})}};M(Object(x.a)(Object(x.a)({},W),{},{open:!0,config:a}))};function me(){M(Object(x.a)(Object(x.a)({},W),{},{open:!1}))}var pe=Object(P.useMemo)((function(){return Oe?Object(I.jsxs)(P.Fragment,{children:[Object(I.jsx)(u.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(I.jsx)(J,{columns:T,config:n,role:ue})}),Object(I.jsx)(d.a,{children:Object(I.jsx)(K,{role:ue,columns:T,data:m,config:n,handleRowClick:he,handleDelete:fe,hasDeletePermission:je},Date.now())})]}):Object(I.jsx)("tbody",{style:{height:300},children:Object(I.jsx)("tr",{children:Object(I.jsx)("td",{style:{textAlign:"center"},children:Object(I.jsx)("h4",{children:ee||"No records found"})})})})}),[m,n]);return Object(P.useEffect)((function(){var e;if(null!==be&&void 0!==be&&null!==(e=be.current)&&void 0!==e&&e.table){var t=be.current.table.offsetHeight;D(Object(x.a)(Object(x.a)({},N),{},{height:t>200?t:void 0}))}}),[]),Object(I.jsxs)(a.a,{className:"enhanced-table",sx:{height:Oe&&!v?se||"95%":"auto"},children:[ae&&Object(I.jsx)(c.a,{alignItems:"flex-end",children:Object(I.jsx)(f.a,{title:"Refresh",onClick:w,children:Object(I.jsx)(s.a,{className:C?"rotateIcon":void 0})})}),Object(I.jsx)(i.a,{component:o.a,className:"",sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2,height:Oe&&!v?"calc(100% - 64px)":"auto"},children:v?function(){var e=window.innerHeight-180,t=(N.height?N.height>e?e:N.height:e)||e;return Object(I.jsx)(b.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(I.jsx)(b.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(I.jsx)(U,{})})})}():Object(I.jsx)(r.a,{ref:function(e){return be.current.table=e},"aria-label":"caption table",size:Z,stickyHeader:!0,children:pe})}),!v&&m.length>0&&Object(I.jsx)(z,{data:m,onPageChange:V,page:G,count:Q,limit:X}),Object(I.jsx)(H.a,{className:"enhancedTable_dialog",open:W.open,config:W.config,onClose:me})]})};t.a=Object(D.withRouter)(Object(P.memo)(V))},499:function(e,t,n){"use strict";var a=n(14),o=n(0),i=n(91);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(o.useState)(null),r=Object(a.a)(n,2),c=r[0],l=r[1],s=Object(o.useState)(!1),d=Object(a.a)(s,2),u=d[0],j=d[1],b=Object(o.useState)(null),O=Object(a.a)(b,2),h=O[0],f=O[1],m=Object(o.useState)(!1),p=Object(a.a)(m,2),x=p[0],g=p[1];function v(){Object(i.b)({uri:e,callback:t,showTriggers:!1}).then((function(e){e.data&&l(e.data)})).finally((function(){j(!1),g(!1)}))}return Object(o.useEffect)((function(){j(!0),l(null),f(null),v()}),[e]),{data:c,loading:u,error:h,refetch:function(){g(!0),v()},isRefetching:x}}}}]);
//# sourceMappingURL=23.f2e3fd22.chunk.js.map