(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[18],{1061:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return re}));var c=n(188),i=n(4),r=n(353),a=n(0),o=n.n(a),s=n(450),l=n(73),d=n(445),j=n(34),b=n(46),u=(n(33),n(51),n(690)),x=n(25),O=n(1075),h=n(1076),p=n(412),v=n(97),m=n(256),f=n(14),g=n(43),y=n(91),C=n(166),w=n(1001),S=n.n(w),k=(n(268),n(696),n(357)),F=n(433),N=n(1048),I=n(1007),A=n(987),M=n(257),D=n(1003),T=n.n(D),B=n(1002),P=n.n(B),R=n(1),L=[{label:"Detention",cost:"67"},{label:"Loads",cost:"1000"},{label:"Lumper",cost:"786"}],E=function(e){var t=e.serviceName,n=e.amount,c=e.price,i=e.quantity,r=e.description,o=e.index,s=e.deleteService,l=e.onChangeService,d=function(e){var t=e.target.name,n=e.target.value;l&&l(o,{name:t,value:n})};return Object(R.jsx)(a.Fragment,{children:Object(R.jsxs)("tr",{className:"invoiceServiceRow",children:[Object(R.jsx)("td",{children:t}),Object(R.jsx)("td",{children:Object(R.jsx)(C.a,{name:"description",value:r,onChange:d,className:"serviceInputField",placeholder:"Enter item description"})}),Object(R.jsx)("td",{children:Object(R.jsx)(C.a,{name:"quantity",onChange:function(e){var t=e.target.name,n=parseInt(e.target.value);l(o,{name:t,value:n})},onBlur:function(e){var t=parseInt(e.target.value),c=e.target.name;t<1?l&&(l(o,{name:c,value:1}),l(o,{name:"price",value:parseInt(n)})):l&&(l(o,{name:c,value:t}),l(o,{name:"price",value:parseInt(n)*t}))},className:"serviceInputField",type:"number",value:i})}),Object(R.jsx)("td",{children:Object(R.jsx)(C.a,{name:"price",onChange:d,value:c,className:"serviceInputField"})}),Object(R.jsx)("td",{children:c?"$".concat(parseFloat(c).toFixed(2)):"$0.00"}),Object(R.jsx)("td",{children:Object(R.jsx)(M.a,{onClick:s.bind(null,o),children:Object(R.jsx)(P.a,{color:"error"})})})]})})},W=function(e){var t=e.handleClose,n=e.anchorEl,c=e.onAddNewService,i=Object(a.useState)(L),o=Object(f.a)(i,2),s=o[0],l=o[1],d=function(e){c&&c(e),t()};return Object(R.jsx)(k.b,{id:"jugal",anchorEl:n,open:Boolean(n),onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"left"},children:Object(R.jsxs)(m.a,{sx:{p:2,width:500},children:[Object(R.jsx)(m.a,{children:Object(R.jsx)(C.a,{name:"search",autoFocus:!0,placeholder:"Type on item name",onChange:function(e){var t=e.target.value.toLowerCase();if(t){var n=s.filter((function(e){return e.label.toLowerCase().includes(t)}));l(n)}else l(L)}})}),Object(R.jsx)(m.a,{children:Object(R.jsx)(F.a,{children:s.map((function(e){return Object(R.jsx)(N.a,{onClick:d.bind(null,e),children:Object(R.jsx)(I.a,{disablePadding:!0,secondaryAction:Object(R.jsx)("span",{className:"listButtonPickerCost",children:"$"+e.cost}),children:Object(R.jsx)(A.a,{primary:e.label})})},e.label)}))})}),Object(R.jsx)(m.a,{children:Object(R.jsx)(r.a,{startIcon:Object(R.jsx)(T.a,{}),children:"Create a new Item"})})]})})},Y=function(e){var t=e.services,n=e.onAddNewService,c=e.onChangeService,s=e.deleteService,l=o.a.useState(null),d=Object(f.a)(l,2),j=d[0],b=d[1],u=Object(a.useMemo)((function(){return t.map((function(e,t){return Object(R.jsx)(E,Object(i.a)(Object(i.a)({},e),{},{index:t,onChangeService:c,deleteService:s}))}))}),[t]);return Object(R.jsxs)(o.a.Fragment,{children:[Object(R.jsxs)("table",{className:"invoiceServiceTable",children:[Object(R.jsxs)("tr",{className:"tableHeader",children:[Object(R.jsx)("th",{children:"Services"}),Object(R.jsx)("th",{}),Object(R.jsx)("th",{children:"Quantity"}),Object(R.jsx)("th",{children:"Price"}),Object(R.jsx)("th",{children:"Amount"}),Object(R.jsx)("th",{})]}),u,Object(R.jsx)("tr",{className:"addNewItemRow",children:Object(R.jsx)("td",{className:"addNewItem",onClick:function(e){b(e.currentTarget)},children:Object(R.jsx)(r.a,{sx:{width:135},startIcon:Object(R.jsx)(T.a,{}),"aria-describedby":"jugal",children:"Add new item"})})})]}),Object(R.jsx)(W,{handleClose:function(){b(null)},anchorEl:j,onAddNewService:n})]})},q=n(30),U=function(e){var t=e.name,n=e.sx,c=void 0===n?{}:n,r=e.variant,a=void 0===r?"body1":r,o=e.children;return Object(R.jsx)(g.a,{sx:Object(i.a)({fontWeight:700},c),variant:a,children:o||t})},z=function(e){var t=e.transition,n=e.handleClose,c=e.open,i=e.data,a=(e.pdf,e.setPdf,e.getTotal),s=e.services,l=e.addService,d=e.onChangeService,j=e.deleteService,b=o.a.useRef(null),u=i||{},x=u.brokerage,w=void 0===x?"":x,k=u.loadNumber,F=void 0===k?"":k,N=u.pickup,I=void 0===N?[]:N,A=u.drop,M=void 0===A?[]:A,D=(u.rate,u.accessorials),T=void 0===D?[]:D,B=u.proofDelivery,P=void 0===B?[]:B,L=u.rateConfirmation,E=void 0===L?[]:L,W=u.bucketFiles,z=M||[],$=(Object(f.a)(z,1)[0].receiverName,Object(f.a)(I,1)[0]);$.pickupAddress,$.pickupCity,$.pickupState,$.pickupZip;console.log(W);var _=o.a.useMemo((function(){return W&&W.map((function(e){return Object(R.jsx)("div",{className:"bucketImageContainer",children:Object(R.jsx)("div",{children:Object(R.jsx)("img",{className:"printThisFull",src:e.fileLocation,alt:e.fileName})})})}))}),[W]),H=o.a.useCallback((function(){return b.current}),[b.current]),G=o.a.useCallback((function(){return Object(R.jsx)(r.a,{className:"printInvoice",variant:"contained",children:"Create Invoice"})}),[]);return Object(R.jsx)(O.a,{class:"printThisFull",PaperProps:{sx:{width:"70%"}},open:c,onClose:n,TransitionComponent:t,maxWidth:"lg",children:Object(R.jsx)(h.a,{sx:{p:0},children:Object(R.jsxs)("div",{ref:b,className:"printArea",children:[Object(R.jsxs)(v.a,{container:!0,direction:"column",sx:{display:"inline-flex"},children:[Object(R.jsx)("style",{type:"text/css",media:"print",children:"               @page { size: landscape; }          "}),Object(R.jsx)(v.a,{item:!0,xs:12,sx:{p:3},children:Object(R.jsxs)(v.a,{container:!0,justifyContent:"space-between",children:[Object(R.jsx)(v.a,{item:!0,sx:{flexGrow:1},children:Object(R.jsx)(m.a,{spacing:1,children:Object(R.jsx)(m.a,{children:Object(R.jsx)(g.a,{sx:{textAlign:"left"},variant:"h5",children:"Sunny Freight"})})})}),Object(R.jsx)(v.a,{item:!0,children:Object(R.jsxs)(m.a,{children:[Object(R.jsx)(m.a,{children:Object(R.jsx)(g.a,{variant:"h5",sx:{textAlign:"right"},children:"Invoice"})}),Object(R.jsx)(m.a,{children:Object(R.jsx)(C.a,{label:"Notes",type:"textarea"})})]})})]})}),Object(R.jsx)(p.a,{sx:{borderBottomWidth:"thin",borderColor:y.b}}),Object(R.jsx)(v.a,{xs:12,item:!0,children:Object(R.jsxs)(v.a,{container:!0,justifyContent:"space-between",children:[Object(R.jsx)(v.a,{item:!0,children:Object(R.jsxs)(m.a,{spacing:1,sx:{p:3},children:[Object(R.jsx)(m.a,{children:Object(R.jsx)(g.a,{children:"Bill To:"})}),Object(R.jsx)(m.a,{children:Object(R.jsx)(U,{sx:{fontWeight:700},children:w})})]})}),Object(R.jsx)(v.a,{item:!0,children:Object(R.jsx)(m.a,{justifyContent:"space-between",sx:{height:"100%"},children:Object(R.jsxs)(m.a,{direction:"row",alignItems:"center",spacing:2,p:3,children:[Object(R.jsx)(U,{children:"Load Number: "}),Object(R.jsx)(U,{children:F})]})})})]})}),Object(R.jsx)(p.a,{sx:{borderBottomWidth:"thin",borderColor:y.b}}),Object(R.jsxs)(v.a,{item:!0,sx:{p:2},display:"inherit",direction:"column",children:[Object(R.jsx)(m.a,{sx:{textAlign:"right"},children:Object(R.jsxs)(U,{children:["Total: ",a()||"- -"]})}),Object(R.jsxs)(v.a,{container:!0,alignItems:"end",justifyContent:"space-between",children:[Object(R.jsx)(v.a,{item:!0,xs:12,className:"invoiceServiceWrapperGrid",children:Object(R.jsx)(Y,{onChangeService:d,services:s,onAddNewService:l,deleteService:j})}),Object(R.jsx)(v.a,{xs:3,item:!0}),Object(R.jsx)(v.a,{xs:6,item:!0,children:Object(R.jsxs)(m.a,{justifyContent:"center",gap:"10px",className:"stack_Uploaders",children:[Object(R.jsxs)(m.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(R.jsxs)("label",{htmlFor:"rateCon",children:[Object(R.jsx)(g.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px"},children:"Rate Con"}),Object(R.jsx)("input",{type:"file",accept:"pdf",id:"rateCon",style:{display:"none"}})]}),Object(R.jsx)("div",{children:Object(q.b)(!!E.length)})]}),Object(R.jsxs)(m.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(R.jsxs)("label",{htmlFor:"pod",children:[Object(R.jsx)(g.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px"},children:"Proof Of Delivery"}),Object(R.jsx)("input",{type:"file",accept:"pdf",id:"pod",style:{display:"none"}})]}),Object(R.jsx)("div",{children:Object(q.b)(!!P.length)})]}),Object(R.jsxs)(m.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(R.jsxs)("label",{htmlFor:"accessorials",children:[Object(R.jsx)(g.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px"},children:"Accessorials"}),Object(R.jsx)("input",{type:"file",accept:"pdf",id:"accessorials",style:{display:"none"}})]}),Object(R.jsx)("div",{children:Object(q.b)(!!T.length)})]})]})}),Object(R.jsx)(v.a,{xs:3,item:!0,display:"flex",justifyContent:"end",children:Object(R.jsx)(S.a,{content:H,documentTitle:"Invoice",removeAfterPrint:!0,trigger:G})})]})]})]}),_]})})})},$=function(e){var t=e.match,n=(void 0===t?{}:t).params,c=(void 0===n?{}:n).id,r=void 0===c?"":c,s=(e.history,Object(a.useState)(!1)),d=Object(f.a)(s,2),b=d[0],O=d[1],h=Object(a.useState)(!1),p=Object(f.a)(h,2),v=p[0],m=p[1],g=Object(l.e)((function(e){return e.load.invoices.data}))||[],y=Object(a.useState)([]),C=Object(f.a)(y,2),w=C[0],S=C[1],k=g.find((function(e){return e._id===r}));Object(a.useEffect)((function(){O(!0)}),[]);var F=Object(a.useMemo)((function(){return o.a.forwardRef((function(e,t){var n=Object(j.useHistory)();return Object(R.jsx)(u.a,Object(i.a)(Object(i.a)({ref:t},e),{},{onExited:function(){return n.goBack()}}))}))}),[]),N=Object(a.useCallback)((function(){return"$"+w.reduce((function(e,t){return parseFloat(t.price)+e}),0).toFixed(2)}),[w]);return Object(R.jsx)("div",{children:Object(R.jsx)(z,{open:b,handleClose:function(e){O(!1)},transition:F,data:k,pdf:v,setPdf:m,services:w,addService:function(e){var t=e.label,n=e.cost,c={serviceName:t,description:"",quantity:1,price:n,amount:n};S([].concat(Object(x.a)(w),[c]))},onChangeService:function(e,t){var n=t.name,c=t.value,i=w[e];i[n]=c;var r=Object(x.a)(w);r[e]=i,S(r)},getTotal:N,deleteService:function(e){var t=w;t.splice(e,1),S(Object(x.a)(t))}})})},_=n(98),H=n.n(_),G=n(194),J=n(449),V=n(203),Q=n(38),Z=n(446),K=n(196),X={title:"Move Invoice to My Loads",preventBackdropClick:!0},ee=function(e){var t=e.onCloseUrl,n=e.getInvoices,c=e.match,r=(void 0===c?{}:c).params,o=(void 0===r?{}:r).id,s=e.history,l=Object(a.useState)(),d=Object(f.a)(l,2),j=d[0],b=d[1],u=Object(Z.a)("/api/invoice/moveBackToMyLoads"),x=u.mutation,O=u.loading,h=Q.c.map((function(e){return e.id.equalsIgnoreCase("delivered")?Object(i.a)(Object(i.a)({},e),{},{disabled:!0}):e}));return Object(R.jsx)(J.a,{config:X,children:Object(R.jsxs)(v.a,{container:!0,component:"form",sx:{},spacing:2,onSubmit:function(e){e.preventDefault(),x({id:o,status:j},null,(function(){n(),s.replace(t)}))},children:[Object(R.jsx)(v.a,{item:!0,children:Object(R.jsx)(g.a,{children:"Select a load status"})}),Object(R.jsx)(v.a,{item:!0,xs:12,children:Object(R.jsx)(V.a,{label:"Status",name:"status",options:h,onChange:function(e){var t=e.value;b(t)},value:j})}),Object(R.jsx)(v.a,{item:!0,xs:12,children:Object(R.jsx)(K.c,{type:"submit",fullWidth:!0,disabled:!j,isLoading:O,loadingText:"Moving...",children:"Move"})})]})})},te=n(1005),ne=n.n(te),ce=n(1004),ie=n.n(ce);function re(e){var t=e.listBarType,n=Object(l.d)(),o=Object(j.useRouteMatch)().path,u=(Object(l.e)((function(e){var t;return null===(t=e.auth)||void 0===t?void 0:t.user}))||{}).role,x=Object(l.e)((function(e){return e.load.invoices})),O=x.data,h=void 0===O?[]:O,p=x.page,v=x.limit,m=x.loading,f=Object(l.e)((function(e){return e.load.loads}));Object(a.useEffect)((function(){return n(Object(s.e)(t)),g(),function(){n(Object(s.e)(t))}}),[]);var g=function(){n(Object(s.c)())};Object(a.useEffect)((function(){g()}),[f]);var y={rowCellPadding:"inherit",headerCellSx:{pt:1,pb:1},emptyMessage:"No Invoices found",page:p,limit:v,columns:[{id:"loadNumber",label:"Load Number"},{id:"country",label:"Pickup City/State",renderer:function(e){var t=e.row;return Object(R.jsxs)(a.Fragment,{children:[t.pickup[0].pickupCity,", ",t.pickup[0].pickupState]})}},{id:"pickupDate",label:"Pickup Date",renderer:function(e){var t=e.row,n="";return H()(t.pickUpByDate).isValid()&&(n=H()(t.pickUpByDate).format("M/DD/YYYY")),Object(R.jsx)(a.Fragment,{children:n})}},{id:"deliveryCountry",label:"Delivery City/State",renderer:function(e){var t=e.row;return Object(R.jsxs)(a.Fragment,{children:[t.drop[0].dropCity,", ",t.drop[0].dropState]})}},{id:"deliveryDate",label:"Delivery Date",renderer:function(e){var t=e.row,n="";return H()(t.deliverBy).isValid()&&(n=H()(t.deliverBy).format("M/DD/YYYY")),Object(R.jsx)(a.Fragment,{children:n})}},{id:"equipment",label:"Equipment",renderer:function(e){var t=e.row,n=Object(G.g)(t)||{},c=n.modesString,i=void 0===c?"":c,r=n.standard,o=void 0===r?"":r;return Object(R.jsxs)(a.Fragment,{children:[i," ",o]})}},{id:"weight",label:"Weight",renderer:function(e){var t=(e.row||{}).weight,n=(void 0===t?{}:t).pounds,c=void 0===n?"":n;return c&&(c+=" lbs"),Object(R.jsx)(a.Fragment,{children:c})}},{id:"company",label:"Company",renderer:function(e){var t=e.row;return null===t||void 0===t?void 0:t.brokerage},emptyState:"--"},{id:"rate",label:"Rate",emptyState:"--"},{id:"",label:"Invoice",visible:["driver","admin","superAdmin","ownerOperator"].includes(u),renderer:function(e){var t=e.row;return Object(R.jsx)(r.a,{component:b.b,to:o+"/"+t._id,variant:"outlined",color:"primary",startIcon:Object(R.jsx)(ie.a,{}),children:"Create Invoice"})}},{id:"",label:"Move",visible:["driver","admin","superAdmin","ownerOperator"].includes(u),renderer:function(e){var t=e.row;return Object(R.jsx)(r.a,{component:b.b,to:o+"/moveToMyLoads/"+t._id,variant:"outlined",color:"primary",startIcon:Object(R.jsx)(ne.a,{}),children:"My loads"})}}]};return Object(R.jsx)(c.a,{sx:{mt:3},children:Object(R.jsxs)(a.Fragment,{children:[Object(R.jsx)(d.a,{config:y,data:h,loading:m}),Object(R.jsx)(j.Route,{path:o+"/moveToMyLoads/:id",render:function(e){return Object(R.jsx)(ee,Object(i.a)({onCloseUrl:o,getInvoices:g},e))}}),Object(R.jsx)(j.Route,{path:o+"/:id",exact:!0,component:$,onCloseUrl:o})]})})}},449:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var c=n(690),i=n(413),r=n(14),a=n(4),o=n(27),s=n(0),l=n.n(s),d=n(7),j=n(42),b=n(1075),u=n(1047),x=n(1076),O=n(257),h=n(447),p=n.n(h),v=n(34),m=n(30),f=n(137),g=n(1),y=["children","onClose","showClose","titleStyles"],C=Object(d.a)(b.a)((function(e){var t=e.theme;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),w=function(e){var t=e.children,n=e.onClose,c=e.showClose,i=e.titleStyles,r=Object(o.a)(e,y);return Object(g.jsxs)(u.a,Object(a.a)(Object(a.a)({sx:Object(a.a)({m:0,p:2,textAlign:"center"},i)},r),{},{children:[c?Object(g.jsx)(O.a,{"aria-label":"close",onClick:n,sx:{position:"absolute",left:8,top:12,color:function(e){return e.palette.grey[500]}},children:Object(g.jsx)(p.a,{})}):null,t]}))};function S(e){var t=e.config,n=void 0===t?{}:t,o=e.children,d=n.title,b=void 0===d?"":d,u=n.closeUrl,O=void 0===u?"":u,h=n.showClose,p=void 0===h||h,y=n.paperProps,S=void 0===y?{}:y,k=n.preventBackdropClick,F=void 0!==k&&k,N=n.titleStyles,I=void 0===N?{}:N,A=l.a.useState(!1),M=Object(r.a)(A,2),D=M[0],T=M[1],B=Object(j.a)(),P=Object(i.a)(B.breakpoints.down("sm")),R=function(e){F&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropClick")||T(!1)};l.a.useEffect((function(){return T(!0),Object(m.a)(window,"closeModal",R),function(){return Object(m.g)(window,"closeModal",R)}}),[]);var L=Object(s.useMemo)((function(){return l.a.forwardRef((function(e,t){var n=Object(v.useHistory)();return Object(g.jsx)(c.a,Object(a.a)(Object(a.a)({ref:t},e),{},{onExited:function(){return O?n.push(O||f.a):n.goBack()}}))}))}),[]);return Object(g.jsxs)(C,{onClose:R,"aria-labelledby":b||"customized-dialog-title",open:D,maxWidth:"lg",TransitionComponent:L,PaperProps:S,fullScreen:P,children:[b&&Object(g.jsx)(w,{id:b||"customized-dialog-title",onClose:R,showClose:p,titleStyles:I,children:b}),Object(g.jsx)(x.a,{dividers:!0,sx:{borderTop:"none"},children:o})]})}},696:function(e,t,n){}}]);
//# sourceMappingURL=18.aafaea38.chunk.js.map