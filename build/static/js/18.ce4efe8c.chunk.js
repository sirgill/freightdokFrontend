(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[18],{1061:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return re}));var c=n(188),i=n(4),r=n(353),a=n(14),o=n(0),s=n.n(o),l=n(449),d=n(73),j=n(445),b=n(34),u=n(46),O=(n(33),n(51),n(690)),x=n(25),h=n(1075),p=n(1076),v=n(412),m=n(97),f=n(256),g=n(43),y=n(91),C=n(166),w=n(1001),S=n.n(w),k=(n(268),n(696),n(357)),F=n(433),N=n(1048),I=n(1007),A=n(987),M=n(257),T=n(1003),D=n.n(T),B=n(1002),P=n.n(B),L=n(1),R=[{label:"Detention",cost:"67"},{label:"Loads",cost:"1000"},{label:"Lumper",cost:"786"}],E=function(e){var t=e.serviceName,n=e.amount,c=e.price,i=e.quantity,r=e.description,a=e.index,s=e.deleteService,l=e.onChangeService,d=function(e){var t=e.target.name,n=e.target.value;l&&l(a,{name:t,value:n})};return Object(L.jsx)(o.Fragment,{children:Object(L.jsxs)("tr",{className:"invoiceServiceRow",children:[Object(L.jsx)("td",{children:t}),Object(L.jsx)("td",{children:Object(L.jsx)(C.a,{name:"description",value:r,onChange:d,className:"serviceInputField",placeholder:"Enter item description"})}),Object(L.jsx)("td",{children:Object(L.jsx)(C.a,{name:"quantity",onChange:function(e){var t=e.target.name,n=parseInt(e.target.value);l(a,{name:t,value:n})},onBlur:function(e){var t=parseInt(e.target.value),c=e.target.name;t<1?l&&(l(a,{name:c,value:1}),l(a,{name:"price",value:parseInt(n)})):l&&(l(a,{name:c,value:t}),l(a,{name:"price",value:parseInt(n)*t}))},className:"serviceInputField",type:"number",value:i})}),Object(L.jsx)("td",{children:Object(L.jsx)(C.a,{name:"price",onChange:d,value:c,className:"serviceInputField"})}),Object(L.jsx)("td",{children:c?"$".concat(parseFloat(c).toFixed(2)):"$0.00"}),Object(L.jsx)("td",{children:Object(L.jsx)(M.a,{onClick:s.bind(null,a),children:Object(L.jsx)(P.a,{color:"error"})})})]})})},W=function(e){var t=e.handleClose,n=e.anchorEl,c=e.onAddNewService,i=Object(o.useState)(R),s=Object(a.a)(i,2),l=s[0],d=s[1],j=function(e){c&&c(e),t()};return Object(L.jsx)(k.b,{id:"jugal",anchorEl:n,open:Boolean(n),onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"left"},children:Object(L.jsxs)(f.a,{sx:{p:2,width:500},children:[Object(L.jsx)(f.a,{children:Object(L.jsx)(C.a,{name:"search",autoFocus:!0,placeholder:"Type on item name",onChange:function(e){var t=e.target.value.toLowerCase();if(t){var n=l.filter((function(e){return e.label.toLowerCase().includes(t)}));d(n)}else d(R)}})}),Object(L.jsx)(f.a,{children:Object(L.jsx)(F.a,{children:l.map((function(e){return Object(L.jsx)(N.a,{onClick:j.bind(null,e),children:Object(L.jsx)(I.a,{disablePadding:!0,secondaryAction:Object(L.jsx)("span",{className:"listButtonPickerCost",children:"$"+e.cost}),children:Object(L.jsx)(A.a,{primary:e.label})})},e.label)}))})}),Object(L.jsx)(f.a,{children:Object(L.jsx)(r.a,{startIcon:Object(L.jsx)(D.a,{}),children:"Create a new Item"})})]})})},Y=function(e){var t=e.services,n=e.onAddNewService,c=e.onChangeService,l=e.deleteService,d=s.a.useState(null),j=Object(a.a)(d,2),b=j[0],u=j[1],O=Object(o.useMemo)((function(){return t.map((function(e,t){return Object(L.jsx)(E,Object(i.a)(Object(i.a)({},e),{},{index:t,onChangeService:c,deleteService:l}))}))}),[t]);return Object(L.jsxs)(s.a.Fragment,{children:[Object(L.jsxs)("table",{className:"invoiceServiceTable",children:[Object(L.jsxs)("tr",{className:"tableHeader",children:[Object(L.jsx)("th",{children:"Services"}),Object(L.jsx)("th",{}),Object(L.jsx)("th",{children:"Quantity"}),Object(L.jsx)("th",{children:"Price"}),Object(L.jsx)("th",{children:"Amount"}),Object(L.jsx)("th",{})]}),O,Object(L.jsx)("tr",{className:"addNewItemRow",children:Object(L.jsx)("td",{className:"addNewItem",onClick:function(e){u(e.currentTarget)},children:Object(L.jsx)(r.a,{sx:{width:135},startIcon:Object(L.jsx)(D.a,{}),"aria-describedby":"jugal",children:"Add new item"})})})]}),Object(L.jsx)(W,{handleClose:function(){u(null)},anchorEl:b,onAddNewService:n})]})},q=n(30),U=function(e){var t=e.name,n=e.sx,c=void 0===n?{}:n,r=e.variant,a=void 0===r?"body1":r,o=e.children;return Object(L.jsx)(g.a,{sx:Object(i.a)({fontWeight:700},c),variant:a,children:o||t})},z=function(e){var t=e.transition,n=e.handleClose,c=e.open,i=e.data,o=(e.pdf,e.setPdf,e.getTotal),l=e.services,d=e.addService,j=e.onChangeService,b=e.deleteService,u=s.a.useRef(null),O=i||{},x=O.brokerage,w=void 0===x?"":x,k=O.loadNumber,F=void 0===k?"":k,N=O.pickup,I=void 0===N?[]:N,A=O.drop,M=void 0===A?[]:A,T=(O.rate,O.accessorials),D=void 0===T?[]:T,B=O.proofDelivery,P=void 0===B?[]:B,R=O.rateConfirmation,E=void 0===R?[]:R,W=O.bucketFiles,z=M||[],_=(Object(a.a)(z,1)[0].receiverName,Object(a.a)(I,1)[0]);_.pickupAddress,_.pickupCity,_.pickupState,_.pickupZip;console.log(W);var $=s.a.useMemo((function(){return W&&W.map((function(e){return Object(L.jsx)("div",{className:"bucketImageContainer",children:Object(L.jsx)("div",{children:Object(L.jsx)("img",{className:"printThisFull",src:e.fileLocation,alt:e.fileName})})})}))}),[W]),H=s.a.useCallback((function(){return u.current}),[u.current]),G=s.a.useCallback((function(){return Object(L.jsx)(r.a,{className:"printInvoice",variant:"contained",children:"Create Invoice"})}),[]);return Object(L.jsx)(h.a,{class:"printThisFull",PaperProps:{sx:{width:"70%"}},open:c,onClose:n,TransitionComponent:t,maxWidth:"lg",children:Object(L.jsx)(p.a,{sx:{p:0},children:Object(L.jsxs)("div",{ref:u,className:"printArea",children:[Object(L.jsxs)(m.a,{container:!0,direction:"column",sx:{display:"inline-flex"},children:[Object(L.jsx)("style",{type:"text/css",media:"print",children:"               @page { size: landscape; }          "}),Object(L.jsx)(m.a,{item:!0,xs:12,sx:{p:3},children:Object(L.jsxs)(m.a,{container:!0,justifyContent:"space-between",children:[Object(L.jsx)(m.a,{item:!0,sx:{flexGrow:1},children:Object(L.jsx)(f.a,{spacing:1,children:Object(L.jsx)(f.a,{children:Object(L.jsx)(g.a,{sx:{textAlign:"left"},variant:"h5",children:"Sunny Freight"})})})}),Object(L.jsx)(m.a,{item:!0,children:Object(L.jsxs)(f.a,{children:[Object(L.jsx)(f.a,{children:Object(L.jsx)(g.a,{variant:"h5",sx:{textAlign:"right"},children:"Invoice"})}),Object(L.jsx)(f.a,{children:Object(L.jsx)(C.a,{label:"Notes",type:"textarea"})})]})})]})}),Object(L.jsx)(v.a,{sx:{borderBottomWidth:"thin",borderColor:y.b}}),Object(L.jsx)(m.a,{xs:12,item:!0,children:Object(L.jsxs)(m.a,{container:!0,justifyContent:"space-between",children:[Object(L.jsx)(m.a,{item:!0,children:Object(L.jsxs)(f.a,{spacing:1,sx:{p:3},children:[Object(L.jsx)(f.a,{children:Object(L.jsx)(g.a,{children:"Bill To:"})}),Object(L.jsx)(f.a,{children:Object(L.jsx)(U,{sx:{fontWeight:700},children:w})})]})}),Object(L.jsx)(m.a,{item:!0,children:Object(L.jsx)(f.a,{justifyContent:"space-between",sx:{height:"100%"},children:Object(L.jsxs)(f.a,{direction:"row",alignItems:"center",spacing:2,p:3,children:[Object(L.jsx)(U,{children:"Load Number: "}),Object(L.jsx)(U,{children:F})]})})})]})}),Object(L.jsx)(v.a,{sx:{borderBottomWidth:"thin",borderColor:y.b}}),Object(L.jsxs)(m.a,{item:!0,sx:{p:2},display:"inherit",direction:"column",children:[Object(L.jsx)(f.a,{sx:{textAlign:"right"},children:Object(L.jsxs)(U,{children:["Total: ",o()||"- -"]})}),Object(L.jsxs)(m.a,{container:!0,alignItems:"end",justifyContent:"space-between",children:[Object(L.jsx)(m.a,{item:!0,xs:12,className:"invoiceServiceWrapperGrid",children:Object(L.jsx)(Y,{onChangeService:j,services:l,onAddNewService:d,deleteService:b})}),Object(L.jsx)(m.a,{xs:3,item:!0}),Object(L.jsx)(m.a,{xs:6,item:!0,children:Object(L.jsxs)(f.a,{justifyContent:"center",gap:"10px",className:"stack_Uploaders",children:[Object(L.jsxs)(f.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(L.jsxs)("label",{htmlFor:"rateCon",children:[Object(L.jsx)(g.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px"},children:"Rate Con"}),Object(L.jsx)("input",{type:"file",accept:"pdf",id:"rateCon",style:{display:"none"}})]}),Object(L.jsx)("div",{children:Object(q.b)(!!E.length)})]}),Object(L.jsxs)(f.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(L.jsxs)("label",{htmlFor:"pod",children:[Object(L.jsx)(g.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px"},children:"Proof Of Delivery"}),Object(L.jsx)("input",{type:"file",accept:"pdf",id:"pod",style:{display:"none"}})]}),Object(L.jsx)("div",{children:Object(q.b)(!!P.length)})]}),Object(L.jsxs)(f.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(L.jsxs)("label",{htmlFor:"accessorials",children:[Object(L.jsx)(g.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px"},children:"Accessorials"}),Object(L.jsx)("input",{type:"file",accept:"pdf",id:"accessorials",style:{display:"none"}})]}),Object(L.jsx)("div",{children:Object(q.b)(!!D.length)})]})]})}),Object(L.jsx)(m.a,{xs:3,item:!0,display:"flex",justifyContent:"end",children:Object(L.jsx)(S.a,{content:H,documentTitle:"Invoice",removeAfterPrint:!0,trigger:G})})]})]})]}),$]})})})},_=function(e){var t=e.match,n=(void 0===t?{}:t).params,c=(void 0===n?{}:n).id,r=void 0===c?"":c,l=(e.history,Object(o.useState)(!1)),j=Object(a.a)(l,2),u=j[0],h=j[1],p=Object(o.useState)(!1),v=Object(a.a)(p,2),m=v[0],f=v[1],g=Object(d.e)((function(e){return e.load.invoices.data}))||[],y=Object(o.useState)([]),C=Object(a.a)(y,2),w=C[0],S=C[1],k=g.find((function(e){return e._id===r}));Object(o.useEffect)((function(){h(!0)}),[]);var F=Object(o.useMemo)((function(){return s.a.forwardRef((function(e,t){var n=Object(b.useHistory)();return Object(L.jsx)(O.a,Object(i.a)(Object(i.a)({ref:t},e),{},{onExited:function(){return n.goBack()}}))}))}),[]),N=Object(o.useCallback)((function(){return"$"+w.reduce((function(e,t){return parseFloat(t.price)+e}),0).toFixed(2)}),[w]);return Object(L.jsx)("div",{children:Object(L.jsx)(z,{open:u,handleClose:function(e){h(!1)},transition:F,data:k,pdf:m,setPdf:f,services:w,addService:function(e){var t=e.label,n=e.cost,c={serviceName:t,description:"",quantity:1,price:n,amount:n};S([].concat(Object(x.a)(w),[c]))},onChangeService:function(e,t){var n=t.name,c=t.value,i=w[e];i[n]=c;var r=Object(x.a)(w);r[e]=i,S(r)},getTotal:N,deleteService:function(e){var t=w;t.splice(e,1),S(Object(x.a)(t))}})})},$=n(98),H=n.n($),G=n(194),J=n(448),V=n(203),Q=n(42),Z=n(450),K=n(196),X={title:"Move Invoice to My Loads",preventBackdropClick:!0},ee=function(e){var t=e.onCloseUrl,n=e.getInvoices,c=e.match,r=(void 0===c?{}:c).params,s=(void 0===r?{}:r).id,l=e.history,d=Object(o.useState)(),j=Object(a.a)(d,2),b=j[0],u=j[1],O=Object(Z.a)("/api/invoice/moveBackToMyLoads"),x=O.mutation,h=O.loading,p=Q.c.map((function(e){return e.id.equalsIgnoreCase("delivered")?Object(i.a)(Object(i.a)({},e),{},{disabled:!0}):e}));return Object(L.jsx)(J.a,{config:X,children:Object(L.jsxs)(m.a,{container:!0,component:"form",sx:{},spacing:2,onSubmit:function(e){e.preventDefault(),x({id:s,status:b},null,(function(){n(),l.replace(t)}))},children:[Object(L.jsx)(m.a,{item:!0,children:Object(L.jsx)(g.a,{children:"Select a load status"})}),Object(L.jsx)(m.a,{item:!0,xs:12,children:Object(L.jsx)(V.a,{label:"Status",name:"status",options:p,onChange:function(e){var t=e.value;u(t)},value:b})}),Object(L.jsx)(m.a,{item:!0,xs:12,children:Object(L.jsx)(K.c,{type:"submit",fullWidth:!0,disabled:!b,isLoading:h,loadingText:"Moving...",children:"Move"})})]})})},te=n(1005),ne=n.n(te),ce=n(1004),ie=n.n(ce);function re(e){e.setSelectedLoad;var t=e.resetSearchField,n=e.listBarType,s=(e.load_selected,Object(d.d)()),O=Object(b.useRouteMatch)().path,x=Object(o.useState)(!0),h=Object(a.a)(x,2),p=(h[0],h[1]),v=Object(d.e)((function(e){return e.load.invoices})),m=v.page,f=v.limit,g=(v.total,(Object(d.e)((function(e){var t;return null===(t=e.auth)||void 0===t?void 0:t.user}))||{}).role),y=Object(d.e)((function(e){return e.load.invoices.data})),C=Object(o.useState)(!1),w=Object(a.a)(C,2),S=(w[0],w[1],Object(o.useState)({show:!1,data:{}})),k=Object(a.a)(S,2),F=(k[0],k[1],Object(d.e)((function(e){return e.load.loads}))),N=Object(d.e)((function(e){return e.openBoard.chRobinsonLoads}),d.c),I=(N.loads,N.totalCount);Object(o.useEffect)((function(){return setTimeout((function(){p(!1)}),1e3),t&&t(),s(Object(l.e)(n)),A(),function(){t&&t(),s(Object(l.e)(n))}}),[]);var A=function(){s(Object(l.c)())};Object(o.useEffect)((function(){A()}),[F]);var M={rowCellPadding:"inherit",headerCellSx:{pt:1,pb:1},emptyMessage:"No Invoices found",page:m,count:I,limit:f,columns:[{id:"loadNumber",label:"Load Number"},{id:"country",label:"Pickup City/State",renderer:function(e){var t=e.row;return Object(L.jsxs)(o.Fragment,{children:[t.pickup[0].pickupCity,", ",t.pickup[0].pickupState]})}},{id:"pickupDate",label:"Pickup Date",renderer:function(e){var t=e.row,n="";return H()(t.pickUpByDate).isValid()&&(n=H()(t.pickUpByDate).format("M/DD/YYYY")),Object(L.jsx)(o.Fragment,{children:n})}},{id:"deliveryCountry",label:"Delivery City/State",renderer:function(e){var t=e.row;return Object(L.jsxs)(o.Fragment,{children:[t.drop[0].dropCity,", ",t.drop[0].dropState]})}},{id:"deliveryDate",label:"Delivery Date",renderer:function(e){var t=e.row,n="";return H()(t.deliverBy).isValid()&&(n=H()(t.deliverBy).format("M/DD/YYYY")),Object(L.jsx)(o.Fragment,{children:n})}},{id:"equipment",label:"Equipment",renderer:function(e){var t=e.row,n=Object(G.g)(t)||{},c=n.modesString,i=void 0===c?"":c,r=n.standard,a=void 0===r?"":r;return Object(L.jsxs)(o.Fragment,{children:[i," ",a]})}},{id:"weight",label:"Weight",renderer:function(e){var t=(e.row||{}).weight,n=(void 0===t?{}:t).pounds,c=void 0===n?"":n;return c&&(c+=" lbs"),Object(L.jsx)(o.Fragment,{children:c})}},{id:"company",label:"Company",renderer:function(e){var t=e.row;return null===t||void 0===t?void 0:t.brokerage},emptyState:"--"},{id:"rate",label:"Rate",emptyState:"--"},{id:"",label:"Invoice",visible:["driver","admin","superAdmin","ownerOperator"].includes(g),renderer:function(e){var t=e.row;return Object(L.jsx)(r.a,{component:u.b,to:O+"/"+t._id,variant:"outlined",color:"primary",startIcon:Object(L.jsx)(ie.a,{}),children:"Create Invoice"})}},{id:"",label:"Move",visible:["driver","admin","superAdmin","ownerOperator"].includes(g),renderer:function(e){var t=e.row;return Object(L.jsx)(r.a,{component:u.b,to:O+"/moveToMyLoads/"+t._id,variant:"outlined",color:"primary",startIcon:Object(L.jsx)(ne.a,{}),children:"My loads"})}}]};return Object(L.jsx)(c.a,{sx:{mt:3},children:Object(L.jsxs)(o.Fragment,{children:[Object(L.jsx)(j.a,{config:M,data:y}),Object(L.jsx)(b.Route,{path:O+"/moveToMyLoads/:id",render:function(e){return Object(L.jsx)(ee,Object(i.a)({onCloseUrl:O,getInvoices:A},e))}}),Object(L.jsx)(b.Route,{path:O+"/:id",exact:!0,component:_,onCloseUrl:O})]})})}},448:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var c=n(690),i=n(413),r=n(14),a=n(4),o=n(27),s=n(0),l=n.n(s),d=n(7),j=n(41),b=n(1075),u=n(1047),O=n(1076),x=n(257),h=n(446),p=n.n(h),v=n(34),m=n(30),f=n(121),g=n(1),y=["children","onClose","showClose","titleStyles"],C=Object(d.a)(b.a)((function(e){var t=e.theme;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),w=function(e){var t=e.children,n=e.onClose,c=e.showClose,i=e.titleStyles,r=Object(o.a)(e,y);return Object(g.jsxs)(u.a,Object(a.a)(Object(a.a)({sx:Object(a.a)({m:0,p:2,textAlign:"center"},i)},r),{},{children:[c?Object(g.jsx)(x.a,{"aria-label":"close",onClick:n,sx:{position:"absolute",left:8,top:12,color:function(e){return e.palette.grey[500]}},children:Object(g.jsx)(p.a,{})}):null,t]}))};function S(e){var t=e.config,n=void 0===t?{}:t,o=e.children,d=n.title,b=void 0===d?"":d,u=n.closeUrl,x=void 0===u?"":u,h=n.showClose,p=void 0===h||h,y=n.paperProps,S=void 0===y?{}:y,k=n.preventBackdropClick,F=void 0!==k&&k,N=n.titleStyles,I=void 0===N?{}:N,A=l.a.useState(!1),M=Object(r.a)(A,2),T=M[0],D=M[1],B=Object(j.a)(),P=Object(i.a)(B.breakpoints.down("sm")),L=function(e){F&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropClick")||D(!1)};l.a.useEffect((function(){return D(!0),Object(m.a)(window,"closeModal",L),function(){return Object(m.g)(window,"closeModal",L)}}),[]);var R=Object(s.useMemo)((function(){return l.a.forwardRef((function(e,t){var n=Object(v.useHistory)();return Object(g.jsx)(c.a,Object(a.a)(Object(a.a)({ref:t},e),{},{onExited:function(){return x?n.push(x||f.a):n.goBack()}}))}))}),[]);return Object(g.jsxs)(C,{onClose:L,"aria-labelledby":b||"customized-dialog-title",open:T,maxWidth:"lg",TransitionComponent:R,PaperProps:S,fullScreen:P,children:[b&&Object(g.jsx)(w,{id:b||"customized-dialog-title",onClose:L,showClose:p,titleStyles:I,children:b}),Object(g.jsx)(O.a,{dividers:!0,sx:{borderTop:"none"},children:o})]})}},696:function(e,t,n){}}]);
//# sourceMappingURL=18.ce4efe8c.chunk.js.map