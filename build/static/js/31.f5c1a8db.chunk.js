(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[31],{1051:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return oe}));var c=n(208),r=n(2),i=n(969),a=n(0),s=n.n(a),o=n(281),l=n(48),d=n(271),j=n(17),b=n(81),u=(n(20),n(37),n(1029)),x=n(10),h=n(1080),O=n(1081),p=n(1020),v=n(207),m=n(467),f=n(15),g=n(95),y=n(49),C=n(279),w=n(683),S=n.n(w),k=(n(156),n(522),n(1074)),F=n(1075),N=n(1025),I=n(1052),A=n(1027),D=n(254),M=n(685),T=n.n(M),B=n(684),R=n.n(B),L=n(3),P=[{label:"Detention",cost:"67"},{label:"Loads",cost:"1000"},{label:"Lumper",cost:"786"}],E=function(e){var t=e.serviceName,n=e.amount,c=e.price,r=e.quantity,i=e.description,s=e.index,o=e.deleteService,l=e.onChangeService,d=function(e){var t=e.target.name,n=e.target.value;l&&l(s,{name:t,value:n})};return Object(L.jsx)(a.Fragment,{children:Object(L.jsxs)("tr",{className:"invoiceServiceRow",children:[Object(L.jsx)("td",{children:t}),Object(L.jsx)("td",{children:Object(L.jsx)(C.a,{name:"description",value:i,onChange:d,className:"serviceInputField",placeholder:"Enter item description"})}),Object(L.jsx)("td",{children:Object(L.jsx)(C.a,{name:"quantity",onChange:function(e){var t=e.target.name,n=parseInt(e.target.value);l(s,{name:t,value:n})},onBlur:function(e){var t=parseInt(e.target.value),c=e.target.name;t<1?l&&(l(s,{name:c,value:1}),l(s,{name:"price",value:parseInt(n)})):l&&(l(s,{name:c,value:t}),l(s,{name:"price",value:parseInt(n)*t}))},className:"serviceInputField",type:"number",value:r})}),Object(L.jsx)("td",{children:Object(L.jsx)(C.a,{name:"price",onChange:d,value:c,className:"serviceInputField"})}),Object(L.jsx)("td",{children:c?"$".concat(parseFloat(c).toFixed(2)):"$0.00"}),Object(L.jsx)("td",{children:Object(L.jsx)(D.a,{onClick:o.bind(null,s),children:Object(L.jsx)(R.a,{color:"error"})})})]})})},W=function(e){var t=e.handleClose,n=e.anchorEl,c=e.onAddNewService,r=Object(a.useState)(P),s=Object(f.a)(r,2),o=s[0],l=s[1],d=function(e){c&&c(e),t()};return Object(L.jsx)(k.b,{id:"jugal",anchorEl:n,open:Boolean(n),onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"left"},children:Object(L.jsxs)(m.a,{sx:{p:2,width:500},children:[Object(L.jsx)(m.a,{children:Object(L.jsx)(C.a,{name:"search",autoFocus:!0,placeholder:"Type on item name",onChange:function(e){var t=e.target.value.toLowerCase();if(t){var n=o.filter((function(e){return e.label.toLowerCase().includes(t)}));l(n)}else l(P)}})}),Object(L.jsx)(m.a,{children:Object(L.jsx)(F.a,{children:o.map((function(e){return Object(L.jsx)(N.a,{onClick:d.bind(null,e),children:Object(L.jsx)(I.a,{disablePadding:!0,secondaryAction:Object(L.jsx)("span",{className:"listButtonPickerCost",children:"$"+e.cost}),children:Object(L.jsx)(A.a,{primary:e.label})})},e.label)}))})}),Object(L.jsx)(m.a,{children:Object(L.jsx)(i.a,{startIcon:Object(L.jsx)(T.a,{}),children:"Create a new Item"})})]})})},Y=function(e){var t=e.services,n=e.onAddNewService,c=e.onChangeService,o=e.deleteService,l=s.a.useState(null),d=Object(f.a)(l,2),j=d[0],b=d[1],u=Object(a.useMemo)((function(){return t.map((function(e,t){return Object(L.jsx)(E,Object(r.a)(Object(r.a)({},e),{},{index:t,onChangeService:c,deleteService:o}))}))}),[t]);return Object(L.jsxs)(s.a.Fragment,{children:[Object(L.jsxs)("table",{className:"invoiceServiceTable",children:[Object(L.jsxs)("tr",{className:"tableHeader",children:[Object(L.jsx)("th",{children:"Services"}),Object(L.jsx)("th",{}),Object(L.jsx)("th",{children:"Quantity"}),Object(L.jsx)("th",{children:"Price"}),Object(L.jsx)("th",{children:"Amount"}),Object(L.jsx)("th",{})]}),u,Object(L.jsx)("tr",{className:"addNewItemRow",children:Object(L.jsx)("td",{className:"addNewItem",onClick:function(e){b(e.currentTarget)},children:Object(L.jsx)(i.a,{sx:{width:135},startIcon:Object(L.jsx)(T.a,{}),"aria-describedby":"jugal",children:"Add new item"})})})]}),Object(L.jsx)(W,{handleClose:function(){b(null)},anchorEl:j,onAddNewService:n})]})},q=n(100),U=function(e){var t=e.name,n=e.sx,c=void 0===n?{}:n,i=e.variant,a=void 0===i?"body1":i,s=e.children;return Object(L.jsx)(g.a,{sx:Object(r.a)({fontWeight:700},c),variant:a,children:s||t})},$=function(e){var t=e.transition,n=e.handleClose,c=e.open,r=e.data,a=(e.pdf,e.setPdf,e.getTotal),o=e.services,l=e.addService,d=e.onChangeService,j=e.deleteService,b=s.a.useRef(null),u=r||{},x=u.brokerage,w=void 0===x?"":x,k=u.loadNumber,F=void 0===k?"":k,N=u.pickup,I=void 0===N?[]:N,A=u.drop,D=void 0===A?[]:A,M=(u.rate,u.accessorials),T=void 0===M?[]:M,B=u.proofDelivery,R=void 0===B?[]:B,P=u.rateConfirmation,E=void 0===P?[]:P,W=u.bucketFiles,$=D||[],_=(Object(f.a)($,1)[0].receiverName,Object(f.a)(I,1)[0]);_.pickupAddress,_.pickupCity,_.pickupState,_.pickupZip;console.log(W);var z=s.a.useMemo((function(){return W&&W.map((function(e){return Object(L.jsx)("div",{className:"bucketImageContainer",children:Object(L.jsx)("div",{children:Object(L.jsx)("img",{className:"printThisFull",src:e.fileLocation,alt:e.fileName})})})}))}),[W]),G=s.a.useCallback((function(){return b.current}),[b.current]),H=s.a.useCallback((function(){return Object(L.jsx)(i.a,{className:"printInvoice",variant:"contained",children:"Create Invoice"})}),[]);return Object(L.jsx)(h.a,{className:"printThisFull",PaperProps:{sx:{width:"70%"}},open:c,onClose:n,TransitionComponent:t,maxWidth:"lg",children:Object(L.jsx)(O.a,{sx:{p:0},children:Object(L.jsxs)("div",{ref:b,className:"printArea",children:[Object(L.jsxs)(v.a,{container:!0,direction:"column",sx:{display:"inline-flex"},children:[Object(L.jsx)("style",{type:"text/css",media:"print",children:"               @page { size: landscape; }          "}),Object(L.jsx)(v.a,{item:!0,xs:12,sx:{p:3},children:Object(L.jsxs)(v.a,{container:!0,justifyContent:"space-between",children:[Object(L.jsx)(v.a,{item:!0,sx:{flexGrow:1},children:Object(L.jsx)(m.a,{spacing:1,children:Object(L.jsx)(m.a,{children:Object(L.jsx)(g.a,{sx:{textAlign:"left"},variant:"h5",children:"Sunny Freight"})})})}),Object(L.jsx)(v.a,{item:!0,children:Object(L.jsxs)(m.a,{children:[Object(L.jsx)(m.a,{children:Object(L.jsx)(g.a,{variant:"h5",sx:{textAlign:"right"},children:"Invoice"})}),Object(L.jsx)(m.a,{children:Object(L.jsx)(C.a,{label:"Notes",type:"textarea"})})]})})]})}),Object(L.jsx)(p.a,{sx:{borderBottomWidth:"thin",borderColor:y.b}}),Object(L.jsx)(v.a,{xs:12,item:!0,children:Object(L.jsxs)(v.a,{container:!0,justifyContent:"space-between",children:[Object(L.jsx)(v.a,{item:!0,children:Object(L.jsxs)(m.a,{spacing:1,sx:{p:3},children:[Object(L.jsx)(m.a,{children:Object(L.jsx)(g.a,{children:"Bill To:"})}),Object(L.jsx)(m.a,{children:Object(L.jsx)(U,{sx:{fontWeight:700},children:w})})]})}),Object(L.jsx)(v.a,{item:!0,children:Object(L.jsx)(m.a,{justifyContent:"space-between",sx:{height:"100%"},children:Object(L.jsxs)(m.a,{direction:"row",alignItems:"center",spacing:2,p:3,children:[Object(L.jsx)(U,{children:"Load Number: "}),Object(L.jsx)(U,{children:F})]})})})]})}),Object(L.jsx)(p.a,{sx:{borderBottomWidth:"thin",borderColor:y.b}}),Object(L.jsxs)(v.a,{item:!0,sx:{p:2},display:"inherit",direction:"column",children:[Object(L.jsx)(m.a,{sx:{textAlign:"right"},children:Object(L.jsxs)(U,{children:["Total: ",a()||"- -"]})}),Object(L.jsxs)(v.a,{container:!0,alignItems:"end",justifyContent:"space-between",children:[Object(L.jsx)(v.a,{item:!0,xs:12,className:"invoiceServiceWrapperGrid",children:Object(L.jsx)(Y,{onChangeService:d,services:o,onAddNewService:l,deleteService:j})}),Object(L.jsx)(v.a,{xs:3,item:!0}),Object(L.jsx)(v.a,{xs:6,item:!0,children:Object(L.jsxs)(m.a,{justifyContent:"center",gap:"10px",className:"stack_Uploaders",children:[Object(L.jsxs)(m.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(L.jsxs)("label",{htmlFor:"rateCon",children:[Object(L.jsx)(g.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Rate Con"}),Object(L.jsx)("input",{type:"file",accept:"pdf",id:"rateCon",style:{display:"none"}})]}),Object(L.jsx)("div",{children:Object(q.b)(!!E.length)})]}),Object(L.jsxs)(m.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(L.jsxs)("label",{htmlFor:"pod",children:[Object(L.jsx)(g.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Proof Of Delivery"}),Object(L.jsx)("input",{type:"file",accept:"pdf",id:"pod",style:{display:"none"}})]}),Object(L.jsx)("div",{children:Object(q.b)(!!R.length)})]}),Object(L.jsxs)(m.a,{direction:"row",justifyContent:"center",gap:"10px",children:[Object(L.jsxs)("label",{htmlFor:"accessorials",children:[Object(L.jsx)(g.a,{textAlign:"center",sx:{width:150,background:"rgb(0, 123, 255)",color:"#FFF",borderRadius:"4px",cursor:"pointer"},children:"Accessorials"}),Object(L.jsx)("input",{type:"file",accept:"pdf",id:"accessorials",style:{display:"none"}})]}),Object(L.jsx)("div",{children:Object(q.b)(!!T.length)})]})]})}),Object(L.jsx)(v.a,{xs:3,item:!0,display:"flex",justifyContent:"end",children:Object(L.jsx)(S.a,{content:G,documentTitle:"Invoice",removeAfterPrint:!0,trigger:H})})]})]})]}),z]})})})},_=function(e){var t=e.match,n=(void 0===t?{}:t).params,c=(void 0===n?{}:n).id,i=void 0===c?"":c,o=(e.history,Object(a.useState)(!1)),d=Object(f.a)(o,2),b=d[0],h=d[1],O=Object(a.useState)(!1),p=Object(f.a)(O,2),v=p[0],m=p[1],g=Object(l.e)((function(e){return e.load.invoices.data}))||[],y=Object(a.useState)([]),C=Object(f.a)(y,2),w=C[0],S=C[1],k=g.find((function(e){return e._id===i}));Object(a.useEffect)((function(){h(!0)}),[]);var F=Object(a.useMemo)((function(){return s.a.forwardRef((function(e,t){var n=Object(j.useHistory)();return Object(L.jsx)(u.a,Object(r.a)(Object(r.a)({ref:t},e),{},{onExited:function(){return n.goBack()}}))}))}),[]),N=Object(a.useCallback)((function(){return"$"+w.reduce((function(e,t){return parseFloat(t.price)+e}),0).toFixed(2)}),[w]);return Object(L.jsx)("div",{children:Object(L.jsx)($,{open:b,handleClose:function(e){h(!1)},transition:F,data:k,pdf:v,setPdf:m,services:w,addService:function(e){var t=e.label,n=e.cost,c={serviceName:t,description:"",quantity:1,price:n,amount:n};S([].concat(Object(x.a)(w),[c]))},onChangeService:function(e,t){var n=t.name,c=t.value,r=w[e];r[n]=c;var i=Object(x.a)(w);i[e]=r,S(i)},getTotal:N,deleteService:function(e){var t=w;t.splice(e,1),S(Object(x.a)(t))}})})},z=n(82),G=n.n(z),H=n(105),J=n(8),V=n(286),Q=n(282),Z=n(39),K=n(276),X=n(275),ee=n(12),te={title:"Move Invoice to My Loads",preventBackdropClick:!0},ne=Object(ee.a)(v.a)((function(e){var t,n=e.theme;return t={},Object(J.a)(t,n.breakpoints.down("sm"),{width:"auto"}),Object(J.a)(t,n.breakpoints.up("sm"),{width:300}),t})),ce=function(e){var t=e.onCloseUrl,n=e.getInvoices,c=e.match,i=(void 0===c?{}:c).params,s=(void 0===i?{}:i).id,o=e.history,l=Object(a.useState)(),d=Object(f.a)(l,2),j=d[0],b=d[1],u=Object(K.a)("/api/invoice/moveBackToMyLoads"),x=u.mutation,h=u.loading,O=Z.d.map((function(e){return e.id.equalsIgnoreCase("delivered")?Object(r.a)(Object(r.a)({},e),{},{disabled:!0}):e}));return Object(L.jsx)(V.a,{config:te,children:Object(L.jsxs)(ne,{container:!0,component:"form",spacing:2,onSubmit:function(e){e.preventDefault(),x({id:s,status:j},null,(function(){n(),o.replace(t)}))},children:[Object(L.jsx)(v.a,{item:!0,children:Object(L.jsx)(g.a,{children:"Select a load status"})}),Object(L.jsx)(v.a,{item:!0,xs:12,children:Object(L.jsx)(Q.a,{label:"Status",name:"status",options:O,onChange:function(e){var t=e.value;b(t)},value:j,showNone:!0})}),Object(L.jsx)(v.a,{item:!0,xs:12,children:Object(L.jsx)(X.c,{type:"submit",fullWidth:!0,disabled:!j,isLoading:h,loadingText:"Moving...",children:"Move"})})]})})},re=n(687),ie=n.n(re),ae=n(686),se=n.n(ae);function oe(e){var t=e.listBarType,n=Object(l.d)(),s=Object(j.useRouteMatch)().path,u=(Object(l.e)((function(e){var t;return null===(t=e.auth)||void 0===t?void 0:t.user}))||{}).role,x=Object(l.e)((function(e){return e.load.invoices})),h=x.data,O=void 0===h?[]:h,p=x.page,v=x.limit,m=x.loading,f=Object(l.e)((function(e){return e.load.loads}));Object(a.useEffect)((function(){return n(Object(o.e)(t)),g(),function(){n(Object(o.e)(t))}}),[]);var g=function(){n(Object(o.c)())};Object(a.useEffect)((function(){g()}),[f]);var y={rowCellPadding:"normal",headerCellSx:{pt:1,pb:1},emptyMessage:"No Invoices found",showRefresh:!0,page:p,limit:v,columns:[{id:"loadNumber",label:"Load Number"},{id:"country",label:"Pickup City/State",renderer:function(e){var t=e.row;return Object(L.jsxs)(a.Fragment,{children:[t.pickup[0].pickupCity,", ",t.pickup[0].pickupState]})}},{id:"pickupDate",label:"Pickup Date",renderer:function(e){var t=e.row,n="";return G()(t.pickUpByDate).isValid()&&(n=G()(t.pickUpByDate).format("M/DD/YYYY")),Object(L.jsx)(a.Fragment,{children:n})}},{id:"deliveryCountry",label:"Delivery City/State",renderer:function(e){var t=e.row;return Object(L.jsxs)(a.Fragment,{children:[t.drop[0].dropCity,", ",t.drop[0].dropState]})}},{id:"deliveryDate",label:"Delivery Date",renderer:function(e){var t=e.row,n="";return G()(t.deliverBy).isValid()&&(n=G()(t.deliverBy).format("M/DD/YYYY")),Object(L.jsx)(a.Fragment,{children:n})}},{id:"equipment",label:"Equipment",renderer:function(e){var t=e.row,n=Object(H.g)(t)||{},c=n.modesString,r=void 0===c?"":c,i=n.standard,s=void 0===i?"":i;return Object(L.jsxs)(a.Fragment,{children:[r," ",s]})}},{id:"weight",label:"Weight",renderer:function(e){var t=(e.row||{}).weight,n=(void 0===t?{}:t).pounds,c=void 0===n?"":n;return c&&(c+=" lbs"),Object(L.jsx)(a.Fragment,{children:c})}},{id:"company",label:"Company",renderer:function(e){var t=e.row;return null===t||void 0===t?void 0:t.brokerage},emptyState:"--"},{id:"rate",label:"Rate",emptyState:"--"},{id:"",label:"Invoice",visible:["driver","admin","superAdmin","ownerOperator"].includes(u),renderer:function(e){var t=e.row;return Object(L.jsx)(i.a,{component:b.b,to:s+"/"+t._id,variant:"outlined",color:"primary",startIcon:Object(L.jsx)(se.a,{}),children:"Create Invoice"})}},{id:"",label:"Move",visible:["driver","admin","superAdmin","ownerOperator"].includes(u),renderer:function(e){var t=e.row;return Object(L.jsx)(i.a,{component:b.b,to:s+"/moveToMyLoads/"+t._id,variant:"outlined",color:"primary",startIcon:Object(L.jsx)(ie.a,{}),children:"My loads"})}}]};return Object(L.jsx)(c.a,{sx:{mt:3},children:Object(L.jsxs)(a.Fragment,{children:[Object(L.jsx)(d.a,{config:y,data:O,loading:m,onRefetch:g}),Object(L.jsx)(j.Route,{path:s+"/moveToMyLoads/:id",render:function(e){return Object(L.jsx)(ce,Object(r.a)({onCloseUrl:s,getInvoices:g},e))}}),Object(L.jsx)(j.Route,{path:s+"/:id",exact:!0,component:_,onCloseUrl:s})]})})}},522:function(e,t,n){}}]);
//# sourceMappingURL=31.f5c1a8db.chunk.js.map