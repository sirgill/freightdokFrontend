(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[27],{1172:function(e,t,n){"use strict";n.r(t);var a=n(1042),o=n(0),c=n.n(o),i=n(344),r=n.n(i),s=n(11),l=n(84),d=n(315),h=n(590),b=n(297),u=n.n(b),j=n(47),g=n(226),O=n(688),f=n(589),m=n(26),p=n(110),x=n(307),C=n(299),w=n(508),v=n(2);const y={firstName:"",lastName:"",phone:""};var k=e=>{const{history:t,match:{params:{id:n=""}={}}={},onCloseUrl:a}=e,[i,r]=c.a.useState(y),[s,l]=Object(o.useState)(y),{mutation:d,loading:b}=Object(x.a)("/api/ownerOperator"),{loading:k,data:S}=Object(w.a)("/api/ownerOperator/"+n,{lazyFetchCondition:!!n}),{data:P}=S||{},N=e=>{let{name:t,value:n}=e;r({...i,[t]:n})};Object(o.useEffect)((()=>{P&&r(P)}),[P]);const R=e=>{let{name:t,value:n}=e;n&&l({...s,[t]:""})},F=e=>{let{success:t,data:n}=e;const{message:a}=n||{};t?(Object(p.l)("refreshOwnerOp"),Object(m.a)(a||"Owner operator created"),z()):Object(m.a)(a,"error")},z=()=>{t.push(a)};return Object(v.jsxs)(f.a,{fullWidth:!1,maxWidth:"md",open:!0,onClose:z,"aria-labelledby":"form-dialog-title",PaperProps:{sx:{width:400}},children:[Object(v.jsxs)(h.a,{id:"form-dialog-title",sx:{color:j.b,textAlign:"center",fontWeight:400,letterSpacing:1},children:[n?"Edit":"Add"," Owner Operator"]}),Object(v.jsx)(O.a,{children:Object(v.jsxs)(g.a,{container:!0,component:"form",noValidate:!0,direction:"column",rowSpacing:3,p:1,children:[Object(v.jsx)(g.a,{item:!0,xs:12,children:Object(v.jsx)("div",{children:Object(v.jsx)(C.c,{name:"firstName",label:"First Name",onChange:N,value:i.firstName||"",errors:s,onBlur:R,fullWidth:!0,disabled:k||b,required:!0})})}),Object(v.jsx)(g.a,{item:!0,xs:12,children:Object(v.jsx)(C.c,{name:"lastName",label:"Last Name",onChange:N,value:i.lastName||"",errors:s,onBlur:R,fullWidth:!0,disabled:k||b,required:!0})}),Object(v.jsx)(g.a,{item:!0,xs:12,children:Object(v.jsx)(C.c,{name:"email",label:"Email",onChange:N,value:i.email||"",errors:s,onBlur:R,fullWidth:!0,disabled:k||b,required:!0})}),Object(v.jsx)(g.a,{item:!0,xs:12,children:Object(v.jsx)(C.c,{name:"phone",label:"Phone Number",onChange:N,value:i.phone||"",onBlur:R,errors:s,fullWidth:!0,disabled:k||b,required:!0})}),Object(v.jsx)(g.a,{item:!0,xs:12,children:Object(v.jsx)(C.d,{fullWidth:!0,type:"submit",onClick:e=>{e.preventDefault();const t={...i},n=(e=>{let{firstName:t,lastName:n,phone:a,email:o}=e,c={};return t||(c.firstName="Please provide the First Name"),n||(c.lastName="Please provide the Last Name"),a||(c.phone="Please provide the Phone Number"),o||(c.email="Please provide the Email"),Object(p.g)(o)||(c.email="Invalid Email"),c})(t);u.a.isEmpty(n)?d(t,null,F):l({...n})},isLoading:b||k,loadingText:b?"Updating...":k?"Please wait...":null,children:n?"Update":"Add"})})]})})]})},S=n(334),P=n(70),N=n(364);t.default=()=>{const{path:e}=Object(s.useRouteMatch)(),{edit:t,delete:n,add:c}=P.a.getUserPermissionsByDashboardId("ownerOperator"),{data:i,loading:h,page:b,isPaginationLoading:u,limit:j,onLimitChange:g,onPageChange:O,refetch:f,isRefetching:m}=Object(N.a)("/api/ownerOperator"),{data:x,totalCount:C}=i||{},w=Object(s.useHistory)(),y=Object(o.useCallback)((()=>{f()}),[f]);Object(o.useEffect)((()=>(Object(p.a)(window,"refreshOwnerOp",y),()=>Object(p.i)(window,"refreshOwnerOp",y))),[y]);const R=e=>{let{success:t}=e;t&&y()},F={rowCellPadding:"normal",showRefresh:!0,emptyMessage:"No Owner Operator Found",count:C,page:b,limit:j,onPageSizeChange:g,onPageChange:O,columns:[{id:"firstName",label:"First Name",emptyState:"--"},{id:"lastName",label:"Last Name",emptyState:"--"},{id:"role",label:"Role",renderer:()=>Object(v.jsx)(o.Fragment,{children:"Owner Operator"})},{id:"email",label:"Email"},{id:"update",renderer:c=>{let{row:i}=c;return Object(v.jsxs)(o.Fragment,{children:[Object(v.jsx)(a.a,{variant:"contained",onClick:t=>{t.stopPropagation(),w.push(e+"/edit/".concat(i._id))},sx:{mr:1},disabled:!t,children:"Update"}),Object(v.jsx)(a.a,{variant:"contained",color:"error",onClick:Object(S.c)({uri:"/api/ownerOperator/"+i._id,message:"Are you sure you want to delete this Owner Operator?",afterSuccessCb:R}),disabled:!n,children:"Delete"})]})}}]},z=Object(v.jsx)(a.a,{variant:"contained",component:l.b,to:e+"/add",disabled:!c,startIcon:Object(v.jsx)(r.a,{}),children:"Add"});return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(d.a,{config:F,data:x,loading:h,isRefetching:m,onRefetch:f,isPaginationLoading:u,actions:z}),Object(v.jsx)(s.Route,{path:e+"/add",render:t=>Object(v.jsx)(k,{...t,onCloseUrl:e})}),Object(v.jsx)(s.Route,{path:e+"/edit/:id",render:t=>Object(v.jsx)(k,{...t,onCloseUrl:e})})]})}},307:function(e,t,n){"use strict";var a=n(0),o=n(51),c=n(110);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const[r,s]=Object(a.useState)(!1);return{mutation:async function(a){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post",l=arguments.length>2?arguments[2]:void 0,d=e;i.queryParams&&(d=d+"?"+Object(c.j)(i.queryParams)),s(!0),r||(r="post");const h=(e=>{let t;switch(e){case"put":t=o.e;break;case"delete":t=o.a;break;case"patch":t=o.c;break;default:t=o.d}return t})(r.toLowerCase());if(h)return h({uri:d,callback:t,body:a,showTriggers:n}).then((e=>(l&&l({...e}),e))).catch((e=>e)).finally((()=>{s(!1)}))},loading:r}}},310:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(0),o=n(1042),c=n(589),i=n(1046),r=n(688),s=n(590),l=n(277),d=n(2);const h=a.forwardRef((function(e,t){return Object(d.jsx)(l.a,{direction:"up",ref:t,...e})}));function b(e){const{open:t=!1,config:n,onClose:a,preventBackdropClose:l=!1,className:b}=e,{title:u,onOk:j,okText:g="Save",content:O,onCancel:f}=n,m=function(e){l&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").equalsIgnoreCase("backdropclick")||a()};return Object(d.jsx)("div",{children:Object(d.jsxs)(c.a,{className:b,open:t,TransitionComponent:h,onClose:m,"aria-describedby":"alert-dialog-slide-description",children:["function"===typeof u?u({...n}):Object(d.jsx)(s.a,{sx:{fontWeight:550},children:u}),Object(d.jsx)(r.a,{children:"function"===typeof O?O({config:n}):O}),Object(d.jsxs)(i.a,{children:["function"===typeof f?f({config:n,onClose:a}):Object(d.jsx)(o.a,{variant:"outlined",onClick:m,children:"Cancel"}),"function"===typeof g?g({config:n,onOk:j}):Object(d.jsx)(o.a,{variant:"contained",color:g.equalsIgnoreCase("delete")?"error":"primary",onClick:j,children:g})]})]})})}},315:function(e,t,n){"use strict";var a=n(225),o=n(285),c=n(1194),i=n(1183),r=n(1195),s=n(547),l=n(335),d=n.n(l),h=n(1193),b=n(1192),u=n(1043),j=n(226),g=n(109),O=n(1154),f=n(286),m=n(1191),p=n(1165),x=n(343),C=n.n(x),w=n(1190),v=n(297),y=n.n(v),k=n(323),S=n.n(k),P=n(0),N=n.n(P),R=n(11),F=n(1145),z=n(10),L=n(299),D=n(2);const E=Object(z.a)(F.a)((e=>{let{theme:t}=e;return{"& .MuiPaginationItem-root":{[t.breakpoints.down("md")]:{height:"1.8rem",width:"1rem"}}}})),I=Object(z.a)(s.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{justifyContent:"center"},display:"flex",justifyContent:"space-between",flexWrap:"wrap","& .pageSizeSelect":{width:80}}}));var A=e=>{let{data:t=[],onPageChange:n,page:a=1,count:o=0,limit:c=1,onLimitChange:i,isLoading:r}=e;const[l,d]=Object(P.useState)(0);Object(P.useEffect)((()=>{Array.isArray(t)&&d(t.length)}),[t]);return o<=5?null:Object(D.jsxs)(I,{direction:"row",alignItems:"center",children:[Object(D.jsxs)(g.a,{sx:{color:"#525F7F"},fontSize:12,children:["Showing ",l," of ",o," entries"]}),Object(D.jsxs)(s.a,{direction:"row",alignItems:"center",children:[Object(D.jsx)(L.f,{disabled:r,name:"pageSize",label:"",value:c,options:[{id:5,label:5},{id:10,label:10},{id:20,label:20},{id:50,label:50},{id:100,label:100}],className:"pageSizeSelect",onChange:e=>{let{value:t}=e;"function"===typeof i&&i({value:t})}}),Object(D.jsx)(E,{disabled:r,count:Math.ceil(o/c),color:"primary",variant:"contained",page:a,size:"medium",onChange:(e,t)=>{+a!==+t&&"function"===typeof n&&n(e,+t)}})]})]})},W=n(318),q=n(310),M=n(110),T=n(312);const U=Object(z.a)(w.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:12,padding:"0 8px"}}})),B=Object(z.a)(C.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("xs")]:{fontSize:14}}}));function H(e){let{columns:t=[],config:n={},role:a,handleRequestSort:o,hasSort:c}=e;const{headerCellSx:i={},hasDelete:r,sortField:s,sortOrder:l,showCheckbox:d}=n,h=Object(P.useMemo)((()=>t.map(((e,t)=>{const{label:n="",id:r="",visible:d=!0,sort:h=!1}=e||{};return(y.a.isFunction(d)?d({column:e,role:a}):d)?Object(D.jsx)(U,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...i},children:c&&h?Object(D.jsx)(p.a,{onClick:e=>o(e,r),active:r===s,direction:l,sx:{...i},children:n}):n},r||t):null}))),[t,i]);return d&&h.unshift(Object(D.jsx)(U,{padding:"normal",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...i}})),Object(D.jsxs)(m.a,{children:[h,r&&Object(D.jsx)(U,{padding:"none",sx:{color:"#000",bgcolor:"#fafafa",fontWeight:800,...i}})]})}const _=e=>{let{columns:t,data:n=[],config:a={},handleRowClick:o,handleDelete:c,...i}=e;return(n||[]).map(((e,n)=>{const{dataKey:r=""}=a;return r&&(e=e[r]),(e=>{let{row:t=[],columns:n={},config:a={},handleRowClick:o,rowIndex:c,handleDelete:i,hasDeletePermission:r,checkboxKey:s,...l}=e;const{hasDelete:d=!1,rowCellPadding:h="none",onRowClick:b,rowStyleCb:u,showCheckbox:j=!1}=a,{role:g,onCheckboxChange:p,checkboxes:x}=l;let C={};u&&(C=u({row:t})||{});const w=Object(D.jsx)(U,{sx:{},padding:"none",component:"th",scope:"row",children:Object(D.jsx)(T.a,{title:"Delete",placement:"top",children:Object(D.jsx)(f.a,{onClick:i.bind(void 0,t._id,t),disabled:!r,children:Object(D.jsx)(B,{color:"error"})})})}),v=n.map(((e,n)=>{const{id:a="",renderer:o,emptyState:i="--",valueFormatter:r,visible:s=!0,cellPadding:l}=e||{};if(!(y.a.isFunction(s)?s({column:e,role:g}):s))return null;let d;return d=r&&y.a.isFunction(r)?r(t[a]):y.a.isFunction(o)?o({row:t,role:g},c)||i:y.a.get(t,a,i)||i,Object(D.jsx)(U,{padding:l||h||"normal",component:"th",scope:"row",children:d},a+n)}));if(j){if(!s)throw new Error("Checkbox key not provided");const e=x.indexOf(t[s])>-1;v.unshift(Object(D.jsx)(U,{onClick:p.bind(void 0,t),children:Object(D.jsx)(O.a,{checked:e})}))}return Object(D.jsxs)(m.a,{hover:!!b,onClick:e=>{e.preventDefault(),y.a.isFunction(o)&&o(t)},sx:b?{cursor:"pointer",...C}:{...C},children:[v,d&&w]},c)})({row:e,columns:t,config:a,handleRowClick:o,rowIndex:n,handleDelete:c,...i})}))},K=e=>{let{config:t={},data:n=[],history:l,loading:O=!1,onRefetch:m,isRefetching:p,actions:x,isPaginationLoading:C=!1,...w}=e;n=n||[];const{onCheckboxChange:v,checkboxes:k,checkboxKey:R}=w,[F,z]=Object(P.useState)({}),[L,E]=Object(P.useState)({open:!1,config:{}}),{columns:I=[],onRowClick:T,hasOnClickUrl:U=!0,onPageChange:B,page:K,count:V,limit:J,onPageSizeChange:Q,onLimitChange:G,size:X="medium",emptyMessage:Y="",onRowClickDataCallback:Z,showRefresh:$=!1,onDelete:ee,deleteMessage:te,deletePermissions:ne=[],containerHeight:ae="",sortField:oe,sortOrder:ce="asc",handleSortChange:ie,hasSort:re=!1}=t,{role:se=""}=Object(M.f)().user,le="boolean"===typeof ne?ne:ne.indexOf(se)>-1||!1,de=N.a.useRef([]),he=Array.isArray(n)&&n.length,be=Object(P.useMemo)((()=>x&&N.a.isValidElement(x)?x:Object(D.jsx)(D.Fragment,{})),[x]),ue=e=>{if(U&&T){const t=T(e);Z&&(e=Z(e)),l.push(t,e)}else T&&T(e)},je=(e,t)=>{ie&&ie({field:t,order:oe===t&&"asc"===ce?"desc":"asc"})},ge=(e,t,n)=>{n.stopPropagation();const a={title:()=>Object(D.jsxs)(j.a,{container:!0,alignItems:"center",sx:{p:"16px 24px"},gap:1,children:[Object(D.jsx)(S.a,{color:"error"}),Object(D.jsx)(g.a,{sx:{fontSize:"1.25rem",fontWeight:550},color:"error",children:"Delete"})]}),okText:"Delete",onOk:()=>ee(e,Oe,{row:t}),content:()=>Object(D.jsx)(u.a,{sx:{color:"#000"},children:y.a.isFunction(te)?te({row:t}):te||"Are you sure you want to delete the record?"})};E({...L,open:!0,config:a})};function Oe(){E({...L,open:!1})}const fe=Object(P.useMemo)((()=>he?Object(D.jsxs)(P.Fragment,{children:[Object(D.jsx)(b.a,{className:"",sx:{backgroundColor:"#fafafa",borderTop:"1px solid rgba(224, 224, 224, 1)"},children:Object(D.jsx)(H,{columns:I,config:t,role:se,handleRequestSort:je,hasSort:re})}),Object(D.jsx)(h.a,{children:Object(D.jsx)(_,{role:se,columns:I,data:n,config:t,checkboxes:k,checkboxKey:R,handleRowClick:ue,handleDelete:ge,onCheckboxChange:v,hasDeletePermission:le})})]}):Object(D.jsx)("tbody",{style:{height:300},children:Object(D.jsx)("tr",{children:Object(D.jsx)("td",{style:{textAlign:"center"},children:Object(D.jsx)("h4",{children:Y||"No records found"})})})})),[n,t,k]);return Object(P.useEffect)((()=>{var e;if(null!==de&&void 0!==de&&null!==(e=de.current)&&void 0!==e&&e.table){const e=de.current.table.offsetHeight;z({...F,height:e>200?e:void 0})}}),[]),Object(P.useEffect)((()=>{var e;(C||p)&&null!==(e=de.current)&&void 0!==e&&e.tableContainer&&de.current.tableContainer.scrollTo(0,0)}),[C,p]),Object(D.jsxs)(a.a,{className:"enhanced-table",sx:{height:he&&!O?ae||"95%":"auto"},children:[Object(D.jsxs)(s.a,{alignItems:"flex-end",justifyContent:"flex-end",direction:"row",py:1,gap:.5,children:[be,$&&Object(D.jsx)(f.a,{title:"Refresh",onClick:m,children:Object(D.jsx)(d.a,{className:p?"rotateIcon":void 0})})]}),Object(D.jsxs)(c.a,{component:o.a,className:"",ref:e=>de.current.tableContainer=e,sx:{boxShadow:"0px 0px 32px #8898AA26",mb:2,height:he&&!O?"calc(100% - 80px)":"auto",position:"relative"},children:[O?(()=>{const e=window.innerHeight-180,t=(F.height?F.height>e?e:F.height:e)||e;return Object(D.jsx)(j.a,{container:!0,alignItems:"center",justifyContent:"center",sx:{height:t},children:Object(D.jsx)(j.a,{item:!0,alignItems:"center",sx:{position:"relative"},children:Object(D.jsx)(W.a,{})})})})():Object(D.jsx)(r.a,{ref:e=>de.current.table=e,"aria-label":"caption table",size:X,stickyHeader:!0,children:fe}),Object(D.jsx)(i.a,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,position:"absolute"},open:C||p||!1,children:Object(D.jsx)(W.a,{sx:{color:"inherit"}})})]}),!O&&n.length>0&&Object(D.jsx)(A,{data:n,onPageChange:B,page:K,count:V,limit:J,onLimitChange:G||Q,isLoading:p||C}),Object(D.jsx)(q.a,{className:"enhancedTable_dialog",open:L.open,config:L.config,onClose:Oe})]})};t.a=Object(R.withRouter)(Object(P.memo)(K))},344:function(e,t,n){"use strict";var a=n(68);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(111)),c=n(2);t.default=(0,o.default)((0,c.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},364:function(e,t,n){"use strict";var a=n(0),o=n(297),c=n.n(o),i=n(51);t.a=(e,t)=>{const{order:n="asc",orderBy:o,debounceTime:r=500}=t||{},[s,l]=Object(a.useState)([]),[d,h]=Object(a.useState)(!1),[b,u]=Object(a.useState)(1),[j,g]=Object(a.useState)(100),[O,f]=Object(a.useState)(""),[m,p]=Object(a.useState)(!1),[x,C]=Object(a.useState)(!1),[w,v]=Object(a.useState)(!1),[y,k]=Object(a.useState)(o),[S,P]=Object(a.useState)(n),N=Object(a.useRef)(!0);Object(a.useEffect)((()=>{R()}),[e,b,j,y,S]),Object(a.useEffect)((()=>{h(!0)}),[]),Object(a.useEffect)((()=>{const e=c.a.debounce((()=>{N.current||(C(!0),R())}),r);return e(),e.cancel}),[O,r]);const R=Object(a.useCallback)((async()=>{Object(i.b)({uri:"".concat(e,"?page=").concat(b,"&search=").concat(O,"&limit=").concat(j,"&sortField=").concat(y,"&sortOrder=").concat(S)}).then((e=>{const{data:t}=e;l(t)})).catch((e=>{console.error(e.message)})).finally((()=>{h(!1),p(!1),C(!1),v(!1),N.current&&(N.current=!1)}))}),[e,b,j,O,y,S]),F=Object(a.useCallback)(((e,t)=>{p(!0),u(t)}),[]),z=Object(a.useCallback)((e=>{let{value:t}=e;f(t),u(1)}),[]),L=Object(a.useCallback)((e=>{let{value:t}=e;p(!0),u(1),g(t)}),[]),D=Object(a.useCallback)((e=>{let{field:t,order:n}=e;k(t),P(n),p(!0),u(1)}),[]);return{data:s,loading:d,page:b,limit:j,onPageChange:F,handleSearch:z,refetch:()=>{u(1),v(!0),R()},onLimitChange:L,searchQuery:O,isPaginationLoading:m,isSearching:x,isRefetching:w,sortField:y,sortOrder:S,handleSortChange:D}}},508:function(e,t,n){"use strict";var a=n(0),o=n(51),c=n(110);t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{showPagination:i=!0,page:r,limit:s,lazyFetchCondition:l}=t,[d,h]=Object(a.useState)(void 0),[b,u]=Object(a.useState)({page:r||1,limit:s||10}),[j,g]=Object(a.useState)(!1),[O,f]=Object(a.useState)(!1),[m,p]=Object(a.useState)(!1);function x(a){const{page:r,limit:s}=a||{};let l=e;i&&(r&&s&&u({page:r,limit:s}),l="".concat(l,"?page=").concat(r||b.page,"&limit=").concat(s||b.limit)),t.queryParams&&(l="".concat(l,"&").concat(Object(c.j)(t.queryParams))),Object(o.b)({uri:l,callback:n,showTriggers:!1}).then((e=>{e.data&&h(e.data)})).finally((()=>{g(!1),f(!1),p(!1)}))}const C=()=>{g(!0),x()};return Object(a.useEffect)((()=>{("function"===typeof l?l():l)&&C()}),[]),{lazyFetch:C,data:d,loading:j,refetch:function(){f(!0),x({page:r,limit:b.limit})},isRefetching:O,onLimitChange:e=>{let{value:t}=e;p(!0),x({limit:t,page:b.page})},onPageChange:(e,t)=>{p(!0),x({page:t,limit:b.limit})},isPaginationLoading:m,...b}}}}]);
//# sourceMappingURL=27.62a94151.chunk.js.map